function cC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in n)){const c=Object.getOwnPropertyDescriptor(r,a);c&&Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cm={exports:{}},wf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function uC(){if(Vy)return wf;Vy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,c){var h=null;if(c!==void 0&&(h=""+c),a.key!==void 0&&(h=""+a.key),"key"in a){c={};for(var x in a)x!=="key"&&(c[x]=a[x])}else c=a;return a=c.ref,{$$typeof:n,type:r,key:h,ref:a!==void 0?a:null,props:c}}return wf.Fragment=e,wf.jsx=t,wf.jsxs=t,wf}var Hy;function fC(){return Hy||(Hy=1,cm.exports=uC()),cm.exports}var z=fC(),um={exports:{}},Zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function hC(){if(jy)return Zt;jy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),b=Symbol.iterator;function O(he){return he===null||typeof he!="object"?null:(he=b&&he[b]||he["@@iterator"],typeof he=="function"?he:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,V={};function le(he,q,ue){this.props=he,this.context=q,this.refs=V,this.updater=ue||U}le.prototype.isReactComponent={},le.prototype.setState=function(he,q){if(typeof he!="object"&&typeof he!="function"&&he!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,he,q,"setState")},le.prototype.forceUpdate=function(he){this.updater.enqueueForceUpdate(this,he,"forceUpdate")};function ce(){}ce.prototype=le.prototype;function ie(he,q,ue){this.props=he,this.context=q,this.refs=V,this.updater=ue||U}var me=ie.prototype=new ce;me.constructor=ie,M(me,le.prototype),me.isPureReactComponent=!0;var Ue=Array.isArray;function De(){}var k={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function P(he,q,ue){var se=ue.ref;return{$$typeof:n,type:he,key:q,ref:se!==void 0?se:null,props:ue}}function te(he,q){return P(he.type,q,he.props)}function K(he){return typeof he=="object"&&he!==null&&he.$$typeof===n}function J(he){var q={"=":"=0",":":"=2"};return"$"+he.replace(/[=:]/g,function(ue){return q[ue]})}var Y=/\/+/g;function dt(he,q){return typeof he=="object"&&he!==null&&he.key!=null?J(""+he.key):q.toString(36)}function ye(he){switch(he.status){case"fulfilled":return he.value;case"rejected":throw he.reason;default:switch(typeof he.status=="string"?he.then(De,De):(he.status="pending",he.then(function(q){he.status==="pending"&&(he.status="fulfilled",he.value=q)},function(q){he.status==="pending"&&(he.status="rejected",he.reason=q)})),he.status){case"fulfilled":return he.value;case"rejected":throw he.reason}}throw he}function Se(he,q,ue,se,fe){var pe=typeof he;(pe==="undefined"||pe==="boolean")&&(he=null);var Je=!1;if(he===null)Je=!0;else switch(pe){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(he.$$typeof){case n:case e:Je=!0;break;case T:return Je=he._init,Se(Je(he._payload),q,ue,se,fe)}}if(Je)return fe=fe(he),Je=se===""?"."+dt(he,0):se,Ue(fe)?(ue="",Je!=null&&(ue=Je.replace(Y,"$&/")+"/"),Se(fe,q,ue,"",function(lt){return lt})):fe!=null&&(K(fe)&&(fe=te(fe,ue+(fe.key==null||he&&he.key===fe.key?"":(""+fe.key).replace(Y,"$&/")+"/")+Je)),q.push(fe)),1;Je=0;var rt=se===""?".":se+":";if(Ue(he))for(var at=0;at<he.length;at++)se=he[at],pe=rt+dt(se,at),Je+=Se(se,q,ue,pe,fe);else if(at=O(he),typeof at=="function")for(he=at.call(he),at=0;!(se=he.next()).done;)se=se.value,pe=rt+dt(se,at++),Je+=Se(se,q,ue,pe,fe);else if(pe==="object"){if(typeof he.then=="function")return Se(ye(he),q,ue,se,fe);throw q=String(he),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Je}function Pe(he,q,ue){if(he==null)return he;var se=[],fe=0;return Se(he,se,"","",function(pe){return q.call(ue,pe,fe++)}),se}function gt(he){if(he._status===-1){var q=he._result;q=q(),q.then(function(ue){(he._status===0||he._status===-1)&&(he._status=1,he._result=ue)},function(ue){(he._status===0||he._status===-1)&&(he._status=2,he._result=ue)}),he._status===-1&&(he._status=0,he._result=q)}if(he._status===1)return he._result.default;throw he._result}var yt=typeof reportError=="function"?reportError:function(he){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof he=="object"&&he!==null&&typeof he.message=="string"?String(he.message):String(he),error:he});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",he);return}console.error(he)},Ke={map:Pe,forEach:function(he,q,ue){Pe(he,function(){q.apply(this,arguments)},ue)},count:function(he){var q=0;return Pe(he,function(){q++}),q},toArray:function(he){return Pe(he,function(q){return q})||[]},only:function(he){if(!K(he))throw Error("React.Children.only expected to receive a single React element child.");return he}};return Zt.Activity=C,Zt.Children=Ke,Zt.Component=le,Zt.Fragment=t,Zt.Profiler=a,Zt.PureComponent=ie,Zt.StrictMode=r,Zt.Suspense=v,Zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Zt.__COMPILER_RUNTIME={__proto__:null,c:function(he){return k.H.useMemoCache(he)}},Zt.cache=function(he){return function(){return he.apply(null,arguments)}},Zt.cacheSignal=function(){return null},Zt.cloneElement=function(he,q,ue){if(he==null)throw Error("The argument must be a React element, but you passed "+he+".");var se=M({},he.props),fe=he.key;if(q!=null)for(pe in q.key!==void 0&&(fe=""+q.key),q)!H.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(se[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)se.children=ue;else if(1<pe){for(var Je=Array(pe),rt=0;rt<pe;rt++)Je[rt]=arguments[rt+2];se.children=Je}return P(he.type,fe,se)},Zt.createContext=function(he){return he={$$typeof:h,_currentValue:he,_currentValue2:he,_threadCount:0,Provider:null,Consumer:null},he.Provider=he,he.Consumer={$$typeof:c,_context:he},he},Zt.createElement=function(he,q,ue){var se,fe={},pe=null;if(q!=null)for(se in q.key!==void 0&&(pe=""+q.key),q)H.call(q,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=q[se]);var Je=arguments.length-2;if(Je===1)fe.children=ue;else if(1<Je){for(var rt=Array(Je),at=0;at<Je;at++)rt[at]=arguments[at+2];fe.children=rt}if(he&&he.defaultProps)for(se in Je=he.defaultProps,Je)fe[se]===void 0&&(fe[se]=Je[se]);return P(he,pe,fe)},Zt.createRef=function(){return{current:null}},Zt.forwardRef=function(he){return{$$typeof:x,render:he}},Zt.isValidElement=K,Zt.lazy=function(he){return{$$typeof:T,_payload:{_status:-1,_result:he},_init:gt}},Zt.memo=function(he,q){return{$$typeof:_,type:he,compare:q===void 0?null:q}},Zt.startTransition=function(he){var q=k.T,ue={};k.T=ue;try{var se=he(),fe=k.S;fe!==null&&fe(ue,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(De,yt)}catch(pe){yt(pe)}finally{q!==null&&ue.types!==null&&(q.types=ue.types),k.T=q}},Zt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Zt.use=function(he){return k.H.use(he)},Zt.useActionState=function(he,q,ue){return k.H.useActionState(he,q,ue)},Zt.useCallback=function(he,q){return k.H.useCallback(he,q)},Zt.useContext=function(he){return k.H.useContext(he)},Zt.useDebugValue=function(){},Zt.useDeferredValue=function(he,q){return k.H.useDeferredValue(he,q)},Zt.useEffect=function(he,q){return k.H.useEffect(he,q)},Zt.useEffectEvent=function(he){return k.H.useEffectEvent(he)},Zt.useId=function(){return k.H.useId()},Zt.useImperativeHandle=function(he,q,ue){return k.H.useImperativeHandle(he,q,ue)},Zt.useInsertionEffect=function(he,q){return k.H.useInsertionEffect(he,q)},Zt.useLayoutEffect=function(he,q){return k.H.useLayoutEffect(he,q)},Zt.useMemo=function(he,q){return k.H.useMemo(he,q)},Zt.useOptimistic=function(he,q){return k.H.useOptimistic(he,q)},Zt.useReducer=function(he,q,ue){return k.H.useReducer(he,q,ue)},Zt.useRef=function(he){return k.H.useRef(he)},Zt.useState=function(he){return k.H.useState(he)},Zt.useSyncExternalStore=function(he,q,ue){return k.H.useSyncExternalStore(he,q,ue)},Zt.useTransition=function(){return k.H.useTransition()},Zt.version="19.2.0",Zt}var zy;function pp(){return zy||(zy=1,um.exports=hC()),um.exports}var mt=pp();const bw=mp(mt);var fm={exports:{}},Af={},hm={exports:{}},dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function dC(){return Gy||(Gy=1,(function(n){function e(Se,Pe){var gt=Se.length;Se.push(Pe);e:for(;0<gt;){var yt=gt-1>>>1,Ke=Se[yt];if(0<a(Ke,Pe))Se[yt]=Pe,Se[gt]=Ke,gt=yt;else break e}}function t(Se){return Se.length===0?null:Se[0]}function r(Se){if(Se.length===0)return null;var Pe=Se[0],gt=Se.pop();if(gt!==Pe){Se[0]=gt;e:for(var yt=0,Ke=Se.length,he=Ke>>>1;yt<he;){var q=2*(yt+1)-1,ue=Se[q],se=q+1,fe=Se[se];if(0>a(ue,gt))se<Ke&&0>a(fe,ue)?(Se[yt]=fe,Se[se]=gt,yt=se):(Se[yt]=ue,Se[q]=gt,yt=q);else if(se<Ke&&0>a(fe,gt))Se[yt]=fe,Se[se]=gt,yt=se;else break e}}return Pe}function a(Se,Pe){var gt=Se.sortIndex-Pe.sortIndex;return gt!==0?gt:Se.id-Pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,x=h.now();n.unstable_now=function(){return h.now()-x}}var v=[],_=[],T=1,C=null,b=3,O=!1,U=!1,M=!1,V=!1,le=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function me(Se){for(var Pe=t(_);Pe!==null;){if(Pe.callback===null)r(_);else if(Pe.startTime<=Se)r(_),Pe.sortIndex=Pe.expirationTime,e(v,Pe);else break;Pe=t(_)}}function Ue(Se){if(M=!1,me(Se),!U)if(t(v)!==null)U=!0,De||(De=!0,J());else{var Pe=t(_);Pe!==null&&ye(Ue,Pe.startTime-Se)}}var De=!1,k=-1,H=5,P=-1;function te(){return V?!0:!(n.unstable_now()-P<H)}function K(){if(V=!1,De){var Se=n.unstable_now();P=Se;var Pe=!0;try{e:{U=!1,M&&(M=!1,ce(k),k=-1),O=!0;var gt=b;try{t:{for(me(Se),C=t(v);C!==null&&!(C.expirationTime>Se&&te());){var yt=C.callback;if(typeof yt=="function"){C.callback=null,b=C.priorityLevel;var Ke=yt(C.expirationTime<=Se);if(Se=n.unstable_now(),typeof Ke=="function"){C.callback=Ke,me(Se),Pe=!0;break t}C===t(v)&&r(v),me(Se)}else r(v);C=t(v)}if(C!==null)Pe=!0;else{var he=t(_);he!==null&&ye(Ue,he.startTime-Se),Pe=!1}}break e}finally{C=null,b=gt,O=!1}Pe=void 0}}finally{Pe?J():De=!1}}}var J;if(typeof ie=="function")J=function(){ie(K)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,dt=Y.port2;Y.port1.onmessage=K,J=function(){dt.postMessage(null)}}else J=function(){le(K,0)};function ye(Se,Pe){k=le(function(){Se(n.unstable_now())},Pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Se){Se.callback=null},n.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<Se?Math.floor(1e3/Se):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Se){switch(b){case 1:case 2:case 3:var Pe=3;break;default:Pe=b}var gt=b;b=Pe;try{return Se()}finally{b=gt}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Se,Pe){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var gt=b;b=Se;try{return Pe()}finally{b=gt}},n.unstable_scheduleCallback=function(Se,Pe,gt){var yt=n.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?yt+gt:yt):gt=yt,Se){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=gt+Ke,Se={id:T++,callback:Pe,priorityLevel:Se,startTime:gt,expirationTime:Ke,sortIndex:-1},gt>yt?(Se.sortIndex=gt,e(_,Se),t(v)===null&&Se===t(_)&&(M?(ce(k),k=-1):M=!0,ye(Ue,gt-yt))):(Se.sortIndex=Ke,e(v,Se),U||O||(U=!0,De||(De=!0,J()))),Se},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(Se){var Pe=b;return function(){var gt=b;b=Pe;try{return Se.apply(this,arguments)}finally{b=gt}}}})(dm)),dm}var Wy;function gC(){return Wy||(Wy=1,hm.exports=dC()),hm.exports}var gm={exports:{}},Ni={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function mC(){if(Xy)return Ni;Xy=1;var n=pp();function e(v){var _="https://react.dev/errors/"+v;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)_+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+v+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(v,_,T){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:C==null?null:""+C,children:v,containerInfo:_,implementation:T}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(v,_){if(v==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ni.createPortal=function(v,_){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return c(v,_,null,T)},Ni.flushSync=function(v){var _=h.T,T=r.p;try{if(h.T=null,r.p=2,v)return v()}finally{h.T=_,r.p=T,r.d.f()}},Ni.preconnect=function(v,_){typeof v=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(v,_))},Ni.prefetchDNS=function(v){typeof v=="string"&&r.d.D(v)},Ni.preinit=function(v,_){if(typeof v=="string"&&_&&typeof _.as=="string"){var T=_.as,C=x(T,_.crossOrigin),b=typeof _.integrity=="string"?_.integrity:void 0,O=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;T==="style"?r.d.S(v,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:C,integrity:b,fetchPriority:O}):T==="script"&&r.d.X(v,{crossOrigin:C,integrity:b,fetchPriority:O,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ni.preinitModule=function(v,_){if(typeof v=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var T=x(_.as,_.crossOrigin);r.d.M(v,{crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(v)},Ni.preload=function(v,_){if(typeof v=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var T=_.as,C=x(T,_.crossOrigin);r.d.L(v,T,{crossOrigin:C,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ni.preloadModule=function(v,_){if(typeof v=="string")if(_){var T=x(_.as,_.crossOrigin);r.d.m(v,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:T,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(v)},Ni.requestFormReset=function(v){r.d.r(v)},Ni.unstable_batchedUpdates=function(v,_){return v(_)},Ni.useFormState=function(v,_,T){return h.H.useFormState(v,_,T)},Ni.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ni.version="19.2.0",Ni}var qy;function pC(){if(qy)return gm.exports;qy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gm.exports=mC(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function xC(){if(Yy)return Af;Yy=1;var n=gC(),e=pp(),t=pC();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)o+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var o=i,f=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(f=o.return),i=o.return;while(i)}return o.tag===3?f:null}function h(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function x(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function v(i){if(c(i)!==i)throw Error(r(188))}function _(i){var o=i.alternate;if(!o){if(o=c(i),o===null)throw Error(r(188));return o!==i?null:i}for(var f=i,m=o;;){var w=f.return;if(w===null)break;var S=w.alternate;if(S===null){if(m=w.return,m!==null){f=m;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===f)return v(w),i;if(S===m)return v(w),o;S=S.sibling}throw Error(r(188))}if(f.return!==m.return)f=w,m=S;else{for(var D=!1,W=w.child;W;){if(W===f){D=!0,f=w,m=S;break}if(W===m){D=!0,m=w,f=S;break}W=W.sibling}if(!D){for(W=S.child;W;){if(W===f){D=!0,f=S,m=w;break}if(W===m){D=!0,m=S,f=w;break}W=W.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:o}function T(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=T(i),o!==null)return o;i=i.sibling}return null}var C=Object.assign,b=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=K&&i[K]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Symbol.for("react.client.reference");function dt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Y?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case le:return"Profiler";case V:return"StrictMode";case Ue:return"Suspense";case De:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case ie:return i.displayName||"Context";case ce:return(i._context.displayName||"Context")+".Consumer";case me:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return o=i.displayName||null,o!==null?o:dt(i.type)||"Memo";case H:o=i._payload,i=i._init;try{return dt(i(o))}catch{}}return null}var ye=Array.isArray,Se=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gt={pending:!1,data:null,method:null,action:null},yt=[],Ke=-1;function he(i){return{current:i}}function q(i){0>Ke||(i.current=yt[Ke],yt[Ke]=null,Ke--)}function ue(i,o){Ke++,yt[Ke]=i.current,i.current=o}var se=he(null),fe=he(null),pe=he(null),Je=he(null);function rt(i,o){switch(ue(pe,o),ue(fe,i),ue(se,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?cy(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=cy(o),i=uy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(se),ue(se,i)}function at(){q(se),q(fe),q(pe)}function lt(i){i.memoizedState!==null&&ue(Je,i);var o=se.current,f=uy(o,i.type);o!==f&&(ue(fe,i),ue(se,f))}function Mt(i){fe.current===i&&(q(se),q(fe)),Je.current===i&&(q(Je),_f._currentValue=gt)}var Ut,Rt;function _t(i){if(Ut===void 0)try{throw Error()}catch(f){var o=f.stack.trim().match(/\n( *(at )?)/);Ut=o&&o[1]||"",Rt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+i+Rt}var Hn=!1;function cn(i,o){if(!i||Hn)return"";Hn=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var We=function(){throw Error()};if(Object.defineProperty(We.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(We,[])}catch(Be){var Me=Be}Reflect.construct(i,[],We)}else{try{We.call()}catch(Be){Me=Be}i.call(We.prototype)}}else{try{throw Error()}catch(Be){Me=Be}(We=i())&&typeof We.catch=="function"&&We.catch(function(){})}}catch(Be){if(Be&&Me&&typeof Be.stack=="string")return[Be.stack,Me.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),D=S[0],W=S[1];if(D&&W){var de=D.split(`
`),Ne=W.split(`
`);for(w=m=0;m<de.length&&!de[m].includes("DetermineComponentFrameRoot");)m++;for(;w<Ne.length&&!Ne[w].includes("DetermineComponentFrameRoot");)w++;if(m===de.length||w===Ne.length)for(m=de.length-1,w=Ne.length-1;1<=m&&0<=w&&de[m]!==Ne[w];)w--;for(;1<=m&&0<=w;m--,w--)if(de[m]!==Ne[w]){if(m!==1||w!==1)do if(m--,w--,0>w||de[m]!==Ne[w]){var ze=`
`+de[m].replace(" at new "," at ");return i.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",i.displayName)),ze}while(1<=m&&0<=w);break}}}finally{Hn=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?_t(f):""}function ut(i,o){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return i.child!==o&&o!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return cn(i.type,!1);case 11:return cn(i.type.render,!1);case 1:return cn(i.type,!0);case 31:return _t("Activity");default:return""}}function zt(i){try{var o="",f=null;do o+=ut(i,f),f=i,i=i.return;while(i);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var pt=Object.prototype.hasOwnProperty,Sn=n.unstable_scheduleCallback,ve=n.unstable_cancelCallback,on=n.unstable_shouldYield,Lt=n.unstable_requestPaint,At=n.unstable_now,Gt=n.unstable_getCurrentPriorityLevel,bt=n.unstable_ImmediatePriority,rr=n.unstable_UserBlockingPriority,ln=n.unstable_NormalPriority,jn=n.unstable_LowPriority,xa=n.unstable_IdlePriority,Ds=n.log,Va=n.unstable_setDisableYieldValue,vn=null,nt=null;function wn(i){if(typeof Ds=="function"&&Va(i),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(vn,i)}catch{}}var Pt=Math.clz32?Math.clz32:ea,zn=Math.log,Fi=Math.LN2;function ea(i){return i>>>=0,i===0?32:31-(zn(i)/Fi|0)|0}var Ai=256,tn=262144,Pn=4194304;function Jr(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Bi(i,o,f){var m=i.pendingLanes;if(m===0)return 0;var w=0,S=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var W=m&134217727;return W!==0?(m=W&~S,m!==0?w=Jr(m):(D&=W,D!==0?w=Jr(D):f||(f=W&~i,f!==0&&(w=Jr(f))))):(W=m&~S,W!==0?w=Jr(W):D!==0?w=Jr(D):f||(f=m&~i,f!==0&&(w=Jr(f)))),w===0?0:o!==0&&o!==w&&(o&S)===0&&(S=w&-w,f=o&-o,S>=f||S===32&&(f&4194048)!==0)?o:w}function sr(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ha(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(){var i=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),i}function Xr(i){for(var o=[],f=0;31>f;f++)o.push(i);return o}function Yi(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ti(i,o,f,m,w,S){var D=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var W=i.entanglements,de=i.expirationTimes,Ne=i.hiddenUpdates;for(f=D&~f;0<f;){var ze=31-Pt(f),We=1<<ze;W[ze]=0,de[ze]=-1;var Me=Ne[ze];if(Me!==null)for(Ne[ze]=null,ze=0;ze<Me.length;ze++){var Be=Me[ze];Be!==null&&(Be.lane&=-536870913)}f&=~We}m!==0&&ta(i,m,0),S!==0&&w===0&&i.tag!==0&&(i.suspendedLanes|=S&~(D&~o))}function ta(i,o,f){i.pendingLanes|=o,i.suspendedLanes&=~o;var m=31-Pt(o);i.entangledLanes|=o,i.entanglements[m]=i.entanglements[m]|1073741824|f&261930}function ai(i,o){var f=i.entangledLanes|=o;for(i=i.entanglements;f;){var m=31-Pt(f),w=1<<m;w&o|i[m]&o&&(i[m]|=o),f&=~w}}function na(i,o){var f=o&-o;return f=(f&42)!==0?1:fr(f),(f&(i.suspendedLanes|o))!==0?0:f}function fr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function j(){var i=Pe.p;return i!==0?i:(i=window.event,i===void 0?32:My(i.type))}function X(i,o){var f=Pe.p;try{return Pe.p=i,o()}finally{Pe.p=f}}var Q=Math.random().toString(36).slice(2),ee="__reactFiber$"+Q,ne="__reactProps$"+Q,oe="__reactContainer$"+Q,Ie="__reactEvents$"+Q,He="__reactListeners$"+Q,Te="__reactHandles$"+Q,Oe="__reactResources$"+Q,Re="__reactMarker$"+Q;function qe(i){delete i[ee],delete i[ne],delete i[Ie],delete i[He],delete i[Te]}function $e(i){var o=i[ee];if(o)return o;for(var f=i.parentNode;f;){if(o=f[oe]||f[ee]){if(f=o.alternate,o.child!==null||f!==null&&f.child!==null)for(i=xy(i);i!==null;){if(f=i[ee])return f;i=xy(i)}return o}i=f,f=i.parentNode}return null}function et(i){if(i=i[ee]||i[oe]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function tt(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function ct(i){var o=i[Oe];return o||(o=i[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Et(i){i[Re]=!0}var Ve=new Set,Mn={};function Vt(i,o){_r(i,o),_r(i+"Capture",o)}function _r(i,o){for(Mn[i]=o,i=0;i<o.length;i++)Ve.add(o[i])}var fs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$t={},Xt={};function Kt(i){return pt.call(Xt,i)?!0:pt.call($t,i)?!1:fs.test(i)?Xt[i]=!0:($t[i]=!0,!1)}function Lr(i,o,f){if(Kt(o))if(f===null)i.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+f)}}function oi(i,o,f){if(f===null)i.removeAttribute(o);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+f)}}function hr(i,o,f,m){if(m===null)i.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(o,f,""+m)}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function li(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Bl(i,o,f){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var w=m.get,S=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return w.call(this)},set:function(D){f=""+D,S.call(this,D)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ft(i){if(!i._valueTracker){var o=li(i)?"checked":"value";i._valueTracker=Bl(i,o,""+i[o])}}function Si(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var f=o.getValue(),m="";return i&&(m=li(i)?i.checked?"true":"false":i.value),i=m,i!==f?(o.setValue(i),!0):!1}function Ms(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ki=/[\n"\\]/g;function nn(i){return i.replace(Ki,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function yr(i,o,f,m,w,S,D,W){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),o!=null?D==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+un(o)):i.value!==""+un(o)&&(i.value=""+un(o)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),o!=null?re(i,D,un(o)):f!=null?re(i,D,un(f)):m!=null&&i.removeAttribute("value"),w==null&&S!=null&&(i.defaultChecked=!!S),w!=null&&(i.checked=w&&typeof w!="function"&&typeof w!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?i.name=""+un(W):i.removeAttribute("name")}function Ce(i,o,f,m,w,S,D,W){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),o!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||o!=null)){Ft(i);return}f=f!=null?""+un(f):"",o=o!=null?""+un(o):f,W||o===i.value||(i.value=o),i.defaultValue=o}m=m??w,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=W?i.checked:!!m,i.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D),Ft(i)}function re(i,o,f){o==="number"&&Ms(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function Tt(i,o,f,m){if(i=i.options,o){o={};for(var w=0;w<f.length;w++)o["$"+f[w]]=!0;for(f=0;f<i.length;f++)w=o.hasOwnProperty("$"+i[f].value),i[f].selected!==w&&(i[f].selected=w),w&&m&&(i[f].defaultSelected=!0)}else{for(f=""+un(f),o=null,w=0;w<i.length;w++){if(i[w].value===f){i[w].selected=!0,m&&(i[w].defaultSelected=!0);return}o!==null||i[w].disabled||(o=i[w])}o!==null&&(o.selected=!0)}}function Er(i,o,f){if(o!=null&&(o=""+un(o),o!==i.value&&(i.value=o),f==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=f!=null?""+un(f):""}function Rr(i,o,f,m){if(o==null){if(m!=null){if(f!=null)throw Error(r(92));if(ye(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),o=f}f=un(o),i.defaultValue=f,m=i.textContent,m===f&&m!==""&&m!==null&&(i.value=m),Ft(i)}function Ci(i,o){if(o){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=o;return}}i.textContent=o}var Mo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $r(i,o,f){var m=o.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":m?i.setProperty(o,f):typeof f!="number"||f===0||Mo.has(o)?o==="float"?i.cssFloat=f:i[o]=(""+f).trim():i[o]=f+"px"}function It(i,o,f){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var w in o)m=o[w],o.hasOwnProperty(w)&&f[w]!==m&&$r(i,w,m)}else for(var S in o)o.hasOwnProperty(S)&&$r(i,S,o[S])}function Fn(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_a=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ya(i){return _a.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ii(){}var ja=null;function Qi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var er=null,bi=null;function Ri(i){var o=et(i);if(o&&(i=o.stateNode)){var f=i[ne]||null;e:switch(i=o.stateNode,o.type){case"input":if(yr(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),o=f.name,f.type==="radio"&&o!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+nn(""+o)+'"][type="radio"]'),o=0;o<f.length;o++){var m=f[o];if(m!==i&&m.form===i.form){var w=m[ne]||null;if(!w)throw Error(r(90));yr(m,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(o=0;o<f.length;o++)m=f[o],m.form===i.form&&Si(m)}break e;case"textarea":Er(i,f.value,f.defaultValue);break e;case"select":o=f.value,o!=null&&Tt(i,!!f.multiple,o,!1)}}}var Nt=!1;function Ea(i,o,f){if(Nt)return i(o,f);Nt=!0;try{var m=i(o);return m}finally{if(Nt=!1,(er!==null||bi!==null)&&(ch(),er&&(o=er,i=bi,bi=er=null,Ri(o),i)))for(o=0;o<i.length;o++)Ri(i[o])}}function kt(i,o){var f=i.stateNode;if(f===null)return null;var m=f[ne]||null;if(m===null)return null;f=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,o,typeof f));return f}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=!1;if(Bn)try{var Rn={};Object.defineProperty(Rn,"passive",{get:function(){za=!0}}),window.addEventListener("test",Rn,Rn),window.removeEventListener("test",Rn,Rn)}catch{za=!1}var hs=null,ds=null,Ga=null;function ra(){if(Ga)return Ga;var i,o=ds,f=o.length,m,w="value"in hs?hs.value:hs.textContent,S=w.length;for(i=0;i<f&&o[i]===w[i];i++);var D=f-i;for(m=1;m<=D&&o[f-m]===w[S-m];m++);return Ga=w.slice(i,1<m?1-m:void 0)}function gs(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ui(){return!0}function Zi(){return!1}function vr(i){function o(f,m,w,S,D){this._reactName=f,this._targetInst=w,this.type=m,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var W in i)i.hasOwnProperty(W)&&(f=i[W],this[W]=f?f(S):S[W]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ui:Zi,this.isPropagationStopped=Zi,this}return C(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ui)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ui)},persist:function(){},isPersistent:Ui}),o}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ar=vr(Vi),ia=C({},Vi,{view:0,detail:0}),Lo=vr(ia),sa,ko,Ls,Po=C({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ps,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ls&&(Ls&&i.type==="mousemove"?(sa=i.screenX-Ls.screenX,ko=i.screenY-Ls.screenY):ko=sa=0,Ls=i),sa)},movementY:function(i){return"movementY"in i?i.movementY:ko}}),Cn=vr(Po),va=C({},Po,{dataTransfer:0}),Wa=vr(va),ms=C({},ia,{relatedTarget:0}),Xa=vr(ms),Le=C({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qt=vr(Le),dr=C({},Vi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),qa=vr(dr),Vl=C({},Vi,{data:0}),ks=vr(Vl),Sc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gr(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Fo[i])?!!o[i]:!1}function Ps(){return gr}var fn=C({},ia,{key:function(i){if(i.key){var o=Sc[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=gs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Cc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ps,charCode:function(i){return i.type==="keypress"?gs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?gs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ya=vr(fn),Fs=C({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hn=vr(Fs),y=C({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ps}),R=vr(y),L=C({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=vr(L),we=C({},Po,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=vr(we),ot=C({},Vi,{newState:0,oldState:0}),Wt=vr(ot),mr=[9,13,27,32],An=Bn&&"CompositionEvent"in window,tr=null;Bn&&"documentMode"in document&&(tr=document.documentMode);var Hi=Bn&&"TextEvent"in window&&!tr,Bs=Bn&&(!An||tr&&8<tr&&11>=tr),ei=" ",ji=!1;function Ka(i,o){switch(i){case"keyup":return mr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Us(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Bo=!1;function wa(i,o){switch(i){case"compositionend":return Us(o);case"keypress":return o.which!==32?null:(ji=!0,ei);case"textInput":return i=o.data,i===ei&&ji?null:i;default:return null}}function Ic(i,o){if(Bo)return i==="compositionend"||!An&&Ka(i,o)?(i=ra(),Ga=ds=hs=null,Bo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Bs&&o.locale!=="ko"?null:o.data;default:return null}}var Ji={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hu(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Ji[i.type]:o==="textarea"}function ps(i,o,f,m){er?bi?bi.push(m):bi=[m]:er=m,o=ph(o,"onChange"),0<o.length&&(f=new ar("onChange","change",null,f,m),i.push({event:f,listeners:o}))}var Hl=null,Qa=null;function wd(i){ry(i,0)}function jl(i){var o=tt(i);if(Si(o))return i}function xs(i,o){if(i==="change")return o}var I0=!1;if(Bn){var zl;if(Bn){var Za="oninput"in document;if(!Za){var mn=document.createElement("div");mn.setAttribute("oninput","return;"),Za=typeof mn.oninput=="function"}zl=Za}else zl=!1;I0=zl&&(!document.documentMode||9<document.documentMode)}function Gl(){Hl&&(Hl.detachEvent("onpropertychange",F),Qa=Hl=null)}function F(i){if(i.propertyName==="value"&&jl(Qa)){var o=[];ps(o,Qa,i,Qi(i)),Ea(wd,o)}}function s(i,o,f){i==="focusin"?(Gl(),Hl=o,Qa=f,Hl.attachEvent("onpropertychange",F)):i==="focusout"&&Gl()}function l(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jl(Qa)}function u(i,o){if(i==="click")return jl(o)}function d(i,o){if(i==="input"||i==="change")return jl(o)}function g(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var p=typeof Object.is=="function"?Object.is:g;function E(i,o){if(p(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var f=Object.keys(i),m=Object.keys(o);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var w=f[m];if(!pt.call(o,w)||!p(i[w],o[w]))return!1}return!0}function A(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function I(i,o){var f=A(i);i=0;for(var m;f;){if(f.nodeType===3){if(m=i+f.textContent.length,i<=o&&m>=o)return{node:f,offset:o-i};i=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=A(f)}}function N(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?N(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function B(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ms(i.document);o instanceof i.HTMLIFrameElement;){try{var f=typeof o.contentWindow.location.href=="string"}catch{f=!1}if(f)i=o.contentWindow;else break;o=Ms(i.document)}return o}function G(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var ae=Bn&&"documentMode"in document&&11>=document.documentMode,ge=null,xe=null,Ae=null,ke=!1;function st(i,o,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ke||ge==null||ge!==Ms(m)||(m=ge,"selectionStart"in m&&G(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ae&&E(Ae,m)||(Ae=m,m=ph(xe,"onSelect"),0<m.length&&(o=new ar("onSelect","select",null,o,f),i.push({event:o,listeners:m}),o.target=ge)))}function it(i,o){var f={};return f[i.toLowerCase()]=o.toLowerCase(),f["Webkit"+i]="webkit"+o,f["Moz"+i]="moz"+o,f}var Ze={animationend:it("Animation","AnimationEnd"),animationiteration:it("Animation","AnimationIteration"),animationstart:it("Animation","AnimationStart"),transitionrun:it("Transition","TransitionRun"),transitionstart:it("Transition","TransitionStart"),transitioncancel:it("Transition","TransitionCancel"),transitionend:it("Transition","TransitionEnd")},sn={},qt={};Bn&&(qt=document.createElement("div").style,"AnimationEvent"in window||(delete Ze.animationend.animation,delete Ze.animationiteration.animation,delete Ze.animationstart.animation),"TransitionEvent"in window||delete Ze.transitionend.transition);function Ar(i){if(sn[i])return sn[i];if(!Ze[i])return i;var o=Ze[i],f;for(f in o)if(o.hasOwnProperty(f)&&f in qt)return sn[i]=o[f];return i}var $i=Ar("animationend"),ci=Ar("animationiteration"),Un=Ar("animationstart"),Yr=Ar("transitionrun"),zi=Ar("transitionstart"),Uo=Ar("transitioncancel"),Ja=Ar("transitionend"),b0=new Map,ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ju.push("scrollEnd");function aa(i,o){b0.set(i,o),Vt(o,[i])}var R0=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vs=[],bc=0,Ad=0;function N0(){for(var i=bc,o=Ad=bc=0;o<i;){var f=Vs[o];Vs[o++]=null;var m=Vs[o];Vs[o++]=null;var w=Vs[o];Vs[o++]=null;var S=Vs[o];if(Vs[o++]=null,m!==null&&w!==null){var D=m.pending;D===null?w.next=w:(w.next=D.next,D.next=w),m.pending=w}S!==0&&B2(f,w,S)}}function O0(i,o,f,m){Vs[bc++]=i,Vs[bc++]=o,Vs[bc++]=f,Vs[bc++]=m,Ad|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function Td(i,o,f,m){return O0(i,o,f,m),D0(i)}function Wl(i,o){return O0(i,null,null,o),D0(i)}function B2(i,o,f){i.lanes|=f;var m=i.alternate;m!==null&&(m.lanes|=f);for(var w=!1,S=i.return;S!==null;)S.childLanes|=f,m=S.alternate,m!==null&&(m.childLanes|=f),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(w=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,w&&o!==null&&(w=31-Pt(f),i=S.hiddenUpdates,m=i[w],m===null?i[w]=[o]:m.push(o),o.lane=f|536870912),S):null}function D0(i){if(50<ff)throw ff=0,Mg=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Rc={};function X4(i,o,f,m){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(i,o,f,m){return new X4(i,o,f,m)}function Sd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $a(i,o){var f=i.alternate;return f===null?(f=_s(i.tag,o,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=o,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,o=i.dependencies,f.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function U2(i,o){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,o=f.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function M0(i,o,f,m,w,S){var D=0;if(m=i,typeof i=="function")Sd(i)&&(D=1);else if(typeof i=="string")D=ZS(i,f,se.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case P:return i=_s(31,f,o,w),i.elementType=P,i.lanes=S,i;case M:return Xl(f.children,w,S,o);case V:D=8,w|=24;break;case le:return i=_s(12,f,o,w|2),i.elementType=le,i.lanes=S,i;case Ue:return i=_s(13,f,o,w),i.elementType=Ue,i.lanes=S,i;case De:return i=_s(19,f,o,w),i.elementType=De,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ie:D=10;break e;case ce:D=9;break e;case me:D=11;break e;case k:D=14;break e;case H:D=16,m=null;break e}D=29,f=Error(r(130,i===null?"null":typeof i,"")),m=null}return o=_s(D,f,o,w),o.elementType=i,o.type=m,o.lanes=S,o}function Xl(i,o,f,m){return i=_s(7,i,m,o),i.lanes=f,i}function Cd(i,o,f){return i=_s(6,i,null,o),i.lanes=f,i}function V2(i){var o=_s(18,null,null,0);return o.stateNode=i,o}function Id(i,o,f){return o=_s(4,i.children!==null?i.children:[],i.key,o),o.lanes=f,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var H2=new WeakMap;function Hs(i,o){if(typeof i=="object"&&i!==null){var f=H2.get(i);return f!==void 0?f:(o={value:i,source:o,stack:zt(o)},H2.set(i,o),o)}return{value:i,source:o,stack:zt(o)}}var Nc=[],Oc=0,L0=null,zu=0,js=[],zs=0,Vo=null,Aa=1,Ta="";function eo(i,o){Nc[Oc++]=zu,Nc[Oc++]=L0,L0=i,zu=o}function j2(i,o,f){js[zs++]=Aa,js[zs++]=Ta,js[zs++]=Vo,Vo=i;var m=Aa;i=Ta;var w=32-Pt(m)-1;m&=~(1<<w),f+=1;var S=32-Pt(o)+w;if(30<S){var D=w-w%5;S=(m&(1<<D)-1).toString(32),m>>=D,w-=D,Aa=1<<32-Pt(o)+w|f<<w|m,Ta=S+i}else Aa=1<<S|f<<w|m,Ta=i}function bd(i){i.return!==null&&(eo(i,1),j2(i,1,0))}function Rd(i){for(;i===L0;)L0=Nc[--Oc],Nc[Oc]=null,zu=Nc[--Oc],Nc[Oc]=null;for(;i===Vo;)Vo=js[--zs],js[zs]=null,Ta=js[--zs],js[zs]=null,Aa=js[--zs],js[zs]=null}function z2(i,o){js[zs++]=Aa,js[zs++]=Ta,js[zs++]=Vo,Aa=o.id,Ta=o.overflow,Vo=i}var ui=null,or=null,Tn=!1,Ho=null,Gs=!1,Nd=Error(r(519));function jo(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gu(Hs(o,i)),Nd}function G2(i){var o=i.stateNode,f=i.type,m=i.memoizedProps;switch(o[ee]=i,o[ne]=m,f){case"dialog":gn("cancel",o),gn("close",o);break;case"iframe":case"object":case"embed":gn("load",o);break;case"video":case"audio":for(f=0;f<df.length;f++)gn(df[f],o);break;case"source":gn("error",o);break;case"img":case"image":case"link":gn("error",o),gn("load",o);break;case"details":gn("toggle",o);break;case"input":gn("invalid",o),Ce(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":gn("invalid",o);break;case"textarea":gn("invalid",o),Rr(o,m.value,m.defaultValue,m.children)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||o.textContent===""+f||m.suppressHydrationWarning===!0||oy(o.textContent,f)?(m.popover!=null&&(gn("beforetoggle",o),gn("toggle",o)),m.onScroll!=null&&gn("scroll",o),m.onScrollEnd!=null&&gn("scrollend",o),m.onClick!=null&&(o.onclick=Ii),o=!0):o=!1,o||jo(i,!0)}function W2(i){for(ui=i.return;ui;)switch(ui.tag){case 5:case 31:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:ui=ui.return}}function Dc(i){if(i!==ui)return!1;if(!Tn)return W2(i),Tn=!0,!1;var o=i.tag,f;if((f=o!==3&&o!==27)&&((f=o===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||Yg(i.type,i.memoizedProps)),f=!f),f&&or&&jo(i),W2(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));or=py(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));or=py(i)}else o===27?(o=or,nl(i.type)?(i=$g,$g=null,or=i):or=o):or=ui?Xs(i.stateNode.nextSibling):null;return!0}function ql(){or=ui=null,Tn=!1}function Od(){var i=Ho;return i!==null&&(rs===null?rs=i:rs.push.apply(rs,i),Ho=null),i}function Gu(i){Ho===null?Ho=[i]:Ho.push(i)}var Dd=he(null),Yl=null,to=null;function zo(i,o,f){ue(Dd,o._currentValue),o._currentValue=f}function no(i){i._currentValue=Dd.current,q(Dd)}function Md(i,o,f){for(;i!==null;){var m=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),i===f)break;i=i.return}}function Ld(i,o,f,m){var w=i.child;for(w!==null&&(w.return=i);w!==null;){var S=w.dependencies;if(S!==null){var D=w.child;S=S.firstContext;e:for(;S!==null;){var W=S;S=w;for(var de=0;de<o.length;de++)if(W.context===o[de]){S.lanes|=f,W=S.alternate,W!==null&&(W.lanes|=f),Md(S.return,f,i),m||(D=null);break e}S=W.next}}else if(w.tag===18){if(D=w.return,D===null)throw Error(r(341));D.lanes|=f,S=D.alternate,S!==null&&(S.lanes|=f),Md(D,f,i),D=null}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===i){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}}function Mc(i,o,f,m){i=null;for(var w=o,S=!1;w!==null;){if(!S){if((w.flags&524288)!==0)S=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var D=w.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var W=w.type;p(w.pendingProps.value,D.value)||(i!==null?i.push(W):i=[W])}}else if(w===Je.current){if(D=w.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(i!==null?i.push(_f):i=[_f])}w=w.return}i!==null&&Ld(o,i,f,m),o.flags|=262144}function k0(i){for(i=i.firstContext;i!==null;){if(!p(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Kl(i){Yl=i,to=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function fi(i){return X2(Yl,i)}function P0(i,o){return Yl===null&&Kl(i),X2(i,o)}function X2(i,o){var f=o._currentValue;if(o={context:o,memoizedValue:f,next:null},to===null){if(i===null)throw Error(r(308));to=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else to=to.next=o;return f}var q4=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(f,m){i.push(m)}};this.abort=function(){o.aborted=!0,i.forEach(function(f){return f()})}},Y4=n.unstable_scheduleCallback,K4=n.unstable_NormalPriority,kr={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kd(){return{controller:new q4,data:new Map,refCount:0}}function Wu(i){i.refCount--,i.refCount===0&&Y4(K4,function(){i.controller.abort()})}var Xu=null,Pd=0,Lc=0,kc=null;function Q4(i,o){if(Xu===null){var f=Xu=[];Pd=0,Lc=Ug(),kc={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Pd++,o.then(q2,q2),o}function q2(){if(--Pd===0&&Xu!==null){kc!==null&&(kc.status="fulfilled");var i=Xu;Xu=null,Lc=0,kc=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Z4(i,o){var f=[],m={status:"pending",value:null,reason:null,then:function(w){f.push(w)}};return i.then(function(){m.status="fulfilled",m.value=o;for(var w=0;w<f.length;w++)(0,f[w])(o)},function(w){for(m.status="rejected",m.reason=w,w=0;w<f.length;w++)(0,f[w])(void 0)}),m}var Y2=Se.S;Se.S=function(i,o){O_=At(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Q4(i,o),Y2!==null&&Y2(i,o)};var Ql=he(null);function Fd(){var i=Ql.current;return i!==null?i:nr.pooledCache}function F0(i,o){o===null?ue(Ql,Ql.current):ue(Ql,o.pool)}function K2(){var i=Fd();return i===null?null:{parent:kr._currentValue,pool:i}}var Pc=Error(r(460)),Bd=Error(r(474)),B0=Error(r(542)),U0={then:function(){}};function Q2(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Z2(i,o,f){switch(f=i[f],f===void 0?i.push(o):f!==o&&(o.then(Ii,Ii),o=f),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,$2(i),i;default:if(typeof o.status=="string")o.then(Ii,Ii);else{if(i=nr,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(m){if(o.status==="pending"){var w=o;w.status="fulfilled",w.value=m}},function(m){if(o.status==="pending"){var w=o;w.status="rejected",w.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,$2(i),i}throw Jl=o,Pc}}function Zl(i){try{var o=i._init;return o(i._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Jl=f,Pc):f}}var Jl=null;function J2(){if(Jl===null)throw Error(r(459));var i=Jl;return Jl=null,i}function $2(i){if(i===Pc||i===B0)throw Error(r(483))}var Fc=null,qu=0;function V0(i){var o=qu;return qu+=1,Fc===null&&(Fc=[]),Z2(Fc,i,o)}function Yu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function H0(i,o){throw o.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function ex(i){function o(Ee,_e){if(i){var be=Ee.deletions;be===null?(Ee.deletions=[_e],Ee.flags|=16):be.push(_e)}}function f(Ee,_e){if(!i)return null;for(;_e!==null;)o(Ee,_e),_e=_e.sibling;return null}function m(Ee){for(var _e=new Map;Ee!==null;)Ee.key!==null?_e.set(Ee.key,Ee):_e.set(Ee.index,Ee),Ee=Ee.sibling;return _e}function w(Ee,_e){return Ee=$a(Ee,_e),Ee.index=0,Ee.sibling=null,Ee}function S(Ee,_e,be){return Ee.index=be,i?(be=Ee.alternate,be!==null?(be=be.index,be<_e?(Ee.flags|=67108866,_e):be):(Ee.flags|=67108866,_e)):(Ee.flags|=1048576,_e)}function D(Ee){return i&&Ee.alternate===null&&(Ee.flags|=67108866),Ee}function W(Ee,_e,be,Ge){return _e===null||_e.tag!==6?(_e=Cd(be,Ee.mode,Ge),_e.return=Ee,_e):(_e=w(_e,be),_e.return=Ee,_e)}function de(Ee,_e,be,Ge){var Ot=be.type;return Ot===M?ze(Ee,_e,be.props.children,Ge,be.key):_e!==null&&(_e.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===H&&Zl(Ot)===_e.type)?(_e=w(_e,be.props),Yu(_e,be),_e.return=Ee,_e):(_e=M0(be.type,be.key,be.props,null,Ee.mode,Ge),Yu(_e,be),_e.return=Ee,_e)}function Ne(Ee,_e,be,Ge){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==be.containerInfo||_e.stateNode.implementation!==be.implementation?(_e=Id(be,Ee.mode,Ge),_e.return=Ee,_e):(_e=w(_e,be.children||[]),_e.return=Ee,_e)}function ze(Ee,_e,be,Ge,Ot){return _e===null||_e.tag!==7?(_e=Xl(be,Ee.mode,Ge,Ot),_e.return=Ee,_e):(_e=w(_e,be),_e.return=Ee,_e)}function We(Ee,_e,be){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return _e=Cd(""+_e,Ee.mode,be),_e.return=Ee,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case O:return be=M0(_e.type,_e.key,_e.props,null,Ee.mode,be),Yu(be,_e),be.return=Ee,be;case U:return _e=Id(_e,Ee.mode,be),_e.return=Ee,_e;case H:return _e=Zl(_e),We(Ee,_e,be)}if(ye(_e)||J(_e))return _e=Xl(_e,Ee.mode,be,null),_e.return=Ee,_e;if(typeof _e.then=="function")return We(Ee,V0(_e),be);if(_e.$$typeof===ie)return We(Ee,P0(Ee,_e),be);H0(Ee,_e)}return null}function Me(Ee,_e,be,Ge){var Ot=_e!==null?_e.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Ot!==null?null:W(Ee,_e,""+be,Ge);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case O:return be.key===Ot?de(Ee,_e,be,Ge):null;case U:return be.key===Ot?Ne(Ee,_e,be,Ge):null;case H:return be=Zl(be),Me(Ee,_e,be,Ge)}if(ye(be)||J(be))return Ot!==null?null:ze(Ee,_e,be,Ge,null);if(typeof be.then=="function")return Me(Ee,_e,V0(be),Ge);if(be.$$typeof===ie)return Me(Ee,_e,P0(Ee,be),Ge);H0(Ee,be)}return null}function Be(Ee,_e,be,Ge,Ot){if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Ee=Ee.get(be)||null,W(_e,Ee,""+Ge,Ot);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case O:return Ee=Ee.get(Ge.key===null?be:Ge.key)||null,de(_e,Ee,Ge,Ot);case U:return Ee=Ee.get(Ge.key===null?be:Ge.key)||null,Ne(_e,Ee,Ge,Ot);case H:return Ge=Zl(Ge),Be(Ee,_e,be,Ge,Ot)}if(ye(Ge)||J(Ge))return Ee=Ee.get(be)||null,ze(_e,Ee,Ge,Ot,null);if(typeof Ge.then=="function")return Be(Ee,_e,be,V0(Ge),Ot);if(Ge.$$typeof===ie)return Be(Ee,_e,be,P0(_e,Ge),Ot);H0(_e,Ge)}return null}function St(Ee,_e,be,Ge){for(var Ot=null,Nn=null,Ct=_e,rn=_e=0,xn=null;Ct!==null&&rn<be.length;rn++){Ct.index>rn?(xn=Ct,Ct=null):xn=Ct.sibling;var On=Me(Ee,Ct,be[rn],Ge);if(On===null){Ct===null&&(Ct=xn);break}i&&Ct&&On.alternate===null&&o(Ee,Ct),_e=S(On,_e,rn),Nn===null?Ot=On:Nn.sibling=On,Nn=On,Ct=xn}if(rn===be.length)return f(Ee,Ct),Tn&&eo(Ee,rn),Ot;if(Ct===null){for(;rn<be.length;rn++)Ct=We(Ee,be[rn],Ge),Ct!==null&&(_e=S(Ct,_e,rn),Nn===null?Ot=Ct:Nn.sibling=Ct,Nn=Ct);return Tn&&eo(Ee,rn),Ot}for(Ct=m(Ct);rn<be.length;rn++)xn=Be(Ct,Ee,rn,be[rn],Ge),xn!==null&&(i&&xn.alternate!==null&&Ct.delete(xn.key===null?rn:xn.key),_e=S(xn,_e,rn),Nn===null?Ot=xn:Nn.sibling=xn,Nn=xn);return i&&Ct.forEach(function(ol){return o(Ee,ol)}),Tn&&eo(Ee,rn),Ot}function Bt(Ee,_e,be,Ge){if(be==null)throw Error(r(151));for(var Ot=null,Nn=null,Ct=_e,rn=_e=0,xn=null,On=be.next();Ct!==null&&!On.done;rn++,On=be.next()){Ct.index>rn?(xn=Ct,Ct=null):xn=Ct.sibling;var ol=Me(Ee,Ct,On.value,Ge);if(ol===null){Ct===null&&(Ct=xn);break}i&&Ct&&ol.alternate===null&&o(Ee,Ct),_e=S(ol,_e,rn),Nn===null?Ot=ol:Nn.sibling=ol,Nn=ol,Ct=xn}if(On.done)return f(Ee,Ct),Tn&&eo(Ee,rn),Ot;if(Ct===null){for(;!On.done;rn++,On=be.next())On=We(Ee,On.value,Ge),On!==null&&(_e=S(On,_e,rn),Nn===null?Ot=On:Nn.sibling=On,Nn=On);return Tn&&eo(Ee,rn),Ot}for(Ct=m(Ct);!On.done;rn++,On=be.next())On=Be(Ct,Ee,rn,On.value,Ge),On!==null&&(i&&On.alternate!==null&&Ct.delete(On.key===null?rn:On.key),_e=S(On,_e,rn),Nn===null?Ot=On:Nn.sibling=On,Nn=On);return i&&Ct.forEach(function(lC){return o(Ee,lC)}),Tn&&eo(Ee,rn),Ot}function Jn(Ee,_e,be,Ge){if(typeof be=="object"&&be!==null&&be.type===M&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case O:e:{for(var Ot=be.key;_e!==null;){if(_e.key===Ot){if(Ot=be.type,Ot===M){if(_e.tag===7){f(Ee,_e.sibling),Ge=w(_e,be.props.children),Ge.return=Ee,Ee=Ge;break e}}else if(_e.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===H&&Zl(Ot)===_e.type){f(Ee,_e.sibling),Ge=w(_e,be.props),Yu(Ge,be),Ge.return=Ee,Ee=Ge;break e}f(Ee,_e);break}else o(Ee,_e);_e=_e.sibling}be.type===M?(Ge=Xl(be.props.children,Ee.mode,Ge,be.key),Ge.return=Ee,Ee=Ge):(Ge=M0(be.type,be.key,be.props,null,Ee.mode,Ge),Yu(Ge,be),Ge.return=Ee,Ee=Ge)}return D(Ee);case U:e:{for(Ot=be.key;_e!==null;){if(_e.key===Ot)if(_e.tag===4&&_e.stateNode.containerInfo===be.containerInfo&&_e.stateNode.implementation===be.implementation){f(Ee,_e.sibling),Ge=w(_e,be.children||[]),Ge.return=Ee,Ee=Ge;break e}else{f(Ee,_e);break}else o(Ee,_e);_e=_e.sibling}Ge=Id(be,Ee.mode,Ge),Ge.return=Ee,Ee=Ge}return D(Ee);case H:return be=Zl(be),Jn(Ee,_e,be,Ge)}if(ye(be))return St(Ee,_e,be,Ge);if(J(be)){if(Ot=J(be),typeof Ot!="function")throw Error(r(150));return be=Ot.call(be),Bt(Ee,_e,be,Ge)}if(typeof be.then=="function")return Jn(Ee,_e,V0(be),Ge);if(be.$$typeof===ie)return Jn(Ee,_e,P0(Ee,be),Ge);H0(Ee,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,_e!==null&&_e.tag===6?(f(Ee,_e.sibling),Ge=w(_e,be),Ge.return=Ee,Ee=Ge):(f(Ee,_e),Ge=Cd(be,Ee.mode,Ge),Ge.return=Ee,Ee=Ge),D(Ee)):f(Ee,_e)}return function(Ee,_e,be,Ge){try{qu=0;var Ot=Jn(Ee,_e,be,Ge);return Fc=null,Ot}catch(Ct){if(Ct===Pc||Ct===B0)throw Ct;var Nn=_s(29,Ct,null,Ee.mode);return Nn.lanes=Ge,Nn.return=Ee,Nn}finally{}}}var $l=ex(!0),tx=ex(!1),Go=!1;function Ud(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vd(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Wo(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Xo(i,o,f){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Ln&2)!==0){var w=m.pending;return w===null?o.next=o:(o.next=w.next,w.next=o),m.pending=o,o=D0(i),B2(i,null,f),o}return O0(i,m,o,f),D0(i)}function Ku(i,o,f){if(o=o.updateQueue,o!==null&&(o=o.shared,(f&4194048)!==0)){var m=o.lanes;m&=i.pendingLanes,f|=m,o.lanes=f,ai(i,f)}}function Hd(i,o){var f=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var w=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?w=S=D:S=S.next=D,f=f.next}while(f!==null);S===null?w=S=o:S=S.next=o}else w=S=o;f={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=o:i.next=o,f.lastBaseUpdate=o}var jd=!1;function Qu(){if(jd){var i=kc;if(i!==null)throw i}}function Zu(i,o,f,m){jd=!1;var w=i.updateQueue;Go=!1;var S=w.firstBaseUpdate,D=w.lastBaseUpdate,W=w.shared.pending;if(W!==null){w.shared.pending=null;var de=W,Ne=de.next;de.next=null,D===null?S=Ne:D.next=Ne,D=de;var ze=i.alternate;ze!==null&&(ze=ze.updateQueue,W=ze.lastBaseUpdate,W!==D&&(W===null?ze.firstBaseUpdate=Ne:W.next=Ne,ze.lastBaseUpdate=de))}if(S!==null){var We=w.baseState;D=0,ze=Ne=de=null,W=S;do{var Me=W.lane&-536870913,Be=Me!==W.lane;if(Be?(pn&Me)===Me:(m&Me)===Me){Me!==0&&Me===Lc&&(jd=!0),ze!==null&&(ze=ze.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var St=i,Bt=W;Me=o;var Jn=f;switch(Bt.tag){case 1:if(St=Bt.payload,typeof St=="function"){We=St.call(Jn,We,Me);break e}We=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Bt.payload,Me=typeof St=="function"?St.call(Jn,We,Me):St,Me==null)break e;We=C({},We,Me);break e;case 2:Go=!0}}Me=W.callback,Me!==null&&(i.flags|=64,Be&&(i.flags|=8192),Be=w.callbacks,Be===null?w.callbacks=[Me]:Be.push(Me))}else Be={lane:Me,tag:W.tag,payload:W.payload,callback:W.callback,next:null},ze===null?(Ne=ze=Be,de=We):ze=ze.next=Be,D|=Me;if(W=W.next,W===null){if(W=w.shared.pending,W===null)break;Be=W,W=Be.next,Be.next=null,w.lastBaseUpdate=Be,w.shared.pending=null}}while(!0);ze===null&&(de=We),w.baseState=de,w.firstBaseUpdate=Ne,w.lastBaseUpdate=ze,S===null&&(w.shared.lanes=0),Zo|=D,i.lanes=D,i.memoizedState=We}}function nx(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function rx(i,o){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)nx(f[i],o)}var Bc=he(null),j0=he(0);function ix(i,o){i=fo,ue(j0,i),ue(Bc,o),fo=i|o.baseLanes}function zd(){ue(j0,fo),ue(Bc,Bc.current)}function Gd(){fo=j0.current,q(Bc),q(j0)}var ys=he(null),Ws=null;function qo(i){var o=i.alternate;ue(Nr,Nr.current&1),ue(ys,i),Ws===null&&(o===null||Bc.current!==null||o.memoizedState!==null)&&(Ws=i)}function Wd(i){ue(Nr,Nr.current),ue(ys,i),Ws===null&&(Ws=i)}function sx(i){i.tag===22?(ue(Nr,Nr.current),ue(ys,i),Ws===null&&(Ws=i)):Yo()}function Yo(){ue(Nr,Nr.current),ue(ys,ys.current)}function Es(i){q(ys),Ws===i&&(Ws=null),q(Nr)}var Nr=he(0);function z0(i){for(var o=i;o!==null;){if(o.tag===13){var f=o.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||Zg(f)||Jg(f)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ro=0,en=null,Qn=null,Pr=null,G0=!1,Uc=!1,ec=!1,W0=0,Ju=0,Vc=null,J4=0;function Tr(){throw Error(r(321))}function Xd(i,o){if(o===null)return!1;for(var f=0;f<o.length&&f<i.length;f++)if(!p(i[f],o[f]))return!1;return!0}function qd(i,o,f,m,w,S){return ro=S,en=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Se.H=i===null||i.memoizedState===null?jx:lg,ec=!1,S=f(m,w),ec=!1,Uc&&(S=ox(o,f,m,w)),ax(i),S}function ax(i){Se.H=tf;var o=Qn!==null&&Qn.next!==null;if(ro=0,Pr=Qn=en=null,G0=!1,Ju=0,Vc=null,o)throw Error(r(300));i===null||Fr||(i=i.dependencies,i!==null&&k0(i)&&(Fr=!0))}function ox(i,o,f,m){en=i;var w=0;do{if(Uc&&(Vc=null),Ju=0,Uc=!1,25<=w)throw Error(r(301));if(w+=1,Pr=Qn=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}Se.H=zx,S=o(f,m)}while(Uc);return S}function $4(){var i=Se.H,o=i.useState()[0];return o=typeof o.then=="function"?$u(o):o,i=i.useState()[0],(Qn!==null?Qn.memoizedState:null)!==i&&(en.flags|=1024),o}function Yd(){var i=W0!==0;return W0=0,i}function Kd(i,o,f){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f}function Qd(i){if(G0){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}G0=!1}ro=0,Pr=Qn=en=null,Uc=!1,Ju=W0=0,Vc=null}function Gi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?en.memoizedState=Pr=i:Pr=Pr.next=i,Pr}function Or(){if(Qn===null){var i=en.alternate;i=i!==null?i.memoizedState:null}else i=Qn.next;var o=Pr===null?en.memoizedState:Pr.next;if(o!==null)Pr=o,Qn=i;else{if(i===null)throw en.alternate===null?Error(r(467)):Error(r(310));Qn=i,i={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},Pr===null?en.memoizedState=Pr=i:Pr=Pr.next=i}return Pr}function X0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(i){var o=Ju;return Ju+=1,Vc===null&&(Vc=[]),i=Z2(Vc,i,o),o=en,(Pr===null?o.memoizedState:Pr.next)===null&&(o=o.alternate,Se.H=o===null||o.memoizedState===null?jx:lg),i}function q0(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $u(i);if(i.$$typeof===ie)return fi(i)}throw Error(r(438,String(i)))}function Zd(i){var o=null,f=en.updateQueue;if(f!==null&&(o=f.memoCache),o==null){var m=en.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(w){return w.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),f===null&&(f=X0(),en.updateQueue=f),f.memoCache=o,f=o.data[o.index],f===void 0)for(f=o.data[o.index]=Array(i),m=0;m<i;m++)f[m]=te;return o.index++,f}function io(i,o){return typeof o=="function"?o(i):o}function Y0(i){var o=Or();return Jd(o,Qn,i)}function Jd(i,o,f){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var w=i.baseQueue,S=m.pending;if(S!==null){if(w!==null){var D=w.next;w.next=S.next,S.next=D}o.baseQueue=w=S,m.pending=null}if(S=i.baseState,w===null)i.memoizedState=S;else{o=w.next;var W=D=null,de=null,Ne=o,ze=!1;do{var We=Ne.lane&-536870913;if(We!==Ne.lane?(pn&We)===We:(ro&We)===We){var Me=Ne.revertLane;if(Me===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),We===Lc&&(ze=!0);else if((ro&Me)===Me){Ne=Ne.next,Me===Lc&&(ze=!0);continue}else We={lane:0,revertLane:Ne.revertLane,gesture:null,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(W=de=We,D=S):de=de.next=We,en.lanes|=Me,Zo|=Me;We=Ne.action,ec&&f(S,We),S=Ne.hasEagerState?Ne.eagerState:f(S,We)}else Me={lane:We,revertLane:Ne.revertLane,gesture:Ne.gesture,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},de===null?(W=de=Me,D=S):de=de.next=Me,en.lanes|=We,Zo|=We;Ne=Ne.next}while(Ne!==null&&Ne!==o);if(de===null?D=S:de.next=W,!p(S,i.memoizedState)&&(Fr=!0,ze&&(f=kc,f!==null)))throw f;i.memoizedState=S,i.baseState=D,i.baseQueue=de,m.lastRenderedState=S}return w===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function $d(i){var o=Or(),f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var m=f.dispatch,w=f.pending,S=o.memoizedState;if(w!==null){f.pending=null;var D=w=w.next;do S=i(S,D.action),D=D.next;while(D!==w);p(S,o.memoizedState)||(Fr=!0),o.memoizedState=S,o.baseQueue===null&&(o.baseState=S),f.lastRenderedState=S}return[S,m]}function lx(i,o,f){var m=en,w=Or(),S=Tn;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=o();var D=!p((Qn||w).memoizedState,f);if(D&&(w.memoizedState=f,Fr=!0),w=w.queue,ng(fx.bind(null,m,w,i),[i]),w.getSnapshot!==o||D||Pr!==null&&Pr.memoizedState.tag&1){if(m.flags|=2048,Hc(9,{destroy:void 0},ux.bind(null,m,w,f,o),null),nr===null)throw Error(r(349));S||(ro&127)!==0||cx(m,o,f)}return f}function cx(i,o,f){i.flags|=16384,i={getSnapshot:o,value:f},o=en.updateQueue,o===null?(o=X0(),en.updateQueue=o,o.stores=[i]):(f=o.stores,f===null?o.stores=[i]:f.push(i))}function ux(i,o,f,m){o.value=f,o.getSnapshot=m,hx(o)&&dx(i)}function fx(i,o,f){return f(function(){hx(o)&&dx(i)})}function hx(i){var o=i.getSnapshot;i=i.value;try{var f=o();return!p(i,f)}catch{return!0}}function dx(i){var o=Wl(i,2);o!==null&&is(o,i,2)}function eg(i){var o=Gi();if(typeof i=="function"){var f=i;if(i=f(),ec){wn(!0);try{f()}finally{wn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:i},o}function gx(i,o,f,m){return i.baseState=f,Jd(i,Qn,typeof m=="function"?m:io)}function eS(i,o,f,m,w){if(Z0(i))throw Error(r(485));if(i=o.action,i!==null){var S={payload:w,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){S.listeners.push(D)}};Se.T!==null?f(!0):S.isTransition=!1,m(S),f=o.pending,f===null?(S.next=o.pending=S,mx(o,S)):(S.next=f.next,o.pending=f.next=S)}}function mx(i,o){var f=o.action,m=o.payload,w=i.state;if(o.isTransition){var S=Se.T,D={};Se.T=D;try{var W=f(w,m),de=Se.S;de!==null&&de(D,W),px(i,o,W)}catch(Ne){tg(i,o,Ne)}finally{S!==null&&D.types!==null&&(S.types=D.types),Se.T=S}}else try{S=f(w,m),px(i,o,S)}catch(Ne){tg(i,o,Ne)}}function px(i,o,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){xx(i,o,m)},function(m){return tg(i,o,m)}):xx(i,o,f)}function xx(i,o,f){o.status="fulfilled",o.value=f,_x(o),i.state=f,o=i.pending,o!==null&&(f=o.next,f===o?i.pending=null:(f=f.next,o.next=f,mx(i,f)))}function tg(i,o,f){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=f,_x(o),o=o.next;while(o!==m)}i.action=null}function _x(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function yx(i,o){return o}function Ex(i,o){if(Tn){var f=nr.formState;if(f!==null){e:{var m=en;if(Tn){if(or){t:{for(var w=or,S=Gs;w.nodeType!==8;){if(!S){w=null;break t}if(w=Xs(w.nextSibling),w===null){w=null;break t}}S=w.data,w=S==="F!"||S==="F"?w:null}if(w){or=Xs(w.nextSibling),m=w.data==="F!";break e}}jo(m)}m=!1}m&&(o=f[0])}}return f=Gi(),f.memoizedState=f.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yx,lastRenderedState:o},f.queue=m,f=Ux.bind(null,en,m),m.dispatch=f,m=eg(!1),S=og.bind(null,en,!1,m.queue),m=Gi(),w={state:o,dispatch:null,action:i,pending:null},m.queue=w,f=eS.bind(null,en,w,S,f),w.dispatch=f,m.memoizedState=i,[o,f,!1]}function vx(i){var o=Or();return wx(o,Qn,i)}function wx(i,o,f){if(o=Jd(i,o,yx)[0],i=Y0(io)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=$u(o)}catch(D){throw D===Pc?B0:D}else m=o;o=Or();var w=o.queue,S=w.dispatch;return f!==o.memoizedState&&(en.flags|=2048,Hc(9,{destroy:void 0},tS.bind(null,w,f),null)),[m,S,i]}function tS(i,o){i.action=o}function Ax(i){var o=Or(),f=Qn;if(f!==null)return wx(o,f,i);Or(),o=o.memoizedState,f=Or();var m=f.queue.dispatch;return f.memoizedState=i,[o,m,!1]}function Hc(i,o,f,m){return i={tag:i,create:f,deps:m,inst:o,next:null},o=en.updateQueue,o===null&&(o=X0(),en.updateQueue=o),f=o.lastEffect,f===null?o.lastEffect=i.next=i:(m=f.next,f.next=i,i.next=m,o.lastEffect=i),i}function Tx(){return Or().memoizedState}function K0(i,o,f,m){var w=Gi();en.flags|=i,w.memoizedState=Hc(1|o,{destroy:void 0},f,m===void 0?null:m)}function Q0(i,o,f,m){var w=Or();m=m===void 0?null:m;var S=w.memoizedState.inst;Qn!==null&&m!==null&&Xd(m,Qn.memoizedState.deps)?w.memoizedState=Hc(o,S,f,m):(en.flags|=i,w.memoizedState=Hc(1|o,S,f,m))}function Sx(i,o){K0(8390656,8,i,o)}function ng(i,o){Q0(2048,8,i,o)}function nS(i){en.flags|=4;var o=en.updateQueue;if(o===null)o=X0(),en.updateQueue=o,o.events=[i];else{var f=o.events;f===null?o.events=[i]:f.push(i)}}function Cx(i){var o=Or().memoizedState;return nS({ref:o,nextImpl:i}),function(){if((Ln&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Ix(i,o){return Q0(4,2,i,o)}function bx(i,o){return Q0(4,4,i,o)}function Rx(i,o){if(typeof o=="function"){i=i();var f=o(i);return function(){typeof f=="function"?f():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Nx(i,o,f){f=f!=null?f.concat([i]):null,Q0(4,4,Rx.bind(null,o,i),f)}function rg(){}function Ox(i,o){var f=Or();o=o===void 0?null:o;var m=f.memoizedState;return o!==null&&Xd(o,m[1])?m[0]:(f.memoizedState=[i,o],i)}function Dx(i,o){var f=Or();o=o===void 0?null:o;var m=f.memoizedState;if(o!==null&&Xd(o,m[1]))return m[0];if(m=i(),ec){wn(!0);try{i()}finally{wn(!1)}}return f.memoizedState=[m,o],m}function ig(i,o,f){return f===void 0||(ro&1073741824)!==0&&(pn&261930)===0?i.memoizedState=o:(i.memoizedState=f,i=M_(),en.lanes|=i,Zo|=i,f)}function Mx(i,o,f,m){return p(f,o)?f:Bc.current!==null?(i=ig(i,f,m),p(i,o)||(Fr=!0),i):(ro&42)===0||(ro&1073741824)!==0&&(pn&261930)===0?(Fr=!0,i.memoizedState=f):(i=M_(),en.lanes|=i,Zo|=i,o)}function Lx(i,o,f,m,w){var S=Pe.p;Pe.p=S!==0&&8>S?S:8;var D=Se.T,W={};Se.T=W,og(i,!1,o,f);try{var de=w(),Ne=Se.S;if(Ne!==null&&Ne(W,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var ze=Z4(de,m);ef(i,o,ze,As(i))}else ef(i,o,m,As(i))}catch(We){ef(i,o,{then:function(){},status:"rejected",reason:We},As())}finally{Pe.p=S,D!==null&&W.types!==null&&(D.types=W.types),Se.T=D}}function rS(){}function sg(i,o,f,m){if(i.tag!==5)throw Error(r(476));var w=kx(i).queue;Lx(i,w,o,gt,f===null?rS:function(){return Px(i),f(m)})}function kx(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:gt,baseState:gt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:gt},next:null};var f={};return o.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:f},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Px(i){var o=kx(i);o.next===null&&(o=i.alternate.memoizedState),ef(i,o.next.queue,{},As())}function ag(){return fi(_f)}function Fx(){return Or().memoizedState}function Bx(){return Or().memoizedState}function iS(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var f=As();i=Wo(f);var m=Xo(o,i,f);m!==null&&(is(m,o,f),Ku(m,o,f)),o={cache:kd()},i.payload=o;return}o=o.return}}function sS(i,o,f){var m=As();f={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Z0(i)?Vx(o,f):(f=Td(i,o,f,m),f!==null&&(is(f,i,m),Hx(f,o,m)))}function Ux(i,o,f){var m=As();ef(i,o,f,m)}function ef(i,o,f,m){var w={lane:m,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Z0(i))Vx(o,w);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=o.lastRenderedReducer,S!==null))try{var D=o.lastRenderedState,W=S(D,f);if(w.hasEagerState=!0,w.eagerState=W,p(W,D))return O0(i,o,w,0),nr===null&&N0(),!1}catch{}finally{}if(f=Td(i,o,w,m),f!==null)return is(f,i,m),Hx(f,o,m),!0}return!1}function og(i,o,f,m){if(m={lane:2,revertLane:Ug(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Z0(i)){if(o)throw Error(r(479))}else o=Td(i,f,m,2),o!==null&&is(o,i,2)}function Z0(i){var o=i.alternate;return i===en||o!==null&&o===en}function Vx(i,o){Uc=G0=!0;var f=i.pending;f===null?o.next=o:(o.next=f.next,f.next=o),i.pending=o}function Hx(i,o,f){if((f&4194048)!==0){var m=o.lanes;m&=i.pendingLanes,f|=m,o.lanes=f,ai(i,f)}}var tf={readContext:fi,use:q0,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useLayoutEffect:Tr,useInsertionEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useSyncExternalStore:Tr,useId:Tr,useHostTransitionStatus:Tr,useFormState:Tr,useActionState:Tr,useOptimistic:Tr,useMemoCache:Tr,useCacheRefresh:Tr};tf.useEffectEvent=Tr;var jx={readContext:fi,use:q0,useCallback:function(i,o){return Gi().memoizedState=[i,o===void 0?null:o],i},useContext:fi,useEffect:Sx,useImperativeHandle:function(i,o,f){f=f!=null?f.concat([i]):null,K0(4194308,4,Rx.bind(null,o,i),f)},useLayoutEffect:function(i,o){return K0(4194308,4,i,o)},useInsertionEffect:function(i,o){K0(4,2,i,o)},useMemo:function(i,o){var f=Gi();o=o===void 0?null:o;var m=i();if(ec){wn(!0);try{i()}finally{wn(!1)}}return f.memoizedState=[m,o],m},useReducer:function(i,o,f){var m=Gi();if(f!==void 0){var w=f(o);if(ec){wn(!0);try{f(o)}finally{wn(!1)}}}else w=o;return m.memoizedState=m.baseState=w,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:w},m.queue=i,i=i.dispatch=sS.bind(null,en,i),[m.memoizedState,i]},useRef:function(i){var o=Gi();return i={current:i},o.memoizedState=i},useState:function(i){i=eg(i);var o=i.queue,f=Ux.bind(null,en,o);return o.dispatch=f,[i.memoizedState,f]},useDebugValue:rg,useDeferredValue:function(i,o){var f=Gi();return ig(f,i,o)},useTransition:function(){var i=eg(!1);return i=Lx.bind(null,en,i.queue,!0,!1),Gi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,f){var m=en,w=Gi();if(Tn){if(f===void 0)throw Error(r(407));f=f()}else{if(f=o(),nr===null)throw Error(r(349));(pn&127)!==0||cx(m,o,f)}w.memoizedState=f;var S={value:f,getSnapshot:o};return w.queue=S,Sx(fx.bind(null,m,S,i),[i]),m.flags|=2048,Hc(9,{destroy:void 0},ux.bind(null,m,S,f,o),null),f},useId:function(){var i=Gi(),o=nr.identifierPrefix;if(Tn){var f=Ta,m=Aa;f=(m&~(1<<32-Pt(m)-1)).toString(32)+f,o="_"+o+"R_"+f,f=W0++,0<f&&(o+="H"+f.toString(32)),o+="_"}else f=J4++,o="_"+o+"r_"+f.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:ag,useFormState:Ex,useActionState:Ex,useOptimistic:function(i){var o=Gi();o.memoizedState=o.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=f,o=og.bind(null,en,!0,f),f.dispatch=o,[i,o]},useMemoCache:Zd,useCacheRefresh:function(){return Gi().memoizedState=iS.bind(null,en)},useEffectEvent:function(i){var o=Gi(),f={impl:i};return o.memoizedState=f,function(){if((Ln&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},lg={readContext:fi,use:q0,useCallback:Ox,useContext:fi,useEffect:ng,useImperativeHandle:Nx,useInsertionEffect:Ix,useLayoutEffect:bx,useMemo:Dx,useReducer:Y0,useRef:Tx,useState:function(){return Y0(io)},useDebugValue:rg,useDeferredValue:function(i,o){var f=Or();return Mx(f,Qn.memoizedState,i,o)},useTransition:function(){var i=Y0(io)[0],o=Or().memoizedState;return[typeof i=="boolean"?i:$u(i),o]},useSyncExternalStore:lx,useId:Fx,useHostTransitionStatus:ag,useFormState:vx,useActionState:vx,useOptimistic:function(i,o){var f=Or();return gx(f,Qn,i,o)},useMemoCache:Zd,useCacheRefresh:Bx};lg.useEffectEvent=Cx;var zx={readContext:fi,use:q0,useCallback:Ox,useContext:fi,useEffect:ng,useImperativeHandle:Nx,useInsertionEffect:Ix,useLayoutEffect:bx,useMemo:Dx,useReducer:$d,useRef:Tx,useState:function(){return $d(io)},useDebugValue:rg,useDeferredValue:function(i,o){var f=Or();return Qn===null?ig(f,i,o):Mx(f,Qn.memoizedState,i,o)},useTransition:function(){var i=$d(io)[0],o=Or().memoizedState;return[typeof i=="boolean"?i:$u(i),o]},useSyncExternalStore:lx,useId:Fx,useHostTransitionStatus:ag,useFormState:Ax,useActionState:Ax,useOptimistic:function(i,o){var f=Or();return Qn!==null?gx(f,Qn,i,o):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:Zd,useCacheRefresh:Bx};zx.useEffectEvent=Cx;function cg(i,o,f,m){o=i.memoizedState,f=f(m,o),f=f==null?o:C({},o,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var ug={enqueueSetState:function(i,o,f){i=i._reactInternals;var m=As(),w=Wo(m);w.payload=o,f!=null&&(w.callback=f),o=Xo(i,w,m),o!==null&&(is(o,i,m),Ku(o,i,m))},enqueueReplaceState:function(i,o,f){i=i._reactInternals;var m=As(),w=Wo(m);w.tag=1,w.payload=o,f!=null&&(w.callback=f),o=Xo(i,w,m),o!==null&&(is(o,i,m),Ku(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var f=As(),m=Wo(f);m.tag=2,o!=null&&(m.callback=o),o=Xo(i,m,f),o!==null&&(is(o,i,f),Ku(o,i,f))}};function Gx(i,o,f,m,w,S,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,S,D):o.prototype&&o.prototype.isPureReactComponent?!E(f,m)||!E(w,S):!0}function Wx(i,o,f,m){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(f,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(f,m),o.state!==i&&ug.enqueueReplaceState(o,o.state,null)}function tc(i,o){var f=o;if("ref"in o){f={};for(var m in o)m!=="ref"&&(f[m]=o[m])}if(i=i.defaultProps){f===o&&(f=C({},f));for(var w in i)f[w]===void 0&&(f[w]=i[w])}return f}function Xx(i){R0(i)}function qx(i){console.error(i)}function Yx(i){R0(i)}function J0(i,o){try{var f=i.onUncaughtError;f(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Kx(i,o,f){try{var m=i.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function fg(i,o,f){return f=Wo(f),f.tag=3,f.payload={element:null},f.callback=function(){J0(i,o)},f}function Qx(i){return i=Wo(i),i.tag=3,i}function Zx(i,o,f,m){var w=f.type.getDerivedStateFromError;if(typeof w=="function"){var S=m.value;i.payload=function(){return w(S)},i.callback=function(){Kx(o,f,m)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){Kx(o,f,m),typeof w!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var W=m.stack;this.componentDidCatch(m.value,{componentStack:W!==null?W:""})})}function aS(i,o,f,m,w){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=f.alternate,o!==null&&Mc(o,f,w,!0),f=ys.current,f!==null){switch(f.tag){case 31:case 13:return Ws===null?uh():f.alternate===null&&Sr===0&&(Sr=3),f.flags&=-257,f.flags|=65536,f.lanes=w,m===U0?f.flags|=16384:(o=f.updateQueue,o===null?f.updateQueue=new Set([m]):o.add(m),Pg(i,m,w)),!1;case 22:return f.flags|=65536,m===U0?f.flags|=16384:(o=f.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=o):(f=o.retryQueue,f===null?o.retryQueue=new Set([m]):f.add(m)),Pg(i,m,w)),!1}throw Error(r(435,f.tag))}return Pg(i,m,w),uh(),!1}if(Tn)return o=ys.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=w,m!==Nd&&(i=Error(r(422),{cause:m}),Gu(Hs(i,f)))):(m!==Nd&&(o=Error(r(423),{cause:m}),Gu(Hs(o,f))),i=i.current.alternate,i.flags|=65536,w&=-w,i.lanes|=w,m=Hs(m,f),w=fg(i.stateNode,m,w),Hd(i,w),Sr!==4&&(Sr=2)),!1;var S=Error(r(520),{cause:m});if(S=Hs(S,f),uf===null?uf=[S]:uf.push(S),Sr!==4&&(Sr=2),o===null)return!0;m=Hs(m,f),f=o;do{switch(f.tag){case 3:return f.flags|=65536,i=w&-w,f.lanes|=i,i=fg(f.stateNode,m,i),Hd(f,i),!1;case 1:if(o=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Jo===null||!Jo.has(S))))return f.flags|=65536,w&=-w,f.lanes|=w,w=Qx(w),Zx(w,i,f,m),Hd(f,w),!1}f=f.return}while(f!==null);return!1}var hg=Error(r(461)),Fr=!1;function hi(i,o,f,m){o.child=i===null?tx(o,null,f,m):$l(o,i.child,f,m)}function Jx(i,o,f,m,w){f=f.render;var S=o.ref;if("ref"in m){var D={};for(var W in m)W!=="ref"&&(D[W]=m[W])}else D=m;return Kl(o),m=qd(i,o,f,D,S,w),W=Yd(),i!==null&&!Fr?(Kd(i,o,w),so(i,o,w)):(Tn&&W&&bd(o),o.flags|=1,hi(i,o,m,w),o.child)}function $x(i,o,f,m,w){if(i===null){var S=f.type;return typeof S=="function"&&!Sd(S)&&S.defaultProps===void 0&&f.compare===null?(o.tag=15,o.type=S,e_(i,o,S,m,w)):(i=M0(f.type,null,m,o,o.mode,w),i.ref=o.ref,i.return=o,o.child=i)}if(S=i.child,!Eg(i,w)){var D=S.memoizedProps;if(f=f.compare,f=f!==null?f:E,f(D,m)&&i.ref===o.ref)return so(i,o,w)}return o.flags|=1,i=$a(S,m),i.ref=o.ref,i.return=o,o.child=i}function e_(i,o,f,m,w){if(i!==null){var S=i.memoizedProps;if(E(S,m)&&i.ref===o.ref)if(Fr=!1,o.pendingProps=m=S,Eg(i,w))(i.flags&131072)!==0&&(Fr=!0);else return o.lanes=i.lanes,so(i,o,w)}return dg(i,o,f,m,w)}function t_(i,o,f,m){var w=m.children,S=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,i!==null){for(m=o.child=i.child,w=0;m!==null;)w=w|m.lanes|m.childLanes,m=m.sibling;m=w&~S}else m=0,o.child=null;return n_(i,o,S,f,m)}if((f&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&F0(o,S!==null?S.cachePool:null),S!==null?ix(o,S):zd(),sx(o);else return m=o.lanes=536870912,n_(i,o,S!==null?S.baseLanes|f:f,f,m)}else S!==null?(F0(o,S.cachePool),ix(o,S),Yo(),o.memoizedState=null):(i!==null&&F0(o,null),zd(),Yo());return hi(i,o,w,f),o.child}function nf(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function n_(i,o,f,m,w){var S=Fd();return S=S===null?null:{parent:kr._currentValue,pool:S},o.memoizedState={baseLanes:f,cachePool:S},i!==null&&F0(o,null),zd(),sx(o),i!==null&&Mc(i,o,m,!0),o.childLanes=w,null}function $0(i,o){return o=th({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function r_(i,o,f){return $l(o,i.child,null,f),i=$0(o,o.pendingProps),i.flags|=2,Es(o),o.memoizedState=null,i}function oS(i,o,f){var m=o.pendingProps,w=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Tn){if(m.mode==="hidden")return i=$0(o,m),o.lanes=536870912,nf(null,i);if(Wd(o),(i=or)?(i=my(i,Gs),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Vo!==null?{id:Aa,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},f=V2(i),f.return=o,o.child=f,ui=o,or=null)):i=null,i===null)throw jo(o);return o.lanes=536870912,null}return $0(o,m)}var S=i.memoizedState;if(S!==null){var D=S.dehydrated;if(Wd(o),w)if(o.flags&256)o.flags&=-257,o=r_(i,o,f);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Fr||Mc(i,o,f,!1),w=(f&i.childLanes)!==0,Fr||w){if(m=nr,m!==null&&(D=na(m,f),D!==0&&D!==S.retryLane))throw S.retryLane=D,Wl(i,D),is(m,i,D),hg;uh(),o=r_(i,o,f)}else i=S.treeContext,or=Xs(D.nextSibling),ui=o,Tn=!0,Ho=null,Gs=!1,i!==null&&z2(o,i),o=$0(o,m),o.flags|=4096;return o}return i=$a(i.child,{mode:m.mode,children:m.children}),i.ref=o.ref,o.child=i,i.return=o,i}function eh(i,o){var f=o.ref;if(f===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(o.flags|=4194816)}}function dg(i,o,f,m,w){return Kl(o),f=qd(i,o,f,m,void 0,w),m=Yd(),i!==null&&!Fr?(Kd(i,o,w),so(i,o,w)):(Tn&&m&&bd(o),o.flags|=1,hi(i,o,f,w),o.child)}function i_(i,o,f,m,w,S){return Kl(o),o.updateQueue=null,f=ox(o,m,f,w),ax(i),m=Yd(),i!==null&&!Fr?(Kd(i,o,S),so(i,o,S)):(Tn&&m&&bd(o),o.flags|=1,hi(i,o,f,S),o.child)}function s_(i,o,f,m,w){if(Kl(o),o.stateNode===null){var S=Rc,D=f.contextType;typeof D=="object"&&D!==null&&(S=fi(D)),S=new f(m,S),o.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=ug,o.stateNode=S,S._reactInternals=o,S=o.stateNode,S.props=m,S.state=o.memoizedState,S.refs={},Ud(o),D=f.contextType,S.context=typeof D=="object"&&D!==null?fi(D):Rc,S.state=o.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(cg(o,f,D,m),S.state=o.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(D=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),D!==S.state&&ug.enqueueReplaceState(S,S.state,null),Zu(o,m,S,w),Qu(),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(i===null){S=o.stateNode;var W=o.memoizedProps,de=tc(f,W);S.props=de;var Ne=S.context,ze=f.contextType;D=Rc,typeof ze=="object"&&ze!==null&&(D=fi(ze));var We=f.getDerivedStateFromProps;ze=typeof We=="function"||typeof S.getSnapshotBeforeUpdate=="function",W=o.pendingProps!==W,ze||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(W||Ne!==D)&&Wx(o,S,m,D),Go=!1;var Me=o.memoizedState;S.state=Me,Zu(o,m,S,w),Qu(),Ne=o.memoizedState,W||Me!==Ne||Go?(typeof We=="function"&&(cg(o,f,We,m),Ne=o.memoizedState),(de=Go||Gx(o,f,de,m,Me,Ne,D))?(ze||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(o.flags|=4194308)):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=Ne),S.props=m,S.state=Ne,S.context=D,m=de):(typeof S.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{S=o.stateNode,Vd(i,o),D=o.memoizedProps,ze=tc(f,D),S.props=ze,We=o.pendingProps,Me=S.context,Ne=f.contextType,de=Rc,typeof Ne=="object"&&Ne!==null&&(de=fi(Ne)),W=f.getDerivedStateFromProps,(Ne=typeof W=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==We||Me!==de)&&Wx(o,S,m,de),Go=!1,Me=o.memoizedState,S.state=Me,Zu(o,m,S,w),Qu();var Be=o.memoizedState;D!==We||Me!==Be||Go||i!==null&&i.dependencies!==null&&k0(i.dependencies)?(typeof W=="function"&&(cg(o,f,W,m),Be=o.memoizedState),(ze=Go||Gx(o,f,ze,m,Me,Be,de)||i!==null&&i.dependencies!==null&&k0(i.dependencies))?(Ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,Be,de),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,Be,de)),typeof S.componentDidUpdate=="function"&&(o.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&Me===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&Me===i.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Be),S.props=m,S.state=Be,S.context=de,m=ze):(typeof S.componentDidUpdate!="function"||D===i.memoizedProps&&Me===i.memoizedState||(o.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&Me===i.memoizedState||(o.flags|=1024),m=!1)}return S=m,eh(i,o),m=(o.flags&128)!==0,S||m?(S=o.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:S.render(),o.flags|=1,i!==null&&m?(o.child=$l(o,i.child,null,w),o.child=$l(o,null,f,w)):hi(i,o,f,w),o.memoizedState=S.state,i=o.child):i=so(i,o,w),i}function a_(i,o,f,m){return ql(),o.flags|=256,hi(i,o,f,m),o.child}var gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mg(i){return{baseLanes:i,cachePool:K2()}}function pg(i,o,f){return i=i!==null?i.childLanes&~f:0,o&&(i|=ws),i}function o_(i,o,f){var m=o.pendingProps,w=!1,S=(o.flags&128)!==0,D;if((D=S)||(D=i!==null&&i.memoizedState===null?!1:(Nr.current&2)!==0),D&&(w=!0,o.flags&=-129),D=(o.flags&32)!==0,o.flags&=-33,i===null){if(Tn){if(w?qo(o):Yo(),(i=or)?(i=my(i,Gs),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Vo!==null?{id:Aa,overflow:Ta}:null,retryLane:536870912,hydrationErrors:null},f=V2(i),f.return=o,o.child=f,ui=o,or=null)):i=null,i===null)throw jo(o);return Jg(i)?o.lanes=32:o.lanes=536870912,null}var W=m.children;return m=m.fallback,w?(Yo(),w=o.mode,W=th({mode:"hidden",children:W},w),m=Xl(m,w,f,null),W.return=o,m.return=o,W.sibling=m,o.child=W,m=o.child,m.memoizedState=mg(f),m.childLanes=pg(i,D,f),o.memoizedState=gg,nf(null,m)):(qo(o),xg(o,W))}var de=i.memoizedState;if(de!==null&&(W=de.dehydrated,W!==null)){if(S)o.flags&256?(qo(o),o.flags&=-257,o=_g(i,o,f)):o.memoizedState!==null?(Yo(),o.child=i.child,o.flags|=128,o=null):(Yo(),W=m.fallback,w=o.mode,m=th({mode:"visible",children:m.children},w),W=Xl(W,w,f,null),W.flags|=2,m.return=o,W.return=o,m.sibling=W,o.child=m,$l(o,i.child,null,f),m=o.child,m.memoizedState=mg(f),m.childLanes=pg(i,D,f),o.memoizedState=gg,o=nf(null,m));else if(qo(o),Jg(W)){if(D=W.nextSibling&&W.nextSibling.dataset,D)var Ne=D.dgst;D=Ne,m=Error(r(419)),m.stack="",m.digest=D,Gu({value:m,source:null,stack:null}),o=_g(i,o,f)}else if(Fr||Mc(i,o,f,!1),D=(f&i.childLanes)!==0,Fr||D){if(D=nr,D!==null&&(m=na(D,f),m!==0&&m!==de.retryLane))throw de.retryLane=m,Wl(i,m),is(D,i,m),hg;Zg(W)||uh(),o=_g(i,o,f)}else Zg(W)?(o.flags|=192,o.child=i.child,o=null):(i=de.treeContext,or=Xs(W.nextSibling),ui=o,Tn=!0,Ho=null,Gs=!1,i!==null&&z2(o,i),o=xg(o,m.children),o.flags|=4096);return o}return w?(Yo(),W=m.fallback,w=o.mode,de=i.child,Ne=de.sibling,m=$a(de,{mode:"hidden",children:m.children}),m.subtreeFlags=de.subtreeFlags&65011712,Ne!==null?W=$a(Ne,W):(W=Xl(W,w,f,null),W.flags|=2),W.return=o,m.return=o,m.sibling=W,o.child=m,nf(null,m),m=o.child,W=i.child.memoizedState,W===null?W=mg(f):(w=W.cachePool,w!==null?(de=kr._currentValue,w=w.parent!==de?{parent:de,pool:de}:w):w=K2(),W={baseLanes:W.baseLanes|f,cachePool:w}),m.memoizedState=W,m.childLanes=pg(i,D,f),o.memoizedState=gg,nf(i.child,m)):(qo(o),f=i.child,i=f.sibling,f=$a(f,{mode:"visible",children:m.children}),f.return=o,f.sibling=null,i!==null&&(D=o.deletions,D===null?(o.deletions=[i],o.flags|=16):D.push(i)),o.child=f,o.memoizedState=null,f)}function xg(i,o){return o=th({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function th(i,o){return i=_s(22,i,null,o),i.lanes=0,i}function _g(i,o,f){return $l(o,i.child,null,f),i=xg(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function l_(i,o,f){i.lanes|=o;var m=i.alternate;m!==null&&(m.lanes|=o),Md(i.return,o,f)}function yg(i,o,f,m,w,S){var D=i.memoizedState;D===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:w,treeForkCount:S}:(D.isBackwards=o,D.rendering=null,D.renderingStartTime=0,D.last=m,D.tail=f,D.tailMode=w,D.treeForkCount=S)}function c_(i,o,f){var m=o.pendingProps,w=m.revealOrder,S=m.tail;m=m.children;var D=Nr.current,W=(D&2)!==0;if(W?(D=D&1|2,o.flags|=128):D&=1,ue(Nr,D),hi(i,o,m,f),m=Tn?zu:0,!W&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&l_(i,f,o);else if(i.tag===19)l_(i,f,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(w){case"forwards":for(f=o.child,w=null;f!==null;)i=f.alternate,i!==null&&z0(i)===null&&(w=f),f=f.sibling;f=w,f===null?(w=o.child,o.child=null):(w=f.sibling,f.sibling=null),yg(o,!1,w,f,S,m);break;case"backwards":case"unstable_legacy-backwards":for(f=null,w=o.child,o.child=null;w!==null;){if(i=w.alternate,i!==null&&z0(i)===null){o.child=w;break}i=w.sibling,w.sibling=f,f=w,w=i}yg(o,!0,f,null,S,m);break;case"together":yg(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function so(i,o,f){if(i!==null&&(o.dependencies=i.dependencies),Zo|=o.lanes,(f&o.childLanes)===0)if(i!==null){if(Mc(i,o,f,!1),(f&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,f=$a(i,i.pendingProps),o.child=f,f.return=o;i.sibling!==null;)i=i.sibling,f=f.sibling=$a(i,i.pendingProps),f.return=o;f.sibling=null}return o.child}function Eg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&k0(i)))}function lS(i,o,f){switch(o.tag){case 3:rt(o,o.stateNode.containerInfo),zo(o,kr,i.memoizedState.cache),ql();break;case 27:case 5:lt(o);break;case 4:rt(o,o.stateNode.containerInfo);break;case 10:zo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Wd(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(qo(o),o.flags|=128,null):(f&o.child.childLanes)!==0?o_(i,o,f):(qo(o),i=so(i,o,f),i!==null?i.sibling:null);qo(o);break;case 19:var w=(i.flags&128)!==0;if(m=(f&o.childLanes)!==0,m||(Mc(i,o,f,!1),m=(f&o.childLanes)!==0),w){if(m)return c_(i,o,f);o.flags|=128}if(w=o.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ue(Nr,Nr.current),m)break;return null;case 22:return o.lanes=0,t_(i,o,f,o.pendingProps);case 24:zo(o,kr,i.memoizedState.cache)}return so(i,o,f)}function u_(i,o,f){if(i!==null)if(i.memoizedProps!==o.pendingProps)Fr=!0;else{if(!Eg(i,f)&&(o.flags&128)===0)return Fr=!1,lS(i,o,f);Fr=(i.flags&131072)!==0}else Fr=!1,Tn&&(o.flags&1048576)!==0&&j2(o,zu,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(i=Zl(o.elementType),o.type=i,typeof i=="function")Sd(i)?(m=tc(i,m),o.tag=1,o=s_(null,o,i,m,f)):(o.tag=0,o=dg(null,o,i,m,f));else{if(i!=null){var w=i.$$typeof;if(w===me){o.tag=11,o=Jx(null,o,i,m,f);break e}else if(w===k){o.tag=14,o=$x(null,o,i,m,f);break e}}throw o=dt(i)||i,Error(r(306,o,""))}}return o;case 0:return dg(i,o,o.type,o.pendingProps,f);case 1:return m=o.type,w=tc(m,o.pendingProps),s_(i,o,m,w,f);case 3:e:{if(rt(o,o.stateNode.containerInfo),i===null)throw Error(r(387));m=o.pendingProps;var S=o.memoizedState;w=S.element,Vd(i,o),Zu(o,m,null,f);var D=o.memoizedState;if(m=D.cache,zo(o,kr,m),m!==S.cache&&Ld(o,[kr],f,!0),Qu(),m=D.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:D.cache},o.updateQueue.baseState=S,o.memoizedState=S,o.flags&256){o=a_(i,o,m,f);break e}else if(m!==w){w=Hs(Error(r(424)),o),Gu(w),o=a_(i,o,m,f);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(or=Xs(i.firstChild),ui=o,Tn=!0,Ho=null,Gs=!0,f=tx(o,null,m,f),o.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ql(),m===w){o=so(i,o,f);break e}hi(i,o,m,f)}o=o.child}return o;case 26:return eh(i,o),i===null?(f=vy(o.type,null,o.pendingProps,null))?o.memoizedState=f:Tn||(f=o.type,i=o.pendingProps,m=xh(pe.current).createElement(f),m[ee]=o,m[ne]=i,di(m,f,i),Et(m),o.stateNode=m):o.memoizedState=vy(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return lt(o),i===null&&Tn&&(m=o.stateNode=_y(o.type,o.pendingProps,pe.current),ui=o,Gs=!0,w=or,nl(o.type)?($g=w,or=Xs(m.firstChild)):or=w),hi(i,o,o.pendingProps.children,f),eh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Tn&&((w=m=or)&&(m=BS(m,o.type,o.pendingProps,Gs),m!==null?(o.stateNode=m,ui=o,or=Xs(m.firstChild),Gs=!1,w=!0):w=!1),w||jo(o)),lt(o),w=o.type,S=o.pendingProps,D=i!==null?i.memoizedProps:null,m=S.children,Yg(w,S)?m=null:D!==null&&Yg(w,D)&&(o.flags|=32),o.memoizedState!==null&&(w=qd(i,o,$4,null,null,f),_f._currentValue=w),eh(i,o),hi(i,o,m,f),o.child;case 6:return i===null&&Tn&&((i=f=or)&&(f=US(f,o.pendingProps,Gs),f!==null?(o.stateNode=f,ui=o,or=null,i=!0):i=!1),i||jo(o)),null;case 13:return o_(i,o,f);case 4:return rt(o,o.stateNode.containerInfo),m=o.pendingProps,i===null?o.child=$l(o,null,m,f):hi(i,o,m,f),o.child;case 11:return Jx(i,o,o.type,o.pendingProps,f);case 7:return hi(i,o,o.pendingProps,f),o.child;case 8:return hi(i,o,o.pendingProps.children,f),o.child;case 12:return hi(i,o,o.pendingProps.children,f),o.child;case 10:return m=o.pendingProps,zo(o,o.type,m.value),hi(i,o,m.children,f),o.child;case 9:return w=o.type._context,m=o.pendingProps.children,Kl(o),w=fi(w),m=m(w),o.flags|=1,hi(i,o,m,f),o.child;case 14:return $x(i,o,o.type,o.pendingProps,f);case 15:return e_(i,o,o.type,o.pendingProps,f);case 19:return c_(i,o,f);case 31:return oS(i,o,f);case 22:return t_(i,o,f,o.pendingProps);case 24:return Kl(o),m=fi(kr),i===null?(w=Fd(),w===null&&(w=nr,S=kd(),w.pooledCache=S,S.refCount++,S!==null&&(w.pooledCacheLanes|=f),w=S),o.memoizedState={parent:m,cache:w},Ud(o),zo(o,kr,w)):((i.lanes&f)!==0&&(Vd(i,o),Zu(o,null,null,f),Qu()),w=i.memoizedState,S=o.memoizedState,w.parent!==m?(w={parent:m,cache:m},o.memoizedState=w,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=w),zo(o,kr,m)):(m=S.cache,zo(o,kr,m),m!==w.cache&&Ld(o,[kr],f,!0))),hi(i,o,o.pendingProps.children,f),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ao(i){i.flags|=4}function vg(i,o,f,m,w){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(w&335544128)===w)if(i.stateNode.complete)i.flags|=8192;else if(F_())i.flags|=8192;else throw Jl=U0,Bd}else i.flags&=-16777217}function f_(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Cy(o))if(F_())i.flags|=8192;else throw Jl=U0,Bd}function nh(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?xr():536870912,i.lanes|=o,Wc|=o)}function rf(i,o){if(!Tn)switch(i.tailMode){case"hidden":o=i.tail;for(var f=null;o!==null;)o.alternate!==null&&(f=o),o=o.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function lr(i){var o=i.alternate!==null&&i.alternate.child===i.child,f=0,m=0;if(o)for(var w=i.child;w!==null;)f|=w.lanes|w.childLanes,m|=w.subtreeFlags&65011712,m|=w.flags&65011712,w.return=i,w=w.sibling;else for(w=i.child;w!==null;)f|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=i,w=w.sibling;return i.subtreeFlags|=m,i.childLanes=f,o}function cS(i,o,f){var m=o.pendingProps;switch(Rd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(o),null;case 1:return lr(o),null;case 3:return f=o.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),no(kr),at(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Dc(o)?ao(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Od())),lr(o),null;case 26:var w=o.type,S=o.memoizedState;return i===null?(ao(o),S!==null?(lr(o),f_(o,S)):(lr(o),vg(o,w,null,m,f))):S?S!==i.memoizedState?(ao(o),lr(o),f_(o,S)):(lr(o),o.flags&=-16777217):(i=i.memoizedProps,i!==m&&ao(o),lr(o),vg(o,w,i,m,f)),null;case 27:if(Mt(o),f=pe.current,w=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ao(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return lr(o),null}i=se.current,Dc(o)?G2(o):(i=_y(w,m,f),o.stateNode=i,ao(o))}return lr(o),null;case 5:if(Mt(o),w=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==m&&ao(o);else{if(!m){if(o.stateNode===null)throw Error(r(166));return lr(o),null}if(S=se.current,Dc(o))G2(o);else{var D=xh(pe.current);switch(S){case 1:S=D.createElementNS("http://www.w3.org/2000/svg",w);break;case 2:S=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;default:switch(w){case"svg":S=D.createElementNS("http://www.w3.org/2000/svg",w);break;case"math":S=D.createElementNS("http://www.w3.org/1998/Math/MathML",w);break;case"script":S=D.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof m.is=="string"?D.createElement("select",{is:m.is}):D.createElement("select"),m.multiple?S.multiple=!0:m.size&&(S.size=m.size);break;default:S=typeof m.is=="string"?D.createElement(w,{is:m.is}):D.createElement(w)}}S[ee]=o,S[ne]=m;e:for(D=o.child;D!==null;){if(D.tag===5||D.tag===6)S.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===o)break e;for(;D.sibling===null;){if(D.return===null||D.return===o)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}o.stateNode=S;e:switch(di(S,w,m),w){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ao(o)}}return lr(o),vg(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,f),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==m&&ao(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(r(166));if(i=pe.current,Dc(o)){if(i=o.stateNode,f=o.memoizedProps,m=null,w=ui,w!==null)switch(w.tag){case 27:case 5:m=w.memoizedProps}i[ee]=o,i=!!(i.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||oy(i.nodeValue,f)),i||jo(o,!0)}else i=xh(i).createTextNode(m),i[ee]=o,o.stateNode=i}return lr(o),null;case 31:if(f=o.memoizedState,i===null||i.memoizedState!==null){if(m=Dc(o),f!==null){if(i===null){if(!m)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[ee]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lr(o),i=!1}else f=Od(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),i=!0;if(!i)return o.flags&256?(Es(o),o):(Es(o),null);if((o.flags&128)!==0)throw Error(r(558))}return lr(o),null;case 13:if(m=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(w=Dc(o),m!==null&&m.dehydrated!==null){if(i===null){if(!w)throw Error(r(318));if(w=o.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(r(317));w[ee]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;lr(o),w=!1}else w=Od(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=w),w=!0;if(!w)return o.flags&256?(Es(o),o):(Es(o),null)}return Es(o),(o.flags&128)!==0?(o.lanes=f,o):(f=m!==null,i=i!==null&&i.memoizedState!==null,f&&(m=o.child,w=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(w=m.alternate.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==w&&(m.flags|=2048)),f!==i&&f&&(o.child.flags|=8192),nh(o,o.updateQueue),lr(o),null);case 4:return at(),i===null&&zg(o.stateNode.containerInfo),lr(o),null;case 10:return no(o.type),lr(o),null;case 19:if(q(Nr),m=o.memoizedState,m===null)return lr(o),null;if(w=(o.flags&128)!==0,S=m.rendering,S===null)if(w)rf(m,!1);else{if(Sr!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(S=z0(i),S!==null){for(o.flags|=128,rf(m,!1),i=S.updateQueue,o.updateQueue=i,nh(o,i),o.subtreeFlags=0,i=f,f=o.child;f!==null;)U2(f,i),f=f.sibling;return ue(Nr,Nr.current&1|2),Tn&&eo(o,m.treeForkCount),o.child}i=i.sibling}m.tail!==null&&At()>oh&&(o.flags|=128,w=!0,rf(m,!1),o.lanes=4194304)}else{if(!w)if(i=z0(S),i!==null){if(o.flags|=128,w=!0,i=i.updateQueue,o.updateQueue=i,nh(o,i),rf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!Tn)return lr(o),null}else 2*At()-m.renderingStartTime>oh&&f!==536870912&&(o.flags|=128,w=!0,rf(m,!1),o.lanes=4194304);m.isBackwards?(S.sibling=o.child,o.child=S):(i=m.last,i!==null?i.sibling=S:o.child=S,m.last=S)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=At(),i.sibling=null,f=Nr.current,ue(Nr,w?f&1|2:f&1),Tn&&eo(o,m.treeForkCount),i):(lr(o),null);case 22:case 23:return Es(o),Gd(),m=o.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(f&536870912)!==0&&(o.flags&128)===0&&(lr(o),o.subtreeFlags&6&&(o.flags|=8192)):lr(o),f=o.updateQueue,f!==null&&nh(o,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048),i!==null&&q(Ql),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),no(kr),lr(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function uS(i,o){switch(Rd(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return no(kr),at(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Mt(o),null;case 31:if(o.memoizedState!==null){if(Es(o),o.alternate===null)throw Error(r(340));ql()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Es(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ql()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return q(Nr),null;case 4:return at(),null;case 10:return no(o.type),null;case 22:case 23:return Es(o),Gd(),i!==null&&q(Ql),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return no(kr),null;case 25:return null;default:return null}}function h_(i,o){switch(Rd(o),o.tag){case 3:no(kr),at();break;case 26:case 27:case 5:Mt(o);break;case 4:at();break;case 31:o.memoizedState!==null&&Es(o);break;case 13:Es(o);break;case 19:q(Nr);break;case 10:no(o.type);break;case 22:case 23:Es(o),Gd(),i!==null&&q(Ql);break;case 24:no(kr)}}function sf(i,o){try{var f=o.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var w=m.next;f=w;do{if((f.tag&i)===i){m=void 0;var S=f.create,D=f.inst;m=S(),D.destroy=m}f=f.next}while(f!==w)}}catch(W){Wn(o,o.return,W)}}function Ko(i,o,f){try{var m=o.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var S=w.next;m=S;do{if((m.tag&i)===i){var D=m.inst,W=D.destroy;if(W!==void 0){D.destroy=void 0,w=o;var de=f,Ne=W;try{Ne()}catch(ze){Wn(w,de,ze)}}}m=m.next}while(m!==S)}}catch(ze){Wn(o,o.return,ze)}}function d_(i){var o=i.updateQueue;if(o!==null){var f=i.stateNode;try{rx(o,f)}catch(m){Wn(i,i.return,m)}}}function g_(i,o,f){f.props=tc(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(m){Wn(i,o,m)}}function af(i,o){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof f=="function"?i.refCleanup=f(m):f.current=m}}catch(w){Wn(i,o,w)}}function Sa(i,o){var f=i.ref,m=i.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(w){Wn(i,o,w)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(w){Wn(i,o,w)}else f.current=null}function m_(i){var o=i.type,f=i.memoizedProps,m=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(w){Wn(i,i.return,w)}}function wg(i,o,f){try{var m=i.stateNode;DS(m,i.type,f,o),m[ne]=o}catch(w){Wn(i,i.return,w)}}function p_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&nl(i.type)||i.tag===4}function Ag(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||p_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&nl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Tg(i,o,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,o):(o=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,o.appendChild(i),f=f._reactRootContainer,f!=null||o.onclick!==null||(o.onclick=Ii));else if(m!==4&&(m===27&&nl(i.type)&&(f=i.stateNode,o=null),i=i.child,i!==null))for(Tg(i,o,f),i=i.sibling;i!==null;)Tg(i,o,f),i=i.sibling}function rh(i,o,f){var m=i.tag;if(m===5||m===6)i=i.stateNode,o?f.insertBefore(i,o):f.appendChild(i);else if(m!==4&&(m===27&&nl(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(rh(i,o,f),i=i.sibling;i!==null;)rh(i,o,f),i=i.sibling}function x_(i){var o=i.stateNode,f=i.memoizedProps;try{for(var m=i.type,w=o.attributes;w.length;)o.removeAttributeNode(w[0]);di(o,m,f),o[ee]=i,o[ne]=f}catch(S){Wn(i,i.return,S)}}var oo=!1,Br=!1,Sg=!1,__=typeof WeakSet=="function"?WeakSet:Set,ti=null;function fS(i,o){if(i=i.containerInfo,Xg=Th,i=B(i),G(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else e:{f=(f=i.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var w=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break e}var D=0,W=-1,de=-1,Ne=0,ze=0,We=i,Me=null;t:for(;;){for(var Be;We!==f||w!==0&&We.nodeType!==3||(W=D+w),We!==S||m!==0&&We.nodeType!==3||(de=D+m),We.nodeType===3&&(D+=We.nodeValue.length),(Be=We.firstChild)!==null;)Me=We,We=Be;for(;;){if(We===i)break t;if(Me===f&&++Ne===w&&(W=D),Me===S&&++ze===m&&(de=D),(Be=We.nextSibling)!==null)break;We=Me,Me=We.parentNode}We=Be}f=W===-1||de===-1?null:{start:W,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(qg={focusedElem:i,selectionRange:f},Th=!1,ti=o;ti!==null;)if(o=ti,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ti=i;else for(;ti!==null;){switch(o=ti,S=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(f=0;f<i.length;f++)w=i[f],w.ref.impl=w.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,f=o,w=S.memoizedProps,S=S.memoizedState,m=f.stateNode;try{var St=tc(f.type,w);i=m.getSnapshotBeforeUpdate(St,S),m.__reactInternalSnapshotBeforeUpdate=i}catch(Bt){Wn(f,f.return,Bt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,f=i.nodeType,f===9)Qg(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Qg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,ti=i;break}ti=o.return}}function y_(i,o,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:co(i,f),m&4&&sf(5,f);break;case 1:if(co(i,f),m&4)if(i=f.stateNode,o===null)try{i.componentDidMount()}catch(D){Wn(f,f.return,D)}else{var w=tc(f.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(w,o,i.__reactInternalSnapshotBeforeUpdate)}catch(D){Wn(f,f.return,D)}}m&64&&d_(f),m&512&&af(f,f.return);break;case 3:if(co(i,f),m&64&&(i=f.updateQueue,i!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{rx(i,o)}catch(D){Wn(f,f.return,D)}}break;case 27:o===null&&m&4&&x_(f);case 26:case 5:co(i,f),o===null&&m&4&&m_(f),m&512&&af(f,f.return);break;case 12:co(i,f);break;case 31:co(i,f),m&4&&w_(i,f);break;case 13:co(i,f),m&4&&A_(i,f),m&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=ES.bind(null,f),VS(i,f))));break;case 22:if(m=f.memoizedState!==null||oo,!m){o=o!==null&&o.memoizedState!==null||Br,w=oo;var S=Br;oo=m,(Br=o)&&!S?uo(i,f,(f.subtreeFlags&8772)!==0):co(i,f),oo=w,Br=S}break;case 30:break;default:co(i,f)}}function E_(i){var o=i.alternate;o!==null&&(i.alternate=null,E_(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&qe(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var pr=null,es=!1;function lo(i,o,f){for(f=f.child;f!==null;)v_(i,o,f),f=f.sibling}function v_(i,o,f){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(vn,f)}catch{}switch(f.tag){case 26:Br||Sa(f,o),lo(i,o,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Br||Sa(f,o);var m=pr,w=es;nl(f.type)&&(pr=f.stateNode,es=!1),lo(i,o,f),mf(f.stateNode),pr=m,es=w;break;case 5:Br||Sa(f,o);case 6:if(m=pr,w=es,pr=null,lo(i,o,f),pr=m,es=w,pr!==null)if(es)try{(pr.nodeType===9?pr.body:pr.nodeName==="HTML"?pr.ownerDocument.body:pr).removeChild(f.stateNode)}catch(S){Wn(f,o,S)}else try{pr.removeChild(f.stateNode)}catch(S){Wn(f,o,S)}break;case 18:pr!==null&&(es?(i=pr,dy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),$c(i)):dy(pr,f.stateNode));break;case 4:m=pr,w=es,pr=f.stateNode.containerInfo,es=!0,lo(i,o,f),pr=m,es=w;break;case 0:case 11:case 14:case 15:Ko(2,f,o),Br||Ko(4,f,o),lo(i,o,f);break;case 1:Br||(Sa(f,o),m=f.stateNode,typeof m.componentWillUnmount=="function"&&g_(f,o,m)),lo(i,o,f);break;case 21:lo(i,o,f);break;case 22:Br=(m=Br)||f.memoizedState!==null,lo(i,o,f),Br=m;break;default:lo(i,o,f)}}function w_(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$c(i)}catch(f){Wn(o,o.return,f)}}}function A_(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$c(i)}catch(f){Wn(o,o.return,f)}}function hS(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new __),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new __),o;default:throw Error(r(435,i.tag))}}function ih(i,o){var f=hS(i);o.forEach(function(m){if(!f.has(m)){f.add(m);var w=vS.bind(null,i,m);m.then(w,w)}})}function ts(i,o){var f=o.deletions;if(f!==null)for(var m=0;m<f.length;m++){var w=f[m],S=i,D=o,W=D;e:for(;W!==null;){switch(W.tag){case 27:if(nl(W.type)){pr=W.stateNode,es=!1;break e}break;case 5:pr=W.stateNode,es=!1;break e;case 3:case 4:pr=W.stateNode.containerInfo,es=!0;break e}W=W.return}if(pr===null)throw Error(r(160));v_(S,D,w),pr=null,es=!1,S=w.alternate,S!==null&&(S.return=null),w.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)T_(o,i),o=o.sibling}var oa=null;function T_(i,o){var f=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ts(o,i),ns(i),m&4&&(Ko(3,i,i.return),sf(3,i),Ko(5,i,i.return));break;case 1:ts(o,i),ns(i),m&512&&(Br||f===null||Sa(f,f.return)),m&64&&oo&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var w=oa;if(ts(o,i),ns(i),m&512&&(Br||f===null||Sa(f,f.return)),m&4){var S=f!==null?f.memoizedState:null;if(m=i.memoizedState,f===null)if(m===null)if(i.stateNode===null){e:{m=i.type,f=i.memoizedProps,w=w.ownerDocument||w;t:switch(m){case"title":S=w.getElementsByTagName("title")[0],(!S||S[Re]||S[ee]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=w.createElement(m),w.head.insertBefore(S,w.querySelector("head > title"))),di(S,m,f),S[ee]=i,Et(S),m=S;break e;case"link":var D=Ty("link","href",w).get(m+(f.href||""));if(D){for(var W=0;W<D.length;W++)if(S=D[W],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(W,1);break t}}S=w.createElement(m),di(S,m,f),w.head.appendChild(S);break;case"meta":if(D=Ty("meta","content",w).get(m+(f.content||""))){for(W=0;W<D.length;W++)if(S=D[W],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(W,1);break t}}S=w.createElement(m),di(S,m,f),w.head.appendChild(S);break;default:throw Error(r(468,m))}S[ee]=i,Et(S),m=S}i.stateNode=m}else Sy(w,i.type,i.stateNode);else i.stateNode=Ay(w,m,i.memoizedProps);else S!==m?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,m===null?Sy(w,i.type,i.stateNode):Ay(w,m,i.memoizedProps)):m===null&&i.stateNode!==null&&wg(i,i.memoizedProps,f.memoizedProps)}break;case 27:ts(o,i),ns(i),m&512&&(Br||f===null||Sa(f,f.return)),f!==null&&m&4&&wg(i,i.memoizedProps,f.memoizedProps);break;case 5:if(ts(o,i),ns(i),m&512&&(Br||f===null||Sa(f,f.return)),i.flags&32){w=i.stateNode;try{Ci(w,"")}catch(St){Wn(i,i.return,St)}}m&4&&i.stateNode!=null&&(w=i.memoizedProps,wg(i,w,f!==null?f.memoizedProps:w)),m&1024&&(Sg=!0);break;case 6:if(ts(o,i),ns(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,f=i.stateNode;try{f.nodeValue=m}catch(St){Wn(i,i.return,St)}}break;case 3:if(Eh=null,w=oa,oa=_h(o.containerInfo),ts(o,i),oa=w,ns(i),m&4&&f!==null&&f.memoizedState.isDehydrated)try{$c(o.containerInfo)}catch(St){Wn(i,i.return,St)}Sg&&(Sg=!1,S_(i));break;case 4:m=oa,oa=_h(i.stateNode.containerInfo),ts(o,i),ns(i),oa=m;break;case 12:ts(o,i),ns(i);break;case 31:ts(o,i),ns(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,ih(i,m)));break;case 13:ts(o,i),ns(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(ah=At()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,ih(i,m)));break;case 22:w=i.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,Ne=oo,ze=Br;if(oo=Ne||w,Br=ze||de,ts(o,i),Br=ze,oo=Ne,ns(i),m&8192)e:for(o=i.stateNode,o._visibility=w?o._visibility&-2:o._visibility|1,w&&(f===null||de||oo||Br||nc(i)),f=null,o=i;;){if(o.tag===5||o.tag===26){if(f===null){de=f=o;try{if(S=de.stateNode,w)D=S.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{W=de.stateNode;var We=de.memoizedProps.style,Me=We!=null&&We.hasOwnProperty("display")?We.display:null;W.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(St){Wn(de,de.return,St)}}}else if(o.tag===6){if(f===null){de=o;try{de.stateNode.nodeValue=w?"":de.memoizedProps}catch(St){Wn(de,de.return,St)}}}else if(o.tag===18){if(f===null){de=o;try{var Be=de.stateNode;w?gy(Be,!0):gy(de.stateNode,!1)}catch(St){Wn(de,de.return,St)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;f===o&&(f=null),o=o.return}f===o&&(f=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=i.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,ih(i,f))));break;case 19:ts(o,i),ns(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,ih(i,m)));break;case 30:break;case 21:break;default:ts(o,i),ns(i)}}function ns(i){var o=i.flags;if(o&2){try{for(var f,m=i.return;m!==null;){if(p_(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var w=f.stateNode,S=Ag(i);rh(i,S,w);break;case 5:var D=f.stateNode;f.flags&32&&(Ci(D,""),f.flags&=-33);var W=Ag(i);rh(i,W,D);break;case 3:case 4:var de=f.stateNode.containerInfo,Ne=Ag(i);Tg(i,Ne,de);break;default:throw Error(r(161))}}catch(ze){Wn(i,i.return,ze)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function S_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;S_(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function co(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)y_(i,o.alternate,o),o=o.sibling}function nc(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ko(4,o,o.return),nc(o);break;case 1:Sa(o,o.return);var f=o.stateNode;typeof f.componentWillUnmount=="function"&&g_(o,o.return,f),nc(o);break;case 27:mf(o.stateNode);case 26:case 5:Sa(o,o.return),nc(o);break;case 22:o.memoizedState===null&&nc(o);break;case 30:nc(o);break;default:nc(o)}i=i.sibling}}function uo(i,o,f){for(f=f&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,w=i,S=o,D=S.flags;switch(S.tag){case 0:case 11:case 15:uo(w,S,f),sf(4,S);break;case 1:if(uo(w,S,f),m=S,w=m.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Ne){Wn(m,m.return,Ne)}if(m=S,w=m.updateQueue,w!==null){var W=m.stateNode;try{var de=w.shared.hiddenCallbacks;if(de!==null)for(w.shared.hiddenCallbacks=null,w=0;w<de.length;w++)nx(de[w],W)}catch(Ne){Wn(m,m.return,Ne)}}f&&D&64&&d_(S),af(S,S.return);break;case 27:x_(S);case 26:case 5:uo(w,S,f),f&&m===null&&D&4&&m_(S),af(S,S.return);break;case 12:uo(w,S,f);break;case 31:uo(w,S,f),f&&D&4&&w_(w,S);break;case 13:uo(w,S,f),f&&D&4&&A_(w,S);break;case 22:S.memoizedState===null&&uo(w,S,f),af(S,S.return);break;case 30:break;default:uo(w,S,f)}o=o.sibling}}function Cg(i,o){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Wu(f))}function Ig(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Wu(i))}function la(i,o,f,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)C_(i,o,f,m),o=o.sibling}function C_(i,o,f,m){var w=o.flags;switch(o.tag){case 0:case 11:case 15:la(i,o,f,m),w&2048&&sf(9,o);break;case 1:la(i,o,f,m);break;case 3:la(i,o,f,m),w&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Wu(i)));break;case 12:if(w&2048){la(i,o,f,m),i=o.stateNode;try{var S=o.memoizedProps,D=S.id,W=S.onPostCommit;typeof W=="function"&&W(D,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(de){Wn(o,o.return,de)}}else la(i,o,f,m);break;case 31:la(i,o,f,m);break;case 13:la(i,o,f,m);break;case 23:break;case 22:S=o.stateNode,D=o.alternate,o.memoizedState!==null?S._visibility&2?la(i,o,f,m):of(i,o):S._visibility&2?la(i,o,f,m):(S._visibility|=2,jc(i,o,f,m,(o.subtreeFlags&10256)!==0||!1)),w&2048&&Cg(D,o);break;case 24:la(i,o,f,m),w&2048&&Ig(o.alternate,o);break;default:la(i,o,f,m)}}function jc(i,o,f,m,w){for(w=w&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var S=i,D=o,W=f,de=m,Ne=D.flags;switch(D.tag){case 0:case 11:case 15:jc(S,D,W,de,w),sf(8,D);break;case 23:break;case 22:var ze=D.stateNode;D.memoizedState!==null?ze._visibility&2?jc(S,D,W,de,w):of(S,D):(ze._visibility|=2,jc(S,D,W,de,w)),w&&Ne&2048&&Cg(D.alternate,D);break;case 24:jc(S,D,W,de,w),w&&Ne&2048&&Ig(D.alternate,D);break;default:jc(S,D,W,de,w)}o=o.sibling}}function of(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var f=i,m=o,w=m.flags;switch(m.tag){case 22:of(f,m),w&2048&&Cg(m.alternate,m);break;case 24:of(f,m),w&2048&&Ig(m.alternate,m);break;default:of(f,m)}o=o.sibling}}var lf=8192;function zc(i,o,f){if(i.subtreeFlags&lf)for(i=i.child;i!==null;)I_(i,o,f),i=i.sibling}function I_(i,o,f){switch(i.tag){case 26:zc(i,o,f),i.flags&lf&&i.memoizedState!==null&&JS(f,oa,i.memoizedState,i.memoizedProps);break;case 5:zc(i,o,f);break;case 3:case 4:var m=oa;oa=_h(i.stateNode.containerInfo),zc(i,o,f),oa=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=lf,lf=16777216,zc(i,o,f),lf=m):zc(i,o,f));break;default:zc(i,o,f)}}function b_(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function cf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];ti=m,N_(m,i)}b_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R_(i),i=i.sibling}function R_(i){switch(i.tag){case 0:case 11:case 15:cf(i),i.flags&2048&&Ko(9,i,i.return);break;case 3:cf(i);break;case 12:cf(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,sh(i)):cf(i);break;default:cf(i)}}function sh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var f=0;f<o.length;f++){var m=o[f];ti=m,N_(m,i)}b_(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ko(8,o,o.return),sh(o);break;case 22:f=o.stateNode,f._visibility&2&&(f._visibility&=-3,sh(o));break;default:sh(o)}i=i.sibling}}function N_(i,o){for(;ti!==null;){var f=ti;switch(f.tag){case 0:case 11:case 15:Ko(8,f,o);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Wu(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,ti=m;else e:for(f=i;ti!==null;){m=ti;var w=m.sibling,S=m.return;if(E_(m),m===f){ti=null;break e}if(w!==null){w.return=S,ti=w;break e}ti=S}}}var dS={getCacheForType:function(i){var o=fi(kr),f=o.data.get(i);return f===void 0&&(f=i(),o.data.set(i,f)),f},cacheSignal:function(){return fi(kr).controller.signal}},gS=typeof WeakMap=="function"?WeakMap:Map,Ln=0,nr=null,dn=null,pn=0,Gn=0,vs=null,Qo=!1,Gc=!1,bg=!1,fo=0,Sr=0,Zo=0,rc=0,Rg=0,ws=0,Wc=0,uf=null,rs=null,Ng=!1,ah=0,O_=0,oh=1/0,lh=null,Jo=null,Kr=0,$o=null,Xc=null,ho=0,Og=0,Dg=null,D_=null,ff=0,Mg=null;function As(){return(Ln&2)!==0&&pn!==0?pn&-pn:Se.T!==null?Ug():j()}function M_(){if(ws===0)if((pn&536870912)===0||Tn){var i=tn;tn<<=1,(tn&3932160)===0&&(tn=262144),ws=i}else ws=536870912;return i=ys.current,i!==null&&(i.flags|=32),ws}function is(i,o,f){(i===nr&&(Gn===2||Gn===9)||i.cancelPendingCommit!==null)&&(qc(i,0),el(i,pn,ws,!1)),Yi(i,f),((Ln&2)===0||i!==nr)&&(i===nr&&((Ln&2)===0&&(rc|=f),Sr===4&&el(i,pn,ws,!1)),Ca(i))}function L_(i,o,f){if((Ln&6)!==0)throw Error(r(327));var m=!f&&(o&127)===0&&(o&i.expiredLanes)===0||sr(i,o),w=m?xS(i,o):kg(i,o,!0),S=m;do{if(w===0){Gc&&!m&&el(i,o,0,!1);break}else{if(f=i.current.alternate,S&&!mS(f)){w=kg(i,o,!1),S=!1;continue}if(w===2){if(S=o,i.errorRecoveryDisabledLanes&S)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){o=D;e:{var W=i;w=uf;var de=W.current.memoizedState.isDehydrated;if(de&&(qc(W,D).flags|=256),D=kg(W,D,!1),D!==2){if(bg&&!de){W.errorRecoveryDisabledLanes|=S,rc|=S,w=4;break e}S=rs,rs=w,S!==null&&(rs===null?rs=S:rs.push.apply(rs,S))}w=D}if(S=!1,w!==2)continue}}if(w===1){qc(i,0),el(i,o,0,!0);break}e:{switch(m=i,S=w,S){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:el(m,o,ws,!Qo);break e;case 2:rs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(w=ah+300-At(),10<w)){if(el(m,o,ws,!Qo),Bi(m,0,!0)!==0)break e;ho=o,m.timeoutHandle=fy(k_.bind(null,m,f,rs,lh,Ng,o,ws,rc,Wc,Qo,S,"Throttled",-0,0),w);break e}k_(m,f,rs,lh,Ng,o,ws,rc,Wc,Qo,S,null,-0,0)}}break}while(!0);Ca(i)}function k_(i,o,f,m,w,S,D,W,de,Ne,ze,We,Me,Be){if(i.timeoutHandle=-1,We=o.subtreeFlags,We&8192||(We&16785408)===16785408){We={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},I_(o,S,We);var St=(S&62914560)===S?ah-At():(S&4194048)===S?O_-At():0;if(St=$S(We,St),St!==null){ho=S,i.cancelPendingCommit=St(z_.bind(null,i,o,S,f,m,w,D,W,de,ze,We,null,Me,Be)),el(i,S,D,!Ne);return}}z_(i,o,S,f,m,w,D,W,de)}function mS(i){for(var o=i;;){var f=o.tag;if((f===0||f===11||f===15)&&o.flags&16384&&(f=o.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var w=f[m],S=w.getSnapshot;w=w.value;try{if(!p(S(),w))return!1}catch{return!1}}if(f=o.child,o.subtreeFlags&16384&&f!==null)f.return=o,o=f;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function el(i,o,f,m){o&=~Rg,o&=~rc,i.suspendedLanes|=o,i.pingedLanes&=~o,m&&(i.warmLanes|=o),m=i.expirationTimes;for(var w=o;0<w;){var S=31-Pt(w),D=1<<S;m[S]=-1,w&=~D}f!==0&&ta(i,f,o)}function ch(){return(Ln&6)===0?(hf(0),!1):!0}function Lg(){if(dn!==null){if(Gn===0)var i=dn.return;else i=dn,to=Yl=null,Qd(i),Fc=null,qu=0,i=dn;for(;i!==null;)h_(i.alternate,i),i=i.return;dn=null}}function qc(i,o){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,kS(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),ho=0,Lg(),nr=i,dn=f=$a(i.current,null),pn=o,Gn=0,vs=null,Qo=!1,Gc=sr(i,o),bg=!1,Wc=ws=Rg=rc=Zo=Sr=0,rs=uf=null,Ng=!1,(o&8)!==0&&(o|=o&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=o;0<m;){var w=31-Pt(m),S=1<<w;o|=i[w],m&=~S}return fo=o,N0(),f}function P_(i,o){en=null,Se.H=tf,o===Pc||o===B0?(o=J2(),Gn=3):o===Bd?(o=J2(),Gn=4):Gn=o===hg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,vs=o,dn===null&&(Sr=1,J0(i,Hs(o,i.current)))}function F_(){var i=ys.current;return i===null?!0:(pn&4194048)===pn?Ws===null:(pn&62914560)===pn||(pn&536870912)!==0?i===Ws:!1}function B_(){var i=Se.H;return Se.H=tf,i===null?tf:i}function U_(){var i=Se.A;return Se.A=dS,i}function uh(){Sr=4,Qo||(pn&4194048)!==pn&&ys.current!==null||(Gc=!0),(Zo&134217727)===0&&(rc&134217727)===0||nr===null||el(nr,pn,ws,!1)}function kg(i,o,f){var m=Ln;Ln|=2;var w=B_(),S=U_();(nr!==i||pn!==o)&&(lh=null,qc(i,o)),o=!1;var D=Sr;e:do try{if(Gn!==0&&dn!==null){var W=dn,de=vs;switch(Gn){case 8:Lg(),D=6;break e;case 3:case 2:case 9:case 6:ys.current===null&&(o=!0);var Ne=Gn;if(Gn=0,vs=null,Yc(i,W,de,Ne),f&&Gc){D=0;break e}break;default:Ne=Gn,Gn=0,vs=null,Yc(i,W,de,Ne)}}pS(),D=Sr;break}catch(ze){P_(i,ze)}while(!0);return o&&i.shellSuspendCounter++,to=Yl=null,Ln=m,Se.H=w,Se.A=S,dn===null&&(nr=null,pn=0,N0()),D}function pS(){for(;dn!==null;)V_(dn)}function xS(i,o){var f=Ln;Ln|=2;var m=B_(),w=U_();nr!==i||pn!==o?(lh=null,oh=At()+500,qc(i,o)):Gc=sr(i,o);e:do try{if(Gn!==0&&dn!==null){o=dn;var S=vs;t:switch(Gn){case 1:Gn=0,vs=null,Yc(i,o,S,1);break;case 2:case 9:if(Q2(S)){Gn=0,vs=null,H_(o);break}o=function(){Gn!==2&&Gn!==9||nr!==i||(Gn=7),Ca(i)},S.then(o,o);break e;case 3:Gn=7;break e;case 4:Gn=5;break e;case 7:Q2(S)?(Gn=0,vs=null,H_(o)):(Gn=0,vs=null,Yc(i,o,S,7));break;case 5:var D=null;switch(dn.tag){case 26:D=dn.memoizedState;case 5:case 27:var W=dn;if(D?Cy(D):W.stateNode.complete){Gn=0,vs=null;var de=W.sibling;if(de!==null)dn=de;else{var Ne=W.return;Ne!==null?(dn=Ne,fh(Ne)):dn=null}break t}}Gn=0,vs=null,Yc(i,o,S,5);break;case 6:Gn=0,vs=null,Yc(i,o,S,6);break;case 8:Lg(),Sr=6;break e;default:throw Error(r(462))}}_S();break}catch(ze){P_(i,ze)}while(!0);return to=Yl=null,Se.H=m,Se.A=w,Ln=f,dn!==null?0:(nr=null,pn=0,N0(),Sr)}function _S(){for(;dn!==null&&!on();)V_(dn)}function V_(i){var o=u_(i.alternate,i,fo);i.memoizedProps=i.pendingProps,o===null?fh(i):dn=o}function H_(i){var o=i,f=o.alternate;switch(o.tag){case 15:case 0:o=i_(f,o,o.pendingProps,o.type,void 0,pn);break;case 11:o=i_(f,o,o.pendingProps,o.type.render,o.ref,pn);break;case 5:Qd(o);default:h_(f,o),o=dn=U2(o,fo),o=u_(f,o,fo)}i.memoizedProps=i.pendingProps,o===null?fh(i):dn=o}function Yc(i,o,f,m){to=Yl=null,Qd(o),Fc=null,qu=0;var w=o.return;try{if(aS(i,w,o,f,pn)){Sr=1,J0(i,Hs(f,i.current)),dn=null;return}}catch(S){if(w!==null)throw dn=w,S;Sr=1,J0(i,Hs(f,i.current)),dn=null;return}o.flags&32768?(Tn||m===1?i=!0:Gc||(pn&536870912)!==0?i=!1:(Qo=i=!0,(m===2||m===9||m===3||m===6)&&(m=ys.current,m!==null&&m.tag===13&&(m.flags|=16384))),j_(o,i)):fh(o)}function fh(i){var o=i;do{if((o.flags&32768)!==0){j_(o,Qo);return}i=o.return;var f=cS(o.alternate,o,fo);if(f!==null){dn=f;return}if(o=o.sibling,o!==null){dn=o;return}dn=o=i}while(o!==null);Sr===0&&(Sr=5)}function j_(i,o){do{var f=uS(i.alternate,i);if(f!==null){f.flags&=32767,dn=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!o&&(i=i.sibling,i!==null)){dn=i;return}dn=i=f}while(i!==null);Sr=6,dn=null}function z_(i,o,f,m,w,S,D,W,de){i.cancelPendingCommit=null;do hh();while(Kr!==0);if((Ln&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(S=o.lanes|o.childLanes,S|=Ad,Ti(i,f,S,D,W,de),i===nr&&(dn=nr=null,pn=0),Xc=o,$o=i,ho=f,Og=S,Dg=w,D_=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,wS(ln,function(){return Y_(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=Se.T,Se.T=null,w=Pe.p,Pe.p=2,D=Ln,Ln|=4;try{fS(i,o,f)}finally{Ln=D,Pe.p=w,Se.T=m}}Kr=1,G_(),W_(),X_()}}function G_(){if(Kr===1){Kr=0;var i=$o,o=Xc,f=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||f){f=Se.T,Se.T=null;var m=Pe.p;Pe.p=2;var w=Ln;Ln|=4;try{T_(o,i);var S=qg,D=B(i.containerInfo),W=S.focusedElem,de=S.selectionRange;if(D!==W&&W&&W.ownerDocument&&N(W.ownerDocument.documentElement,W)){if(de!==null&&G(W)){var Ne=de.start,ze=de.end;if(ze===void 0&&(ze=Ne),"selectionStart"in W)W.selectionStart=Ne,W.selectionEnd=Math.min(ze,W.value.length);else{var We=W.ownerDocument||document,Me=We&&We.defaultView||window;if(Me.getSelection){var Be=Me.getSelection(),St=W.textContent.length,Bt=Math.min(de.start,St),Jn=de.end===void 0?Bt:Math.min(de.end,St);!Be.extend&&Bt>Jn&&(D=Jn,Jn=Bt,Bt=D);var Ee=I(W,Bt),_e=I(W,Jn);if(Ee&&_e&&(Be.rangeCount!==1||Be.anchorNode!==Ee.node||Be.anchorOffset!==Ee.offset||Be.focusNode!==_e.node||Be.focusOffset!==_e.offset)){var be=We.createRange();be.setStart(Ee.node,Ee.offset),Be.removeAllRanges(),Bt>Jn?(Be.addRange(be),Be.extend(_e.node,_e.offset)):(be.setEnd(_e.node,_e.offset),Be.addRange(be))}}}}for(We=[],Be=W;Be=Be.parentNode;)Be.nodeType===1&&We.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<We.length;W++){var Ge=We[W];Ge.element.scrollLeft=Ge.left,Ge.element.scrollTop=Ge.top}}Th=!!Xg,qg=Xg=null}finally{Ln=w,Pe.p=m,Se.T=f}}i.current=o,Kr=2}}function W_(){if(Kr===2){Kr=0;var i=$o,o=Xc,f=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||f){f=Se.T,Se.T=null;var m=Pe.p;Pe.p=2;var w=Ln;Ln|=4;try{y_(i,o.alternate,o)}finally{Ln=w,Pe.p=m,Se.T=f}}Kr=3}}function X_(){if(Kr===4||Kr===3){Kr=0,Lt();var i=$o,o=Xc,f=ho,m=D_;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Kr=5:(Kr=0,Xc=$o=null,q_(i,i.pendingLanes));var w=i.pendingLanes;if(w===0&&(Jo=null),qr(f),o=o.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(vn,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=Se.T,w=Pe.p,Pe.p=2,Se.T=null;try{for(var S=i.onRecoverableError,D=0;D<m.length;D++){var W=m[D];S(W.value,{componentStack:W.stack})}}finally{Se.T=o,Pe.p=w}}(ho&3)!==0&&hh(),Ca(i),w=i.pendingLanes,(f&261930)!==0&&(w&42)!==0?i===Mg?ff++:(ff=0,Mg=i):ff=0,hf(0)}}function q_(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Wu(o)))}function hh(){return G_(),W_(),X_(),Y_()}function Y_(){if(Kr!==5)return!1;var i=$o,o=Og;Og=0;var f=qr(ho),m=Se.T,w=Pe.p;try{Pe.p=32>f?32:f,Se.T=null,f=Dg,Dg=null;var S=$o,D=ho;if(Kr=0,Xc=$o=null,ho=0,(Ln&6)!==0)throw Error(r(331));var W=Ln;if(Ln|=4,R_(S.current),C_(S,S.current,D,f),Ln=W,hf(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(vn,S)}catch{}return!0}finally{Pe.p=w,Se.T=m,q_(i,o)}}function K_(i,o,f){o=Hs(f,o),o=fg(i.stateNode,o,2),i=Xo(i,o,2),i!==null&&(Yi(i,2),Ca(i))}function Wn(i,o,f){if(i.tag===3)K_(i,i,f);else for(;o!==null;){if(o.tag===3){K_(o,i,f);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Jo===null||!Jo.has(m))){i=Hs(f,i),f=Qx(2),m=Xo(o,f,2),m!==null&&(Zx(f,m,o,i),Yi(m,2),Ca(m));break}}o=o.return}}function Pg(i,o,f){var m=i.pingCache;if(m===null){m=i.pingCache=new gS;var w=new Set;m.set(o,w)}else w=m.get(o),w===void 0&&(w=new Set,m.set(o,w));w.has(f)||(bg=!0,w.add(f),i=yS.bind(null,i,o,f),o.then(i,i))}function yS(i,o,f){var m=i.pingCache;m!==null&&m.delete(o),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,nr===i&&(pn&f)===f&&(Sr===4||Sr===3&&(pn&62914560)===pn&&300>At()-ah?(Ln&2)===0&&qc(i,0):Rg|=f,Wc===pn&&(Wc=0)),Ca(i)}function Q_(i,o){o===0&&(o=xr()),i=Wl(i,o),i!==null&&(Yi(i,o),Ca(i))}function ES(i){var o=i.memoizedState,f=0;o!==null&&(f=o.retryLane),Q_(i,f)}function vS(i,o){var f=0;switch(i.tag){case 31:case 13:var m=i.stateNode,w=i.memoizedState;w!==null&&(f=w.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(o),Q_(i,f)}function wS(i,o){return Sn(i,o)}var dh=null,Kc=null,Fg=!1,gh=!1,Bg=!1,tl=0;function Ca(i){i!==Kc&&i.next===null&&(Kc===null?dh=Kc=i:Kc=Kc.next=i),gh=!0,Fg||(Fg=!0,TS())}function hf(i,o){if(!Bg&&gh){Bg=!0;do for(var f=!1,m=dh;m!==null;){if(i!==0){var w=m.pendingLanes;if(w===0)var S=0;else{var D=m.suspendedLanes,W=m.pingedLanes;S=(1<<31-Pt(42|i)+1)-1,S&=w&~(D&~W),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,ey(m,S))}else S=pn,S=Bi(m,m===nr?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||sr(m,S)||(f=!0,ey(m,S));m=m.next}while(f);Bg=!1}}function AS(){Z_()}function Z_(){gh=Fg=!1;var i=0;tl!==0&&LS()&&(i=tl);for(var o=At(),f=null,m=dh;m!==null;){var w=m.next,S=J_(m,o);S===0?(m.next=null,f===null?dh=w:f.next=w,w===null&&(Kc=f)):(f=m,(i!==0||(S&3)!==0)&&(gh=!0)),m=w}Kr!==0&&Kr!==5||hf(i),tl!==0&&(tl=0)}function J_(i,o){for(var f=i.suspendedLanes,m=i.pingedLanes,w=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var D=31-Pt(S),W=1<<D,de=w[D];de===-1?((W&f)===0||(W&m)!==0)&&(w[D]=Ha(W,o)):de<=o&&(i.expiredLanes|=W),S&=~W}if(o=nr,f=pn,f=Bi(i,i===o?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,f===0||i===o&&(Gn===2||Gn===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&ve(m),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||sr(i,f)){if(o=f&-f,o===i.callbackPriority)return o;switch(m!==null&&ve(m),qr(f)){case 2:case 8:f=rr;break;case 32:f=ln;break;case 268435456:f=xa;break;default:f=ln}return m=$_.bind(null,i),f=Sn(f,m),i.callbackPriority=o,i.callbackNode=f,o}return m!==null&&m!==null&&ve(m),i.callbackPriority=2,i.callbackNode=null,2}function $_(i,o){if(Kr!==0&&Kr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(hh()&&i.callbackNode!==f)return null;var m=pn;return m=Bi(i,i===nr?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(L_(i,m,o),J_(i,At()),i.callbackNode!=null&&i.callbackNode===f?$_.bind(null,i):null)}function ey(i,o){if(hh())return null;L_(i,o,!0)}function TS(){PS(function(){(Ln&6)!==0?Sn(bt,AS):Z_()})}function Ug(){if(tl===0){var i=Lc;i===0&&(i=Ai,Ai<<=1,(Ai&261888)===0&&(Ai=256)),tl=i}return tl}function ty(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ya(""+i)}function ny(i,o){var f=o.ownerDocument.createElement("input");return f.name=o.name,f.value=o.value,i.id&&f.setAttribute("form",i.id),o.parentNode.insertBefore(f,o),i=new FormData(i),f.parentNode.removeChild(f),i}function SS(i,o,f,m,w){if(o==="submit"&&f&&f.stateNode===w){var S=ty((w[ne]||null).action),D=m.submitter;D&&(o=(o=D[ne]||null)?ty(o.formAction):D.getAttribute("formAction"),o!==null&&(S=o,D=null));var W=new ar("action","action",null,m,w);i.push({event:W,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(tl!==0){var de=D?ny(w,D):new FormData(w);sg(f,{pending:!0,data:de,method:w.method,action:S},null,de)}}else typeof S=="function"&&(W.preventDefault(),de=D?ny(w,D):new FormData(w),sg(f,{pending:!0,data:de,method:w.method,action:S},S,de))},currentTarget:w}]})}}for(var Vg=0;Vg<ju.length;Vg++){var Hg=ju[Vg],CS=Hg.toLowerCase(),IS=Hg[0].toUpperCase()+Hg.slice(1);aa(CS,"on"+IS)}aa($i,"onAnimationEnd"),aa(ci,"onAnimationIteration"),aa(Un,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(Yr,"onTransitionRun"),aa(zi,"onTransitionStart"),aa(Uo,"onTransitionCancel"),aa(Ja,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),Vt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(df));function ry(i,o){o=(o&4)!==0;for(var f=0;f<i.length;f++){var m=i[f],w=m.event;m=m.listeners;e:{var S=void 0;if(o)for(var D=m.length-1;0<=D;D--){var W=m[D],de=W.instance,Ne=W.currentTarget;if(W=W.listener,de!==S&&w.isPropagationStopped())break e;S=W,w.currentTarget=Ne;try{S(w)}catch(ze){R0(ze)}w.currentTarget=null,S=de}else for(D=0;D<m.length;D++){if(W=m[D],de=W.instance,Ne=W.currentTarget,W=W.listener,de!==S&&w.isPropagationStopped())break e;S=W,w.currentTarget=Ne;try{S(w)}catch(ze){R0(ze)}w.currentTarget=null,S=de}}}}function gn(i,o){var f=o[Ie];f===void 0&&(f=o[Ie]=new Set);var m=i+"__bubble";f.has(m)||(iy(o,i,2,!1),f.add(m))}function jg(i,o,f){var m=0;o&&(m|=4),iy(f,i,m,o)}var mh="_reactListening"+Math.random().toString(36).slice(2);function zg(i){if(!i[mh]){i[mh]=!0,Ve.forEach(function(f){f!=="selectionchange"&&(bS.has(f)||jg(f,!1,i),jg(f,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[mh]||(o[mh]=!0,jg("selectionchange",!1,o))}}function iy(i,o,f,m){switch(My(o)){case 2:var w=nC;break;case 8:w=rC;break;default:w=im}f=w.bind(null,o,f,i),w=void 0,!za||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(w=!0),m?w!==void 0?i.addEventListener(o,f,{capture:!0,passive:w}):i.addEventListener(o,f,!0):w!==void 0?i.addEventListener(o,f,{passive:w}):i.addEventListener(o,f,!1)}function Gg(i,o,f,m,w){var S=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var W=m.stateNode.containerInfo;if(W===w)break;if(D===4)for(D=m.return;D!==null;){var de=D.tag;if((de===3||de===4)&&D.stateNode.containerInfo===w)return;D=D.return}for(;W!==null;){if(D=$e(W),D===null)return;if(de=D.tag,de===5||de===6||de===26||de===27){m=S=D;continue e}W=W.parentNode}}m=m.return}Ea(function(){var Ne=S,ze=Qi(f),We=[];e:{var Me=b0.get(i);if(Me!==void 0){var Be=ar,St=i;switch(i){case"keypress":if(gs(f)===0)break e;case"keydown":case"keyup":Be=Ya;break;case"focusin":St="focus",Be=Xa;break;case"focusout":St="blur",Be=Xa;break;case"beforeblur":case"afterblur":Be=Xa;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Cn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=Wa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=R;break;case $i:case ci:case Un:Be=Qt;break;case Ja:Be=Z;break;case"scroll":case"scrollend":Be=Lo;break;case"wheel":Be=Fe;break;case"copy":case"cut":case"paste":Be=qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=hn;break;case"toggle":case"beforetoggle":Be=Wt}var Bt=(o&4)!==0,Jn=!Bt&&(i==="scroll"||i==="scrollend"),Ee=Bt?Me!==null?Me+"Capture":null:Me;Bt=[];for(var _e=Ne,be;_e!==null;){var Ge=_e;if(be=Ge.stateNode,Ge=Ge.tag,Ge!==5&&Ge!==26&&Ge!==27||be===null||Ee===null||(Ge=kt(_e,Ee),Ge!=null&&Bt.push(gf(_e,Ge,be))),Jn)break;_e=_e.return}0<Bt.length&&(Me=new Be(Me,St,null,f,ze),We.push({event:Me,listeners:Bt}))}}if((o&7)===0){e:{if(Me=i==="mouseover"||i==="pointerover",Be=i==="mouseout"||i==="pointerout",Me&&f!==ja&&(St=f.relatedTarget||f.fromElement)&&($e(St)||St[oe]))break e;if((Be||Me)&&(Me=ze.window===ze?ze:(Me=ze.ownerDocument)?Me.defaultView||Me.parentWindow:window,Be?(St=f.relatedTarget||f.toElement,Be=Ne,St=St?$e(St):null,St!==null&&(Jn=c(St),Bt=St.tag,St!==Jn||Bt!==5&&Bt!==27&&Bt!==6)&&(St=null)):(Be=null,St=Ne),Be!==St)){if(Bt=Cn,Ge="onMouseLeave",Ee="onMouseEnter",_e="mouse",(i==="pointerout"||i==="pointerover")&&(Bt=hn,Ge="onPointerLeave",Ee="onPointerEnter",_e="pointer"),Jn=Be==null?Me:tt(Be),be=St==null?Me:tt(St),Me=new Bt(Ge,_e+"leave",Be,f,ze),Me.target=Jn,Me.relatedTarget=be,Ge=null,$e(ze)===Ne&&(Bt=new Bt(Ee,_e+"enter",St,f,ze),Bt.target=be,Bt.relatedTarget=Jn,Ge=Bt),Jn=Ge,Be&&St)t:{for(Bt=RS,Ee=Be,_e=St,be=0,Ge=Ee;Ge;Ge=Bt(Ge))be++;Ge=0;for(var Ot=_e;Ot;Ot=Bt(Ot))Ge++;for(;0<be-Ge;)Ee=Bt(Ee),be--;for(;0<Ge-be;)_e=Bt(_e),Ge--;for(;be--;){if(Ee===_e||_e!==null&&Ee===_e.alternate){Bt=Ee;break t}Ee=Bt(Ee),_e=Bt(_e)}Bt=null}else Bt=null;Be!==null&&sy(We,Me,Be,Bt,!1),St!==null&&Jn!==null&&sy(We,Jn,St,Bt,!0)}}e:{if(Me=Ne?tt(Ne):window,Be=Me.nodeName&&Me.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Me.type==="file")var Nn=xs;else if(Hu(Me))if(I0)Nn=d;else{Nn=l;var Ct=s}else Be=Me.nodeName,!Be||Be.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Ne&&Fn(Ne.elementType)&&(Nn=xs):Nn=u;if(Nn&&(Nn=Nn(i,Ne))){ps(We,Nn,f,ze);break e}Ct&&Ct(i,Me,Ne),i==="focusout"&&Ne&&Me.type==="number"&&Ne.memoizedProps.value!=null&&re(Me,"number",Me.value)}switch(Ct=Ne?tt(Ne):window,i){case"focusin":(Hu(Ct)||Ct.contentEditable==="true")&&(ge=Ct,xe=Ne,Ae=null);break;case"focusout":Ae=xe=ge=null;break;case"mousedown":ke=!0;break;case"contextmenu":case"mouseup":case"dragend":ke=!1,st(We,f,ze);break;case"selectionchange":if(ae)break;case"keydown":case"keyup":st(We,f,ze)}var rn;if(An)e:{switch(i){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Bo?Ka(i,f)&&(xn="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(xn="onCompositionStart");xn&&(Bs&&f.locale!=="ko"&&(Bo||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Bo&&(rn=ra()):(hs=ze,ds="value"in hs?hs.value:hs.textContent,Bo=!0)),Ct=ph(Ne,xn),0<Ct.length&&(xn=new ks(xn,i,null,f,ze),We.push({event:xn,listeners:Ct}),rn?xn.data=rn:(rn=Us(f),rn!==null&&(xn.data=rn)))),(rn=Hi?wa(i,f):Ic(i,f))&&(xn=ph(Ne,"onBeforeInput"),0<xn.length&&(Ct=new ks("onBeforeInput","beforeinput",null,f,ze),We.push({event:Ct,listeners:xn}),Ct.data=rn)),SS(We,i,Ne,f,ze)}ry(We,o)})}function gf(i,o,f){return{instance:i,listener:o,currentTarget:f}}function ph(i,o){for(var f=o+"Capture",m=[];i!==null;){var w=i,S=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||S===null||(w=kt(i,f),w!=null&&m.unshift(gf(i,w,S)),w=kt(i,o),w!=null&&m.push(gf(i,w,S))),i.tag===3)return m;i=i.return}return[]}function RS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function sy(i,o,f,m,w){for(var S=o._reactName,D=[];f!==null&&f!==m;){var W=f,de=W.alternate,Ne=W.stateNode;if(W=W.tag,de!==null&&de===m)break;W!==5&&W!==26&&W!==27||Ne===null||(de=Ne,w?(Ne=kt(f,S),Ne!=null&&D.unshift(gf(f,Ne,de))):w||(Ne=kt(f,S),Ne!=null&&D.push(gf(f,Ne,de)))),f=f.return}D.length!==0&&i.push({event:o,listeners:D})}var NS=/\r\n?/g,OS=/\u0000|\uFFFD/g;function ay(i){return(typeof i=="string"?i:""+i).replace(NS,`
`).replace(OS,"")}function oy(i,o){return o=ay(o),ay(i)===o}function Zn(i,o,f,m,w,S){switch(f){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ci(i,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ci(i,""+m);break;case"className":oi(i,"class",m);break;case"tabIndex":oi(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":oi(i,f,m);break;case"style":It(i,m,S);break;case"data":if(o!=="object"){oi(i,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||f!=="href")){i.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=ya(""+m),i.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(o!=="input"&&Zn(i,o,"name",w.name,w,null),Zn(i,o,"formEncType",w.formEncType,w,null),Zn(i,o,"formMethod",w.formMethod,w,null),Zn(i,o,"formTarget",w.formTarget,w,null)):(Zn(i,o,"encType",w.encType,w,null),Zn(i,o,"method",w.method,w,null),Zn(i,o,"target",w.target,w,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(f);break}m=ya(""+m),i.setAttribute(f,m);break;case"onClick":m!=null&&(i.onclick=Ii);break;case"onScroll":m!=null&&gn("scroll",i);break;case"onScrollEnd":m!=null&&gn("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}f=ya(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""+m):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":m===!0?i.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(f,m):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(f,m):i.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(f):i.setAttribute(f,m);break;case"popover":gn("beforetoggle",i),gn("toggle",i),Lr(i,"popover",m);break;case"xlinkActuate":hr(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":hr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":hr(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":hr(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":hr(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":hr(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":hr(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":hr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":hr(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Lr(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ul.get(f)||f,Lr(i,f,m))}}function Wg(i,o,f,m,w,S){switch(f){case"style":It(i,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(w.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof m=="string"?Ci(i,m):(typeof m=="number"||typeof m=="bigint")&&Ci(i,""+m);break;case"onScroll":m!=null&&gn("scroll",i);break;case"onScrollEnd":m!=null&&gn("scrollend",i);break;case"onClick":m!=null&&(i.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(w=f.endsWith("Capture"),o=f.slice(2,w?f.length-7:void 0),S=i[ne]||null,S=S!=null?S[f]:null,typeof S=="function"&&i.removeEventListener(o,S,w),typeof m=="function")){typeof S!="function"&&S!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(o,m,w);break e}f in i?i[f]=m:m===!0?i.setAttribute(f,""):Lr(i,f,m)}}}function di(i,o,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",i),gn("load",i);var m=!1,w=!1,S;for(S in f)if(f.hasOwnProperty(S)){var D=f[S];if(D!=null)switch(S){case"src":m=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Zn(i,o,S,D,f,null)}}w&&Zn(i,o,"srcSet",f.srcSet,f,null),m&&Zn(i,o,"src",f.src,f,null);return;case"input":gn("invalid",i);var W=S=D=w=null,de=null,Ne=null;for(m in f)if(f.hasOwnProperty(m)){var ze=f[m];if(ze!=null)switch(m){case"name":w=ze;break;case"type":D=ze;break;case"checked":de=ze;break;case"defaultChecked":Ne=ze;break;case"value":S=ze;break;case"defaultValue":W=ze;break;case"children":case"dangerouslySetInnerHTML":if(ze!=null)throw Error(r(137,o));break;default:Zn(i,o,m,ze,f,null)}}Ce(i,S,W,de,Ne,D,w,!1);return;case"select":gn("invalid",i),m=D=S=null;for(w in f)if(f.hasOwnProperty(w)&&(W=f[w],W!=null))switch(w){case"value":S=W;break;case"defaultValue":D=W;break;case"multiple":m=W;default:Zn(i,o,w,W,f,null)}o=S,f=D,i.multiple=!!m,o!=null?Tt(i,!!m,o,!1):f!=null&&Tt(i,!!m,f,!0);return;case"textarea":gn("invalid",i),S=w=m=null;for(D in f)if(f.hasOwnProperty(D)&&(W=f[D],W!=null))switch(D){case"value":m=W;break;case"defaultValue":w=W;break;case"children":S=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(91));break;default:Zn(i,o,D,W,f,null)}Rr(i,m,w,S);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(m=f[de],m!=null))switch(de){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Zn(i,o,de,m,f,null)}return;case"dialog":gn("beforetoggle",i),gn("toggle",i),gn("cancel",i),gn("close",i);break;case"iframe":case"object":gn("load",i);break;case"video":case"audio":for(m=0;m<df.length;m++)gn(df[m],i);break;case"image":gn("error",i),gn("load",i);break;case"details":gn("toggle",i);break;case"embed":case"source":case"link":gn("error",i),gn("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in f)if(f.hasOwnProperty(Ne)&&(m=f[Ne],m!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:Zn(i,o,Ne,m,f,null)}return;default:if(Fn(o)){for(ze in f)f.hasOwnProperty(ze)&&(m=f[ze],m!==void 0&&Wg(i,o,ze,m,f,void 0));return}}for(W in f)f.hasOwnProperty(W)&&(m=f[W],m!=null&&Zn(i,o,W,m,f,null))}function DS(i,o,f,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,S=null,D=null,W=null,de=null,Ne=null,ze=null;for(Be in f){var We=f[Be];if(f.hasOwnProperty(Be)&&We!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":de=We;default:m.hasOwnProperty(Be)||Zn(i,o,Be,null,m,We)}}for(var Me in m){var Be=m[Me];if(We=f[Me],m.hasOwnProperty(Me)&&(Be!=null||We!=null))switch(Me){case"type":S=Be;break;case"name":w=Be;break;case"checked":Ne=Be;break;case"defaultChecked":ze=Be;break;case"value":D=Be;break;case"defaultValue":W=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(r(137,o));break;default:Be!==We&&Zn(i,o,Me,Be,m,We)}}yr(i,D,W,de,Ne,ze,S,w);return;case"select":Be=D=W=Me=null;for(S in f)if(de=f[S],f.hasOwnProperty(S)&&de!=null)switch(S){case"value":break;case"multiple":Be=de;default:m.hasOwnProperty(S)||Zn(i,o,S,null,m,de)}for(w in m)if(S=m[w],de=f[w],m.hasOwnProperty(w)&&(S!=null||de!=null))switch(w){case"value":Me=S;break;case"defaultValue":W=S;break;case"multiple":D=S;default:S!==de&&Zn(i,o,w,S,m,de)}o=W,f=D,m=Be,Me!=null?Tt(i,!!f,Me,!1):!!m!=!!f&&(o!=null?Tt(i,!!f,o,!0):Tt(i,!!f,f?[]:"",!1));return;case"textarea":Be=Me=null;for(W in f)if(w=f[W],f.hasOwnProperty(W)&&w!=null&&!m.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Zn(i,o,W,null,m,w)}for(D in m)if(w=m[D],S=f[D],m.hasOwnProperty(D)&&(w!=null||S!=null))switch(D){case"value":Me=w;break;case"defaultValue":Be=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:w!==S&&Zn(i,o,D,w,m,S)}Er(i,Me,Be);return;case"option":for(var St in f)if(Me=f[St],f.hasOwnProperty(St)&&Me!=null&&!m.hasOwnProperty(St))switch(St){case"selected":i.selected=!1;break;default:Zn(i,o,St,null,m,Me)}for(de in m)if(Me=m[de],Be=f[de],m.hasOwnProperty(de)&&Me!==Be&&(Me!=null||Be!=null))switch(de){case"selected":i.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:Zn(i,o,de,Me,m,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in f)Me=f[Bt],f.hasOwnProperty(Bt)&&Me!=null&&!m.hasOwnProperty(Bt)&&Zn(i,o,Bt,null,m,Me);for(Ne in m)if(Me=m[Ne],Be=f[Ne],m.hasOwnProperty(Ne)&&Me!==Be&&(Me!=null||Be!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,o));break;default:Zn(i,o,Ne,Me,m,Be)}return;default:if(Fn(o)){for(var Jn in f)Me=f[Jn],f.hasOwnProperty(Jn)&&Me!==void 0&&!m.hasOwnProperty(Jn)&&Wg(i,o,Jn,void 0,m,Me);for(ze in m)Me=m[ze],Be=f[ze],!m.hasOwnProperty(ze)||Me===Be||Me===void 0&&Be===void 0||Wg(i,o,ze,Me,m,Be);return}}for(var Ee in f)Me=f[Ee],f.hasOwnProperty(Ee)&&Me!=null&&!m.hasOwnProperty(Ee)&&Zn(i,o,Ee,null,m,Me);for(We in m)Me=m[We],Be=f[We],!m.hasOwnProperty(We)||Me===Be||Me==null&&Be==null||Zn(i,o,We,Me,m,Be)}function ly(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MS(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,f=performance.getEntriesByType("resource"),m=0;m<f.length;m++){var w=f[m],S=w.transferSize,D=w.initiatorType,W=w.duration;if(S&&W&&ly(D)){for(D=0,W=w.responseEnd,m+=1;m<f.length;m++){var de=f[m],Ne=de.startTime;if(Ne>W)break;var ze=de.transferSize,We=de.initiatorType;ze&&ly(We)&&(de=de.responseEnd,D+=ze*(de<W?1:(W-Ne)/(de-Ne)))}if(--m,o+=8*(S+D)/(w.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Xg=null,qg=null;function xh(i){return i.nodeType===9?i:i.ownerDocument}function cy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Yg(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kg=null;function LS(){var i=window.event;return i&&i.type==="popstate"?i===Kg?!1:(Kg=i,!0):(Kg=null,!1)}var fy=typeof setTimeout=="function"?setTimeout:void 0,kS=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,PS=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(i){return hy.resolve(null).then(i).catch(FS)}:fy;function FS(i){setTimeout(function(){throw i})}function nl(i){return i==="head"}function dy(i,o){var f=o,m=0;do{var w=f.nextSibling;if(i.removeChild(f),w&&w.nodeType===8)if(f=w.data,f==="/$"||f==="/&"){if(m===0){i.removeChild(w),$c(o);return}m--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")m++;else if(f==="html")mf(i.ownerDocument.documentElement);else if(f==="head"){f=i.ownerDocument.head,mf(f);for(var S=f.firstChild;S;){var D=S.nextSibling,W=S.nodeName;S[Re]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=D}}else f==="body"&&mf(i.ownerDocument.body);f=w}while(f);$c(o)}function gy(i,o){var f=i;i=0;do{var m=f.nextSibling;if(f.nodeType===1?o?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(o?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),m&&m.nodeType===8)if(f=m.data,f==="/$"){if(i===0)break;i--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||i++;f=m}while(f)}function Qg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var f=o;switch(o=o.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Qg(f),qe(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function BS(i,o,f,m){for(;i.nodeType===1;){var w=f;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[Re])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==w.rel||i.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||i.getAttribute("title")!==(w.title==null?null:w.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(w.src==null?null:w.src)||i.getAttribute("type")!==(w.type==null?null:w.type)||i.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var S=w.name==null?null:""+w.name;if(w.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=Xs(i.nextSibling),i===null)break}return null}function US(i,o,f){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=Xs(i.nextSibling),i===null))return null;return i}function my(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Xs(i.nextSibling),i===null))return null;return i}function Zg(i){return i.data==="$?"||i.data==="$~"}function Jg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function VS(i,o){var f=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||f.readyState!=="loading")o();else{var m=function(){o(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function Xs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var $g=null;function py(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"||f==="/&"){if(o===0)return Xs(i.nextSibling);o--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||o++}i=i.nextSibling}return null}function xy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(o===0)return i;o--}else f!=="/$"&&f!=="/&"||o++}i=i.previousSibling}return null}function _y(i,o,f){switch(o=xh(f),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function mf(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);qe(i)}var qs=new Map,yy=new Set;function _h(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var go=Pe.d;Pe.d={f:HS,r:jS,D:zS,C:GS,L:WS,m:XS,X:YS,S:qS,M:KS};function HS(){var i=go.f(),o=ch();return i||o}function jS(i){var o=et(i);o!==null&&o.tag===5&&o.type==="form"?Px(o):go.r(i)}var Qc=typeof document>"u"?null:document;function Ey(i,o,f){var m=Qc;if(m&&typeof o=="string"&&o){var w=nn(o);w='link[rel="'+i+'"][href="'+w+'"]',typeof f=="string"&&(w+='[crossorigin="'+f+'"]'),yy.has(w)||(yy.add(w),i={rel:i,crossOrigin:f,href:o},m.querySelector(w)===null&&(o=m.createElement("link"),di(o,"link",i),Et(o),m.head.appendChild(o)))}}function zS(i){go.D(i),Ey("dns-prefetch",i,null)}function GS(i,o){go.C(i,o),Ey("preconnect",i,o)}function WS(i,o,f){go.L(i,o,f);var m=Qc;if(m&&i&&o){var w='link[rel="preload"][as="'+nn(o)+'"]';o==="image"&&f&&f.imageSrcSet?(w+='[imagesrcset="'+nn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(w+='[imagesizes="'+nn(f.imageSizes)+'"]')):w+='[href="'+nn(i)+'"]';var S=w;switch(o){case"style":S=Zc(i);break;case"script":S=Jc(i)}qs.has(S)||(i=C({rel:"preload",href:o==="image"&&f&&f.imageSrcSet?void 0:i,as:o},f),qs.set(S,i),m.querySelector(w)!==null||o==="style"&&m.querySelector(pf(S))||o==="script"&&m.querySelector(xf(S))||(o=m.createElement("link"),di(o,"link",i),Et(o),m.head.appendChild(o)))}}function XS(i,o){go.m(i,o);var f=Qc;if(f&&i){var m=o&&typeof o.as=="string"?o.as:"script",w='link[rel="modulepreload"][as="'+nn(m)+'"][href="'+nn(i)+'"]',S=w;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Jc(i)}if(!qs.has(S)&&(i=C({rel:"modulepreload",href:i},o),qs.set(S,i),f.querySelector(w)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(xf(S)))return}m=f.createElement("link"),di(m,"link",i),Et(m),f.head.appendChild(m)}}}function qS(i,o,f){go.S(i,o,f);var m=Qc;if(m&&i){var w=ct(m).hoistableStyles,S=Zc(i);o=o||"default";var D=w.get(S);if(!D){var W={loading:0,preload:null};if(D=m.querySelector(pf(S)))W.loading=5;else{i=C({rel:"stylesheet",href:i,"data-precedence":o},f),(f=qs.get(S))&&em(i,f);var de=D=m.createElement("link");Et(de),di(de,"link",i),de._p=new Promise(function(Ne,ze){de.onload=Ne,de.onerror=ze}),de.addEventListener("load",function(){W.loading|=1}),de.addEventListener("error",function(){W.loading|=2}),W.loading|=4,yh(D,o,m)}D={type:"stylesheet",instance:D,count:1,state:W},w.set(S,D)}}}function YS(i,o){go.X(i,o);var f=Qc;if(f&&i){var m=ct(f).hoistableScripts,w=Jc(i),S=m.get(w);S||(S=f.querySelector(xf(w)),S||(i=C({src:i,async:!0},o),(o=qs.get(w))&&tm(i,o),S=f.createElement("script"),Et(S),di(S,"link",i),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(w,S))}}function KS(i,o){go.M(i,o);var f=Qc;if(f&&i){var m=ct(f).hoistableScripts,w=Jc(i),S=m.get(w);S||(S=f.querySelector(xf(w)),S||(i=C({src:i,async:!0,type:"module"},o),(o=qs.get(w))&&tm(i,o),S=f.createElement("script"),Et(S),di(S,"link",i),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(w,S))}}function vy(i,o,f,m){var w=(w=pe.current)?_h(w):null;if(!w)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(o=Zc(f.href),f=ct(w).hoistableStyles,m=f.get(o),m||(m={type:"style",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=Zc(f.href);var S=ct(w).hoistableStyles,D=S.get(i);if(D||(w=w.ownerDocument||w,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,D),(S=w.querySelector(pf(i)))&&!S._p&&(D.instance=S,D.state.loading=5),qs.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},qs.set(i,f),S||QS(w,i,f,D.state))),o&&m===null)throw Error(r(528,""));return D}if(o&&m!==null)throw Error(r(529,""));return null;case"script":return o=f.async,f=f.src,typeof f=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Jc(f),f=ct(w).hoistableScripts,m=f.get(o),m||(m={type:"script",instance:null,count:0,state:null},f.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Zc(i){return'href="'+nn(i)+'"'}function pf(i){return'link[rel="stylesheet"]['+i+"]"}function wy(i){return C({},i,{"data-precedence":i.precedence,precedence:null})}function QS(i,o,f,m){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=i.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),di(o,"link",f),Et(o),i.head.appendChild(o))}function Jc(i){return'[src="'+nn(i)+'"]'}function xf(i){return"script[async]"+i}function Ay(i,o,f){if(o.count++,o.instance===null)switch(o.type){case"style":var m=i.querySelector('style[data-href~="'+nn(f.href)+'"]');if(m)return o.instance=m,Et(m),m;var w=C({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),Et(m),di(m,"style",w),yh(m,f.precedence,i),o.instance=m;case"stylesheet":w=Zc(f.href);var S=i.querySelector(pf(w));if(S)return o.state.loading|=4,o.instance=S,Et(S),S;m=wy(f),(w=qs.get(w))&&em(m,w),S=(i.ownerDocument||i).createElement("link"),Et(S);var D=S;return D._p=new Promise(function(W,de){D.onload=W,D.onerror=de}),di(S,"link",m),o.state.loading|=4,yh(S,f.precedence,i),o.instance=S;case"script":return S=Jc(f.src),(w=i.querySelector(xf(S)))?(o.instance=w,Et(w),w):(m=f,(w=qs.get(S))&&(m=C({},f),tm(m,w)),i=i.ownerDocument||i,w=i.createElement("script"),Et(w),di(w,"link",m),i.head.appendChild(w),o.instance=w);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,yh(m,f.precedence,i));return o.instance}function yh(i,o,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=m.length?m[m.length-1]:null,S=w,D=0;D<m.length;D++){var W=m[D];if(W.dataset.precedence===o)S=W;else if(S!==w)break}S?S.parentNode.insertBefore(i,S.nextSibling):(o=f.nodeType===9?f.head:f,o.insertBefore(i,o.firstChild))}function em(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function tm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Eh=null;function Ty(i,o,f){if(Eh===null){var m=new Map,w=Eh=new Map;w.set(f,m)}else w=Eh,m=w.get(f),m||(m=new Map,w.set(f,m));if(m.has(i))return m;for(m.set(i,null),f=f.getElementsByTagName(i),w=0;w<f.length;w++){var S=f[w];if(!(S[Re]||S[ee]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var D=S.getAttribute(o)||"";D=i+D;var W=m.get(D);W?W.push(S):m.set(D,[S])}}return m}function Sy(i,o,f){i=i.ownerDocument||i,i.head.insertBefore(f,o==="title"?i.querySelector("head > title"):null)}function ZS(i,o,f){if(f===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Cy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function JS(i,o,f,m){if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var w=Zc(m.href),S=o.querySelector(pf(w));if(S){o=S._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=vh.bind(i),o.then(i,i)),f.state.loading|=4,f.instance=S,Et(S);return}S=o.ownerDocument||o,m=wy(m),(w=qs.get(w))&&em(m,w),S=S.createElement("link"),Et(S);var D=S;D._p=new Promise(function(W,de){D.onload=W,D.onerror=de}),di(S,"link",m),f.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(f,o),(o=f.state.preload)&&(f.state.loading&3)===0&&(i.count++,f=vh.bind(i),o.addEventListener("load",f),o.addEventListener("error",f))}}var nm=0;function $S(i,o){return i.stylesheets&&i.count===0&&Ah(i,i.stylesheets),0<i.count||0<i.imgCount?function(f){var m=setTimeout(function(){if(i.stylesheets&&Ah(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+o);0<i.imgBytes&&nm===0&&(nm=62500*MS());var w=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Ah(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>nm?50:800)+o);return i.unsuspend=f,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(w)}}:null}function vh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ah(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function Ah(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,o.forEach(eC,i),wh=null,vh.call(i))}function eC(i,o){if(!(o.state.loading&4)){var f=wh.get(i);if(f)var m=f.get(null);else{f=new Map,wh.set(i,f);for(var w=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<w.length;S++){var D=w[S];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),m=D)}m&&f.set(null,m)}w=o.instance,D=w.getAttribute("data-precedence"),S=f.get(D)||m,S===m&&f.set(null,w),f.set(D,w),this.count++,m=vh.bind(this),w.addEventListener("load",m),w.addEventListener("error",m),S?S.parentNode.insertBefore(w,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(w,i.firstChild)),o.state.loading|=4}}var _f={$$typeof:ie,Provider:null,Consumer:null,_currentValue:gt,_currentValue2:gt,_threadCount:0};function tC(i,o,f,m,w,S,D,W,de){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xr(0),this.hiddenUpdates=Xr(null),this.identifierPrefix=m,this.onUncaughtError=w,this.onCaughtError=S,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function Iy(i,o,f,m,w,S,D,W,de,Ne,ze,We){return i=new tC(i,o,f,D,de,Ne,ze,We,W),o=1,S===!0&&(o|=24),S=_s(3,null,null,o),i.current=S,S.stateNode=i,o=kd(),o.refCount++,i.pooledCache=o,o.refCount++,S.memoizedState={element:m,isDehydrated:f,cache:o},Ud(S),i}function by(i){return i?(i=Rc,i):Rc}function Ry(i,o,f,m,w,S){w=by(w),m.context===null?m.context=w:m.pendingContext=w,m=Wo(o),m.payload={element:f},S=S===void 0?null:S,S!==null&&(m.callback=S),f=Xo(i,m,o),f!==null&&(is(f,i,o),Ku(f,i,o))}function Ny(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<o?f:o}}function rm(i,o){Ny(i,o),(i=i.alternate)&&Ny(i,o)}function Oy(i){if(i.tag===13||i.tag===31){var o=Wl(i,67108864);o!==null&&is(o,i,67108864),rm(i,67108864)}}function Dy(i){if(i.tag===13||i.tag===31){var o=As();o=fr(o);var f=Wl(i,o);f!==null&&is(f,i,o),rm(i,o)}}var Th=!0;function nC(i,o,f,m){var w=Se.T;Se.T=null;var S=Pe.p;try{Pe.p=2,im(i,o,f,m)}finally{Pe.p=S,Se.T=w}}function rC(i,o,f,m){var w=Se.T;Se.T=null;var S=Pe.p;try{Pe.p=8,im(i,o,f,m)}finally{Pe.p=S,Se.T=w}}function im(i,o,f,m){if(Th){var w=sm(m);if(w===null)Gg(i,o,m,Sh,f),Ly(i,m);else if(sC(w,i,o,f,m))m.stopPropagation();else if(Ly(i,m),o&4&&-1<iC.indexOf(i)){for(;w!==null;){var S=et(w);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var D=Jr(S.pendingLanes);if(D!==0){var W=S;for(W.pendingLanes|=2,W.entangledLanes|=2;D;){var de=1<<31-Pt(D);W.entanglements[1]|=de,D&=~de}Ca(S),(Ln&6)===0&&(oh=At()+500,hf(0))}}break;case 31:case 13:W=Wl(S,2),W!==null&&is(W,S,2),ch(),rm(S,2)}if(S=sm(m),S===null&&Gg(i,o,m,Sh,f),S===w)break;w=S}w!==null&&m.stopPropagation()}else Gg(i,o,m,null,f)}}function sm(i){return i=Qi(i),am(i)}var Sh=null;function am(i){if(Sh=null,i=$e(i),i!==null){var o=c(i);if(o===null)i=null;else{var f=o.tag;if(f===13){if(i=h(o),i!==null)return i;i=null}else if(f===31){if(i=x(o),i!==null)return i;i=null}else if(f===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Sh=i,null}function My(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case bt:return 2;case rr:return 8;case ln:case jn:return 32;case xa:return 268435456;default:return 32}default:return 32}}var om=!1,rl=null,il=null,sl=null,yf=new Map,Ef=new Map,al=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ly(i,o){switch(i){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":yf.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ef.delete(o.pointerId)}}function vf(i,o,f,m,w,S){return i===null||i.nativeEvent!==S?(i={blockedOn:o,domEventName:f,eventSystemFlags:m,nativeEvent:S,targetContainers:[w]},o!==null&&(o=et(o),o!==null&&Oy(o)),i):(i.eventSystemFlags|=m,o=i.targetContainers,w!==null&&o.indexOf(w)===-1&&o.push(w),i)}function sC(i,o,f,m,w){switch(o){case"focusin":return rl=vf(rl,i,o,f,m,w),!0;case"dragenter":return il=vf(il,i,o,f,m,w),!0;case"mouseover":return sl=vf(sl,i,o,f,m,w),!0;case"pointerover":var S=w.pointerId;return yf.set(S,vf(yf.get(S)||null,i,o,f,m,w)),!0;case"gotpointercapture":return S=w.pointerId,Ef.set(S,vf(Ef.get(S)||null,i,o,f,m,w)),!0}return!1}function ky(i){var o=$e(i.target);if(o!==null){var f=c(o);if(f!==null){if(o=f.tag,o===13){if(o=h(f),o!==null){i.blockedOn=o,X(i.priority,function(){Dy(f)});return}}else if(o===31){if(o=x(f),o!==null){i.blockedOn=o,X(i.priority,function(){Dy(f)});return}}else if(o===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ch(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var f=sm(i.nativeEvent);if(f===null){f=i.nativeEvent;var m=new f.constructor(f.type,f);ja=m,f.target.dispatchEvent(m),ja=null}else return o=et(f),o!==null&&Oy(o),i.blockedOn=f,!1;o.shift()}return!0}function Py(i,o,f){Ch(i)&&f.delete(o)}function aC(){om=!1,rl!==null&&Ch(rl)&&(rl=null),il!==null&&Ch(il)&&(il=null),sl!==null&&Ch(sl)&&(sl=null),yf.forEach(Py),Ef.forEach(Py)}function Ih(i,o){i.blockedOn===o&&(i.blockedOn=null,om||(om=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aC)))}var bh=null;function Fy(i){bh!==i&&(bh=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){bh===i&&(bh=null);for(var o=0;o<i.length;o+=3){var f=i[o],m=i[o+1],w=i[o+2];if(typeof m!="function"){if(am(m||f)===null)continue;break}var S=et(f);S!==null&&(i.splice(o,3),o-=3,sg(S,{pending:!0,data:w,method:f.method,action:m},m,w))}}))}function $c(i){function o(de){return Ih(de,i)}rl!==null&&Ih(rl,i),il!==null&&Ih(il,i),sl!==null&&Ih(sl,i),yf.forEach(o),Ef.forEach(o);for(var f=0;f<al.length;f++){var m=al[f];m.blockedOn===i&&(m.blockedOn=null)}for(;0<al.length&&(f=al[0],f.blockedOn===null);)ky(f),f.blockedOn===null&&al.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var w=f[m],S=f[m+1],D=w[ne]||null;if(typeof S=="function")D||Fy(f);else if(D){var W=null;if(S&&S.hasAttribute("formAction")){if(w=S,D=S[ne]||null)W=D.formAction;else if(am(w)!==null)continue}else W=D.action;typeof W=="function"?f[m+1]=W:(f.splice(m,3),m-=3),Fy(f)}}}function By(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(D){return w=D})},focusReset:"manual",scroll:"manual"})}function o(){w!==null&&(w(),w=null),m||setTimeout(f,20)}function f(){if(!m&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,w=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(f,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),w!==null&&(w(),w=null)}}}function lm(i){this._internalRoot=i}Rh.prototype.render=lm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var f=o.current,m=As();Ry(f,m,i,o,null,null)},Rh.prototype.unmount=lm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ry(i.current,2,null,i,null,null),ch(),o[oe]=null}};function Rh(i){this._internalRoot=i}Rh.prototype.unstable_scheduleHydration=function(i){if(i){var o=j();i={blockedOn:null,target:i,priority:o};for(var f=0;f<al.length&&o!==0&&o<al[f].priority;f++);al.splice(f,0,i),f===0&&ky(i)}};var Uy=e.version;if(Uy!=="19.2.0")throw Error(r(527,Uy,"19.2.0"));Pe.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=_(o),i=i!==null?T(i):null,i=i===null?null:i.stateNode,i};var oC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Se,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nh.isDisabled&&Nh.supportsFiber)try{vn=Nh.inject(oC),nt=Nh}catch{}}return Af.createRoot=function(i,o){if(!a(i))throw Error(r(299));var f=!1,m="",w=Xx,S=qx,D=Yx;return o!=null&&(o.unstable_strictMode===!0&&(f=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(w=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError)),o=Iy(i,1,!1,null,null,f,m,null,w,S,D,By),i[oe]=o.current,zg(i),new lm(o)},Af.hydrateRoot=function(i,o,f){if(!a(i))throw Error(r(299));var m=!1,w="",S=Xx,D=qx,W=Yx,de=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(W=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),o=Iy(i,1,!0,o,f??null,m,w,de,S,D,W,By),o.context=by(null),f=o.current,m=As(),m=fr(m),w=Wo(m),w.callback=null,Xo(f,w,m),f=m,o.current.lanes=f,Yi(o,f),Ca(o),i[oe]=o.current,zg(i),new Rh(o)},Af.version="19.2.0",Af}var Ky;function _C(){if(Ky)return fm.exports;Ky=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),fm.exports=xC(),fm.exports}var yC=_C();const EC=mp(yC),vC=()=>{};var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},wC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[t++];e[r++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[t++],h=n[t++],x=n[t++],v=((a&7)<<18|(c&63)<<12|(h&63)<<6|x&63)-65536;e[r++]=String.fromCharCode(55296+(v>>10)),e[r++]=String.fromCharCode(56320+(v&1023))}else{const c=n[t++],h=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return e.join("")},Nw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const c=n[a],h=a+1<n.length,x=h?n[a+1]:0,v=a+2<n.length,_=v?n[a+2]:0,T=c>>2,C=(c&3)<<4|x>>4;let b=(x&15)<<2|_>>6,O=_&63;v||(O=64,h||(b=64)),r.push(t[T],t[C],t[b],t[O])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const c=t[n.charAt(a++)],x=a<n.length?t[n.charAt(a)]:0;++a;const _=a<n.length?t[n.charAt(a)]:64;++a;const C=a<n.length?t[n.charAt(a)]:64;if(++a,c==null||x==null||_==null||C==null)throw new AC;const b=c<<2|x>>4;if(r.push(b),_!==64){const O=x<<4&240|_>>2;if(r.push(O),C!==64){const U=_<<6&192|C;r.push(U)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class AC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TC=function(n){const e=Rw(n);return Nw.encodeByteArray(e,!0)},a1=function(n){return TC(n).replace(/\./g,"")},Ow=function(n){try{return Nw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=()=>SC().__FIREBASE_DEFAULTS__,IC=()=>{if(typeof process>"u"||typeof Qy>"u")return;const n=Qy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},bC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ow(n[1]);return e&&JSON.parse(e)},X1=()=>{try{return vC()||CC()||IC()||bC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dw=n=>{var e,t;return(t=(e=X1())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},RC=n=>{const e=Dw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Mw=()=>{var n;return(n=X1())==null?void 0:n.config},Lw=n=>{var e;return(e=X1())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[a1(JSON.stringify(t)),a1(JSON.stringify(h)),""].join(".")}const Mf={};function DC(){const n={prod:[],emulator:[]};for(const e of Object.keys(Mf))Mf[e]?n.emulator.push(e):n.prod.push(e);return n}function MC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zy=!1;function Pw(n,e){if(typeof window>"u"||typeof document>"u"||!Ru(window.location.host)||Mf[n]===e||Mf[n]||Zy)return;Mf[n]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=DC().prod.length>0;function h(){const b=document.getElementById(r);b&&b.remove()}function x(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function v(b,O){b.setAttribute("width","24"),b.setAttribute("id",O),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function _(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Zy=!0,h()},b}function T(b,O){b.setAttribute("id",O),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function C(){const b=MC(r),O=t("text"),U=document.getElementById(O)||document.createElement("span"),M=t("learnmore"),V=document.getElementById(M)||document.createElement("a"),le=t("preprendIcon"),ce=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ie=b.element;x(ie),T(V,M);const me=_();v(ce,le),ie.append(ce,U,V,me),document.body.appendChild(ie)}c?(U.innerText="Preview backend disconnected.",ce.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ce.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())}function kC(){var e;const n=(e=X1())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UC(){const n=Pi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VC(){return!kC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HC(){try{return typeof indexedDB=="object"}catch{return!1}}function jC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="FirebaseError";class Ro extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zC,Object.setPrototypeOf(this,Ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,c0.prototype.create)}}class c0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],h=c?GC(c,r):"Error",x=`${this.serviceName}: ${h} (${a}).`;return new Ro(a,x,r)}}function GC(n,e){return n.replace(WC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const WC=/\{\$([^}]+)}/g;function XC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const c=n[a],h=e[a];if(Jy(c)&&Jy(h)){if(!uc(c,h))return!1}else if(c!==h)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Jy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,c]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function Cf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function qC(n,e){const t=new YC(n,e);return t.subscribe.bind(t)}class YC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");KC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=mm),a.error===void 0&&(a.error=mm),a.complete===void 0&&(a.complete=mm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(n){return n&&n._delegate?n._delegate:n}class fc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new NC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JC(e))try{this.getOrInitializeService({instanceIdentifier:ic})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});r.resolve(c)}catch{}}}}clearInstance(e=ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ic){return this.instances.has(e)}getOptions(e=ic){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,h]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(c);r===x&&h.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const c=this.instances.get(r);return c&&e(c,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ic){return this.component?this.component.multipleInstances?e:ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZC(n){return n===ic?void 0:n}function JC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(_n||(_n={}));const eI={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},tI=_n.INFO,nI={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},rI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=nI[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=tI,this._logHandler=rI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...e),this._logHandler(this,_n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...e),this._logHandler(this,_n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...e),this._logHandler(this,_n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...e),this._logHandler(this,_n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...e),this._logHandler(this,_n.ERROR,...e)}}const iI=(n,e)=>e.some(t=>n instanceof t);let $y,eE;function sI(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aI(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fw=new WeakMap,Pm=new WeakMap,Bw=new WeakMap,pm=new WeakMap,_p=new WeakMap;function oI(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",h)},c=()=>{t(xl(n.result)),a()},h=()=>{r(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Fw.set(t,n)}).catch(()=>{}),_p.set(e,n),e}function lI(n){if(Pm.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",h),n.removeEventListener("abort",h)},c=()=>{t(),a()},h=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",h),n.addEventListener("abort",h)});Pm.set(n,e)}let Fm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Pm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cI(n){Fm=n(Fm)}function uI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(xm(this),e,...t);return Bw.set(r,e.sort?e.sort():[e]),xl(r)}:aI().includes(n)?function(...e){return n.apply(xm(this),e),xl(Fw.get(this))}:function(...e){return xl(n.apply(xm(this),e))}}function fI(n){return typeof n=="function"?uI(n):(n instanceof IDBTransaction&&lI(n),iI(n,sI())?new Proxy(n,Fm):n)}function xl(n){if(n instanceof IDBRequest)return oI(n);if(pm.has(n))return pm.get(n);const e=fI(n);return e!==n&&(pm.set(n,e),_p.set(e,n)),e}const xm=n=>_p.get(n);function hI(n,e,{blocked:t,upgrade:r,blocking:a,terminated:c}={}){const h=indexedDB.open(n,e),x=xl(h);return r&&h.addEventListener("upgradeneeded",v=>{r(xl(h.result),v.oldVersion,v.newVersion,xl(h.transaction),v)}),t&&h.addEventListener("blocked",v=>t(v.oldVersion,v.newVersion,v)),x.then(v=>{c&&v.addEventListener("close",()=>c()),a&&v.addEventListener("versionchange",_=>a(_.oldVersion,_.newVersion,_))}).catch(()=>{}),x}const dI=["get","getKey","getAll","getAllKeys","count"],gI=["put","add","delete","clear"],_m=new Map;function tE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(_m.get(e))return _m.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=gI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||dI.includes(t)))return;const c=async function(h,...x){const v=this.transaction(h,a?"readwrite":"readonly");let _=v.store;return r&&(_=_.index(x.shift())),(await Promise.all([_[t](...x),a&&v.done]))[0]};return _m.set(e,c),c}cI(n=>({...n,get:(e,t,r)=>tE(e,t)||n.get(e,t,r),has:(e,t)=>!!tE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function pI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bm="@firebase/app",nE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new xp("@firebase/app"),xI="@firebase/app-compat",_I="@firebase/analytics-compat",yI="@firebase/analytics",EI="@firebase/app-check-compat",vI="@firebase/app-check",wI="@firebase/auth",AI="@firebase/auth-compat",TI="@firebase/database",SI="@firebase/data-connect",CI="@firebase/database-compat",II="@firebase/functions",bI="@firebase/functions-compat",RI="@firebase/installations",NI="@firebase/installations-compat",OI="@firebase/messaging",DI="@firebase/messaging-compat",MI="@firebase/performance",LI="@firebase/performance-compat",kI="@firebase/remote-config",PI="@firebase/remote-config-compat",FI="@firebase/storage",BI="@firebase/storage-compat",UI="@firebase/firestore",VI="@firebase/ai",HI="@firebase/firestore-compat",jI="firebase",zI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="[DEFAULT]",GI={[Bm]:"fire-core",[xI]:"fire-core-compat",[yI]:"fire-analytics",[_I]:"fire-analytics-compat",[vI]:"fire-app-check",[EI]:"fire-app-check-compat",[wI]:"fire-auth",[AI]:"fire-auth-compat",[TI]:"fire-rtdb",[SI]:"fire-data-connect",[CI]:"fire-rtdb-compat",[II]:"fire-fn",[bI]:"fire-fn-compat",[RI]:"fire-iid",[NI]:"fire-iid-compat",[OI]:"fire-fcm",[DI]:"fire-fcm-compat",[MI]:"fire-perf",[LI]:"fire-perf-compat",[kI]:"fire-rc",[PI]:"fire-rc-compat",[FI]:"fire-gcs",[BI]:"fire-gcs-compat",[UI]:"fire-fst",[HI]:"fire-fst-compat",[VI]:"fire-vertex","fire-js":"fire-js",[jI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new Map,WI=new Map,Vm=new Map;function rE(n,e){try{n.container.addComponent(e)}catch(t){wo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Eu(n){const e=n.name;if(Vm.has(e))return wo.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,n);for(const t of o1.values())rE(t,n);for(const t of WI.values())rE(t,n);return!0}function yp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_l=new c0("app","Firebase",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _l.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=zI;function Uw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Um,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw _l.create("bad-app-name",{appName:String(a)});if(t||(t=Mw()),!t)throw _l.create("no-options");const c=o1.get(a);if(c){if(uc(t,c.options)&&uc(r,c.config))return c;throw _l.create("duplicate-app",{appName:a})}const h=new $C(a);for(const v of Vm.values())h.addComponent(v);const x=new qI(t,r,h);return o1.set(a,x),x}function Ep(n=Um){const e=o1.get(n);if(!e&&n===Um&&Mw())return Uw();if(!e)throw _l.create("no-app",{appName:n});return e}function yl(n,e,t){let r=GI[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${r}" with version "${e}":`];a&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wo.warn(h.join(" "));return}Eu(new fc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebase-heartbeat-database",KI=1,Xf="firebase-heartbeat-store";let ym=null;function Vw(){return ym||(ym=hI(YI,KI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xf)}catch(t){console.warn(t)}}}}).catch(n=>{throw _l.create("idb-open",{originalErrorMessage:n.message})})),ym}async function QI(n){try{const t=(await Vw()).transaction(Xf),r=await t.objectStore(Xf).get(Hw(n));return await t.done,r}catch(e){if(e instanceof Ro)wo.warn(e.message);else{const t=_l.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wo.warn(t.message)}}}async function iE(n,e){try{const r=(await Vw()).transaction(Xf,"readwrite");await r.objectStore(Xf).put(e,Hw(n)),await r.done}catch(t){if(t instanceof Ro)wo.warn(t.message);else{const r=_l.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});wo.warn(r.message)}}}function Hw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=1024,JI=30;class $I{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tb(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=sE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>JI){const h=nb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sE(),{heartbeatsToSend:r,unsentEntries:a}=eb(this._heartbeatsCache.heartbeats),c=a1(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return wo.warn(t),""}}}function sE(){return new Date().toISOString().substring(0,10)}function eb(n,e=ZI){const t=[];let r=n.slice();for(const a of n){const c=t.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),aE(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),aE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class tb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HC()?jC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await QI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function aE(n){return a1(JSON.stringify({version:2,heartbeats:n})).length}function nb(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(n){Eu(new fc("platform-logger",e=>new mI(e),"PRIVATE")),Eu(new fc("heartbeat",e=>new $I(e),"PRIVATE")),yl(Bm,nE,n),yl(Bm,nE,"esm2020"),yl("fire-js","")}rb("");function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ib=jw,zw=new c0("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new xp("@firebase/auth");function sb(n,...e){l1.logLevel<=_n.WARN&&l1.warn(`Auth (${Nu}): ${n}`,...e)}function Kh(n,...e){l1.logLevel<=_n.ERROR&&l1.error(`Auth (${Nu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(n,...e){throw vp(n,...e)}function Oa(n,...e){return vp(n,...e)}function Gw(n,e,t){const r={...ib(),[e]:t};return new c0("auth","Firebase",r).create(e,{appName:n.name})}function Da(n){return Gw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vp(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zw.create(n,...e)}function Ht(n,e,...t){if(!n)throw vp(e,...t)}function po(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kh(e),new Error(e)}function Ao(n,e){n||po(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function ab(){return oE()==="http:"||oE()==="https:"}function oE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ab()||FC()||"connection"in navigator)?navigator.onLine:!0}function lb(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ao(t>e,"Short delay should be less than long delay!"),this.isMobile=LC()||BC()}get(){return ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,e){Ao(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;po("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;po("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;po("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fb=new f0(3e4,6e4);function Ml(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function No(n,e,t,r,a={}){return Xw(n,a,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const x=u0({key:n.config.apiKey,...h}).slice(1),v=await n._getAdditionalHeaders();v["Content-Type"]="application/json",n.languageCode&&(v["X-Firebase-Locale"]=n.languageCode);const _={method:e,headers:v,...c};return PC()||(_.referrerPolicy="no-referrer"),n.emulatorConfig&&Ru(n.emulatorConfig.host)&&(_.credentials="include"),Ww.fetch()(await qw(n,n.config.apiHost,t,x),_)})}async function Xw(n,e,t){n._canInitEmulator=!1;const r={...cb,...e};try{const a=new db(n),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw Dh(n,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const x=c.ok?h.errorMessage:h.error.message,[v,_]=x.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(n,"credential-already-in-use",h);if(v==="EMAIL_EXISTS")throw Dh(n,"email-already-in-use",h);if(v==="USER_DISABLED")throw Dh(n,"user-disabled",h);const T=r[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Gw(n,T,_);ma(n,T)}}catch(a){if(a instanceof Ro)throw a;ma(n,"network-request-failed",{message:String(a)})}}async function h0(n,e,t,r,a={}){const c=await No(n,e,t,r,a);return"mfaPendingCredential"in c&&ma(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function qw(n,e,t,r){const a=`${e}${t}?${r}`,c=n,h=c.config.emulator?wp(n.config,a):`${n.config.apiScheme}://${a}`;return ub.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function hb(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class db{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Oa(this.auth,"network-request-failed")),fb.get())})}}function Dh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Oa(n,e,r);return a.customData._tokenResponse=t,a}function lE(n){return n!==void 0&&n.enterprise!==void 0}class gb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hb(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mb(n,e){return No(n,"GET","/v2/recaptchaConfig",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(n,e){return No(n,"POST","/v1/accounts:delete",e)}async function c1(n,e){return No(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xb(n,e=!1){const t=Gr(n),r=await t.getIdToken(e),a=Ap(r);Ht(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,h=c==null?void 0:c.sign_in_provider;return{claims:a,token:r,authTime:Lf(Em(a.auth_time)),issuedAtTime:Lf(Em(a.iat)),expirationTime:Lf(Em(a.exp)),signInProvider:h||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Em(n){return Number(n)*1e3}function Ap(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ow(t);return a?JSON.parse(a):(Kh("Failed to decode base64 JWT payload"),null)}catch(a){return Kh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function cE(n){const e=Ap(n);return Ht(e,"internal-error"),Ht(typeof e.exp<"u","internal-error"),Ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ro&&_b(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function _b({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lf(this.lastLoginAt),this.creationTime=Lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(n){var C;const e=n.auth,t=await n.getIdToken(),r=await vu(n,c1(e,{idToken:t}));Ht(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const c=(C=a.providerUserInfo)!=null&&C.length?Yw(a.providerUserInfo):[],h=vb(n.providerData,c),x=n.isAnonymous,v=!(n.email&&a.passwordHash)&&!(h!=null&&h.length),_=x?v:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new jm(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,T)}async function Eb(n){const e=Gr(n);await u1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vb(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function Yw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(n,e){const t=await Xw(n,{},async()=>{const r=u0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=n.config,h=await qw(n,a,"/v1/token",`key=${c}`),x=await n._getAdditionalHeaders();x["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:x,body:r};return n.emulatorConfig&&Ru(n.emulatorConfig.host)&&(v.credentials="include"),Ww.fetch()(h,v)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Ab(n,e){return No(n,"POST","/v2/accounts:revokeToken",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ht(e.idToken,"internal-error"),Ht(typeof e.idToken<"u","internal-error"),Ht(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ht(e.length!==0,"internal-error");const t=cE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:c}=await wb(e,t);this.updateTokensAndExpiration(r,a,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:c}=t,h=new fu;return r&&(Ht(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),a&&(Ht(typeof a=="string","internal-error",{appName:e}),h.accessToken=a),c&&(Ht(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fu,this.toJSON())}_performRefresh(){return po("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(n,e){Ht(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ha{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new yb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await vu(this,this.stsTokenManager.getToken(this.auth,e));return Ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xb(this,e)}reload(){return Eb(this)}_assign(e){this!==e&&(Ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ha({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await u1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(Da(this.auth));const e=await this.getIdToken();return await vu(this,pb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,h=t.photoURL??void 0,x=t.tenantId??void 0,v=t._redirectEventId??void 0,_=t.createdAt??void 0,T=t.lastLoginAt??void 0,{uid:C,emailVerified:b,isAnonymous:O,providerData:U,stsTokenManager:M}=t;Ht(C&&M,e,"internal-error");const V=fu.fromJSON(this.name,M);Ht(typeof C=="string",e,"internal-error"),ll(r,e.name),ll(a,e.name),Ht(typeof b=="boolean",e,"internal-error"),Ht(typeof O=="boolean",e,"internal-error"),ll(c,e.name),ll(h,e.name),ll(x,e.name),ll(v,e.name),ll(_,e.name),ll(T,e.name);const le=new ha({uid:C,auth:e,email:a,emailVerified:b,displayName:r,isAnonymous:O,photoURL:h,phoneNumber:c,tenantId:x,stsTokenManager:V,createdAt:_,lastLoginAt:T});return U&&Array.isArray(U)&&(le.providerData=U.map(ce=>({...ce}))),v&&(le._redirectEventId=v),le}static async _fromIdTokenResponse(e,t,r=!1){const a=new fu;a.updateFromServerResponse(t);const c=new ha({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await u1(c),c}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ht(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Yw(a.providerUserInfo):[],h=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),x=new fu;x.updateFromIdToken(r);const v=new ha({uid:a.localId,auth:e,stsTokenManager:x,isAnonymous:h}),_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new jm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(v,_),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;function xo(n){Ao(n instanceof Function,"Expected a class definition");let e=uE.get(n);return e?(Ao(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,uE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kw.type="NONE";const fE=Kw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}class hu{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:c}=this.auth;this.fullUserKey=Qh(this.userKey,a.apiKey,c),this.fullPersistenceKey=Qh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await c1(this.auth,{idToken:e}).catch(()=>{});return t?ha._fromGetAccountInfoResponse(this.auth,t,e):null}return ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new hu(xo(fE),e,r);const a=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let c=a[0]||xo(fE);const h=Qh(r,e.config.apiKey,e.name);let x=null;for(const _ of t)try{const T=await _._get(h);if(T){let C;if(typeof T=="string"){const b=await c1(e,{idToken:T}).catch(()=>{});if(!b)break;C=await ha._fromGetAccountInfoResponse(e,b,T)}else C=ha._fromJSON(e,T);_!==c&&(x=C),c=_;break}}catch{}const v=a.filter(_=>_._shouldAllowMigration);return!c._shouldAllowMigration||!v.length?new hu(c,e,r):(c=v[0],x&&await c._set(h,x.toJSON()),await Promise.all(t.map(async _=>{if(_!==c)try{await _._remove(h)}catch{}})),new hu(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tA(e))return"Blackberry";if(nA(e))return"Webos";if(Zw(e))return"Safari";if((e.includes("chrome/")||Jw(e))&&!e.includes("edge/"))return"Chrome";if(eA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Qw(n=Pi()){return/firefox\//i.test(n)}function Zw(n=Pi()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jw(n=Pi()){return/crios\//i.test(n)}function $w(n=Pi()){return/iemobile/i.test(n)}function eA(n=Pi()){return/android/i.test(n)}function tA(n=Pi()){return/blackberry/i.test(n)}function nA(n=Pi()){return/webos/i.test(n)}function Tp(n=Pi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Tb(n=Pi()){var e;return Tp(n)&&!!((e=window.navigator)!=null&&e.standalone)}function Sb(){return UC()&&document.documentMode===10}function rA(n=Pi()){return Tp(n)||eA(n)||nA(n)||tA(n)||/windows phone/i.test(n)||$w(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n,e=[]){let t;switch(n){case"Browser":t=hE(Pi());break;case"Worker":t=`${hE(Pi())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((h,x)=>{try{const v=e(c);h(v)}catch(v){x(v)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(n,e={}){return No(n,"GET","/v2/passwordPolicy",Ml(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=6;class Rb{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dE(this),this.idTokenSubscription=new dE(this),this.beforeStateQueue=new Cb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xo(t)),this._initializationPromise=this.queue(async()=>{var r,a,c;if(!this._deleted&&(this.persistenceManager=await hu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await c1(this,{idToken:e}),r=await ha._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Rs(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(x=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(x,x))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(c=this.redirectUser)==null?void 0:c._redirectEventId,x=r==null?void 0:r._redirectEventId,v=await this.tryRedirectSignIn(e);(!h||h===x)&&(v!=null&&v.user)&&(r=v.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(h){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await u1(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(Da(this));const t=e?Gr(e):null;return t&&Ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(Da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(Da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ib(this),t=new Rb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new c0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ab(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xo(e)||this._popupRedirectResolver;Ht(t,this,"argument-error"),this.redirectPersistenceManager=await hu.create(this,[xo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let h=!1;const x=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ht(x,this,"internal-error"),x.then(()=>{h||c(this.currentUser)}),typeof t=="function"){const v=e.addObserver(t,r,a);return()=>{h=!0,v()}}else{const v=e.addObserver(t);return()=>{h=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&sb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ll(n){return Gr(n)}class dE{constructor(e){this.auth=e,this.observer=null,this.addObserver=qC(t=>this.observer=t)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ob(n){q1=n}function sA(n){return q1.loadJS(n)}function Db(){return q1.recaptchaEnterpriseScript}function Mb(){return q1.gapiScript}function Lb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class kb{constructor(){this.enterprise=new Pb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Pb{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Fb="recaptcha-enterprise",aA="NO_RECAPTCHA";class Bb{constructor(e){this.type=Fb,this.auth=Ll(e)}async verify(e="verify",t=!1){async function r(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,x)=>{mb(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)x(new Error("recaptcha Enterprise site key undefined"));else{const _=new gb(v);return c.tenantId==null?c._agentRecaptchaConfig=_:c._tenantRecaptchaConfigs[c.tenantId]=_,h(_.siteKey)}}).catch(v=>{x(v)})})}function a(c,h,x){const v=window.grecaptcha;lE(v)?v.enterprise.ready(()=>{v.enterprise.execute(c,{action:e}).then(_=>{h(_)}).catch(()=>{h(aA)})}):x(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kb().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(x=>{if(!t&&lE(window.grecaptcha))a(x,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let v=Db();v.length!==0&&(v+=x),sA(v).then(()=>{a(x,c,h)}).catch(_=>{h(_)})}}).catch(x=>{h(x)})})}}async function gE(n,e,t,r=!1,a=!1){const c=new Bb(n);let h;if(a)h=aA;else try{h=await c.verify(t)}catch{h=await c.verify(t,!0)}const x={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in x){const v=x.phoneEnrollmentInfo.phoneNumber,_=x.phoneEnrollmentInfo.recaptchaToken;Object.assign(x,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in x){const v=x.phoneSignInInfo.recaptchaToken;Object.assign(x,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return x}return r?Object.assign(x,{captchaResp:h}):Object.assign(x,{captchaResponse:h}),Object.assign(x,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(x,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),x}async function zm(n,e,t,r,a){var c;if((c=n._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await gE(n,e,t,t==="getOobCode");return r(n,h)}else return r(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const x=await gE(n,e,t,t==="getOobCode");return r(n,x)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e){const t=yp(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(uc(c,e??{}))return a;ma(a,"already-initialized")}return t.initialize({options:e})}function Vb(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(xo);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Hb(n,e,t){const r=Ll(n);Ht(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,c=oA(e),{host:h,port:x}=jb(e),v=x===null?"":`:${x}`,_={url:`${c}//${h}${v}/`},T=Object.freeze({host:h,port:x,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ht(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ht(uc(_,r.config.emulator)&&uc(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=_,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Ru(h)?(kw(`${c}//${h}${v}`),Pw("Auth",!0)):zb()}function oA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function jb(n){const e=oA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const c=a[1];return{host:c,port:mE(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:mE(h)}}}function mE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function zb(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return po("not implemented")}_getIdTokenResponse(e){return po("not implemented")}_linkToIdToken(e,t){return po("not implemented")}_getReauthenticationResolver(e){return po("not implemented")}}async function Gb(n,e){return No(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(n,e){return h0(n,"POST","/v1/accounts:signInWithPassword",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(n,e){return h0(n,"POST","/v1/accounts:signInWithEmailLink",Ml(n,e))}async function qb(n,e){return h0(n,"POST","/v1/accounts:signInWithEmailLink",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf extends Sp{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new qf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new qf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,t,"signInWithPassword",Wb);case"emailLink":return Xb(e,{email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,r,"signUpPassword",Gb);case"emailLink":return qb(e,{idToken:t,email:this._email,oobCode:this._password});default:ma(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n,e){return h0(n,"POST","/v1/accounts:signInWithIdp",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="http://localhost";class hc extends Sp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ma("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...c}=t;if(!r||!a)return null;const h=new hc(r,a);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return du(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,du(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,du(e,t)}buildRequest(){const e={requestUri:Yb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=u0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qb(n){const e=Sf(Cf(n)).link,t=e?Sf(Cf(e)).deep_link_id:null,r=Sf(Cf(n)).deep_link_id;return(r?Sf(Cf(r)).link:null)||r||t||e||n}class Cp{constructor(e){const t=Sf(Cf(e)),r=t.apiKey??null,a=t.oobCode??null,c=Kb(t.mode??null);Ht(r&&a&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Qb(e);try{return new Cp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this.providerId=Ou.PROVIDER_ID}static credential(e,t){return qf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Cp.parseLink(t);return Ht(r,"argument-error"),qf._fromEmailAndCode(e,r.code,r.tenantId)}}Ou.PROVIDER_ID="password";Ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends lA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends d0{constructor(){super("facebook.com")}static credential(e){return hc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ul.credential(e.oauthAccessToken)}catch{return null}}}ul.FACEBOOK_SIGN_IN_METHOD="facebook.com";ul.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends d0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hc._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fl.credential(t,r)}catch{return null}}}fl.GOOGLE_SIGN_IN_METHOD="google.com";fl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends d0{constructor(){super("github.com")}static credential(e){return hc._fromParams({providerId:hl.PROVIDER_ID,signInMethod:hl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hl.credentialFromTaggedObject(e)}static credentialFromError(e){return hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hl.credential(e.oauthAccessToken)}catch{return null}}}hl.GITHUB_SIGN_IN_METHOD="github.com";hl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends d0{constructor(){super("twitter.com")}static credential(e,t){return hc._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return dl.credential(t,r)}catch{return null}}}dl.TWITTER_SIGN_IN_METHOD="twitter.com";dl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(n,e){return h0(n,"POST","/v1/accounts:signUp",Ml(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const c=await ha._fromIdTokenResponse(e,r,a),h=pE(r);return new To({user:c,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=pE(r);return new To({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function pE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(n){var a;if(Rs(n.app))return Promise.reject(Da(n));const e=Ll(n);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new To({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await cA(e,{returnSecureToken:!0}),r=await To._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1 extends Ro{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,f1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new f1(e,t,r,a)}}function uA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?f1._fromErrorAndOperation(n,c,e,r):c})}async function Jb(n,e,t=!1){const r=await vu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $b(n,e,t=!1){const{auth:r}=n;if(Rs(r.app))return Promise.reject(Da(r));const a="reauthenticate";try{const c=await vu(n,uA(r,a,e,n),t);Ht(c.idToken,r,"internal-error");const h=Ap(c.idToken);Ht(h,r,"internal-error");const{sub:x}=h;return Ht(n.uid===x,r,"user-mismatch"),To._forOperation(n,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ma(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,e,t=!1){if(Rs(n.app))return Promise.reject(Da(n));const r="signIn",a=await uA(n,r,e),c=await To._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(c.user),c}async function e8(n,e){return fA(Ll(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hA(n){const e=Ll(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function t8(n,e,t){if(Rs(n.app))return Promise.reject(Da(n));const r=Ll(n),h=await zm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cA).catch(v=>{throw v.code==="auth/password-does-not-meet-requirements"&&hA(n),v}),x=await To._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(x.user),x}function n8(n,e,t){return Rs(n.app)?Promise.reject(Da(n)):e8(Gr(n),Ou.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hA(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(n,e){return No(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Gr(n),c={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await vu(r,r8(r.auth,c));r.displayName=h.displayName||null,r.photoURL=h.photoUrl||null;const x=r.providerData.find(({providerId:v})=>v==="password");x&&(x.displayName=r.displayName,x.photoURL=r.photoURL),await r._updateTokensIfNecessary(h)}function s8(n,e,t,r){return Gr(n).onIdTokenChanged(e,t,r)}function a8(n,e,t){return Gr(n).beforeAuthStateChanged(e,t)}function o8(n,e,t,r){return Gr(n).onAuthStateChanged(e,t,r)}function l8(n){return Gr(n).signOut()}const h1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(h1,"1"),this.storage.removeItem(h1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=1e3,u8=10;class gA extends dA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,x,v)=>{this.notifyListeners(h,v)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);Sb()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,u8):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},c8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gA.type="LOCAL";const f8=gA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA extends dA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mA.type="SESSION";const pA=mA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Y1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:c}=t.data,h=this.handlersMap[a];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const x=Array.from(h).map(async _=>_(t.origin,c)),v=await h8(x);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:v})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Y1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,h;return new Promise((x,v)=>{const _=Ip("",20);a.port1.start();const T=setTimeout(()=>{v(new Error("unsupported_event"))},r);h={messageChannel:a,onMessage(C){const b=C;if(b.data.eventId===_)switch(b.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),x(b.data.response);break;default:clearTimeout(T),clearTimeout(c),v(new Error("invalid_response"));break}}},this.handlers.add(h),a.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[a.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(){return window}function g8(n){Ma().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof Ma().WorkerGlobalScope<"u"&&typeof Ma().importScripts=="function"}async function m8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function x8(){return xA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firebaseLocalStorageDb",_8=1,d1="firebaseLocalStorage",yA="fbase_key";class g0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function K1(n,e){return n.transaction([d1],e?"readwrite":"readonly").objectStore(d1)}function y8(){const n=indexedDB.deleteDatabase(_A);return new g0(n).toPromise()}function Gm(){const n=indexedDB.open(_A,_8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(d1,{keyPath:yA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(d1)?e(r):(r.close(),await y8(),e(await Gm()))})})}async function xE(n,e,t){const r=K1(n,!0).put({[yA]:e,value:t});return new g0(r).toPromise()}async function E8(n,e){const t=K1(n,!1).get(e),r=await new g0(t).toPromise();return r===void 0?null:r.value}function _E(n,e){const t=K1(n,!0).delete(e);return new g0(t).toPromise()}const v8=800,w8=3;class EA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>w8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Y1._getInstance(x8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await m8(),!this.activeServiceWorker)return;this.sender=new d8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||p8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gm();return await xE(e,h1,"1"),await _E(e,h1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>E8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_E(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=K1(a,!1).getAll();return new g0(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EA.type="LOCAL";const A8=EA;new f0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(n,e){return e?xo(e):(Ht(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Sp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return du(e,this._buildIdpRequest())}_linkToIdToken(e,t){return du(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return du(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function S8(n){return fA(n.auth,new bp(n),n.bypassAuthState)}function C8(n){const{auth:e,user:t}=n;return Ht(t,e,"internal-error"),$b(t,new bp(n),n.bypassAuthState)}async function I8(n){const{auth:e,user:t}=n;return Ht(t,e,"internal-error"),Jb(t,new bp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t,r,a,c=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:c,error:h,type:x}=e;if(h){this.reject(h);return}const v={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(x)(v))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S8;case"linkViaPopup":case"linkViaRedirect":return I8;case"reauthViaPopup":case"reauthViaRedirect":return C8;default:ma(this.auth,"internal-error")}}resolve(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8=new f0(2e3,1e4);class lu extends vA{constructor(e,t,r,a,c){super(e,t,a,c),this.provider=r,this.authWindow=null,this.pollId=null,lu.currentPopupAction&&lu.currentPopupAction.cancel(),lu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ht(e,this.auth,"internal-error"),e}async onExecution(){Ao(this.filter.length===1,"Popup operations only handle one event");const e=Ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b8.get())};e()}}lu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8="pendingRedirect",Zh=new Map;class N8 extends vA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Zh.get(this.auth._key());if(!e){try{const r=await O8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zh.set(this.auth._key(),e)}return this.bypassAuthState||Zh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O8(n,e){const t=L8(e),r=M8(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function D8(n,e){Zh.set(n._key(),e)}function M8(n){return xo(n._redirectPersistence)}function L8(n){return Qh(R8,n.config.apiKey,n.name)}async function k8(n,e,t=!1){if(Rs(n.app))return Promise.reject(Da(n));const r=Ll(n),a=T8(r,e),h=await new N8(r,a,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=600*1e3;class F8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wA(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Oa(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P8&&this.cachedEventUids.clear(),this.cachedEventUids.has(yE(e))}saveEventToCache(e){this.cachedEventUids.add(yE(e)),this.lastProcessedEventTime=Date.now()}}function yE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function B8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(n,e={}){return No(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H8=/^https?/;async function j8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await U8(n);for(const t of e)try{if(z8(t))return}catch{}ma(n,"unauthorized-domain")}function z8(n){const e=Hm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!H8.test(t))return!1;if(V8.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=new f0(3e4,6e4);function EE(){const n=Ma().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function W8(n){return new Promise((e,t)=>{var a,c,h;function r(){EE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EE(),t(Oa(n,"network-request-failed"))},timeout:G8.get()})}if((c=(a=Ma().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((h=Ma().gapi)!=null&&h.load)r();else{const x=Lb("iframefcb");return Ma()[x]=()=>{gapi.load?r():t(Oa(n,"network-request-failed"))},sA(`${Mb()}?onload=${x}`).catch(v=>t(v))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function X8(n){return Jh=Jh||W8(n),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=new f0(5e3,15e3),Y8="__/auth/iframe",K8="emulator/auth/iframe",Q8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function J8(n){const e=n.config;Ht(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wp(e,K8):`https://${n.config.authDomain}/${Y8}`,r={apiKey:e.apiKey,appName:n.name,v:Nu},a=Z8.get(n.config.apiHost);a&&(r.eid=a);const c=n._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${u0(r).slice(1)}`}async function $8(n){const e=await X8(n),t=Ma().gapi;return Ht(t,n,"internal-error"),e.open({where:document.body,url:J8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q8,dontclear:!0},r=>new Promise(async(a,c)=>{await r.restyle({setHideOnLeave:!1});const h=Oa(n,"network-request-failed"),x=Ma().setTimeout(()=>{c(h)},q8.get());function v(){Ma().clearTimeout(x),a(r)}r.ping(v).then(v,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t6=500,n6=600,r6="_blank",i6="http://localhost";class vE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s6(n,e,t,r=t6,a=n6){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let x="";const v={...e6,width:r.toString(),height:a.toString(),top:c,left:h},_=Pi().toLowerCase();t&&(x=Jw(_)?r6:t),Qw(_)&&(e=e||i6,v.scrollbars="yes");const T=Object.entries(v).reduce((b,[O,U])=>`${b}${O}=${U},`,"");if(Tb(_)&&x!=="_self")return a6(e||"",x),new vE(null);const C=window.open(e||"",x,T);Ht(C,n,"popup-blocked");try{C.focus()}catch{}return new vE(C)}function a6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="__/auth/handler",l6="emulator/auth/handler",c6=encodeURIComponent("fac");async function wE(n,e,t,r,a,c){Ht(n.config.authDomain,n,"auth-domain-config-required"),Ht(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Nu,eventId:a};if(e instanceof lA){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",XC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,C]of Object.entries({}))h[T]=C}if(e instanceof d0){const T=e.getScopes().filter(C=>C!=="");T.length>0&&(h.scopes=T.join(","))}n.tenantId&&(h.tid=n.tenantId);const x=h;for(const T of Object.keys(x))x[T]===void 0&&delete x[T];const v=await n._getAppCheckToken(),_=v?`#${c6}=${encodeURIComponent(v)}`:"";return`${u6(n)}?${u0(x).slice(1)}${_}`}function u6({config:n}){return n.emulator?wp(n,l6):`https://${n.authDomain}/${o6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class f6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pA,this._completeRedirectFn=k8,this._overrideRedirectResult=D8}async _openPopup(e,t,r,a){var h;Ao((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const c=await wE(e,t,r,Hm(),a);return s6(e,c,Ip())}async _openRedirect(e,t,r,a){await this._originValidation(e);const c=await wE(e,t,r,Hm(),a);return g8(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Ao(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $8(e),r=new F8(e);return t.register("authEvent",a=>(Ht(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vm,{type:vm},a=>{var h;const c=(h=a==null?void 0:a[0])==null?void 0:h[vm];c!==void 0&&t(!!c),ma(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=j8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rA()||Zw()||Tp()}}const h6=f6;var AE="@firebase/auth",TE="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m6(n){Eu(new fc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:x}=r.options;Ht(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const v={apiKey:h,authDomain:x,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iA(n)},_=new Nb(r,a,c,v);return Vb(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Eu(new fc("auth-internal",e=>{const t=Ll(e.getProvider("auth").getImmediate());return(r=>new d6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yl(AE,TE,g6(n)),yl(AE,TE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=300,x6=Lw("authIdTokenMaxAge")||p6;let SE=null;const _6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>x6)return;const a=t==null?void 0:t.token;SE!==a&&(SE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function y6(n=Ep()){const e=yp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Ub(n,{popupRedirectResolver:h6,persistence:[A8,f8,pA]}),r=Lw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=_6(c.toString());a8(t,h,()=>h(t.currentUser)),s8(t,x=>h(x))}}const a=Dw("auth");return a&&Hb(t,`http://${a}`),t}function E6(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}Ob({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const c=Oa("internal-error");c.customData=a,t(c)},r.type="text/javascript",r.charset="UTF-8",E6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m6("Browser");var v6="firebase",w6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yl(v6,w6,"app");var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var El,AA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,H){function P(){}P.prototype=H.prototype,k.F=H.prototype,k.prototype=new P,k.prototype.constructor=k,k.D=function(te,K,J){for(var Y=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)Y[dt-2]=arguments[dt];return H.prototype[K].apply(te,Y)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,H,P){P||(P=0);const te=Array(16);if(typeof H=="string")for(var K=0;K<16;++K)te[K]=H.charCodeAt(P++)|H.charCodeAt(P++)<<8|H.charCodeAt(P++)<<16|H.charCodeAt(P++)<<24;else for(K=0;K<16;++K)te[K]=H[P++]|H[P++]<<8|H[P++]<<16|H[P++]<<24;H=k.g[0],P=k.g[1],K=k.g[2];let J=k.g[3],Y;Y=H+(J^P&(K^J))+te[0]+3614090360&4294967295,H=P+(Y<<7&4294967295|Y>>>25),Y=J+(K^H&(P^K))+te[1]+3905402710&4294967295,J=H+(Y<<12&4294967295|Y>>>20),Y=K+(P^J&(H^P))+te[2]+606105819&4294967295,K=J+(Y<<17&4294967295|Y>>>15),Y=P+(H^K&(J^H))+te[3]+3250441966&4294967295,P=K+(Y<<22&4294967295|Y>>>10),Y=H+(J^P&(K^J))+te[4]+4118548399&4294967295,H=P+(Y<<7&4294967295|Y>>>25),Y=J+(K^H&(P^K))+te[5]+1200080426&4294967295,J=H+(Y<<12&4294967295|Y>>>20),Y=K+(P^J&(H^P))+te[6]+2821735955&4294967295,K=J+(Y<<17&4294967295|Y>>>15),Y=P+(H^K&(J^H))+te[7]+4249261313&4294967295,P=K+(Y<<22&4294967295|Y>>>10),Y=H+(J^P&(K^J))+te[8]+1770035416&4294967295,H=P+(Y<<7&4294967295|Y>>>25),Y=J+(K^H&(P^K))+te[9]+2336552879&4294967295,J=H+(Y<<12&4294967295|Y>>>20),Y=K+(P^J&(H^P))+te[10]+4294925233&4294967295,K=J+(Y<<17&4294967295|Y>>>15),Y=P+(H^K&(J^H))+te[11]+2304563134&4294967295,P=K+(Y<<22&4294967295|Y>>>10),Y=H+(J^P&(K^J))+te[12]+1804603682&4294967295,H=P+(Y<<7&4294967295|Y>>>25),Y=J+(K^H&(P^K))+te[13]+4254626195&4294967295,J=H+(Y<<12&4294967295|Y>>>20),Y=K+(P^J&(H^P))+te[14]+2792965006&4294967295,K=J+(Y<<17&4294967295|Y>>>15),Y=P+(H^K&(J^H))+te[15]+1236535329&4294967295,P=K+(Y<<22&4294967295|Y>>>10),Y=H+(K^J&(P^K))+te[1]+4129170786&4294967295,H=P+(Y<<5&4294967295|Y>>>27),Y=J+(P^K&(H^P))+te[6]+3225465664&4294967295,J=H+(Y<<9&4294967295|Y>>>23),Y=K+(H^P&(J^H))+te[11]+643717713&4294967295,K=J+(Y<<14&4294967295|Y>>>18),Y=P+(J^H&(K^J))+te[0]+3921069994&4294967295,P=K+(Y<<20&4294967295|Y>>>12),Y=H+(K^J&(P^K))+te[5]+3593408605&4294967295,H=P+(Y<<5&4294967295|Y>>>27),Y=J+(P^K&(H^P))+te[10]+38016083&4294967295,J=H+(Y<<9&4294967295|Y>>>23),Y=K+(H^P&(J^H))+te[15]+3634488961&4294967295,K=J+(Y<<14&4294967295|Y>>>18),Y=P+(J^H&(K^J))+te[4]+3889429448&4294967295,P=K+(Y<<20&4294967295|Y>>>12),Y=H+(K^J&(P^K))+te[9]+568446438&4294967295,H=P+(Y<<5&4294967295|Y>>>27),Y=J+(P^K&(H^P))+te[14]+3275163606&4294967295,J=H+(Y<<9&4294967295|Y>>>23),Y=K+(H^P&(J^H))+te[3]+4107603335&4294967295,K=J+(Y<<14&4294967295|Y>>>18),Y=P+(J^H&(K^J))+te[8]+1163531501&4294967295,P=K+(Y<<20&4294967295|Y>>>12),Y=H+(K^J&(P^K))+te[13]+2850285829&4294967295,H=P+(Y<<5&4294967295|Y>>>27),Y=J+(P^K&(H^P))+te[2]+4243563512&4294967295,J=H+(Y<<9&4294967295|Y>>>23),Y=K+(H^P&(J^H))+te[7]+1735328473&4294967295,K=J+(Y<<14&4294967295|Y>>>18),Y=P+(J^H&(K^J))+te[12]+2368359562&4294967295,P=K+(Y<<20&4294967295|Y>>>12),Y=H+(P^K^J)+te[5]+4294588738&4294967295,H=P+(Y<<4&4294967295|Y>>>28),Y=J+(H^P^K)+te[8]+2272392833&4294967295,J=H+(Y<<11&4294967295|Y>>>21),Y=K+(J^H^P)+te[11]+1839030562&4294967295,K=J+(Y<<16&4294967295|Y>>>16),Y=P+(K^J^H)+te[14]+4259657740&4294967295,P=K+(Y<<23&4294967295|Y>>>9),Y=H+(P^K^J)+te[1]+2763975236&4294967295,H=P+(Y<<4&4294967295|Y>>>28),Y=J+(H^P^K)+te[4]+1272893353&4294967295,J=H+(Y<<11&4294967295|Y>>>21),Y=K+(J^H^P)+te[7]+4139469664&4294967295,K=J+(Y<<16&4294967295|Y>>>16),Y=P+(K^J^H)+te[10]+3200236656&4294967295,P=K+(Y<<23&4294967295|Y>>>9),Y=H+(P^K^J)+te[13]+681279174&4294967295,H=P+(Y<<4&4294967295|Y>>>28),Y=J+(H^P^K)+te[0]+3936430074&4294967295,J=H+(Y<<11&4294967295|Y>>>21),Y=K+(J^H^P)+te[3]+3572445317&4294967295,K=J+(Y<<16&4294967295|Y>>>16),Y=P+(K^J^H)+te[6]+76029189&4294967295,P=K+(Y<<23&4294967295|Y>>>9),Y=H+(P^K^J)+te[9]+3654602809&4294967295,H=P+(Y<<4&4294967295|Y>>>28),Y=J+(H^P^K)+te[12]+3873151461&4294967295,J=H+(Y<<11&4294967295|Y>>>21),Y=K+(J^H^P)+te[15]+530742520&4294967295,K=J+(Y<<16&4294967295|Y>>>16),Y=P+(K^J^H)+te[2]+3299628645&4294967295,P=K+(Y<<23&4294967295|Y>>>9),Y=H+(K^(P|~J))+te[0]+4096336452&4294967295,H=P+(Y<<6&4294967295|Y>>>26),Y=J+(P^(H|~K))+te[7]+1126891415&4294967295,J=H+(Y<<10&4294967295|Y>>>22),Y=K+(H^(J|~P))+te[14]+2878612391&4294967295,K=J+(Y<<15&4294967295|Y>>>17),Y=P+(J^(K|~H))+te[5]+4237533241&4294967295,P=K+(Y<<21&4294967295|Y>>>11),Y=H+(K^(P|~J))+te[12]+1700485571&4294967295,H=P+(Y<<6&4294967295|Y>>>26),Y=J+(P^(H|~K))+te[3]+2399980690&4294967295,J=H+(Y<<10&4294967295|Y>>>22),Y=K+(H^(J|~P))+te[10]+4293915773&4294967295,K=J+(Y<<15&4294967295|Y>>>17),Y=P+(J^(K|~H))+te[1]+2240044497&4294967295,P=K+(Y<<21&4294967295|Y>>>11),Y=H+(K^(P|~J))+te[8]+1873313359&4294967295,H=P+(Y<<6&4294967295|Y>>>26),Y=J+(P^(H|~K))+te[15]+4264355552&4294967295,J=H+(Y<<10&4294967295|Y>>>22),Y=K+(H^(J|~P))+te[6]+2734768916&4294967295,K=J+(Y<<15&4294967295|Y>>>17),Y=P+(J^(K|~H))+te[13]+1309151649&4294967295,P=K+(Y<<21&4294967295|Y>>>11),Y=H+(K^(P|~J))+te[4]+4149444226&4294967295,H=P+(Y<<6&4294967295|Y>>>26),Y=J+(P^(H|~K))+te[11]+3174756917&4294967295,J=H+(Y<<10&4294967295|Y>>>22),Y=K+(H^(J|~P))+te[2]+718787259&4294967295,K=J+(Y<<15&4294967295|Y>>>17),Y=P+(J^(K|~H))+te[9]+3951481745&4294967295,k.g[0]=k.g[0]+H&4294967295,k.g[1]=k.g[1]+(K+(Y<<21&4294967295|Y>>>11))&4294967295,k.g[2]=k.g[2]+K&4294967295,k.g[3]=k.g[3]+J&4294967295}r.prototype.v=function(k,H){H===void 0&&(H=k.length);const P=H-this.blockSize,te=this.C;let K=this.h,J=0;for(;J<H;){if(K==0)for(;J<=P;)a(this,k,J),J+=this.blockSize;if(typeof k=="string"){for(;J<H;)if(te[K++]=k.charCodeAt(J++),K==this.blockSize){a(this,te),K=0;break}}else for(;J<H;)if(te[K++]=k[J++],K==this.blockSize){a(this,te),K=0;break}}this.h=K,this.o+=H},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var H=1;H<k.length-8;++H)k[H]=0;H=this.o*8;for(var P=k.length-8;P<k.length;++P)k[P]=H&255,H/=256;for(this.v(k),k=Array(16),H=0,P=0;P<4;++P)for(let te=0;te<32;te+=8)k[H++]=this.g[P]>>>te&255;return k};function c(k,H){var P=x;return Object.prototype.hasOwnProperty.call(P,k)?P[k]:P[k]=H(k)}function h(k,H){this.h=H;const P=[];let te=!0;for(let K=k.length-1;K>=0;K--){const J=k[K]|0;te&&J==H||(P[K]=J,te=!1)}this.g=P}var x={};function v(k){return-128<=k&&k<128?c(k,function(H){return new h([H|0],H<0?-1:0)}):new h([k|0],k<0?-1:0)}function _(k){if(isNaN(k)||!isFinite(k))return C;if(k<0)return V(_(-k));const H=[];let P=1;for(let te=0;k>=P;te++)H[te]=k/P|0,P*=4294967296;return new h(H,0)}function T(k,H){if(k.length==0)throw Error("number format error: empty string");if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(k.charAt(0)=="-")return V(T(k.substring(1),H));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=_(Math.pow(H,8));let te=C;for(let J=0;J<k.length;J+=8){var K=Math.min(8,k.length-J);const Y=parseInt(k.substring(J,J+K),H);K<8?(K=_(Math.pow(H,K)),te=te.j(K).add(_(Y))):(te=te.j(P),te=te.add(_(Y)))}return te}var C=v(0),b=v(1),O=v(16777216);n=h.prototype,n.m=function(){if(M(this))return-V(this).m();let k=0,H=1;for(let P=0;P<this.g.length;P++){const te=this.i(P);k+=(te>=0?te:4294967296+te)*H,H*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(U(this))return"0";if(M(this))return"-"+V(this).toString(k);const H=_(Math.pow(k,6));var P=this;let te="";for(;;){const K=me(P,H).g;P=le(P,K.j(H));let J=((P.g.length>0?P.g[0]:P.h)>>>0).toString(k);if(P=K,U(P))return J+te;for(;J.length<6;)J="0"+J;te=J+te}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function U(k){if(k.h!=0)return!1;for(let H=0;H<k.g.length;H++)if(k.g[H]!=0)return!1;return!0}function M(k){return k.h==-1}n.l=function(k){return k=le(this,k),M(k)?-1:U(k)?0:1};function V(k){const H=k.g.length,P=[];for(let te=0;te<H;te++)P[te]=~k.g[te];return new h(P,~k.h).add(b)}n.abs=function(){return M(this)?V(this):this},n.add=function(k){const H=Math.max(this.g.length,k.g.length),P=[];let te=0;for(let K=0;K<=H;K++){let J=te+(this.i(K)&65535)+(k.i(K)&65535),Y=(J>>>16)+(this.i(K)>>>16)+(k.i(K)>>>16);te=Y>>>16,J&=65535,Y&=65535,P[K]=Y<<16|J}return new h(P,P[P.length-1]&-2147483648?-1:0)};function le(k,H){return k.add(V(H))}n.j=function(k){if(U(this)||U(k))return C;if(M(this))return M(k)?V(this).j(V(k)):V(V(this).j(k));if(M(k))return V(this.j(V(k)));if(this.l(O)<0&&k.l(O)<0)return _(this.m()*k.m());const H=this.g.length+k.g.length,P=[];for(var te=0;te<2*H;te++)P[te]=0;for(te=0;te<this.g.length;te++)for(let K=0;K<k.g.length;K++){const J=this.i(te)>>>16,Y=this.i(te)&65535,dt=k.i(K)>>>16,ye=k.i(K)&65535;P[2*te+2*K]+=Y*ye,ce(P,2*te+2*K),P[2*te+2*K+1]+=J*ye,ce(P,2*te+2*K+1),P[2*te+2*K+1]+=Y*dt,ce(P,2*te+2*K+1),P[2*te+2*K+2]+=J*dt,ce(P,2*te+2*K+2)}for(k=0;k<H;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=H;k<2*H;k++)P[k]=0;return new h(P,0)};function ce(k,H){for(;(k[H]&65535)!=k[H];)k[H+1]+=k[H]>>>16,k[H]&=65535,H++}function ie(k,H){this.g=k,this.h=H}function me(k,H){if(U(H))throw Error("division by zero");if(U(k))return new ie(C,C);if(M(k))return H=me(V(k),H),new ie(V(H.g),V(H.h));if(M(H))return H=me(k,V(H)),new ie(V(H.g),H.h);if(k.g.length>30){if(M(k)||M(H))throw Error("slowDivide_ only works with positive integers.");for(var P=b,te=H;te.l(k)<=0;)P=Ue(P),te=Ue(te);var K=De(P,1),J=De(te,1);for(te=De(te,2),P=De(P,2);!U(te);){var Y=J.add(te);Y.l(k)<=0&&(K=K.add(P),J=Y),te=De(te,1),P=De(P,1)}return H=le(k,K.j(H)),new ie(K,H)}for(K=C;k.l(H)>=0;){for(P=Math.max(1,Math.floor(k.m()/H.m())),te=Math.ceil(Math.log(P)/Math.LN2),te=te<=48?1:Math.pow(2,te-48),J=_(P),Y=J.j(H);M(Y)||Y.l(k)>0;)P-=te,J=_(P),Y=J.j(H);U(J)&&(J=b),K=K.add(J),k=le(k,Y)}return new ie(K,k)}n.B=function(k){return me(this,k).h},n.and=function(k){const H=Math.max(this.g.length,k.g.length),P=[];for(let te=0;te<H;te++)P[te]=this.i(te)&k.i(te);return new h(P,this.h&k.h)},n.or=function(k){const H=Math.max(this.g.length,k.g.length),P=[];for(let te=0;te<H;te++)P[te]=this.i(te)|k.i(te);return new h(P,this.h|k.h)},n.xor=function(k){const H=Math.max(this.g.length,k.g.length),P=[];for(let te=0;te<H;te++)P[te]=this.i(te)^k.i(te);return new h(P,this.h^k.h)};function Ue(k){const H=k.g.length+1,P=[];for(let te=0;te<H;te++)P[te]=k.i(te)<<1|k.i(te-1)>>>31;return new h(P,k.h)}function De(k,H){const P=H>>5;H%=32;const te=k.g.length-P,K=[];for(let J=0;J<te;J++)K[J]=H>0?k.i(J+P)>>>H|k.i(J+P+1)<<32-H:k.i(J+P);return new h(K,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,AA=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=T,El=h}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TA,If,SA,$h,Wm,CA,IA,bA;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var R=0;R<y.length;++R){var L=y[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=t(this);function a(y,R){if(R)e:{var L=r;y=y.split(".");for(var Z=0;Z<y.length-1;Z++){var we=y[Z];if(!(we in L))break e;L=L[we]}y=y[y.length-1],Z=L[y],R=R(Z),R!=Z&&R!=null&&e(L,y,{configurable:!0,writable:!0,value:R})}}a("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(y){return y||function(R){var L=[],Z;for(Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&L.push([Z,R[Z]]);return L}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function x(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function v(y,R,L){return y.call.apply(y.bind,arguments)}function _(y,R,L){return _=v,_.apply(null,arguments)}function T(y,R){var L=Array.prototype.slice.call(arguments,1);return function(){var Z=L.slice();return Z.push.apply(Z,arguments),y.apply(this,Z)}}function C(y,R){function L(){}L.prototype=R.prototype,y.Z=R.prototype,y.prototype=new L,y.prototype.constructor=y,y.Ob=function(Z,we,Fe){for(var ot=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)ot[Wt-2]=arguments[Wt];return R.prototype[we].apply(Z,ot)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function O(y){const R=y.length;if(R>0){const L=Array(R);for(let Z=0;Z<R;Z++)L[Z]=y[Z];return L}return[]}function U(y,R){for(let Z=1;Z<arguments.length;Z++){const we=arguments[Z];var L=typeof we;if(L=L!="object"?L:we?Array.isArray(we)?"array":L:"null",L=="array"||L=="object"&&typeof we.length=="number"){L=y.length||0;const Fe=we.length||0;y.length=L+Fe;for(let ot=0;ot<Fe;ot++)y[L+ot]=we[ot]}else y.push(we)}}class M{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return this.h>0?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function V(y){h.setTimeout(()=>{throw y},0)}function le(){var y=k;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class ce{constructor(){this.h=this.g=null}add(R,L){const Z=ie.get();Z.set(R,L),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var ie=new M(()=>new me,y=>y.reset());class me{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,De=!1,k=new ce,H=()=>{const y=Promise.resolve(void 0);Ue=()=>{y.then(P)}};function P(){for(var y;y=le();){try{y.h.call(y.g)}catch(L){V(L)}var R=ie;R.j(y),R.h<100&&(R.h++,y.next=R.g,R.g=y)}De=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};h.addEventListener("test",L,R),h.removeEventListener("test",L,R)}catch{}return y})();function Y(y){return/^[\s\xa0]*$/.test(y)}function dt(y,R){K.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,R)}C(dt,K),dt.prototype.init=function(y,R){const L=this.type=y.type,Z=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget,R||(L=="mouseover"?R=y.fromElement:L=="mouseout"&&(R=y.toElement)),this.relatedTarget=R,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Se=0;function Pe(y,R,L,Z,we){this.listener=y,this.proxy=null,this.src=R,this.type=L,this.capture=!!Z,this.ha=we,this.key=++Se,this.da=this.fa=!1}function gt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function yt(y,R,L){for(const Z in y)R.call(L,y[Z],Z,y)}function Ke(y,R){for(const L in y)R.call(void 0,y[L],L,y)}function he(y){const R={};for(const L in y)R[L]=y[L];return R}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(y,R){let L,Z;for(let we=1;we<arguments.length;we++){Z=arguments[we];for(L in Z)y[L]=Z[L];for(let Fe=0;Fe<q.length;Fe++)L=q[Fe],Object.prototype.hasOwnProperty.call(Z,L)&&(y[L]=Z[L])}}function se(y){this.src=y,this.g={},this.h=0}se.prototype.add=function(y,R,L,Z,we){const Fe=y.toString();y=this.g[Fe],y||(y=this.g[Fe]=[],this.h++);const ot=pe(y,R,Z,we);return ot>-1?(R=y[ot],L||(R.fa=!1)):(R=new Pe(R,this.src,Fe,!!Z,we),R.fa=L,y.push(R)),R};function fe(y,R){const L=R.type;if(L in y.g){var Z=y.g[L],we=Array.prototype.indexOf.call(Z,R,void 0),Fe;(Fe=we>=0)&&Array.prototype.splice.call(Z,we,1),Fe&&(gt(R),y.g[L].length==0&&(delete y.g[L],y.h--))}}function pe(y,R,L,Z){for(let we=0;we<y.length;++we){const Fe=y[we];if(!Fe.da&&Fe.listener==R&&Fe.capture==!!L&&Fe.ha==Z)return we}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),rt={};function at(y,R,L,Z,we){if(Array.isArray(R)){for(let Fe=0;Fe<R.length;Fe++)at(y,R[Fe],L,Z,we);return null}return L=zt(L),y&&y[ye]?y.J(R,L,x(Z)?!!Z.capture:!1,we):lt(y,R,L,!1,Z,we)}function lt(y,R,L,Z,we,Fe){if(!R)throw Error("Invalid event type");const ot=x(we)?!!we.capture:!!we;let Wt=cn(y);if(Wt||(y[Je]=Wt=new se(y)),L=Wt.add(R,L,Z,ot,Fe),L.proxy)return L;if(Z=Mt(),L.proxy=Z,Z.src=y,Z.listener=L,y.addEventListener)J||(we=ot),we===void 0&&(we=!1),y.addEventListener(R.toString(),Z,we);else if(y.attachEvent)y.attachEvent(_t(R.toString()),Z);else if(y.addListener&&y.removeListener)y.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Mt(){function y(L){return R.call(y.src,y.listener,L)}const R=Hn;return y}function Ut(y,R,L,Z,we){if(Array.isArray(R))for(var Fe=0;Fe<R.length;Fe++)Ut(y,R[Fe],L,Z,we);else Z=x(Z)?!!Z.capture:!!Z,L=zt(L),y&&y[ye]?(y=y.i,Fe=String(R).toString(),Fe in y.g&&(R=y.g[Fe],L=pe(R,L,Z,we),L>-1&&(gt(R[L]),Array.prototype.splice.call(R,L,1),R.length==0&&(delete y.g[Fe],y.h--)))):y&&(y=cn(y))&&(R=y.g[R.toString()],y=-1,R&&(y=pe(R,L,Z,we)),(L=y>-1?R[y]:null)&&Rt(L))}function Rt(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[ye])fe(R.i,y);else{var L=y.type,Z=y.proxy;R.removeEventListener?R.removeEventListener(L,Z,y.capture):R.detachEvent?R.detachEvent(_t(L),Z):R.addListener&&R.removeListener&&R.removeListener(Z),(L=cn(R))?(fe(L,y),L.h==0&&(L.src=null,R[Je]=null)):gt(y)}}}function _t(y){return y in rt?rt[y]:rt[y]="on"+y}function Hn(y,R){if(y.da)y=!0;else{R=new dt(R,this);const L=y.listener,Z=y.ha||y.src;y.fa&&Rt(y),y=L.call(Z,R)}return y}function cn(y){return y=y[Je],y instanceof se?y:null}var ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function zt(y){return typeof y=="function"?y:(y[ut]||(y[ut]=function(R){return y.handleEvent(R)}),y[ut])}function pt(){te.call(this),this.i=new se(this),this.M=this,this.G=null}C(pt,te),pt.prototype[ye]=!0,pt.prototype.removeEventListener=function(y,R,L,Z){Ut(this,y,R,L,Z)};function Sn(y,R){var L,Z=y.G;if(Z)for(L=[];Z;Z=Z.G)L.push(Z);if(y=y.M,Z=R.type||R,typeof R=="string")R=new K(R,y);else if(R instanceof K)R.target=R.target||y;else{var we=R;R=new K(Z,y),ue(R,we)}we=!0;let Fe,ot;if(L)for(ot=L.length-1;ot>=0;ot--)Fe=R.g=L[ot],we=ve(Fe,Z,!0,R)&&we;if(Fe=R.g=y,we=ve(Fe,Z,!0,R)&&we,we=ve(Fe,Z,!1,R)&&we,L)for(ot=0;ot<L.length;ot++)Fe=R.g=L[ot],we=ve(Fe,Z,!1,R)&&we}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var y=this.i;for(const R in y.g){const L=y.g[R];for(let Z=0;Z<L.length;Z++)gt(L[Z]);delete y.g[R],y.h--}}this.G=null},pt.prototype.J=function(y,R,L,Z){return this.i.add(String(y),R,!1,L,Z)},pt.prototype.K=function(y,R,L,Z){return this.i.add(String(y),R,!0,L,Z)};function ve(y,R,L,Z){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();let we=!0;for(let Fe=0;Fe<R.length;++Fe){const ot=R[Fe];if(ot&&!ot.da&&ot.capture==L){const Wt=ot.listener,mr=ot.ha||ot.src;ot.fa&&fe(y.i,ot),we=Wt.call(mr,Z)!==!1&&we}}return we&&!Z.defaultPrevented}function on(y,R){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=_(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(R)>2147483647?-1:h.setTimeout(y,R||0)}function Lt(y){y.g=on(()=>{y.g=null,y.i&&(y.i=!1,Lt(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class At extends te{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gt(y){te.call(this),this.h=y,this.g={}}C(Gt,te);var bt=[];function rr(y){yt(y.g,function(R,L){this.g.hasOwnProperty(L)&&Rt(R)},y),y.g={}}Gt.prototype.N=function(){Gt.Z.N.call(this),rr(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ln=h.JSON.stringify,jn=h.JSON.parse,xa=class{stringify(y){return h.JSON.stringify(y,void 0)}parse(y){return h.JSON.parse(y,void 0)}};function Ds(){}function Va(){}var vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){K.call(this,"d")}C(nt,K);function wn(){K.call(this,"c")}C(wn,K);var Pt={},zn=null;function Fi(){return zn=zn||new pt}Pt.Ia="serverreachability";function ea(y){K.call(this,Pt.Ia,y)}C(ea,K);function Ai(y){const R=Fi();Sn(R,new ea(R))}Pt.STAT_EVENT="statevent";function tn(y,R){K.call(this,Pt.STAT_EVENT,y),this.stat=R}C(tn,K);function Pn(y){const R=Fi();Sn(R,new tn(R,y))}Pt.Ja="timingevent";function Jr(y,R){K.call(this,Pt.Ja,y),this.size=R}C(Jr,K);function Bi(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){y()},R)}function sr(){this.g=!0}sr.prototype.ua=function(){this.g=!1};function Ha(y,R,L,Z,we,Fe){y.info(function(){if(y.g)if(Fe){var ot="",Wt=Fe.split("&");for(let An=0;An<Wt.length;An++){var mr=Wt[An].split("=");if(mr.length>1){const tr=mr[0];mr=mr[1];const Hi=tr.split("_");ot=Hi.length>=2&&Hi[1]=="type"?ot+(tr+"="+mr+"&"):ot+(tr+"=redacted&")}}}else ot=null;else ot=Fe;return"XMLHTTP REQ ("+Z+") [attempt "+we+"]: "+R+`
`+L+`
`+ot})}function xr(y,R,L,Z,we,Fe,ot){y.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+we+"]: "+R+`
`+L+`
`+Fe+" "+ot})}function Xr(y,R,L,Z){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+Ti(y,L)+(Z?" "+Z:"")})}function Yi(y,R){y.info(function(){return"TIMEOUT: "+R})}sr.prototype.info=function(){};function Ti(y,R){if(!y.g)return R;if(!R)return null;try{const Fe=JSON.parse(R);if(Fe){for(y=0;y<Fe.length;y++)if(Array.isArray(Fe[y])){var L=Fe[y];if(!(L.length<2)){var Z=L[1];if(Array.isArray(Z)&&!(Z.length<1)){var we=Z[0];if(we!="noop"&&we!="stop"&&we!="close")for(let ot=1;ot<Z.length;ot++)Z[ot]=""}}}}return ln(Fe)}catch{return R}}var ta={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ai={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},na;function fr(){}C(fr,Ds),fr.prototype.g=function(){return new XMLHttpRequest},na=new fr;function qr(y){return encodeURIComponent(String(y))}function j(y){var R=1;y=y.split(":");const L=[];for(;R>0&&y.length;)L.push(y.shift()),R--;return y.length&&L.push(y.join(":")),L}function X(y,R,L,Z){this.j=y,this.i=R,this.l=L,this.S=Z||1,this.V=new Gt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Q}function Q(){this.i=null,this.g="",this.h=!1}var ee={},ne={};function oe(y,R,L){y.M=1,y.A=Si(hr(R)),y.u=L,y.R=!0,Ie(y,null)}function Ie(y,R){y.F=Date.now(),Re(y),y.B=hr(y.A);var L=y.B,Z=y.S;Array.isArray(Z)||(Z=[String(Z)]),Fn(L.i,"t",Z),y.C=0,L=y.j.L,y.h=new Q,y.g=Fo(y.j,L?R:null,!y.u),y.P>0&&(y.O=new At(_(y.Y,y,y.g),y.P)),R=y.V,L=y.g,Z=y.ba;var we="readystatechange";Array.isArray(we)||(we&&(bt[0]=we.toString()),we=bt);for(let Fe=0;Fe<we.length;Fe++){const ot=at(L,we[Fe],Z||R.handleEvent,!1,R.h||R);if(!ot)break;R.g[ot.key]=ot}R=y.J?he(y.J):{},y.u?(y.v||(y.v="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,R)):(y.v="GET",y.g.ea(y.B,y.v,null,R)),Ai(),Ha(y.i,y.v,y.B,y.l,y.S,y.u)}X.prototype.ba=function(y){y=y.target;const R=this.O;R&&Zi(y)==3?R.j():this.Y(y)},X.prototype.Y=function(y){try{if(y==this.g)e:{const Wt=Zi(this.g),mr=this.g.ya(),An=this.g.ca();if(!(Wt<3)&&(Wt!=3||this.g&&(this.h.h||this.g.la()||vr(this.g)))){this.K||Wt!=4||mr==7||(mr==8||An<=0?Ai(3):Ai(2)),$e(this);var R=this.g.ca();this.X=R;var L=He(this);if(this.o=R==200,xr(this.i,this.v,this.B,this.l,this.S,Wt,R),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,we=this.g;if((Z=we.g?we.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Z)){var Fe=Z;break t}}Fe=null}if(y=Fe)Xr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ct(this,y);else{this.o=!1,this.m=3,Pn(12),tt(this),et(this);break e}}if(this.R){y=!0;let tr;for(;!this.K&&this.C<L.length;)if(tr=Oe(this,L),tr==ne){Wt==4&&(this.m=4,Pn(14),y=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==ee){this.m=4,Pn(15),Xr(this.i,this.l,L,"[Invalid Chunk]"),y=!1;break}else Xr(this.i,this.l,tr,null),ct(this,tr);if(Te(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wt!=4||L.length!=0||this.h.h||(this.m=1,Pn(16),y=!1),this.o=this.o&&y,!y)Xr(this.i,this.l,L,"[Invalid Chunked Response]"),tt(this),et(this);else if(L.length>0&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.aa&&!ot.P&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Le(ot),ot.P=!0,Pn(11))}}else Xr(this.i,this.l,L,null),ct(this,L);Wt==4&&tt(this),this.o&&!this.K&&(Wt==4?qa(this.j,this):(this.o=!1,Re(this)))}else Vi(this.g),R==400&&L.indexOf("Unknown SID")>0?(this.m=3,Pn(12)):(this.m=0,Pn(13)),tt(this),et(this)}}}catch{}finally{}};function He(y){if(!Te(y))return y.g.la();const R=vr(y.g);if(R==="")return"";let L="";const Z=R.length,we=Zi(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return tt(y),et(y),"";y.h.i=new h.TextDecoder}for(let Fe=0;Fe<Z;Fe++)y.h.h=!0,L+=y.h.i.decode(R[Fe],{stream:!(we&&Fe==Z-1)});return R.length=0,y.h.g+=L,y.C=0,y.h.g}function Te(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Oe(y,R){var L=y.C,Z=R.indexOf(`
`,L);return Z==-1?ne:(L=Number(R.substring(L,Z)),isNaN(L)?ee:(Z+=1,Z+L>R.length?ne:(R=R.slice(Z,Z+L),y.C=Z+L,R)))}X.prototype.cancel=function(){this.K=!0,tt(this)};function Re(y){y.T=Date.now()+y.H,qe(y,y.H)}function qe(y,R){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Bi(_(y.aa,y),R)}function $e(y){y.D&&(h.clearTimeout(y.D),y.D=null)}X.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Yi(this.i,this.B),this.M!=2&&(Ai(),Pn(17)),tt(this),this.m=2,et(this)):qe(this,this.T-y)};function et(y){y.j.I==0||y.K||qa(y.j,y)}function tt(y){$e(y);var R=y.O;R&&typeof R.dispose=="function"&&R.dispose(),y.O=null,rr(y.V),y.g&&(R=y.g,y.g=null,R.abort(),R.dispose())}function ct(y,R){try{var L=y.j;if(L.I!=0&&(L.g==y||_r(L.h,y))){if(!y.L&&_r(L.h,y)&&L.I==3){try{var Z=L.Ba.g.parse(R)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var we=Z;if(we[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<y.F)dr(L),sa(L);else break e;Xa(L),Pn(18)}}else L.xa=we[1],0<L.xa-L.K&&we[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=Bi(_(L.Va,L),6e3));Vt(L.h)<=1&&L.ta&&(L.ta=void 0)}else ks(L,11)}else if((y.L||L.g==y)&&dr(L),!Y(R))for(we=L.Ba.g.parse(R),R=0;R<we.length;R++){let An=we[R];const tr=An[0];if(!(tr<=L.K))if(L.K=tr,An=An[1],L.I==2)if(An[0]=="c"){L.M=An[1],L.ba=An[2];const Hi=An[3];Hi!=null&&(L.ka=Hi,L.j.info("VER="+L.ka));const Bs=An[4];Bs!=null&&(L.za=Bs,L.j.info("SVER="+L.za));const ei=An[5];ei!=null&&typeof ei=="number"&&ei>0&&(Z=1.5*ei,L.O=Z,L.j.info("backChannelRequestTimeoutMs_="+Z)),Z=L;const ji=y.g;if(ji){const Ka=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var Fe=Z.h;Fe.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(fs(Fe,Fe.h),Fe.h=null))}if(Z.G){const Us=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(Z.wa=Us,Ft(Z.J,Z.G,Us))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-y.F,L.j.info("Handshake RTT: "+L.T+"ms")),Z=L;var ot=y;if(Z.na=Cc(Z,Z.L?Z.ba:null,Z.W),ot.L){$t(Z.h,ot);var Wt=ot,mr=Z.O;mr&&(Wt.H=mr),Wt.D&&($e(Wt),Re(Wt)),Z.g=ot}else ms(Z);L.i.length>0&&Ls(L)}else An[0]!="stop"&&An[0]!="close"||ks(L,7);else L.I==3&&(An[0]=="stop"||An[0]=="close"?An[0]=="stop"?ks(L,7):Lo(L):An[0]!="noop"&&L.l&&L.l.qa(An),L.A=0)}}Ai(4)}catch{}}var Et=class{constructor(y,R){this.g=y,this.map=R}};function Ve(y){this.l=y||10,h.PerformanceNavigationTiming?(y=h.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mn(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function Vt(y){return y.h?1:y.g?y.g.size:0}function _r(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function fs(y,R){y.g?y.g.add(R):y.h=R}function $t(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}Ve.prototype.cancel=function(){if(this.i=Xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Xt(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const L of y.g.values())R=R.concat(L.G);return R}return O(y.i)}var Kt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lr(y,R){if(y){y=y.split("&");for(let L=0;L<y.length;L++){const Z=y[L].indexOf("=");let we,Fe=null;Z>=0?(we=y[L].substring(0,Z),Fe=y[L].substring(Z+1)):we=y[L],R(we,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function oi(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let R;y instanceof oi?(this.l=y.l,un(this,y.j),this.o=y.o,this.g=y.g,li(this,y.u),this.h=y.h,Bl(this,Ul(y.i)),this.m=y.m):y&&(R=String(y).match(Kt))?(this.l=!1,un(this,R[1]||"",!0),this.o=Ms(R[2]||""),this.g=Ms(R[3]||"",!0),li(this,R[4]),this.h=Ms(R[5]||"",!0),Bl(this,R[6]||"",!0),this.m=Ms(R[7]||"")):(this.l=!1,this.i=new Rr(null,this.l))}oi.prototype.toString=function(){const y=[];var R=this.j;R&&y.push(Ki(R,yr,!0),":");var L=this.g;return(L||R=="file")&&(y.push("//"),(R=this.o)&&y.push(Ki(R,yr,!0),"@"),y.push(qr(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&y.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(Ki(L,L.charAt(0)=="/"?re:Ce,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",Ki(L,Er)),y.join("")},oi.prototype.resolve=function(y){const R=hr(this);let L=!!y.j;L?un(R,y.j):L=!!y.o,L?R.o=y.o:L=!!y.g,L?R.g=y.g:L=y.u!=null;var Z=y.h;if(L)li(R,y.u);else if(L=!!y.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var we=R.h.lastIndexOf("/");we!=-1&&(Z=R.h.slice(0,we+1)+Z)}if(we=Z,we==".."||we==".")Z="";else if(we.indexOf("./")!=-1||we.indexOf("/.")!=-1){Z=we.lastIndexOf("/",0)==0,we=we.split("/");const Fe=[];for(let ot=0;ot<we.length;){const Wt=we[ot++];Wt=="."?Z&&ot==we.length&&Fe.push(""):Wt==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),Z&&ot==we.length&&Fe.push("")):(Fe.push(Wt),Z=!0)}Z=Fe.join("/")}else Z=we}return L?R.h=Z:L=y.i.toString()!=="",L?Bl(R,Ul(y.i)):L=!!y.m,L&&(R.m=y.m),R};function hr(y){return new oi(y)}function un(y,R,L){y.j=L?Ms(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function li(y,R){if(R){if(R=Number(R),isNaN(R)||R<0)throw Error("Bad port number "+R);y.u=R}else y.u=null}function Bl(y,R,L){R instanceof Rr?(y.i=R,ya(y.i,y.l)):(L||(R=Ki(R,Tt)),y.i=new Rr(R,y.l))}function Ft(y,R,L){y.i.set(R,L)}function Si(y){return Ft(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function Ms(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ki(y,R,L){return typeof y=="string"?(y=encodeURI(y).replace(R,nn),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function nn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var yr=/[#\/\?@]/g,Ce=/[#\?:]/g,re=/[#\?]/g,Tt=/[#\?@]/g,Er=/#/g;function Rr(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function Ci(y){y.g||(y.g=new Map,y.h=0,y.i&&Lr(y.i,function(R,L){y.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}n=Rr.prototype,n.add=function(y,R){Ci(this),this.i=null,y=_a(this,y);let L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(R),this.h+=1,this};function Mo(y,R){Ci(y),R=_a(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function $r(y,R){return Ci(y),R=_a(y,R),y.g.has(R)}n.forEach=function(y,R){Ci(this),this.g.forEach(function(L,Z){L.forEach(function(we){y.call(R,we,Z,this)},this)},this)};function It(y,R){Ci(y);let L=[];if(typeof R=="string")$r(y,R)&&(L=L.concat(y.g.get(_a(y,R))));else for(y=Array.from(y.g.values()),R=0;R<y.length;R++)L=L.concat(y[R]);return L}n.set=function(y,R){return Ci(this),this.i=null,y=_a(this,y),$r(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},n.get=function(y,R){return y?(y=It(this,y),y.length>0?String(y[0]):R):R};function Fn(y,R,L){Mo(y,R),L.length>0&&(y.i=null,y.g.set(_a(y,R),O(L)),y.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(let Z=0;Z<R.length;Z++){var L=R[Z];const we=qr(L);L=It(this,L);for(let Fe=0;Fe<L.length;Fe++){let ot=we;L[Fe]!==""&&(ot+="="+qr(L[Fe])),y.push(ot)}}return this.i=y.join("&")};function Ul(y){const R=new Rr;return R.i=y.i,y.g&&(R.g=new Map(y.g),R.h=y.h),R}function _a(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function ya(y,R){R&&!y.j&&(Ci(y),y.i=null,y.g.forEach(function(L,Z){const we=Z.toLowerCase();Z!=we&&(Mo(this,Z),Fn(this,we,L))},y)),y.j=R}function Ii(y,R){const L=new sr;if(h.Image){const Z=new Image;Z.onload=T(Qi,L,"TestLoadImage: loaded",!0,R,Z),Z.onerror=T(Qi,L,"TestLoadImage: error",!1,R,Z),Z.onabort=T(Qi,L,"TestLoadImage: abort",!1,R,Z),Z.ontimeout=T(Qi,L,"TestLoadImage: timeout",!1,R,Z),h.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=y}else R(!1)}function ja(y,R){const L=new sr,Z=new AbortController,we=setTimeout(()=>{Z.abort(),Qi(L,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:Z.signal}).then(Fe=>{clearTimeout(we),Fe.ok?Qi(L,"TestPingServer: ok",!0,R):Qi(L,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(we),Qi(L,"TestPingServer: error",!1,R)})}function Qi(y,R,L,Z,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Z(L)}catch{}}function er(){this.g=new xa}function bi(y){this.i=y.Sb||null,this.h=y.ab||!1}C(bi,Ds),bi.prototype.g=function(){return new Ri(this.i,this.h)};function Ri(y,R){pt.call(this),this.H=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(Ri,pt),n=Ri.prototype,n.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=R,this.readyState=1,kt(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const R={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(R.body=y),(this.H||h).fetch(new Request(this.D,R)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nt(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.B.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?Ea(this):kt(this),this.readyState==3&&Nt(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ea(this))},n.Na=function(y){this.g&&(this.response=y,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(y){y.readyState=4,y.l=null,y.j=null,y.B=null,kt(y)}n.setRequestHeader=function(y,R){this.A.append(y,R)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var L=R.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=R.next();return y.join(`\r
`)};function kt(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Ri.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Bn(y){let R="";return yt(y,function(L,Z){R+=Z,R+=":",R+=L,R+=`\r
`}),R}function za(y,R,L){e:{for(Z in L){var Z=!1;break e}Z=!0}Z||(L=Bn(L),typeof y=="string"?L!=null&&qr(L):Ft(y,R,L))}function Rn(y){pt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(Rn,pt);var hs=/^https?$/i,ds=["POST","PUT"];n=Rn.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,R,L,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():na.g(),this.g.onreadystatechange=b(_(this.Ca,this));try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(Fe){Ga(this,Fe);return}if(y=L||"",L=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var we in Z)L.set(we,Z[we]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Fe of Z.keys())L.set(Fe,Z.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(L.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),we=h.FormData&&y instanceof h.FormData,!(Array.prototype.indexOf.call(ds,R,void 0)>=0)||Z||we||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,ot]of L)this.g.setRequestHeader(Fe,ot);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(Fe){Ga(this,Fe)}};function Ga(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.o=5,ra(y),Ui(y)}function ra(y){y.A||(y.A=!0,Sn(y,"complete"),Sn(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Sn(this,"complete"),Sn(this,"abort"),Ui(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ui(this,!0)),Rn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?gs(this):this.Xa())},n.Xa=function(){gs(this)};function gs(y){if(y.h&&typeof c<"u"){if(y.v&&Zi(y)==4)setTimeout(y.Ca.bind(y),0);else if(Sn(y,"readystatechange"),Zi(y)==4){y.h=!1;try{const Fe=y.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var Z;if(Z=Fe===0){let ot=String(y.D).match(Kt)[1]||null;!ot&&h.self&&h.self.location&&(ot=h.self.location.protocol.slice(0,-1)),Z=!hs.test(ot?ot.toLowerCase():"")}L=Z}if(L)Sn(y,"complete"),Sn(y,"success");else{y.o=6;try{var we=Zi(y)>2?y.g.statusText:""}catch{we=""}y.l=we+" ["+y.ca()+"]",ra(y)}}finally{Ui(y)}}}}function Ui(y,R){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const L=y.g;y.g=null,R||Sn(y,"ready");try{L.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zi(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Zi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),jn(R)}};function vr(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Vi(y){const R={};y=(y.g&&Zi(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<y.length;Z++){if(Y(y[Z]))continue;var L=j(y[Z]);const we=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Fe=R[we]||[];R[we]=Fe,Fe.push(L)}Ke(R,function(Z){return Z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(y,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||R}function ia(y){this.za=0,this.i=[],this.j=new sr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ar("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ar("baseRetryDelayMs",5e3,y),this.Za=ar("retryDelaySeedMs",1e4,y),this.Ta=ar("forwardChannelMaxRetries",2,y),this.va=ar("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Ve(y&&y.concurrentRequestLimit),this.Ba=new er,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ia.prototype,n.ka=8,n.I=1,n.connect=function(y,R,L,Z){Pn(0),this.W=y,this.H=R||{},L&&Z!==void 0&&(this.H.OSID=L,this.H.OAID=Z),this.F=this.X,this.J=Cc(this,null,this.W),Ls(this)};function Lo(y){if(ko(y),y.I==3){var R=y.V++,L=hr(y.J);if(Ft(L,"SID",y.M),Ft(L,"RID",R),Ft(L,"TYPE","terminate"),va(y,L),R=new X(y,y.j,R),R.M=2,R.A=Si(hr(L)),L=!1,h.navigator&&h.navigator.sendBeacon)try{L=h.navigator.sendBeacon(R.A.toString(),"")}catch{}!L&&h.Image&&(new Image().src=R.A,L=!0),L||(R.g=Fo(R.j,null),R.g.ea(R.A)),R.F=Date.now(),Re(R)}Sc(y)}function sa(y){y.g&&(Le(y),y.g.cancel(),y.g=null)}function ko(y){sa(y),y.v&&(h.clearTimeout(y.v),y.v=null),dr(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&h.clearTimeout(y.m),y.m=null)}function Ls(y){if(!Mn(y.h)&&!y.m){y.m=!0;var R=y.Ea;Ue||H(),De||(Ue(),De=!0),k.add(R,y),y.D=0}}function Po(y,R){return Vt(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=R.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Bi(_(y.Ea,y,R),Vl(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const we=new X(this,this.j,y);let Fe=this.o;if(this.U&&(Fe?(Fe=he(Fe),ue(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(we.J=Fe,Fe=null),this.S)e:{for(var R=0,L=0;L<this.i.length;L++){t:{var Z=this.i[L];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(R+=Z,R>4096){R=L;break e}if(R===4096||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=Wa(this,we,R),L=hr(this.J),Ft(L,"RID",y),Ft(L,"CVER",22),this.G&&Ft(L,"X-HTTP-Session-Id",this.G),va(this,L),Fe&&(this.R?R="headers="+qr(Bn(Fe))+"&"+R:this.u&&za(L,this.u,Fe)),fs(this.h,we),this.Ra&&Ft(L,"TYPE","init"),this.S?(Ft(L,"$req",R),Ft(L,"SID","null"),we.U=!0,oe(we,L,null)):oe(we,L,R),this.I=2}}else this.I==3&&(y?Cn(this,y):this.i.length==0||Mn(this.h)||Cn(this))};function Cn(y,R){var L;R?L=R.l:L=y.V++;const Z=hr(y.J);Ft(Z,"SID",y.M),Ft(Z,"RID",L),Ft(Z,"AID",y.K),va(y,Z),y.u&&y.o&&za(Z,y.u,y.o),L=new X(y,y.j,L,y.D+1),y.u===null&&(L.J=y.o),R&&(y.i=R.G.concat(y.i)),R=Wa(y,L,1e3),L.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),fs(y.h,L),oe(L,Z,R)}function va(y,R){y.H&&yt(y.H,function(L,Z){Ft(R,Z,L)}),y.l&&yt({},function(L,Z){Ft(R,Z,L)})}function Wa(y,R,L){L=Math.min(y.i.length,L);const Z=y.l?_(y.l.Ka,y.l,y):null;e:{var we=y.i;let Wt=-1;for(;;){const mr=["count="+L];Wt==-1?L>0?(Wt=we[0].g,mr.push("ofs="+Wt)):Wt=0:mr.push("ofs="+Wt);let An=!0;for(let tr=0;tr<L;tr++){var Fe=we[tr].g;const Hi=we[tr].map;if(Fe-=Wt,Fe<0)Wt=Math.max(0,we[tr].g-100),An=!1;else try{Fe="req"+Fe+"_"||"";try{var ot=Hi instanceof Map?Hi:Object.entries(Hi);for(const[Bs,ei]of ot){let ji=ei;x(ei)&&(ji=ln(ei)),mr.push(Fe+Bs+"="+encodeURIComponent(ji))}}catch(Bs){throw mr.push(Fe+"type="+encodeURIComponent("_badmap")),Bs}}catch{Z&&Z(Hi)}}if(An){ot=mr.join("&");break e}}ot=void 0}return y=y.i.splice(0,L),R.G=y,ot}function ms(y){if(!y.g&&!y.v){y.Y=1;var R=y.Da;Ue||H(),De||(Ue(),De=!0),k.add(R,y),y.A=0}}function Xa(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Bi(_(y.Da,y),Vl(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,Qt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Bi(_(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pn(10),sa(this),Qt(this))};function Le(y){y.B!=null&&(h.clearTimeout(y.B),y.B=null)}function Qt(y){y.g=new X(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var R=hr(y.na);Ft(R,"RID","rpc"),Ft(R,"SID",y.M),Ft(R,"AID",y.K),Ft(R,"CI",y.F?"0":"1"),!y.F&&y.ia&&Ft(R,"TO",y.ia),Ft(R,"TYPE","xmlhttp"),va(y,R),y.u&&y.o&&za(R,y.u,y.o),y.O&&(y.g.H=y.O);var L=y.g;y=y.ba,L.M=1,L.A=Si(hr(R)),L.u=null,L.R=!0,Ie(L,y)}n.Va=function(){this.C!=null&&(this.C=null,sa(this),Xa(this),Pn(19))};function dr(y){y.C!=null&&(h.clearTimeout(y.C),y.C=null)}function qa(y,R){var L=null;if(y.g==R){dr(y),Le(y),y.g=null;var Z=2}else if(_r(y.h,R))L=R.G,$t(y.h,R),Z=1;else return;if(y.I!=0){if(R.o)if(Z==1){L=R.u?R.u.length:0,R=Date.now()-R.F;var we=y.D;Z=Fi(),Sn(Z,new Jr(Z,L)),Ls(y)}else ms(y);else if(we=R.m,we==3||we==0&&R.X>0||!(Z==1&&Po(y,R)||Z==2&&Xa(y)))switch(L&&L.length>0&&(R=y.h,R.i=R.i.concat(L)),we){case 1:ks(y,5);break;case 4:ks(y,10);break;case 3:ks(y,6);break;default:ks(y,2)}}}function Vl(y,R){let L=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(L*=2),L*R}function ks(y,R){if(y.j.info("Error code "+R),R==2){var L=_(y.bb,y),Z=y.Ua;const we=!Z;Z=new oi(Z||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||un(Z,"https"),Si(Z),we?Ii(Z.toString(),L):ja(Z.toString(),L)}else Pn(2);y.I=0,y.l&&y.l.pa(R),Sc(y),ko(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Pn(2)):(this.j.info("Failed to ping google.com"),Pn(1))};function Sc(y){if(y.I=0,y.ja=[],y.l){const R=Xt(y.h);(R.length!=0||y.i.length!=0)&&(U(y.ja,R),U(y.ja,y.i),y.h.i.length=0,O(y.i),y.i.length=0),y.l.oa()}}function Cc(y,R,L){var Z=L instanceof oi?hr(L):new oi(L);if(Z.g!="")R&&(Z.g=R+"."+Z.g),li(Z,Z.u);else{var we=h.location;Z=we.protocol,R=R?R+"."+we.hostname:we.hostname,we=+we.port;const Fe=new oi(null);Z&&un(Fe,Z),R&&(Fe.g=R),we&&li(Fe,we),L&&(Fe.h=L),Z=Fe}return L=y.G,R=y.wa,L&&R&&Ft(Z,L,R),Ft(Z,"VER",y.ka),va(y,Z),Z}function Fo(y,R,L){if(R&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Aa&&!y.ma?new Rn(new bi({ab:L})):new Rn(y.ma),R.Fa(y.L),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gr(){}n=gr.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ps(){}Ps.prototype.g=function(y,R){return new fn(y,R)};function fn(y,R){pt.call(this),this.g=new ia(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.sa&&(y?y["X-WebChannel-Client-Profile"]=R.sa:y={"X-WebChannel-Client-Profile":R.sa}),this.g.U=y,(y=R&&R.Qb)&&!Y(y)&&(this.g.u=y),this.A=R&&R.supportsCrossDomainXhr||!1,this.v=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Y(R)&&(this.g.G=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new hn(this)}C(fn,pt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Lo(this.g)},fn.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.v&&(L={},L.__data__=ln(y),y=L);R.i.push(new Et(R.Ya++,y)),R.I==3&&Ls(R)},fn.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,fn.Z.N.call(this)};function Ya(y){nt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const L in R){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}C(Ya,nt);function Fs(){wn.call(this),this.status=1}C(Fs,wn);function hn(y){this.g=y}C(hn,gr),hn.prototype.ra=function(){Sn(this.g,"a")},hn.prototype.qa=function(y){Sn(this.g,new Ya(y))},hn.prototype.pa=function(y){Sn(this.g,new Fs)},hn.prototype.oa=function(){Sn(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,bA=function(){return new Ps},IA=function(){return Fi()},CA=Pt,Wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,$h=ta,ai.COMPLETE="complete",SA=ai,Va.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",pt.prototype.listen=pt.prototype.J,If=Va,Rn.prototype.listenOnce=Rn.prototype.K,Rn.prototype.getLastError=Rn.prototype.Ha,Rn.prototype.getLastErrorCode=Rn.prototype.ya,Rn.prototype.getStatus=Rn.prototype.ca,Rn.prototype.getResponseJson=Rn.prototype.La,Rn.prototype.getResponseText=Rn.prototype.la,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Fa,TA=Rn}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});const IE="@firebase/firestore",bE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new xp("@firebase/firestore");function ru(){return dc.logLevel}function vt(n,...e){if(dc.logLevel<=_n.DEBUG){const t=e.map(Rp);dc.debug(`Firestore (${Du}): ${n}`,...t)}}function So(n,...e){if(dc.logLevel<=_n.ERROR){const t=e.map(Rp);dc.error(`Firestore (${Du}): ${n}`,...t)}}function wu(n,...e){if(dc.logLevel<=_n.WARN){const t=e.map(Rp);dc.warn(`Firestore (${Du}): ${n}`,...t)}}function Rp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,RA(n,r,t)}function RA(n,e,t){let r=`FIRESTORE (${Du}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw So(r),new Error(r)}function Vn(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||RA(e,a,r)}function Jt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends Ro{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Di.UNAUTHENTICATED)))}shutdown(){}}class T6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class S6{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Vn(this.o===void 0,42304);let r=this.i;const a=v=>this.i!==r?(r=this.i,t(v)):Promise.resolve();let c=new vl;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new vl,e.enqueueRetryable((()=>a(this.currentUser)))};const h=()=>{const v=c;e.enqueueRetryable((async()=>{await v.promise,await a(this.currentUser)}))},x=v=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((v=>x(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?x(v):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new vl)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vn(typeof r.accessToken=="string",31837,{l:r}),new NA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vn(e===null||typeof e=="string",2055,{h:e}),new Di(e)}}class C6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Di.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Vn(this.o===void 0,3512);const r=c=>{c.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,vt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const a=c=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Vn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new RE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=R6(40);for(let c=0;c<a.length;++c)r.length<20&&a[c]<t&&(r+=e.charAt(a[c]%62))}return r}}function yn(n,e){return n<e?-1:n>e?1:0}function Xm(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),c=e.charAt(r);if(a!==c)return wm(a)===wm(c)?yn(a,c):wm(a)?1:-1}return yn(n.length,e.length)}const N6=55296,O6=57343;function wm(n){const e=n.charCodeAt(0);return e>=N6&&e<=O6}function Au(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="__name__";class Ra{constructor(e,t,r){t===void 0?t=0:t>e.length&&jt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&jt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const c=Ra.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return yn(e.length,t.length)}static compareSegments(e,t){const r=Ra.isNumericId(e),a=Ra.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ra.extractNumericId(e).compare(Ra.extractNumericId(t)):Xm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return El.fromString(e.substring(4,e.length-2))}}class ir extends Ra{construct(e,t,r){return new ir(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xt(Xe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ir(t)}static emptyPath(){return new ir([])}}const D6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xi extends Ra{construct(e,t,r){return new xi(e,t,r)}static isValidIdentifier(e){return D6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===NE}static keyField(){return new xi([NE])}static fromServerFormat(e){const t=[];let r="",a=0;const c=()=>{if(r.length===0)throw new xt(Xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;a<e.length;){const x=e[a];if(x==="\\"){if(a+1===e.length)throw new xt(Xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[a+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new xt(Xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,a+=2}else x==="`"?(h=!h,a++):x!=="."||h?(r+=x,a++):(c(),a++)}if(c(),h)throw new xt(Xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xi(t)}static emptyPath(){return new xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(ir.fromString(e))}static fromName(e){return new Dt(ir.fromString(e).popFirst(5))}static empty(){return new Dt(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ir.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new ir(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n,e,t){if(!t)throw new xt(Xe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function M6(n,e,t,r){if(e===!0&&r===!0)throw new xt(Xe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OE(n){if(!Dt.isDocumentKey(n))throw new xt(Xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DE(n){if(Dt.isDocumentKey(n))throw new xt(Xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Q1(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":jt(12329,{type:typeof n})}function Zs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xt(Xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Q1(n);throw new xt(Xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n,e){const t={typeString:n};return e&&(t.value=e),t}function m0(n,e){if(!DA(n))throw new xt(Xe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const h=n[r];if(a&&typeof h!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(c!==void 0&&h!==c.value){t=`Expected '${r}' field to equal '${c.value}'`;break}}if(t)throw new xt(Xe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=-62135596800,LE=1e6;class bn{static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*LE);return new bn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xt(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ME)throw new xt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/LE}_compareTo(e){return this.seconds===e.seconds?yn(this.nanoseconds,e.nanoseconds):yn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(m0(e,bn._jsonSchema))return new bn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ME;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bn._jsonSchemaVersion="firestore/timestamp/1.0",bn._jsonSchema={type:jr("string",bn._jsonSchemaVersion),seconds:jr("number"),nanoseconds:jr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new bn(0,0))}static max(){return new Yt(new bn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=-1;function L6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=Yt.fromTimestamp(r===1e9?new bn(t+1,0):new bn(t,r));return new Al(a,Dt.empty(),e)}function k6(n){return new Al(n.readTime,n.key,Yf)}class Al{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Al(Yt.min(),Dt.empty(),Yf)}static max(){return new Al(Yt.max(),Dt.empty(),Yf)}}function P6(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Dt.comparator(n.documentKey,e.documentKey),t!==0?t:yn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(n){if(n.code!==Xe.FAILED_PRECONDITION||n.message!==F6)throw n;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&jt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ye(((r,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ye?t:Ye.resolve(t)}catch(t){return Ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ye.reject(t)}static resolve(e){return new Ye(((t,r)=>{t(e)}))}static reject(e){return new Ye(((t,r)=>{r(e)}))}static waitFor(e){return new Ye(((t,r)=>{let a=0,c=0,h=!1;e.forEach((x=>{++a,x.next((()=>{++c,h&&c===a&&t()}),(v=>r(v)))})),h=!0,c===a&&t()}))}static or(e){let t=Ye.resolve(!1);for(const r of e)t=t.next((a=>a?Ye.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,c)=>{r.push(t.call(this,a,c))})),this.waitFor(r)}static mapArray(e,t){return new Ye(((r,a)=>{const c=e.length,h=new Array(c);let x=0;for(let v=0;v<c;v++){const _=v;t(e[_]).next((T=>{h[_]=T,++x,x===c&&r(h)}),(T=>a(T)))}}))}static doWhile(e,t){return new Ye(((r,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):r()};c()}))}}function U6(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Z1.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=-1;function J1(n){return n==null}function g1(n){return n===0&&1/n==-1/0}function V6(n){return typeof n=="number"&&Number.isInteger(n)&&!g1(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="";function H6(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kE(e)),e=j6(n.get(t),e);return kE(e)}function j6(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const c=n.charAt(a);switch(c){case"\0":t+="";break;case MA:t+="";break;default:t+=c}}return t}function kE(n){return n+MA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){this.comparator=e,this.root=t||pi.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pi.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lh(this.root,e,this.comparator,!0)}}class Lh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pi{constructor(e,t,r,a,c){this.key=e,this.value=t,this.color=r??pi.RED,this.left=a??pi.EMPTY,this.right=c??pi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,c){return new pi(e??this.key,t??this.value,r??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const c=r(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,r),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return pi.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw jt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw jt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw jt(27949);return e+(this.isRed()?0:1)}}pi.EMPTY=null,pi.RED=!0,pi.BLACK=!1;pi.EMPTY=new class{constructor(){this.size=0}get key(){throw jt(57766)}get value(){throw jt(16141)}get color(){throw jt(16727)}get left(){throw jt(29726)}get right(){throw jt(36894)}copy(e,t,r,a,c){return this}insert(e,t,r){return new pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FE(this.data.getIterator())}getIteratorFrom(e){return new FE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Zr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Zr(this.comparator);return t.data=e,t}}class FE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.fields=e,e.sort(xi.comparator)}static empty(){return new Ns([])}unionWith(e){let t=new Zr(xi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Au(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new kA("Invalid base64 string: "+c):c}})(e);return new vi(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c})(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const z6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(n){if(Vn(!!n,39018),typeof n=="string"){let e=0;const t=z6.exec(n);if(Vn(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dr(n.seconds),nanos:Dr(n.nanos)}}function Dr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sl(n){return typeof n=="string"?vi.fromBase64String(n):vi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="server_timestamp",FA="__type__",BA="__previous_value__",UA="__local_write_time__";function Dp(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[FA])==null?void 0:r.stringValue)===PA}function $1(n){const e=n.mapValue.fields[BA];return Dp(e)?$1(e):e}function Kf(n){const e=Tl(n.mapValue.fields[UA].timestampValue);return new bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,r,a,c,h,x,v,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=x,this.longPollingOptions=v,this.useFetchStreams=_,this.isUsingEmulator=T}}const m1="(default)";class Qf{constructor(e,t){this.projectId=e,this.database=t||m1}static empty(){return new Qf("","")}get isDefaultDatabase(){return this.database===m1}isEqual(e){return e instanceof Qf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="__type__",W6="__max__",kh={mapValue:{}},HA="__vector__",p1="value";function Cl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dp(n)?4:q6(n)?9007199254740991:X6(n)?10:11:jt(28295,{value:n})}function Ba(n,e){if(n===e)return!0;const t=Cl(n);if(t!==Cl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Kf(n).isEqual(Kf(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=Tl(a.timestampValue),x=Tl(c.timestampValue);return h.seconds===x.seconds&&h.nanos===x.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,c){return Sl(a.bytesValue).isEqual(Sl(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,c){return Dr(a.geoPointValue.latitude)===Dr(c.geoPointValue.latitude)&&Dr(a.geoPointValue.longitude)===Dr(c.geoPointValue.longitude)})(n,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Dr(a.integerValue)===Dr(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=Dr(a.doubleValue),x=Dr(c.doubleValue);return h===x?g1(h)===g1(x):isNaN(h)&&isNaN(x)}return!1})(n,e);case 9:return Au(n.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return(function(a,c){const h=a.mapValue.fields||{},x=c.mapValue.fields||{};if(PE(h)!==PE(x))return!1;for(const v in h)if(h.hasOwnProperty(v)&&(x[v]===void 0||!Ba(h[v],x[v])))return!1;return!0})(n,e);default:return jt(52216,{left:n})}}function Zf(n,e){return(n.values||[]).find((t=>Ba(t,e)))!==void 0}function Tu(n,e){if(n===e)return 0;const t=Cl(n),r=Cl(e);if(t!==r)return yn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yn(n.booleanValue,e.booleanValue);case 2:return(function(c,h){const x=Dr(c.integerValue||c.doubleValue),v=Dr(h.integerValue||h.doubleValue);return x<v?-1:x>v?1:x===v?0:isNaN(x)?isNaN(v)?0:-1:1})(n,e);case 3:return BE(n.timestampValue,e.timestampValue);case 4:return BE(Kf(n),Kf(e));case 5:return Xm(n.stringValue,e.stringValue);case 6:return(function(c,h){const x=Sl(c),v=Sl(h);return x.compareTo(v)})(n.bytesValue,e.bytesValue);case 7:return(function(c,h){const x=c.split("/"),v=h.split("/");for(let _=0;_<x.length&&_<v.length;_++){const T=yn(x[_],v[_]);if(T!==0)return T}return yn(x.length,v.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,h){const x=yn(Dr(c.latitude),Dr(h.latitude));return x!==0?x:yn(Dr(c.longitude),Dr(h.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UE(n.arrayValue,e.arrayValue);case 10:return(function(c,h){var b,O,U,M;const x=c.fields||{},v=h.fields||{},_=(b=x[p1])==null?void 0:b.arrayValue,T=(O=v[p1])==null?void 0:O.arrayValue,C=yn(((U=_==null?void 0:_.values)==null?void 0:U.length)||0,((M=T==null?void 0:T.values)==null?void 0:M.length)||0);return C!==0?C:UE(_,T)})(n.mapValue,e.mapValue);case 11:return(function(c,h){if(c===kh.mapValue&&h===kh.mapValue)return 0;if(c===kh.mapValue)return 1;if(h===kh.mapValue)return-1;const x=c.fields||{},v=Object.keys(x),_=h.fields||{},T=Object.keys(_);v.sort(),T.sort();for(let C=0;C<v.length&&C<T.length;++C){const b=Xm(v[C],T[C]);if(b!==0)return b;const O=Tu(x[v[C]],_[T[C]]);if(O!==0)return O}return yn(v.length,T.length)})(n.mapValue,e.mapValue);default:throw jt(23264,{he:t})}}function BE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yn(n,e);const t=Tl(n),r=Tl(e),a=yn(t.seconds,r.seconds);return a!==0?a:yn(t.nanos,r.nanos)}function UE(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const c=Tu(t[a],r[a]);if(c)return c}return yn(t.length,r.length)}function Su(n){return qm(n)}function qm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Tl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Sl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Dt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const c of t.values||[])a?a=!1:r+=",",r+=qm(c);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const h of r)c?c=!1:a+=",",a+=`${h}:${qm(t.fields[h])}`;return a+"}"})(n.mapValue):jt(61005,{value:n})}function e1(n){switch(Cl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$1(n);return e?16+e1(e):16;case 5:return 2*n.stringValue.length;case 6:return Sl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,c)=>a+e1(c)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return kl(r.fields,((c,h)=>{a+=c.length+e1(h)})),a})(n.mapValue);default:throw jt(13486,{value:n})}}function VE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ym(n){return!!n&&"integerValue"in n}function Mp(n){return!!n&&"arrayValue"in n}function HE(n){return!!n&&"nullValue"in n}function jE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t1(n){return!!n&&"mapValue"in n}function X6(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[VA])==null?void 0:r.stringValue)===HA}function kf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return kl(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=kf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kf(n.arrayValue.values[t]);return e}return{...n}}function q6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===W6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.value=e}static empty(){return new os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!t1(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kf(t)}setAll(e){let t=xi.emptyPath(),r={},a=[];e.forEach(((h,x)=>{if(!t.isImmediateParentOf(x)){const v=this.getFieldsMap(t);this.applyChanges(v,r,a),r={},a=[],t=x.popLast()}h?r[x.lastSegment()]=kf(h):a.push(x.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,r,a)}delete(e){const t=this.field(e.popLast());t1(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];t1(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){kl(t,((a,c)=>e[a]=c));for(const a of r)delete e[a]}clone(){return new os(kf(this.value))}}function jA(n){const e=[];return kl(n.fields,((t,r)=>{const a=new xi([t]);if(t1(r)){const c=jA(r.mapValue).fields;if(c.length===0)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)})),new Ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t,r,a,c,h,x){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=c,this.data=h,this.documentState=x}static newInvalidDocument(e){return new Mi(e,0,Yt.min(),Yt.min(),Yt.min(),os.empty(),0)}static newFoundDocument(e,t,r,a){return new Mi(e,1,t,Yt.min(),r,a,0)}static newNoDocument(e,t){return new Mi(e,2,t,Yt.min(),Yt.min(),os.empty(),0)}static newUnknownDocument(e,t){return new Mi(e,3,t,Yt.min(),Yt.min(),os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t){this.position=e,this.inclusive=t}}function zE(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const c=e[a],h=n.position[a];if(c.field.isKeyField()?r=Dt.comparator(Dt.fromName(h.referenceValue),t.key):r=Tu(h,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function GE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ba(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Y6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{}class Hr extends zA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Q6(e,t,r):t==="array-contains"?new $6(e,r):t==="in"?new eR(e,r):t==="not-in"?new tR(e,r):t==="array-contains-any"?new nR(e,r):new Hr(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Z6(e,r):new J6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tu(t,this.value)):t!==null&&Cl(this.value)===Cl(t)&&this.matchesComparison(Tu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pa extends zA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pa(e,t)}matches(e){return GA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GA(n){return n.op==="and"}function WA(n){return K6(n)&&GA(n)}function K6(n){for(const e of n.filters)if(e instanceof pa)return!1;return!0}function Km(n){if(n instanceof Hr)return n.field.canonicalString()+n.op.toString()+Su(n.value);if(WA(n))return n.filters.map((e=>Km(e))).join(",");{const e=n.filters.map((t=>Km(t))).join(",");return`${n.op}(${e})`}}function XA(n,e){return n instanceof Hr?(function(r,a){return a instanceof Hr&&r.op===a.op&&r.field.isEqual(a.field)&&Ba(r.value,a.value)})(n,e):n instanceof pa?(function(r,a){return a instanceof pa&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((c,h,x)=>c&&XA(h,a.filters[x])),!0):!1})(n,e):void jt(19439)}function qA(n){return n instanceof Hr?(function(t){return`${t.field.canonicalString()} ${t.op} ${Su(t.value)}`})(n):n instanceof pa?(function(t){return t.op.toString()+" {"+t.getFilters().map(qA).join(" ,")+"}"})(n):"Filter"}class Q6 extends Hr{constructor(e,t,r){super(e,t,r),this.key=Dt.fromName(r.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z6 extends Hr{constructor(e,t){super(e,"in",t),this.keys=YA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class J6 extends Hr{constructor(e,t){super(e,"not-in",t),this.keys=YA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function YA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Dt.fromName(r.referenceValue)))}class $6 extends Hr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mp(t)&&Zf(t.arrayValue,this.value)}}class eR extends Hr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zf(this.value.arrayValue,t)}}class tR extends Hr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zf(this.value.arrayValue,t)}}class nR extends Hr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Zf(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t=null,r=[],a=[],c=null,h=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=c,this.startAt=h,this.endAt=x,this.Te=null}}function WE(n,e=null,t=[],r=[],a=null,c=null,h=null){return new rR(n,e,t,r,a,c,h)}function Lp(n){const e=Jt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Km(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),J1(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Su(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Su(r))).join(",")),e.Te=t}return e.Te}function kp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GE(n.startAt,e.startAt)&&GE(n.endAt,e.endAt)}function Qm(n){return Dt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t=null,r=[],a=[],c=null,h="F",x=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=c,this.limitType=h,this.startAt=x,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iR(n,e,t,r,a,c,h,x){return new ku(n,e,t,r,a,c,h,x)}function Pp(n){return new ku(n)}function XE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KA(n){return n.collectionGroup!==null}function Pf(n){const e=Jt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let x=new Zr(xi.comparator);return h.filters.forEach((v=>{v.getFlattenedFilters().forEach((_=>{_.isInequality()&&(x=x.add(_.field))}))})),x})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Jf(c,r))})),t.has(xi.keyField().canonicalString())||e.Ie.push(new Jf(xi.keyField(),r))}return e.Ie}function La(n){const e=Jt(n);return e.Ee||(e.Ee=sR(e,Pf(n))),e.Ee}function sR(n,e){if(n.limitType==="F")return WE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Jf(a.field,c)}));const t=n.endAt?new x1(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new x1(n.startAt.position,n.startAt.inclusive):null;return WE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zm(n,e){const t=n.filters.concat([e]);return new ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _1(n,e,t){return new ku(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ed(n,e){return kp(La(n),La(e))&&n.limitType===e.limitType}function QA(n){return`${Lp(La(n))}|lt:${n.limitType}`}function iu(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>qA(a))).join(", ")}]`),J1(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Su(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Su(a))).join(",")),`Target(${r})`})(La(n))}; limitType=${n.limitType})`}function td(n,e){return e.isFoundDocument()&&(function(r,a){const c=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Dt.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(n,e)&&(function(r,a){for(const c of Pf(r))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const c of r.filters)if(!c.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(h,x,v){const _=zE(h,x,v);return h.inclusive?_<=0:_<0})(r.startAt,Pf(r),a)||r.endAt&&!(function(h,x,v){const _=zE(h,x,v);return h.inclusive?_>=0:_>0})(r.endAt,Pf(r),a))})(n,e)}function aR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZA(n){return(e,t)=>{let r=!1;for(const a of Pf(n)){const c=oR(a,e,t);if(c!==0)return c;r=r||a.field.isKeyField()}return 0}}function oR(n,e,t){const r=n.field.isKeyField()?Dt.comparator(e.key,t.key):(function(c,h,x){const v=h.data.field(c),_=x.data.field(c);return v!==null&&_!==null?Tu(v,_):jt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return jt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,c]of r)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){kl(this.inner,((t,r)=>{for(const[a,c]of r)e(a,c)}))}isEmpty(){return LA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=new wr(Dt.comparator);function Co(){return lR}const JA=new wr(Dt.comparator);function bf(...n){let e=JA;for(const t of n)e=e.insert(t.key,t);return e}function $A(n){let e=JA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ac(){return Ff()}function eT(){return Ff()}function Ff(){return new _c((n=>n.toString()),((n,e)=>n.isEqual(e)))}const cR=new wr(Dt.comparator),uR=new Zr(Dt.comparator);function En(...n){let e=uR;for(const t of n)e=e.add(t);return e}const fR=new Zr(yn);function hR(){return fR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g1(e)?"-0":e}}function tT(n){return{integerValue:""+n}}function dR(n,e){return V6(e)?tT(e):Fp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function gR(n,e,t){return n instanceof y1?(function(a,c){const h={fields:{[FA]:{stringValue:PA},[UA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Dp(c)&&(c=$1(c)),c&&(h.fields[BA]=c),{mapValue:h}})(t,e):n instanceof $f?rT(n,e):n instanceof e0?iT(n,e):(function(a,c){const h=nT(a,c),x=qE(h)+qE(a.Ae);return Ym(h)&&Ym(a.Ae)?tT(x):Fp(a.serializer,x)})(n,e)}function mR(n,e,t){return n instanceof $f?rT(n,e):n instanceof e0?iT(n,e):t}function nT(n,e){return n instanceof E1?(function(r){return Ym(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class y1 extends nd{}class $f extends nd{constructor(e){super(),this.elements=e}}function rT(n,e){const t=sT(e);for(const r of n.elements)t.some((a=>Ba(a,r)))||t.push(r);return{arrayValue:{values:t}}}class e0 extends nd{constructor(e){super(),this.elements=e}}function iT(n,e){let t=sT(e);for(const r of n.elements)t=t.filter((a=>!Ba(a,r)));return{arrayValue:{values:t}}}class E1 extends nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function qE(n){return Dr(n.integerValue||n.doubleValue)}function sT(n){return Mp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pR(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof $f&&a instanceof $f||r instanceof e0&&a instanceof e0?Au(r.elements,a.elements,Ba):r instanceof E1&&a instanceof E1?Ba(r.Ae,a.Ae):r instanceof y1&&a instanceof y1})(n.transform,e.transform)}class xR{constructor(e,t){this.version=e,this.transformResults=t}}class Js{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Js}static exists(e){return new Js(void 0,e)}static updateTime(e){return new Js(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function n1(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class rd{}function aT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,Js.none()):new p0(n.key,n.data,Js.none());{const t=n.data,r=os.empty();let a=new Zr(xi.comparator);for(let c of e.fields)if(!a.has(c)){let h=t.field(c);h===null&&c.length>1&&(c=c.popLast(),h=t.field(c)),h===null?r.delete(c):r.set(c,h),a=a.add(c)}return new Pl(n.key,r,new Ns(a.toArray()),Js.none())}}function _R(n,e,t){n instanceof p0?(function(a,c,h){const x=a.value.clone(),v=KE(a.fieldTransforms,c,h.transformResults);x.setAll(v),c.convertToFoundDocument(h.version,x).setHasCommittedMutations()})(n,e,t):n instanceof Pl?(function(a,c,h){if(!n1(a.precondition,c))return void c.convertToUnknownDocument(h.version);const x=KE(a.fieldTransforms,c,h.transformResults),v=c.data;v.setAll(oT(a)),v.setAll(x),c.convertToFoundDocument(h.version,v).setHasCommittedMutations()})(n,e,t):(function(a,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Bf(n,e,t,r){return n instanceof p0?(function(c,h,x,v){if(!n1(c.precondition,h))return x;const _=c.value.clone(),T=QE(c.fieldTransforms,v,h);return _.setAll(T),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(n,e,t,r):n instanceof Pl?(function(c,h,x,v){if(!n1(c.precondition,h))return x;const _=QE(c.fieldTransforms,v,h),T=h.data;return T.setAll(oT(c)),T.setAll(_),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),x===null?null:x.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(n,e,t,r):(function(c,h,x){return n1(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):x})(n,e,t)}function yR(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),c=nT(r.transform,a||null);c!=null&&(t===null&&(t=os.empty()),t.set(r.field,c))}return t||null}function YE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Au(r,a,((c,h)=>pR(c,h)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class p0 extends rd{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Pl extends rd{constructor(e,t,r,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function oT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function KE(n,e,t){const r=new Map;Vn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const c=n[a],h=c.transform,x=e.data.field(c.field);r.set(c.field,mR(h,x,t[a]))}return r}function QE(n,e,t){const r=new Map;for(const a of n){const c=a.transform,h=t.data.field(a.field);r.set(a.field,gR(c,h,e))}return r}class Bp extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ER extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&_R(c,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=eT();return this.mutations.forEach((a=>{const c=e.get(a.key),h=c.overlayedDocument;let x=this.applyToLocalView(h,c.mutatedFields);x=t.has(a.key)?null:x;const v=aT(h,x);v!==null&&r.set(a.key,v),h.isValidDocument()||h.convertToNoDocument(Yt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),En())}isEqual(e){return this.batchId===e.batchId&&Au(this.mutations,e.mutations,((t,r)=>YE(t,r)))&&Au(this.baseMutations,e.baseMutations,((t,r)=>YE(t,r)))}}class Up{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Vn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return cR})();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,r[h].version);return new Up(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr,In;function TR(n){switch(n){case Xe.OK:return jt(64938);case Xe.CANCELLED:case Xe.UNKNOWN:case Xe.DEADLINE_EXCEEDED:case Xe.RESOURCE_EXHAUSTED:case Xe.INTERNAL:case Xe.UNAVAILABLE:case Xe.UNAUTHENTICATED:return!1;case Xe.INVALID_ARGUMENT:case Xe.NOT_FOUND:case Xe.ALREADY_EXISTS:case Xe.PERMISSION_DENIED:case Xe.FAILED_PRECONDITION:case Xe.ABORTED:case Xe.OUT_OF_RANGE:case Xe.UNIMPLEMENTED:case Xe.DATA_LOSS:return!0;default:return jt(15467,{code:n})}}function lT(n){if(n===void 0)return So("GRPC error has no .code"),Xe.UNKNOWN;switch(n){case Vr.OK:return Xe.OK;case Vr.CANCELLED:return Xe.CANCELLED;case Vr.UNKNOWN:return Xe.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Xe.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Xe.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Xe.INTERNAL;case Vr.UNAVAILABLE:return Xe.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Xe.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Xe.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Xe.NOT_FOUND;case Vr.ALREADY_EXISTS:return Xe.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Xe.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Xe.FAILED_PRECONDITION;case Vr.ABORTED:return Xe.ABORTED;case Vr.OUT_OF_RANGE:return Xe.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Xe.UNIMPLEMENTED;case Vr.DATA_LOSS:return Xe.DATA_LOSS;default:return jt(39323,{code:n})}}(In=Vr||(Vr={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new El([4294967295,4294967295],0);function ZE(n){const e=SR().encode(n),t=new AA;return t.update(e),new Uint8Array(t.digest())}function JE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new El([t,r],0),new El([a,c],0)]}class Vp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rf(`Invalid padding: ${t}`);if(r<0)throw new Rf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=El.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(El.fromNumber(r)));return a.compare(CR)===1&&(a=new El([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ZE(e),[r,a]=JE(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,a,c);if(!this.we(h))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Vp(c,a,t);return r.forEach((x=>h.insert(x))),h}insert(e){if(this.ge===0)return;const t=ZE(e),[r,a]=JE(t);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,a,c);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t,r,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,x0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new id(Yt.min(),a,new wr(yn),Co(),En())}}class x0{constructor(e,t,r,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new x0(r,t,En(),En(),En())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class cT{constructor(e,t){this.targetId=e,this.Ce=t}}class uT{constructor(e,t,r=vi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class $E{constructor(){this.ve=0,this.Fe=ev(),this.Me=vi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=En(),t=En(),r=En();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:jt(38017,{changeType:c})}})),new x0(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=ev()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Co(),this.Je=Ph(),this.He=Ph(),this.Ye=new wr(yn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:jt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Qm(c))if(r===0){const h=new Dt(c.path);this.et(t,h,Mi.newNoDocument(h,Yt.min()))}else Vn(r===1,20013,{expectedCount:r});else{const h=this._t(t);if(h!==r){const x=this.ut(e),v=x?this.ct(x,e,h):1;if(v!==0){this.it(t);const _=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:c=0}=t;let h,x;try{h=Sl(r).toUint8Array()}catch(v){if(v instanceof kA)return wu("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{x=new Vp(h,a,c)}catch(v){return wu(v instanceof Rf?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return x.ge===0?null:x}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((c=>{const h=this.Ge.ht(),x=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(x)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,h)=>{const x=this.ot(h);if(x){if(c.current&&Qm(x.target)){const v=new Dt(x.target.path);this.It(v).has(h)||this.Et(h,v)||this.et(h,v,Mi.newNoDocument(v,e))}c.Be&&(t.set(h,c.ke()),c.qe())}}));let r=En();this.He.forEach(((c,h)=>{let x=!0;h.forEachWhile((v=>{const _=this.ot(v);return!_||_.purpose==="TargetPurposeLimboResolution"||(x=!1,!1)})),x&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const a=new id(e,t,this.Ye,this.je,r);return this.je=Co(),this.Je=Ph(),this.He=Ph(),this.Ye=new wr(yn),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $E,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Zr(yn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Zr(yn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||vt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $E),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new wr(Dt.comparator)}function ev(){return new wr(Dt.comparator)}const bR={asc:"ASCENDING",desc:"DESCENDING"},RR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NR={and:"AND",or:"OR"};class OR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jm(n,e){return n.useProto3Json||J1(e)?e:{value:e}}function v1(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DR(n,e){return v1(n,e.toTimestamp())}function ka(n){return Vn(!!n,49232),Yt.fromTimestamp((function(t){const r=Tl(t);return new bn(r.seconds,r.nanos)})(n))}function Hp(n,e){return $m(n,e).canonicalString()}function $m(n,e){const t=(function(a){return new ir(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function hT(n){const e=ir.fromString(n);return Vn(xT(e),10190,{key:e.toString()}),e}function ep(n,e){return Hp(n.databaseId,e.path)}function Am(n,e){const t=hT(e);if(t.get(1)!==n.databaseId.projectId)throw new xt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xt(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Dt(gT(t))}function dT(n,e){return Hp(n.databaseId,e)}function MR(n){const e=hT(n);return e.length===4?ir.emptyPath():gT(e)}function tp(n){return new ir(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gT(n){return Vn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function tv(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function LR(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:jt(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(_,T){return _.useProto3Json?(Vn(T===void 0||typeof T=="string",58123),vi.fromBase64String(T||"")):(Vn(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),vi.fromUint8Array(T||new Uint8Array))})(n,e.targetChange.resumeToken),h=e.targetChange.cause,x=h&&(function(_){const T=_.code===void 0?Xe.UNKNOWN:lT(_.code);return new xt(T,_.message||"")})(h);t=new uT(r,a,c,x||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Am(n,r.document.name),c=ka(r.document.updateTime),h=r.document.createTime?ka(r.document.createTime):Yt.min(),x=new os({mapValue:{fields:r.document.fields}}),v=Mi.newFoundDocument(a,c,h,x),_=r.targetIds||[],T=r.removedTargetIds||[];t=new r1(_,T,v.key,v)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Am(n,r.document),c=r.readTime?ka(r.readTime):Yt.min(),h=Mi.newNoDocument(a,c),x=r.removedTargetIds||[];t=new r1([],x,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Am(n,r.document),c=r.removedTargetIds||[];t=new r1([],c,a,null)}else{if(!("filter"in e))return jt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:c}=r,h=new AR(a,c),x=r.targetId;t=new cT(x,h)}}return t}function kR(n,e){let t;if(e instanceof p0)t={update:tv(n,e.key,e.value)};else if(e instanceof Bp)t={delete:ep(n,e.key)};else if(e instanceof Pl)t={update:tv(n,e.key,e.data),updateMask:GR(e.fieldMask)};else{if(!(e instanceof ER))return jt(16599,{Vt:e.type});t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const x=h.transform;if(x instanceof y1)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof $f)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof e0)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof E1)return{fieldPath:h.field.canonicalString(),increment:x.Ae};throw jt(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:DR(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:jt(27497)})(n,e.precondition)),t}function PR(n,e){return n&&n.length>0?(Vn(e!==void 0,14353),n.map((t=>(function(a,c){let h=a.updateTime?ka(a.updateTime):ka(c);return h.isEqual(Yt.min())&&(h=ka(c)),new xR(h,a.transformResults||[])})(t,e)))):[]}function FR(n,e){return{documents:[dT(n,e.path)]}}function BR(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dT(n,a);const c=(function(_){if(_.length!==0)return pT(pa.create(_,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const h=(function(_){if(_.length!==0)return _.map((T=>(function(b){return{field:su(b.field),direction:HR(b.dir)}})(T)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const x=Jm(n,e.limit);return x!==null&&(t.structuredQuery.limit=x),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:a}}function UR(n){let e=MR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Vn(r===1,65062);const T=t.from[0];T.allDescendants?a=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=(function(C){const b=mT(C);return b instanceof pa&&WA(b)?b.getFilters():[b]})(t.where));let h=[];t.orderBy&&(h=(function(C){return C.map((b=>(function(U){return new Jf(au(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(b)))})(t.orderBy));let x=null;t.limit&&(x=(function(C){let b;return b=typeof C=="object"?C.value:C,J1(b)?null:b})(t.limit));let v=null;t.startAt&&(v=(function(C){const b=!!C.before,O=C.values||[];return new x1(O,b)})(t.startAt));let _=null;return t.endAt&&(_=(function(C){const b=!C.before,O=C.values||[];return new x1(O,b)})(t.endAt)),iR(e,a,h,c,x,"F",v,_)}function VR(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=au(t.unaryFilter.field);return Hr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=au(t.unaryFilter.field);return Hr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=au(t.unaryFilter.field);return Hr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=au(t.unaryFilter.field);return Hr.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return jt(61313);default:return jt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Hr.create(au(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return jt(58110);default:return jt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pa.create(t.compositeFilter.filters.map((r=>mT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return jt(1026)}})(t.compositeFilter.op))})(n):jt(30097,{filter:n})}function HR(n){return bR[n]}function jR(n){return RR[n]}function zR(n){return NR[n]}function su(n){return{fieldPath:n.canonicalString()}}function au(n){return xi.fromServerFormat(n.fieldPath)}function pT(n){return n instanceof Hr?(function(t){if(t.op==="=="){if(jE(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NAN"}};if(HE(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jE(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NOT_NAN"}};if(HE(t.value))return{unaryFilter:{field:su(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:su(t.field),op:jR(t.op),value:t.value}}})(n):n instanceof pa?(function(t){const r=t.getFilters().map((a=>pT(a)));return r.length===1?r[0]:{compositeFilter:{op:zR(t.op),filters:r}}})(n):jt(54877,{filter:n})}function GR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t,r,a,c=Yt.min(),h=Yt.min(),x=vi.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=x,this.expectedCount=v}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.yt=e}}function XR(n){const e=UR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Cn=new YR}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ye.resolve()}getCollectionParents(e,t){return Ye.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ye.resolve()}deleteFieldIndex(e,t){return Ye.resolve()}deleteAllFieldIndexes(e){return Ye.resolve()}createTargetIndexes(e,t){return Ye.resolve()}getDocumentsMatchingTarget(e,t){return Ye.resolve(null)}getIndexType(e,t){return Ye.resolve(0)}getFieldIndexes(e,t){return Ye.resolve([])}getNextCollectionGroupToUpdate(e){return Ye.resolve(null)}getMinOffset(e,t){return Ye.resolve(Al.min())}getMinOffsetFromCollectionGroup(e,t){return Ye.resolve(Al.min())}updateCollectionGroup(e,t,r){return Ye.resolve()}updateIndexEntries(e,t){return Ye.resolve()}}class YR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Zr(ir.comparator),c=!a.has(r);return this.index[t]=a.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Zr(ir.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_T=41943040;class ss{static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(_T,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cu(0)}static cr(){return new Cu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="LruGarbageCollector",KR=1048576;function iv([n,e],[t,r]){const a=yn(n,t);return a===0?yn(e,r):a}class QR{constructor(e){this.Ir=e,this.buffer=new Zr(iv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){vt(rv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lu(t)?vt(rv,"Ignoring IndexedDB error during garbage collection: ",t):await Mu(t)}await this.Vr(3e5)}))}}class JR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Ye.resolve(Z1.ce);const r=new QR(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),Ye.resolve(nv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,c,h,x,v,_;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,h=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(r=C,x=Date.now(),this.removeTargets(e,r,t)))).next((C=>(c=C,v=Date.now(),this.removeOrphanedDocuments(e,r)))).next((C=>(_=Date.now(),ru()<=_n.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${a} in `+(x-h)+`ms
	Removed ${c} targets in `+(v-x)+`ms
	Removed ${C} documents in `+(_-v)+`ms
Total Duration: ${_-T}ms`),Ye.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function $R(n,e){return new JR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.changes=new _c((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Bf(r.mutation,a,Ns.empty(),bn.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,En()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=En()){const a=ac();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((c=>{let h=bf();return c.forEach(((x,v)=>{h=h.insert(x,v.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const r=ac();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,En())))}populateOverlays(e,t,r){const a=[];return r.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((h,x)=>{t.set(h,x)}))}))}computeViews(e,t,r,a){let c=Co();const h=Ff(),x=(function(){return Ff()})();return t.forEach(((v,_)=>{const T=r.get(_.key);a.has(_.key)&&(T===void 0||T.mutation instanceof Pl)?c=c.insert(_.key,_):T!==void 0?(h.set(_.key,T.mutation.getFieldMask()),Bf(T.mutation,_,T.mutation.getFieldMask(),bn.now())):h.set(_.key,Ns.empty())})),this.recalculateAndSaveOverlays(e,c).next((v=>(v.forEach(((_,T)=>h.set(_,T))),t.forEach(((_,T)=>x.set(_,new tN(T,h.get(_)??null)))),x)))}recalculateAndSaveOverlays(e,t){const r=Ff();let a=new wr(((h,x)=>h-x)),c=En();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const x of h)x.keys().forEach((v=>{const _=t.get(v);if(_===null)return;let T=r.get(v)||Ns.empty();T=x.applyToLocalView(_,T),r.set(v,T);const C=(a.get(x.batchId)||En()).add(v);a=a.insert(x.batchId,C)}))})).next((()=>{const h=[],x=a.getReverseIterator();for(;x.hasNext();){const v=x.getNext(),_=v.key,T=v.value,C=eT();T.forEach((b=>{if(!c.has(b)){const O=aT(t.get(b),r.get(b));O!==null&&C.set(b,O),c=c.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,C))}return Ye.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(h){return Dt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):KA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-c.size):Ye.resolve(ac());let x=Yf,v=c;return h.next((_=>Ye.forEach(_,((T,C)=>(x<C.largestBatchId&&(x=C.largestBatchId),c.get(T)?Ye.resolve():this.remoteDocumentCache.getEntry(e,T).next((b=>{v=v.insert(T,b)}))))).next((()=>this.populateOverlays(e,_,c))).next((()=>this.computeViews(e,v,_,En()))).next((T=>({batchId:x,changes:$A(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next((r=>{let a=bf();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const c=t.collectionGroup;let h=bf();return this.indexManager.getCollectionParents(e,c).next((x=>Ye.forEach(x,(v=>{const _=(function(C,b){return new ku(b,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,v.child(c));return this.getDocumentsMatchingCollectionQuery(e,_,r,a).next((T=>{T.forEach(((C,b)=>{h=h.insert(C,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,a)))).next((h=>{c.forEach(((v,_)=>{const T=_.getKey();h.get(T)===null&&(h=h.insert(T,Mi.newInvalidDocument(T)))}));let x=bf();return h.forEach(((v,_)=>{const T=c.get(v);T!==void 0&&Bf(T.mutation,_,Ns.empty(),bn.now()),td(t,_)&&(x=x.insert(v,_))})),x}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ye.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ka(a.createTime)}})(t)),Ye.resolve()}getNamedQuery(e,t){return Ye.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:XR(a.bundledQuery),readTime:ka(a.readTime)}})(t)),Ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.overlays=new wr(Dt.comparator),this.qr=new Map}getOverlay(e,t){return Ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ac();return Ye.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&r.set(a,c)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,c)=>{this.St(e,t,c)})),Ye.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),Ye.resolve()}getOverlaysForCollection(e,t,r){const a=ac(),c=t.length+1,h=new Dt(t.child("")),x=this.overlays.getIteratorFrom(h);for(;x.hasNext();){const v=x.getNext().value,_=v.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===c&&v.largestBatchId>r&&a.set(v.getKey(),v)}return Ye.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let c=new wr(((_,T)=>_-T));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let T=c.get(_.largestBatchId);T===null&&(T=ac(),c=c.insert(_.largestBatchId,T)),T.set(_.getKey(),_)}}const x=ac(),v=c.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((_,T)=>x.set(_,T))),!(x.size()>=a)););return Ye.resolve(x)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const h=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new wR(t,r));let c=this.qr.get(t);c===void 0&&(c=En(),this.qr.set(t,c)),this.qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.sessionToken=vi.EMPTY_BYTE_STRING}getSessionToken(e){return Ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.Qr=new Zr(ni.$r),this.Ur=new Zr(ni.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ni(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ni(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Dt(new ir([])),r=new ni(t,e),a=new ni(t,e+1),c=[];return this.Ur.forEachInRange([r,a],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Dt(new ir([])),r=new ni(t,e),a=new ni(t,e+1);let c=En();return this.Ur.forEachInRange([r,a],(h=>{c=c.add(h.key)})),c}containsKey(e){const t=new ni(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ni{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Dt.comparator(e.key,t.key)||yn(e.Yr,t.Yr)}static Kr(e,t){return yn(e.Yr,t.Yr)||Dt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Zr(ni.$r)}checkEmpty(e){return Ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new vR(c,t,r,a);this.mutationQueue.push(h);for(const x of a)this.Zr=this.Zr.add(new ni(x.key,c)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ye.resolve(h)}lookupMutationBatch(e,t){return Ye.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),c=a<0?0:a;return Ye.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(this.mutationQueue.length===0?Op:this.tr-1)}getAllMutationBatches(e){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ni(t,0),a=new ni(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,a],(h=>{const x=this.Xr(h.Yr);c.push(x)})),Ye.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Zr(yn);return t.forEach((a=>{const c=new ni(a,0),h=new ni(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(x=>{r=r.add(x.Yr)}))})),Ye.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let c=r;Dt.isDocumentKey(c)||(c=c.child(""));const h=new ni(new Dt(c),0);let x=new Zr(yn);return this.Zr.forEachWhile((v=>{const _=v.key.path;return!!r.isPrefixOf(_)&&(_.length===a&&(x=x.add(v.Yr)),!0)}),h),Ye.resolve(this.ti(x))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Vn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ye.forEach(t.mutations,(a=>{const c=new ni(a.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ni(t,0),a=this.Zr.firstAfterOrEqual(r);return Ye.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ye.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.ri=e,this.docs=(function(){return new wr(Dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),c=a?a.size:0,h=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ye.resolve(r?r.document.mutableCopy():Mi.newInvalidDocument(t))}getEntries(e,t){let r=Co();return t.forEach((a=>{const c=this.docs.get(a);r=r.insert(a,c?c.document.mutableCopy():Mi.newInvalidDocument(a))})),Ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let c=Co();const h=t.path,x=new Dt(h.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(x);for(;v.hasNext();){const{key:_,value:{document:T}}=v.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||P6(k6(T),r)<=0||(a.has(T.key)||td(t,T))&&(c=c.insert(T.key,T.mutableCopy()))}return Ye.resolve(c)}getAllFromCollectionGroup(e,t,r,a){jt(9500)}ii(e,t){return Ye.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new lN(this)}getSize(e){return Ye.resolve(this.size)}}class lN extends eN{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),Ye.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.persistence=e,this.si=new _c((t=>Lp(t)),kp),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.oi=0,this._i=new jp,this.targetCount=0,this.ai=Cu.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),Ye.resolve()}getLastRemoteSnapshotVersion(e){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Ye.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ye.resolve()}updateTargetData(e,t){return this.Pr(t),Ye.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(e,t,r){let a=0;const c=[];return this.si.forEach(((h,x)=>{x.sequenceNumber<=t&&r.get(x.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,x.targetId)),a++)})),Ye.waitFor(c).next((()=>a))}getTargetCount(e){return Ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Ye.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Ye.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((h=>{c.push(a.markPotentiallyOrphaned(e,h))})),Ye.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Ye.resolve(r)}containsKey(e,t){return Ye.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t){this.ui={},this.overlays={},this.ci=new Z1(0),this.li=!1,this.li=!0,this.hi=new sN,this.referenceDelegate=e(this),this.Pi=new cN(this),this.indexManager=new qR,this.remoteDocumentCache=(function(a){return new oN(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new WR(t),this.Ii=new rN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new aN(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){vt("MemoryPersistence","Starting transaction:",e);const a=new uN(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,t){return Ye.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class uN extends B6{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new jp,this.Vi=null}static mi(e){return new zp(e)}get fi(){if(this.Vi)return this.Vi;throw jt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Ye.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Ye.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ye.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.fi,(r=>{const a=Dt.fromPath(r);return this.gi(e,a).next((c=>{c||t.removeEntry(a,Yt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ye.or([()=>Ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class w1{constructor(e,t){this.persistence=e,this.pi=new _c((r=>H6(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=$R(this,t)}static mi(e,t){return new w1(e,t)}Ei(){}di(e){return Ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Ye.forEach(this.pi,((r,a)=>this.br(e,r,a).next((c=>c?Ye.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(h=>this.br(e,h,t).next((x=>{x||(r++,c.removeEntry(h,Yt.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ye.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ye.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ye.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ye.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=e1(e.data.value)),t}br(e,t,r){return Ye.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return Ye.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=En(),a=En();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Gp(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VC()?8:U6(Pi())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const c={result:null};return this.ys(e,t).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,t,a,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new fN;return this.Ss(e,t,h).next((x=>{if(c.result=x,this.Vs)return this.bs(e,t,h,x.size)}))})).next((()=>c.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(ru()<=_n.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",iu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ye.resolve()):(ru()<=_n.DEBUG&&vt("QueryEngine","Query:",iu(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(ru()<=_n.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",iu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,La(t))):Ye.resolve())}ys(e,t){if(XE(t))return Ye.resolve(null);let r=La(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=_1(t,null,"F"),r=La(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=En(...c);return this.ps.getDocuments(e,h).next((x=>this.indexManager.getMinOffset(e,r).next((v=>{const _=this.Ds(t,x);return this.Cs(t,_,h,v.readTime)?this.ys(e,_1(t,null,"F")):this.vs(e,_,t,v)}))))})))))}ws(e,t,r,a){return XE(t)||a.isEqual(Yt.min())?Ye.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(t,c);return this.Cs(t,h,r,a)?Ye.resolve(null):(ru()<=_n.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),iu(t)),this.vs(e,h,t,L6(a,Yf)).next((x=>x)))}))}Ds(e,t){let r=new Zr(ZA(e));return t.forEach(((a,c)=>{td(e,c)&&(r=r.add(c))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,t,r){return ru()<=_n.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",iu(t)),this.ps.getDocumentsMatchingQuery(e,t,Al.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((c=>(t.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",dN=3e8;class gN{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new wr(yn),this.xs=new _c((c=>Lp(c)),kp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mN(n,e,t,r){return new gN(n,e,t,r)}async function ET(n,e){const t=Jt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((c=>(a=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],x=[];let v=En();for(const _ of a){h.push(_.batchId);for(const T of _.mutations)v=v.add(T.key)}for(const _ of c){x.push(_.batchId);for(const T of _.mutations)v=v.add(T.key)}return t.localDocuments.getDocuments(r,v).next((_=>({Ls:_,removedBatchIds:h,addedBatchIds:x})))}))}))}function pN(n,e){const t=Jt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(x,v,_,T){const C=_.batch,b=C.keys();let O=Ye.resolve();return b.forEach((U=>{O=O.next((()=>T.getEntry(v,U))).next((M=>{const V=_.docVersions.get(U);Vn(V!==null,48541),M.version.compareTo(V)<0&&(C.applyToRemoteDocument(M,_),M.isValidDocument()&&(M.setReadTime(_.commitVersion),T.addEntry(M)))}))})),O.next((()=>x.mutationQueue.removeMutationBatch(v,C)))})(t,r,e,c).next((()=>c.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(x){let v=En();for(let _=0;_<x.mutationResults.length;++_)x.mutationResults[_].transformResults.length>0&&(v=v.add(x.batch.mutations[_].key));return v})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function vT(n){const e=Jt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function xN(n,e){const t=Jt(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const x=[];e.targetChanges.forEach(((T,C)=>{const b=a.get(C);if(!b)return;x.push(t.Pi.removeMatchingKeys(c,T.removedDocuments,C).next((()=>t.Pi.addMatchingKeys(c,T.addedDocuments,C))));let O=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?O=O.withResumeToken(vi.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):T.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(T.resumeToken,r)),a=a.insert(C,O),(function(M,V,le){return M.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=dN?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(b,O,T)&&x.push(t.Pi.updateTargetData(c,O))}));let v=Co(),_=En();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))})),x.push(_N(c,h,e.documentUpdates).next((T=>{v=T.ks,_=T.qs}))),!r.isEqual(Yt.min())){const T=t.Pi.getLastRemoteSnapshotVersion(c).next((C=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));x.push(T)}return Ye.waitFor(x).next((()=>h.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,v,_))).next((()=>v))})).then((c=>(t.Ms=a,c)))}function _N(n,e,t){let r=En(),a=En();return t.forEach((c=>r=r.add(c))),e.getEntries(n,r).next((c=>{let h=Co();return t.forEach(((x,v)=>{const _=c.get(x);v.isFoundDocument()!==_.isFoundDocument()&&(a=a.add(x)),v.isNoDocument()&&v.version.isEqual(Yt.min())?(e.removeEntry(x,v.readTime),h=h.insert(x,v)):!_.isValidDocument()||v.version.compareTo(_.version)>0||v.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(v),h=h.insert(x,v)):vt(Wp,"Ignoring outdated watch update for ",x,". Current version:",_.version," Watch version:",v.version)})),{ks:h,qs:a}}))}function yN(n,e){const t=Jt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Op),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function EN(n,e){const t=Jt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((c=>c?(a=c,Ye.resolve(a)):t.Pi.allocateTargetId(r).next((h=>(a=new gl(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function np(n,e,t){const r=Jt(n),a=r.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,a)))}catch(h){if(!Lu(h))throw h;vt(Wp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function sv(n,e,t){const r=Jt(n);let a=Yt.min(),c=En();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(v,_,T){const C=Jt(v),b=C.xs.get(T);return b!==void 0?Ye.resolve(C.Ms.get(b)):C.Pi.getTargetData(_,T)})(r,h,La(e)).next((x=>{if(x)return a=x.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,x.targetId).next((v=>{c=v}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,t?a:Yt.min(),t?c:En()))).next((x=>(vN(r,aR(e),x),{documents:x,Qs:c})))))}function vN(n,e,t){let r=n.Os.get(e)||Yt.min();t.forEach(((a,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),n.Os.set(e,r)}class av{constructor(){this.activeTargetIds=hR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wN{constructor(){this.Mo=new av,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new av,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="ConnectivityMonitor";class lv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){vt(ov,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){vt(ov,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fh=null;function rp(){return Fh===null?Fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Fh++,"0x"+Fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="RestConnection",TN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===m1?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,c){const h=rp(),x=this.zo(e,t.toUriEncodedString());vt(Tm,`Sending RPC '${e}' ${h}:`,x,r);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,a,c);const{host:_}=new URL(x),T=Ru(_);return this.Jo(e,x,v,r,T).then((C=>(vt(Tm,`Received RPC '${e}' ${h}: `,C),C)),(C=>{throw wu(Tm,`RPC '${e}' ${h} failed with error: `,C,"url: ",x,"request:",r),C}))}Ho(e,t,r,a,c,h){return this.Go(e,t,r,a,c)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Du})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),r&&r.headers.forEach(((a,c)=>e[c]=a))}zo(e,t){const r=TN[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="WebChannelConnection";class IN extends SN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,c){const h=rp();return new Promise(((x,v)=>{const _=new TA;_.setWithCredentials(!0),_.listenOnce(SA.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case $h.NO_ERROR:const C=_.getResponseJson();vt(Oi,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(C)),x(C);break;case $h.TIMEOUT:vt(Oi,`RPC '${e}' ${h} timed out`),v(new xt(Xe.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const b=_.getStatus();if(vt(Oi,`RPC '${e}' ${h} failed with status:`,b,"response text:",_.getResponseText()),b>0){let O=_.getResponseJson();Array.isArray(O)&&(O=O[0]);const U=O==null?void 0:O.error;if(U&&U.status&&U.message){const M=(function(le){const ce=le.toLowerCase().replace(/_/g,"-");return Object.values(Xe).indexOf(ce)>=0?ce:Xe.UNKNOWN})(U.status);v(new xt(M,U.message))}else v(new xt(Xe.UNKNOWN,"Server responded with status "+_.getStatus()))}else v(new xt(Xe.UNAVAILABLE,"Connection failed."));break;default:jt(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{vt(Oi,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(a);vt(Oi,`RPC '${e}' ${h} sending request:`,a),_.send(t,"POST",T,r,15)}))}T_(e,t,r){const a=rp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=bA(),x=IA(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(v.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,t,r),v.encodeInitMessageHeaders=!0;const T=c.join("");vt(Oi,`Creating RPC '${e}' stream ${a}: ${T}`,v);const C=h.createWebChannel(T,v);this.I_(C);let b=!1,O=!1;const U=new CN({Yo:V=>{O?vt(Oi,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(b||(vt(Oi,`Opening RPC '${e}' stream ${a} transport.`),C.open(),b=!0),vt(Oi,`RPC '${e}' stream ${a} sending:`,V),C.send(V))},Zo:()=>C.close()}),M=(V,le,ce)=>{V.listen(le,(ie=>{try{ce(ie)}catch(me){setTimeout((()=>{throw me}),0)}}))};return M(C,If.EventType.OPEN,(()=>{O||(vt(Oi,`RPC '${e}' stream ${a} transport opened.`),U.o_())})),M(C,If.EventType.CLOSE,(()=>{O||(O=!0,vt(Oi,`RPC '${e}' stream ${a} transport closed`),U.a_(),this.E_(C))})),M(C,If.EventType.ERROR,(V=>{O||(O=!0,wu(Oi,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),U.a_(new xt(Xe.UNAVAILABLE,"The operation could not be completed")))})),M(C,If.EventType.MESSAGE,(V=>{var le;if(!O){const ce=V.data[0];Vn(!!ce,16349);const ie=ce,me=(ie==null?void 0:ie.error)||((le=ie[0])==null?void 0:le.error);if(me){vt(Oi,`RPC '${e}' stream ${a} received error:`,me);const Ue=me.status;let De=(function(P){const te=Vr[P];if(te!==void 0)return lT(te)})(Ue),k=me.message;De===void 0&&(De=Xe.INTERNAL,k="Unknown error status: "+Ue+" with message "+me.message),O=!0,U.a_(new xt(De,k)),C.close()}else vt(Oi,`RPC '${e}' stream ${a} received:`,ce),U.u_(ce)}})),M(x,CA.STAT_EVENT,(V=>{V.stat===Wm.PROXY?vt(Oi,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===Wm.NOPROXY&&vt(Oi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Sm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(n){return new OR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,t,r=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="PersistentStream";class AT{constructor(e,t,r,a,c,h,x,v){this.Mi=e,this.S_=r,this.b_=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=x,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new wT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Xe.RESOURCE_EXHAUSTED?(So(t.toString()),So("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new xt(Xe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return vt(cv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(vt(cv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bN extends AT{constructor(e,t,r,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,h),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LR(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Yt.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Yt.min():h.readTime?ka(h.readTime):Yt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(c,h){let x;const v=h.target;if(x=Qm(v)?{documents:FR(c,v)}:{query:BR(c,v).ft},x.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){x.resumeToken=fT(c,h.resumeToken);const _=Jm(c,h.expectedCount);_!==null&&(x.expectedCount=_)}else if(h.snapshotVersion.compareTo(Yt.min())>0){x.readTime=v1(c,h.snapshotVersion.toTimestamp());const _=Jm(c,h.expectedCount);_!==null&&(x.expectedCount=_)}return x})(this.serializer,e);const r=VR(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.q_(t)}}class RN extends AT{constructor(e,t,r,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Vn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PR(e.writeResults,e.commitTime),r=ka(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=tp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>kR(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{}class ON extends NN{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new xt(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,$m(t,r),a,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xt(Xe.UNKNOWN,c.toString())}))}Ho(e,t,r,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,x])=>this.connection.Ho(e,$m(t,r),a,h,x,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new xt(Xe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(So(t),this.aa=!1):vt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="RemoteStore";class MN{constructor(e,t,r,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{yc(this)&&(vt(gc,"Restarting streams for network reachability change."),await(async function(v){const _=Jt(v);_.Ea.add(4),await _0(_),_.Ra.set("Unknown"),_.Ea.delete(4),await ad(_)})(this))}))})),this.Ra=new DN(r,a)}}async function ad(n){if(yc(n))for(const e of n.da)await e(!0)}async function _0(n){for(const e of n.da)await e(!1)}function TT(n,e){const t=Jt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kp(t)?Yp(t):Pu(t).O_()&&qp(t,e))}function Xp(n,e){const t=Jt(n),r=Pu(t);t.Ia.delete(e),r.O_()&&ST(t,e),t.Ia.size===0&&(r.O_()?r.L_():yc(t)&&t.Ra.set("Unknown"))}function qp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pu(n).Y_(e)}function ST(n,e){n.Va.Ue(e),Pu(n).Z_(e)}function Yp(n){n.Va=new IR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pu(n).start(),n.Ra.ua()}function Kp(n){return yc(n)&&!Pu(n).x_()&&n.Ia.size>0}function yc(n){return Jt(n).Ea.size===0}function CT(n){n.Va=void 0}async function LN(n){n.Ra.set("Online")}async function kN(n){n.Ia.forEach(((e,t)=>{qp(n,e)}))}async function PN(n,e){CT(n),Kp(n)?(n.Ra.ha(e),Yp(n)):n.Ra.set("Unknown")}async function FN(n,e,t){if(n.Ra.set("Online"),e instanceof uT&&e.state===2&&e.cause)try{await(async function(a,c){const h=c.cause;for(const x of c.targetIds)a.Ia.has(x)&&(await a.remoteSyncer.rejectListen(x,h),a.Ia.delete(x),a.Va.removeTarget(x))})(n,e)}catch(r){vt(gc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await A1(n,r)}else if(e instanceof r1?n.Va.Ze(e):e instanceof cT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Yt.min()))try{const r=await vT(n.localStore);t.compareTo(r)>=0&&await(function(c,h){const x=c.Va.Tt(h);return x.targetChanges.forEach(((v,_)=>{if(v.resumeToken.approximateByteSize()>0){const T=c.Ia.get(_);T&&c.Ia.set(_,T.withResumeToken(v.resumeToken,h))}})),x.targetMismatches.forEach(((v,_)=>{const T=c.Ia.get(v);if(!T)return;c.Ia.set(v,T.withResumeToken(vi.EMPTY_BYTE_STRING,T.snapshotVersion)),ST(c,v);const C=new gl(T.target,v,_,T.sequenceNumber);qp(c,C)})),c.remoteSyncer.applyRemoteEvent(x)})(n,t)}catch(r){vt(gc,"Failed to raise snapshot:",r),await A1(n,r)}}async function A1(n,e,t){if(!Lu(e))throw e;n.Ea.add(1),await _0(n),n.Ra.set("Offline"),t||(t=()=>vT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{vt(gc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ad(n)}))}function IT(n,e){return e().catch((t=>A1(n,t,e)))}async function od(n){const e=Jt(n),t=Il(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Op;for(;BN(e);)try{const a=await yN(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,UN(e,a)}catch(a){await A1(e,a)}bT(e)&&RT(e)}function BN(n){return yc(n)&&n.Ta.length<10}function UN(n,e){n.Ta.push(e);const t=Il(n);t.O_()&&t.X_&&t.ea(e.mutations)}function bT(n){return yc(n)&&!Il(n).x_()&&n.Ta.length>0}function RT(n){Il(n).start()}async function VN(n){Il(n).ra()}async function HN(n){const e=Il(n);for(const t of n.Ta)e.ea(t.mutations)}async function jN(n,e,t){const r=n.Ta.shift(),a=Up.from(r,e,t);await IT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await od(n)}async function zN(n,e){e&&Il(n).X_&&await(async function(r,a){if((function(h){return TR(h)&&h!==Xe.ABORTED})(a.code)){const c=r.Ta.shift();Il(r).B_(),await IT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,a))),await od(r)}})(n,e),bT(n)&&RT(n)}async function uv(n,e){const t=Jt(n);t.asyncQueue.verifyOperationInProgress(),vt(gc,"RemoteStore received new credentials");const r=yc(t);t.Ea.add(3),await _0(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ad(t)}async function GN(n,e){const t=Jt(n);e?(t.Ea.delete(2),await ad(t)):e||(t.Ea.add(2),await _0(t),t.Ra.set("Unknown"))}function Pu(n){return n.ma||(n.ma=(function(t,r,a){const c=Jt(t);return c.sa(),new bN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:LN.bind(null,n),t_:kN.bind(null,n),r_:PN.bind(null,n),H_:FN.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Kp(n)?Yp(n):n.Ra.set("Unknown")):(await n.ma.stop(),CT(n))}))),n.ma}function Il(n){return n.fa||(n.fa=(function(t,r,a){const c=Jt(t);return c.sa(),new RN(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:VN.bind(null,n),r_:zN.bind(null,n),ta:HN.bind(null,n),na:jN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await od(n)):(await n.fa.stop(),n.Ta.length>0&&(vt(gc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,t,r,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=c,this.deferred=new vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,c){const h=Date.now()+r,x=new Qp(e,t,h,a,c);return x.start(r),x}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(Xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zp(n,e){if(So("AsyncQueue",`${e}: ${n}`),Lu(n))return new xt(Xe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{static emptySet(e){return new gu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Dt.comparator(t.key,r.key):(t,r)=>Dt.comparator(t.key,r.key),this.keyedMap=bf(),this.sortedSet=new wr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=r.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new gu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(){this.ga=new wr(Dt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):jt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Iu{constructor(e,t,r,a,c,h,x,v,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=x,this.excludesMetadataChanges=v,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,a,c){const h=[];return t.forEach((x=>{h.push({type:0,doc:x})})),new Iu(e,t,gu.emptySet(t),h,r,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class XN{constructor(){this.queries=hv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Jt(t),c=a.queries;a.queries=hv(),c.forEach(((h,x)=>{for(const v of x.Sa)v.onError(r)}))})(this,new xt(Xe.ABORTED,"Firestore shutting down"))}}function hv(){return new _c((n=>QA(n)),ed)}async function NT(n,e){const t=Jt(n);let r=3;const a=e.query;let c=t.queries.get(a);c?!c.ba()&&e.Da()&&(r=2):(c=new WN,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(h){const x=Zp(h,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(x)}t.queries.set(a,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Jp(t)}async function OT(n,e){const t=Jt(n),r=e.query;let a=3;const c=t.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function qN(n,e){const t=Jt(n);let r=!1;for(const a of e){const c=a.query,h=t.queries.get(c);if(h){for(const x of h.Sa)x.Fa(a)&&(r=!0);h.wa=a}}r&&Jp(t)}function YN(n,e,t){const r=Jt(n),a=r.queries.get(e);if(a)for(const c of a.Sa)c.onError(t);r.queries.delete(e)}function Jp(n){n.Ca.forEach((e=>{e.next()}))}var ip,dv;(dv=ip||(ip={})).Ma="default",dv.Cache="cache";class DT{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.key=e}}class LT{constructor(e){this.key=e}}class KN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=En(),this.mutatedKeys=En(),this.eu=ZA(e),this.tu=new gu(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new fv,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,h=a,x=!1;const v=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,_=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((T,C)=>{const b=a.get(T),O=td(this.query,C)?C:null,U=!!b&&this.mutatedKeys.has(b.key),M=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;b&&O?b.data.isEqual(O.data)?U!==M&&(r.track({type:3,doc:O}),V=!0):this.su(b,O)||(r.track({type:2,doc:O}),V=!0,(v&&this.eu(O,v)>0||_&&this.eu(O,_)<0)&&(x=!0)):!b&&O?(r.track({type:0,doc:O}),V=!0):b&&!O&&(r.track({type:1,doc:b}),V=!0,(v||_)&&(x=!0)),V&&(O?(h=h.add(O),c=M?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Cs:x,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,C)=>(function(O,U){const M=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt(20277,{Rt:V})}};return M(O)-M(U)})(T.type,C.type)||this.eu(T.doc,C.doc))),this.ou(r),a=a??!1;const x=t&&!a?this._u():[],v=this.Xa.size===0&&this.current&&!a?1:0,_=v!==this.Za;return this.Za=v,h.length!==0||_?{snapshot:new Iu(this.query,e.tu,c,h,e.mutatedKeys,v===0,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:x}:{au:x}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=En(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new LT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new MT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=En();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $p="SyncEngine";class QN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZN{constructor(e){this.key=e,this.hu=!1}}class JN{constructor(e,t,r,a,c,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new _c((x=>QA(x)),ed),this.Iu=new Map,this.Eu=new Set,this.du=new wr(Dt.comparator),this.Au=new Map,this.Ru=new jp,this.Vu={},this.mu=new Map,this.fu=Cu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $N(n,e,t=!0){const r=VT(n);let a;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await kT(r,e,t,!0),a}async function eO(n,e){const t=VT(n);await kT(t,e,!0,!1)}async function kT(n,e,t,r){const a=await EN(n.localStore,La(e)),c=a.targetId,h=n.sharedClientState.addLocalQueryTarget(c,t);let x;return r&&(x=await tO(n,e,c,h==="current",a.resumeToken)),n.isPrimaryClient&&t&&TT(n.remoteStore,a),x}async function tO(n,e,t,r,a){n.pu=(C,b,O)=>(async function(M,V,le,ce){let ie=V.view.ru(le);ie.Cs&&(ie=await sv(M.localStore,V.query,!1).then((({documents:k})=>V.view.ru(k,ie))));const me=ce&&ce.targetChanges.get(V.targetId),Ue=ce&&ce.targetMismatches.get(V.targetId)!=null,De=V.view.applyChanges(ie,M.isPrimaryClient,me,Ue);return mv(M,V.targetId,De.au),De.snapshot})(n,C,b,O);const c=await sv(n.localStore,e,!0),h=new KN(e,c.Qs),x=h.ru(c.documents),v=x0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),_=h.applyChanges(x,n.isPrimaryClient,v);mv(n,t,_.au);const T=new QN(e,t,h);return n.Tu.set(e,T),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),_.snapshot}async function nO(n,e,t){const r=Jt(n),a=r.Tu.get(e),c=r.Iu.get(a.targetId);if(c.length>1)return r.Iu.set(a.targetId,c.filter((h=>!ed(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await np(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Xp(r.remoteStore,a.targetId),sp(r,a.targetId)})).catch(Mu)):(sp(r,a.targetId),await np(r.localStore,a.targetId,!0))}async function rO(n,e){const t=Jt(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Xp(t.remoteStore,r.targetId))}async function iO(n,e,t){const r=fO(n);try{const a=await(function(h,x){const v=Jt(h),_=bn.now(),T=x.reduce(((O,U)=>O.add(U.key)),En());let C,b;return v.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let U=Co(),M=En();return v.Ns.getEntries(O,T).next((V=>{U=V,U.forEach(((le,ce)=>{ce.isValidDocument()||(M=M.add(le))}))})).next((()=>v.localDocuments.getOverlayedDocuments(O,U))).next((V=>{C=V;const le=[];for(const ce of x){const ie=yR(ce,C.get(ce.key).overlayedDocument);ie!=null&&le.push(new Pl(ce.key,ie,jA(ie.value.mapValue),Js.exists(!0)))}return v.mutationQueue.addMutationBatch(O,_,le,x)})).next((V=>{b=V;const le=V.applyToLocalDocumentSet(C,M);return v.documentOverlayCache.saveOverlays(O,V.batchId,le)}))})).then((()=>({batchId:b.batchId,changes:$A(C)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(h,x,v){let _=h.Vu[h.currentUser.toKey()];_||(_=new wr(yn)),_=_.insert(x,v),h.Vu[h.currentUser.toKey()]=_})(r,a.batchId,t),await y0(r,a.changes),await od(r.remoteStore)}catch(a){const c=Zp(a,"Failed to persist write");t.reject(c)}}async function PT(n,e){const t=Jt(n);try{const r=await xN(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const h=t.Au.get(c);h&&(Vn(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?h.hu=!0:a.modifiedDocuments.size>0?Vn(h.hu,14607):a.removedDocuments.size>0&&(Vn(h.hu,42227),h.hu=!1))})),await y0(t,r,e)}catch(r){await Mu(r)}}function gv(n,e,t){const r=Jt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((c,h)=>{const x=h.view.va(e);x.snapshot&&a.push(x.snapshot)})),(function(h,x){const v=Jt(h);v.onlineState=x;let _=!1;v.queries.forEach(((T,C)=>{for(const b of C.Sa)b.va(x)&&(_=!0)})),_&&Jp(v)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sO(n,e,t){const r=Jt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),c=a&&a.key;if(c){let h=new wr(Dt.comparator);h=h.insert(c,Mi.newNoDocument(c,Yt.min()));const x=En().add(c),v=new id(Yt.min(),new Map,new wr(yn),h,x);await PT(r,v),r.du=r.du.remove(c),r.Au.delete(e),e2(r)}else await np(r.localStore,e,!1).then((()=>sp(r,e,t))).catch(Mu)}async function aO(n,e){const t=Jt(n),r=e.batch.batchId;try{const a=await pN(t.localStore,e);BT(t,r,null),FT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await y0(t,a)}catch(a){await Mu(a)}}async function oO(n,e,t){const r=Jt(n);try{const a=await(function(h,x){const v=Jt(h);return v.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let T;return v.mutationQueue.lookupMutationBatch(_,x).next((C=>(Vn(C!==null,37113),T=C.keys(),v.mutationQueue.removeMutationBatch(_,C)))).next((()=>v.mutationQueue.performConsistencyCheck(_))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(_,T,x))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,T))).next((()=>v.localDocuments.getDocuments(_,T)))}))})(r.localStore,e);BT(r,e,t),FT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await y0(r,a)}catch(a){await Mu(a)}}function FT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function BT(n,e,t){const r=Jt(n);let a=r.Vu[r.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function sp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||UT(n,r)}))}function UT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),e2(n))}function mv(n,e,t){for(const r of t)r instanceof MT?(n.Ru.addReference(r.key,e),lO(n,r)):r instanceof LT?(vt($p,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||UT(n,r.key)):jt(19791,{wu:r})}function lO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(vt($p,"New document in limbo: "+t),n.Eu.add(r),e2(n))}function e2(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Dt(ir.fromString(e)),r=n.fu.next();n.Au.set(r,new ZN(t)),n.du=n.du.insert(t,r),TT(n.remoteStore,new gl(La(Pp(t.path)),r,"TargetPurposeLimboResolution",Z1.ce))}}async function y0(n,e,t){const r=Jt(n),a=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((x,v)=>{h.push(r.pu(v,e,t).then((_=>{var T;if((_||t)&&r.isPrimaryClient){const C=_?!_.fromCache:(T=t==null?void 0:t.targetChanges.get(v.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(v.targetId,C?"current":"not-current")}if(_){a.push(_);const C=Gp.As(v.targetId,_);c.push(C)}})))})),await Promise.all(h),r.Pu.H_(a),await(async function(v,_){const T=Jt(v);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>Ye.forEach(_,(b=>Ye.forEach(b.Es,(O=>T.persistence.referenceDelegate.addReference(C,b.targetId,O))).next((()=>Ye.forEach(b.ds,(O=>T.persistence.referenceDelegate.removeReference(C,b.targetId,O)))))))))}catch(C){if(!Lu(C))throw C;vt(Wp,"Failed to update sequence numbers: "+C)}for(const C of _){const b=C.targetId;if(!C.fromCache){const O=T.Ms.get(b),U=O.snapshotVersion,M=O.withLastLimboFreeSnapshotVersion(U);T.Ms=T.Ms.insert(b,M)}}})(r.localStore,c))}async function cO(n,e){const t=Jt(n);if(!t.currentUser.isEqual(e)){vt($p,"User change. New user:",e.toKey());const r=await ET(t.localStore,e);t.currentUser=e,(function(c,h){c.mu.forEach((x=>{x.forEach((v=>{v.reject(new xt(Xe.CANCELLED,h))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await y0(t,r.Ls)}}function uO(n,e){const t=Jt(n),r=t.Au.get(e);if(r&&r.hu)return En().add(r.key);{let a=En();const c=t.Iu.get(e);if(!c)return a;for(const h of c){const x=t.Tu.get(h);a=a.unionWith(x.view.nu)}return a}}function VT(n){const e=Jt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sO.bind(null,e),e.Pu.H_=qN.bind(null,e.eventManager),e.Pu.yu=YN.bind(null,e.eventManager),e}function fO(n){const e=Jt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oO.bind(null,e),e}class T1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mN(this.persistence,new hN,e.initialUser,this.serializer)}Cu(e){return new yT(zp.mi,this.serializer)}Du(e){return new wN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}T1.provider={build:()=>new T1};class hO extends T1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Vn(this.persistence.referenceDelegate instanceof w1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new yT((r=>w1.mi(r,t)),this.serializer)}}class ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,this.syncEngine),await GN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new XN})()}createDatastore(e){const t=sd(e.databaseInfo.databaseId),r=(function(c){return new IN(c)})(e.databaseInfo);return(function(c,h,x,v){return new ON(c,h,x,v)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,c,h,x){return new MN(r,a,c,h,x)})(this.localStore,this.datastore,e.asyncQueue,(t=>gv(this.syncEngine,t,0)),(function(){return lv.v()?new lv:new AN})())}createSyncEngine(e,t){return(function(a,c,h,x,v,_,T){const C=new JN(a,c,h,x,v,_);return T&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Jt(a);vt(gc,"RemoteStore shutting down."),c.Ea.add(5),await _0(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ap.provider={build:()=>new ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):So("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl="FirestoreClient";class dO{constructor(e,t,r,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=Di.UNAUTHENTICATED,this.clientId=Np.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{vt(bl,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(vt(bl,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Cm(n,e){n.asyncQueue.verifyOperationInProgress(),vt(bl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await ET(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function pv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gO(n);vt(bl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>uv(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>uv(e.remoteStore,a))),n._onlineComponents=e}async function gO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){vt(bl,"Using user provided OfflineComponentProvider");try{await Cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Xe.FAILED_PRECONDITION||a.code===Xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;wu("Error using user provided cache. Falling back to memory cache: "+t),await Cm(n,new T1)}}else vt(bl,"Using default OfflineComponentProvider"),await Cm(n,new hO(void 0));return n._offlineComponents}async function jT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(vt(bl,"Using user provided OnlineComponentProvider"),await pv(n,n._uninitializedComponentsProvider._online)):(vt(bl,"Using default OnlineComponentProvider"),await pv(n,new ap))),n._onlineComponents}function mO(n){return jT(n).then((e=>e.syncEngine))}async function op(n){const e=await jT(n),t=e.eventManager;return t.onListen=$N.bind(null,e.syncEngine),t.onUnlisten=nO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rO.bind(null,e.syncEngine),t}function pO(n,e,t={}){const r=new vl;return n.asyncQueue.enqueueAndForget((async()=>(function(c,h,x,v,_){const T=new HT({next:b=>{T.Nu(),h.enqueueAndForget((()=>OT(c,C))),b.fromCache&&v.source==="server"?_.reject(new xt(Xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(b)},error:b=>_.reject(b)}),C=new DT(x,T,{includeMetadataChanges:!0,qa:!0});return NT(c,C)})(await op(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firestore.googleapis.com",_v=!0;class yv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xt(Xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GT,this.ssl=_v}else this.host=e.host,this.ssl=e.ssl??_v;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_T;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KR)throw new xt(Xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xt(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ld{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(Xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(Xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new A6;switch(r.type){case"firstParty":return new I6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xt(Xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=xv.get(t);r&&(vt("ComponentProvider","Removing Datastore"),xv.delete(t),r.terminate())})(this),Promise.resolve()}}function xO(n,e,t,r={}){var _;n=Zs(n,ld);const a=Ru(e),c=n._getSettings(),h={...c,emulatorOptions:n._getEmulatorOptions()},x=`${e}:${t}`;a&&(kw(`https://${x}`),Pw("Firestore",!0)),c.host!==GT&&c.host!==x&&wu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...c,host:x,ssl:a,emulatorOptions:r};if(!uc(v,h)&&(n._setSettings(v),r.mockUserToken)){let T,C;if(typeof r.mockUserToken=="string")T=r.mockUserToken,C=Di.MOCK_USER;else{T=OC(r.mockUserToken,(_=n._app)==null?void 0:_.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new xt(Xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Di(b)}n._authCredentials=new T6(new NA(T,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oo(this.firestore,e,this._query)}}class Mr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mr(this.firestore,e,this._key)}toJSON(){return{type:Mr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(m0(t,Mr._jsonSchema))return new Mr(e,r||null,new Dt(ir.fromString(t.referencePath)))}}Mr._jsonSchemaVersion="firestore/documentReference/1.0",Mr._jsonSchema={type:jr("string",Mr._jsonSchemaVersion),referencePath:jr("string")};class wl extends Oo{constructor(e,t,r){super(e,t,Pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mr(this.firestore,null,new Dt(e))}withConverter(e){return new wl(this.firestore,e,this._path)}}function t2(n,e,...t){if(n=Gr(n),OA("collection","path",e),n instanceof ld){const r=ir.fromString(e,...t);return DE(r),new wl(n,null,r)}{if(!(n instanceof Mr||n instanceof wl))throw new xt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ir.fromString(e,...t));return DE(r),new wl(n.firestore,null,r)}}function mu(n,e,...t){if(n=Gr(n),arguments.length===1&&(e=Np.newId()),OA("doc","path",e),n instanceof ld){const r=ir.fromString(e,...t);return OE(r),new Mr(n,null,new Dt(r))}{if(!(n instanceof Mr||n instanceof wl))throw new xt(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ir.fromString(e,...t));return OE(r),new Mr(n.firestore,n instanceof wl?n.converter:null,new Dt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new wT(this,"async_queue_retry"),this._c=()=>{const r=Sm();r&&vt(Ev,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Sm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new vl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lu(e))throw e;vt(Ev,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,So("INTERNAL UNHANDLED ERROR: ",wv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Qp.createAndSchedule(this,e,t,r,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&jt(47125,{Pc:wv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function wv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const c of r)if(c in a&&typeof a[c]=="function")return!0;return!1})(n,["next","error","complete"])}class Rl extends ld{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new vv,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function _O(n,e){const t=typeof n=="object"?n:Ep(),r=typeof n=="string"?n:m1,a=yp(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const c=RC("firestore");c&&xO(a,...c)}return a}function n2(n){if(n._terminated)throw new xt(Xe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yO(n),n._firestoreClient}function yO(n){var r,a,c;const e=n._freezeSettings(),t=(function(x,v,_,T){return new G6(x,v,_,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,zT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new dO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(x){const v=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(v),_online:v}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qs(vi.fromBase64String(e))}catch(t){throw new xt(Xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qs(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(m0(e,Qs._jsonSchema))return Qs.fromBase64String(e.bytes)}}Qs._jsonSchemaVersion="firestore/bytes/1.0",Qs._jsonSchema={type:jr("string",Qs._jsonSchemaVersion),bytes:jr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xt(Xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xt(Xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xt(Xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return yn(this._lat,e._lat)||yn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Pa._jsonSchemaVersion}}static fromJSON(e){if(m0(e,Pa._jsonSchema))return new Pa(e.latitude,e.longitude)}}Pa._jsonSchemaVersion="firestore/geoPoint/1.0",Pa._jsonSchema={type:jr("string",Pa._jsonSchemaVersion),latitude:jr("number"),longitude:jr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Fa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(m0(e,Fa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Fa(e.vectorValues);throw new xt(Xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fa._jsonSchemaVersion="firestore/vectorValue/1.0",Fa._jsonSchema={type:jr("string",Fa._jsonSchemaVersion),vectorValues:jr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^__.*__$/;class vO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new p0(e,this.data,t,this.fieldTransforms)}}class WT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function XT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt(40011,{Ac:n})}}class i2{constructor(e,t,r,a,c,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new i2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return S1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(XT(this.Ac)&&EO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sd(e)}Cc(e,t,r,a=!1){return new i2({Ac:e,methodName:t,Dc:r,path:xi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(n){const e=n._freezeSettings(),t=sd(n._databaseId);return new wO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qT(n,e,t,r,a,c={}){const h=n.Cc(c.merge||c.mergeFields?2:0,e,t,a);s2("Data must be an object, but it was:",h,r);const x=YT(r,h);let v,_;if(c.merge)v=new Ns(h.fieldMask),_=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const C of c.mergeFields){const b=lp(e,C,t);if(!h.contains(b))throw new xt(Xe.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);QT(T,b)||T.push(b)}v=new Ns(T),_=h.fieldTransforms.filter((C=>v.covers(C.field)))}else v=null,_=h.fieldTransforms;return new vO(new os(x),v,_)}class fd extends r2{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fd}}function AO(n,e,t,r){const a=n.Cc(1,e,t);s2("Data must be an object, but it was:",a,r);const c=[],h=os.empty();kl(r,((v,_)=>{const T=a2(e,v,t);_=Gr(_);const C=a.yc(T);if(_ instanceof fd)c.push(T);else{const b=E0(_,C);b!=null&&(c.push(T),h.set(T,b))}}));const x=new Ns(c);return new WT(h,x,a.fieldTransforms)}function TO(n,e,t,r,a,c){const h=n.Cc(1,e,t),x=[lp(e,r,t)],v=[a];if(c.length%2!=0)throw new xt(Xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)x.push(lp(e,c[b])),v.push(c[b+1]);const _=[],T=os.empty();for(let b=x.length-1;b>=0;--b)if(!QT(_,x[b])){const O=x[b];let U=v[b];U=Gr(U);const M=h.yc(O);if(U instanceof fd)_.push(O);else{const V=E0(U,M);V!=null&&(_.push(O),T.set(O,V))}}const C=new Ns(_);return new WT(T,C,h.fieldTransforms)}function SO(n,e,t,r=!1){return E0(t,n.Cc(r?4:3,e))}function E0(n,e){if(KT(n=Gr(n)))return s2("Unsupported field value:",e,n),YT(n,e);if(n instanceof r2)return(function(r,a){if(!XT(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const c=[];let h=0;for(const x of r){let v=E0(x,a.wc(h));v==null&&(v={nullValue:"NULL_VALUE"}),c.push(v),h++}return{arrayValue:{values:c}}})(n,e)}return(function(r,a){if((r=Gr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dR(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=bn.fromDate(r);return{timestampValue:v1(a.serializer,c)}}if(r instanceof bn){const c=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:v1(a.serializer,c)}}if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qs)return{bytesValue:fT(a.serializer,r._byteString)};if(r instanceof Mr){const c=a.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw a.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hp(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Fa)return(function(h,x){return{mapValue:{fields:{[VA]:{stringValue:HA},[p1]:{arrayValue:{values:h.toArray().map((_=>{if(typeof _!="number")throw x.Sc("VectorValues must only contain numeric values.");return Fp(x.serializer,_)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${Q1(r)}`)})(n,e)}function YT(n,e){const t={};return LA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kl(n,((r,a)=>{const c=E0(a,e.mc(r));c!=null&&(t[r]=c)})),{mapValue:{fields:t}}}function KT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof Pa||n instanceof Qs||n instanceof Mr||n instanceof r2||n instanceof Fa)}function s2(n,e,t){if(!KT(t)||!DA(t)){const r=Q1(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function lp(n,e,t){if((e=Gr(e))instanceof cd)return e._internalPath;if(typeof e=="string")return a2(n,e);throw S1("Field path arguments must be of type string or ",n,!1,void 0,t)}const CO=new RegExp("[~\\*/\\[\\]]");function a2(n,e,t){if(e.search(CO)>=0)throw S1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cd(...e.split("."))._internalPath}catch{throw S1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function S1(n,e,t,r,a){const c=r&&!r.isEmpty(),h=a!==void 0;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let v="";return(c||h)&&(v+=" (found",c&&(v+=` in field ${r}`),h&&(v+=` in document ${a}`),v+=")"),new xt(Xe.INVALID_ARGUMENT,x+n+v)}function QT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,t,r,a,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(o2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class IO extends ZT{data(){return super.data()}}function o2(n,e){return typeof e=="string"?a2(n,e):e instanceof cd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new xt(Xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l2{}class c2 extends l2{}function $T(n,e,...t){let r=[];e instanceof l2&&r.push(e),r=r.concat(t),(function(c){const h=c.filter((v=>v instanceof f2)).length,x=c.filter((v=>v instanceof u2)).length;if(h>1||h>0&&x>0)throw new xt(Xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class u2 extends c2{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new u2(e,t,r)}_apply(e){const t=this._parse(e);return e3(e._query,t),new Oo(e.firestore,e.converter,Zm(e._query,t))}_parse(e){const t=ud(e.firestore);return(function(c,h,x,v,_,T,C){let b;if(_.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new xt(Xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){Sv(C,T);const U=[];for(const M of C)U.push(Tv(v,c,M));b={arrayValue:{values:U}}}else b=Tv(v,c,C)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||Sv(C,T),b=SO(x,h,C,T==="in"||T==="not-in");return Hr.create(_,T,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class f2 extends l2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new f2(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:pa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let h=a;const x=c.getFlattenedFilters();for(const v of x)e3(h,v),h=Zm(h,v)})(e._query,t),new Oo(e.firestore,e.converter,Zm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h2 extends c2{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new h2(e,t)}_apply(e){const t=(function(a,c,h){if(a.startAt!==null)throw new xt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new xt(Xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jf(c,h)})(e._query,this._field,this._direction);return new Oo(e.firestore,e.converter,(function(a,c){const h=a.explicitOrderBy.concat([c]);return new ku(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function bO(n,e="asc"){const t=e,r=o2("orderBy",n);return h2._create(r,t)}class d2 extends c2{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new d2(e,t,r)}_apply(e){return new Oo(e.firestore,e.converter,_1(e._query,this._limit,this._limitType))}}function RO(n){return d2._create("limit",n,"F")}function Tv(n,e,t){if(typeof(t=Gr(t))=="string"){if(t==="")throw new xt(Xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KA(e)&&t.indexOf("/")!==-1)throw new xt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ir.fromString(t));if(!Dt.isDocumentKey(r))throw new xt(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return VE(n,new Dt(r))}if(t instanceof Mr)return VE(n,t._key);throw new xt(Xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q1(t)}.`)}function Sv(n,e){if(!Array.isArray(n)||n.length===0)throw new xt(Xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e3(n,e){const t=(function(a,c){for(const h of a)for(const x of h.getFlattenedFilters())if(c.indexOf(x.op)>=0)return x.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new xt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(Xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NO{convertValue(e,t="none"){switch(Cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw jt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return kl(e,((a,c)=>{r[a]=this.convertValue(c,t)})),r}convertVectorValue(e){var r,a,c;const t=(c=(a=(r=e.fields)==null?void 0:r[p1].arrayValue)==null?void 0:a.values)==null?void 0:c.map((h=>Dr(h.doubleValue)));return new Fa(t)}convertGeoPoint(e){return new Pa(Dr(e.latitude),Dr(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$1(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Kf(e));default:return null}}convertTimestamp(e){const t=Tl(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ir.fromString(e);Vn(xT(r),9688,{name:e});const a=new Qf(r.get(1),r.get(3)),c=new Dt(r.popFirst(5));return a.isEqual(t)||So(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oc extends ZT{constructor(e,t,r,a,c,h){super(e,t,r,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new i1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(o2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(Xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=oc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}oc._jsonSchemaVersion="firestore/documentSnapshot/1.0",oc._jsonSchema={type:jr("string",oc._jsonSchemaVersion),bundleSource:jr("string","DocumentSnapshot"),bundleName:jr("string"),bundle:jr("string")};class i1 extends oc{data(e={}){return super.data(e)}}class lc{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Nf(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new i1(this._firestore,this._userDataWriter,r.key,r,new Nf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xt(Xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map((x=>{const v=new i1(a._firestore,a._userDataWriter,x.doc.key,x.doc,new Nf(a._snapshot.mutatedKeys.has(x.doc.key),a._snapshot.fromCache),a.query.converter);return x.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((x=>c||x.type!==3)).map((x=>{const v=new i1(a._firestore,a._userDataWriter,x.doc.key,x.doc,new Nf(a._snapshot.mutatedKeys.has(x.doc.key),a._snapshot.fromCache),a.query.converter);let _=-1,T=-1;return x.type!==0&&(_=h.indexOf(x.doc.key),h=h.delete(x.doc.key)),x.type!==1&&(h=h.add(x.doc),T=h.indexOf(x.doc.key)),{type:OO(x.type),doc:v,oldIndex:_,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(Xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Np.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt(61501,{type:n})}}lc._jsonSchemaVersion="firestore/querySnapshot/1.0",lc._jsonSchema={type:jr("string",lc._jsonSchemaVersion),bundleSource:jr("string","QuerySnapshot"),bundleName:jr("string"),bundle:jr("string")};class g2 extends NO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mr(this.firestore,null,t)}}function DO(n){n=Zs(n,Oo);const e=Zs(n.firestore,Rl),t=n2(e),r=new g2(e);return JT(n._query),pO(t,n._query).then((a=>new lc(e,r,n,a)))}function n3(n,e,t){n=Zs(n,Mr);const r=Zs(n.firestore,Rl),a=t3(n.converter,e);return hd(r,[qT(ud(r),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Js.none())])}function m2(n,e,t,...r){n=Zs(n,Mr);const a=Zs(n.firestore,Rl),c=ud(a);let h;return h=typeof(e=Gr(e))=="string"||e instanceof cd?TO(c,"updateDoc",n._key,e,t,r):AO(c,"updateDoc",n._key,e),hd(a,[h.toMutation(n._key,Js.exists(!0))])}function cp(n){return hd(Zs(n.firestore,Rl),[new Bp(n._key,Js.none())])}function r3(n,e){const t=Zs(n.firestore,Rl),r=mu(n),a=t3(n.converter,e);return hd(t,[qT(ud(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,Js.exists(!1))]).then((()=>r))}function Cv(n,...e){var v,_,T;n=Gr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Av(e[r])||(t=e[r++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Av(e[r])){const C=e[r];e[r]=(v=C.next)==null?void 0:v.bind(C),e[r+1]=(_=C.error)==null?void 0:_.bind(C),e[r+2]=(T=C.complete)==null?void 0:T.bind(C)}let c,h,x;if(n instanceof Mr)h=Zs(n.firestore,Rl),x=Pp(n._key.path),c={next:C=>{e[r]&&e[r](MO(h,n,C))},error:e[r+1],complete:e[r+2]};else{const C=Zs(n,Oo);h=Zs(C.firestore,Rl),x=C._query;const b=new g2(h);c={next:O=>{e[r]&&e[r](new lc(h,b,C,O))},error:e[r+1],complete:e[r+2]},JT(n._query)}return(function(b,O,U,M){const V=new HT(M),le=new DT(O,V,U);return b.asyncQueue.enqueueAndForget((async()=>NT(await op(b),le))),()=>{V.Nu(),b.asyncQueue.enqueueAndForget((async()=>OT(await op(b),le)))}})(n2(h),x,a,c)}function hd(n,e){return(function(r,a){const c=new vl;return r.asyncQueue.enqueueAndForget((async()=>iO(await mO(r),a,c))),c.promise})(n2(n),e)}function MO(n,e,t){const r=t.docs.get(e._key),a=new g2(n);return new oc(n,a,e._key,r,new Nf(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Du=a})(Nu),Eu(new fc("firestore",((r,{instanceIdentifier:a,options:c})=>{const h=r.getProvider("app").getImmediate(),x=new Rl(new S6(r.getProvider("auth-internal")),new b6(h,r.getProvider("app-check-internal")),(function(_,T){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new xt(Xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(_.options.projectId,T)})(h,a),h);return c={useFetchStreams:t,...c},x._setSettings(c),x}),"PUBLIC").setMultipleInstances(!0)),yl(IE,bE,e),yl(IE,bE,"esm2020")})();const LO={apiKey:"AIzaSyDZ66yg2J3xmizWCNcE6WCv3-LnYEq6LC0",authDomain:"inventory-laboratory.firebaseapp.com",projectId:"inventory-laboratory",storageBucket:"inventory-laboratory.firebasestorage.app",messagingSenderId:"597619542444",appId:"1:597619542444:web:aa42b9e5a3f03fd6131209",measurementId:"G-PFK2BFW45T"};let C1;try{C1=Ep()}catch{C1=Uw(LO)}const Bh=y6(C1),kO=_O(C1),i3=n=>t2(n,"inventory"),dd=(n,e)=>mu(n,"inventory",e),s3=(n,e)=>t2(n,"inventory",e,"activity_log"),t0=async(n,e,t,r,a)=>{try{const c=s3(n,e),h={uid:t.uid,name:t.displayName||t.email,isAnonymous:t.isAnonymous};await r3(c,{type:r,details:a,user:h,timestamp:bn.now()})}catch(c){console.error(`Failed to log activity of type ${r} for item ${e}:`,c)}},PO=({auth:n,onLoginSuccess:e})=>{const[t,r]=mt.useState(!0),[a,c]=mt.useState(""),[h,x]=mt.useState(""),[v,_]=mt.useState(""),[T,C]=mt.useState(""),[b,O]=mt.useState(!1),U=async V=>{V.preventDefault(),C(""),O(!0);try{if(t){if(!a||!h){C("Email and password are required."),O(!1);return}const le=await n8(n,a,h);e(le.user)}else{if(!v||!a||!h){C("Display Name, email, and password are required for registration."),O(!1);return}const le=await t8(n,a,h);await i8(le.user,{displayName:v}),e(le.user)}}catch(le){console.error("Auth Error:",le);let ce=le.message.replace("Firebase: ","");le.code==="auth/operation-not-allowed"&&(ce="Email/Password sign-in is not enabled for this project. Please contact the administrator or continue as a guest."),C(ce)}finally{O(!1)}},M=async()=>{C(""),O(!0);try{const V=await Zb(n);e(V.user)}catch(V){console.error("Guest Auth Error:",V);let le=V.message.replace("Firebase: ","");V.code==="auth/operation-not-allowed"&&(le="Anonymous sign-in is not enabled for this project. Please contact the administrator."),C(le)}finally{O(!1)}};return z.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 p-4",children:z.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow-2xl",children:[z.jsx("h1",{className:"text-3xl font-extrabold text-indigo-800 text-center mb-6",children:"Lab Inventory Manager"}),z.jsxs("form",{onSubmit:U,className:"space-y-4",children:[!t&&z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Display Name *"}),z.jsx("input",{type:"text",value:v,onChange:V=>_(V.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Dr. Jane Doe"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email *"}),z.jsx("input",{type:"email",value:a,onChange:V=>c(V.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:"user@lab.com"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Password *"}),z.jsx("input",{type:"password",value:h,onChange:V=>x(V.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:""})]}),T&&z.jsx("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-md",children:T}),z.jsx("button",{type:"submit",disabled:b,className:"w-full py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50",children:b?"Processing...":t?"Sign In":"Register"})]}),z.jsx("button",{onClick:()=>{r(!t),C("")},className:"w-full text-center text-sm font-medium text-indigo-600 hover:text-indigo-500 mt-4",children:t?"Need an account? Register":"Already have an account? Sign In"}),z.jsxs("div",{className:"relative my-4",children:[z.jsx("div",{className:"absolute inset-0 flex items-center",children:z.jsx("div",{className:"w-full border-t border-gray-300"})}),z.jsx("div",{className:"relative flex justify-center text-sm",children:z.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or"})})]}),z.jsx("button",{type:"button",onClick:M,disabled:b,className:"w-full py-3 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out disabled:opacity-50",children:b?"Processing...":"Continue as Guest"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var I1={};I1.version="0.18.5";var a3=1252,FO=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],o3=function(n){FO.indexOf(n)!=-1&&(a3=n)};function BO(){o3(1252)}var n0=function(n){o3(n)};function UO(){n0(1200),BO()}var Uh=function(e){return String.fromCharCode(e)},Iv=function(e){return String.fromCharCode(e)},b1,ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r0(n){for(var e="",t=0,r=0,a=0,c=0,h=0,x=0,v=0,_=0;_<n.length;)t=n.charCodeAt(_++),c=t>>2,r=n.charCodeAt(_++),h=(t&3)<<4|r>>4,a=n.charCodeAt(_++),x=(r&15)<<2|a>>6,v=a&63,isNaN(r)?x=v=64:isNaN(a)&&(v=64),e+=ml.charAt(c)+ml.charAt(h)+ml.charAt(x)+ml.charAt(v);return e}function Io(n){var e="",t=0,r=0,a=0,c=0,h=0,x=0,v=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var _=0;_<n.length;)c=ml.indexOf(n.charAt(_++)),h=ml.indexOf(n.charAt(_++)),t=c<<2|h>>4,e+=String.fromCharCode(t),x=ml.indexOf(n.charAt(_++)),r=(h&15)<<4|x>>2,x!==64&&(e+=String.fromCharCode(r)),v=ml.indexOf(n.charAt(_++)),a=(x&3)<<6|v,v!==64&&(e+=String.fromCharCode(a));return e}var kn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Do=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function mc(n){return kn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function bv(n){return kn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var fa=function(e){return kn?Do(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function gd(n){if(typeof ArrayBuffer>"u")return fa(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function v0(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function VO(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var _i=kn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Do(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),a=0;for(e=0,t=0;e<n.length;t+=a,++e)if(a=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function HO(n){for(var e=[],t=0,r=n.length+250,a=mc(n.length+255),c=0;c<n.length;++c){var h=n.charCodeAt(c);if(h<128)a[t++]=h;else if(h<2048)a[t++]=192|h>>6&31,a[t++]=128|h&63;else if(h>=55296&&h<57344){h=(h&1023)+64;var x=n.charCodeAt(++c)&1023;a[t++]=240|h>>8&7,a[t++]=128|h>>2&63,a[t++]=128|x>>6&15|(h&3)<<4,a[t++]=128|x&63}else a[t++]=224|h>>12&15,a[t++]=128|h>>6&63,a[t++]=128|h&63;t>r&&(e.push(a.slice(0,t)),t=0,a=mc(65535),r=65530)}return e.push(a.slice(0,t)),_i(e)}var Uf=/\u0000/g,Vh=/[\u0001-\u0006]/g;function pu(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function da(n,e){var t=""+n;return t.length>=e?t:Ir("0",e-t.length)+t}function p2(n,e){var t=""+n;return t.length>=e?t:Ir(" ",e-t.length)+t}function R1(n,e){var t=""+n;return t.length>=e?t:t+Ir(" ",e-t.length)}function jO(n,e){var t=""+Math.round(n);return t.length>=e?t:Ir("0",e-t.length)+t}function zO(n,e){var t=""+n;return t.length>=e?t:Ir("0",e-t.length)+t}var Rv=Math.pow(2,32);function eu(n,e){if(n>Rv||n<-Rv)return jO(n,e);var t=Math.round(n);return zO(t,e)}function N1(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var Nv=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Im=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function GO(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var br={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Ov={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},WO={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function O1(n,e,t){for(var r=n<0?-1:1,a=n*r,c=0,h=1,x=0,v=1,_=0,T=0,C=Math.floor(a);_<e&&(C=Math.floor(a),x=C*h+c,T=C*_+v,!(a-C<5e-8));)a=1/(a-C),c=h,h=x,v=_,_=T;if(T>e&&(_>e?(T=v,x=c):(T=_,x=h)),!t)return[0,r*x,T];var b=Math.floor(r*x/T);return[b,r*x-b*T,T]}function Hh(n,e,t){if(n>2958465||n<0)return null;var r=n|0,a=Math.floor(86400*(n-r)),c=0,h=[],x={D:r,T:a,u:86400*(n-r)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(x.u)<1e-6&&(x.u=0),e&&e.date1904&&(r+=1462),x.u>.9999&&(x.u=0,++a==86400&&(x.T=a=0,++r,++x.D)),r===60)h=t?[1317,10,29]:[1900,2,29],c=3;else if(r===0)h=t?[1317,8,29]:[1900,1,0],c=6;else{r>60&&--r;var v=new Date(1900,0,1);v.setDate(v.getDate()+r-1),h=[v.getFullYear(),v.getMonth()+1,v.getDate()],c=v.getDay(),r<60&&(c=(c+6)%7),t&&(c=JO(v,h))}return x.y=h[0],x.m=h[1],x.d=h[2],x.S=a%60,a=Math.floor(a/60),x.M=a%60,a=Math.floor(a/60),x.H=a,x.q=c,x}var l3=new Date(1899,11,31,0,0,0),XO=l3.getTime(),qO=new Date(1900,2,1,0,0,0);function c3(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=qO&&(t+=1440*60*1e3),(t-(XO+(n.getTimezoneOffset()-l3.getTimezoneOffset())*6e4))/(1440*60*1e3)}function x2(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function YO(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function KO(n){var e=n<0?12:11,t=x2(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function QO(n){var e=x2(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function ZO(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=KO(n):e===10?t=n.toFixed(10).substr(0,12):t=QO(n),x2(YO(t.toUpperCase()))}function up(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):ZO(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Nl(14,c3(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function JO(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function $O(n,e,t,r){var a="",c=0,h=0,x=t.y,v,_=0;switch(n){case 98:x=t.y+543;case 121:switch(e.length){case 1:case 2:v=x%100,_=2;break;default:v=x%1e4,_=4;break}break;case 109:switch(e.length){case 1:case 2:v=t.m,_=e.length;break;case 3:return Im[t.m-1][1];case 5:return Im[t.m-1][0];default:return Im[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:v=t.d,_=e.length;break;case 3:return Nv[t.q][0];default:return Nv[t.q][1]}break;case 104:switch(e.length){case 1:case 2:v=1+(t.H+11)%12,_=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:v=t.H,_=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:v=t.M,_=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?da(t.S,e.length):(r>=2?h=r===3?1e3:100:h=r===1?10:1,c=Math.round(h*(t.S+t.u)),c>=60*h&&(c=0),e==="s"?c===0?"0":""+c/h:(a=da(c,2+r),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":v=t.D*24+t.H;break;case"[m]":case"[mm]":v=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":v=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}_=e.length===3?1:2;break;case 101:v=x,_=1;break}var T=_>0?da(v,_):"";return T}function pl(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var u3=/%/g;function e5(n,e,t){var r=e.replace(u3,""),a=e.length-r.length;return _o(n,r,t*Math.pow(10,2*a))+Ir("%",a)}function t5(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return _o(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function f3(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+f3(n,-e);var a=n.indexOf(".");a===-1&&(a=n.indexOf("E"));var c=Math.floor(Math.log(e)*Math.LOG10E)%a;if(c<0&&(c+=a),t=(e/Math.pow(10,c)).toPrecision(r+1+(a+c)%a),t.indexOf("e")===-1){var h=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(h-t.length+c):t+="E+"+(h-c);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,a)+"."+t.substr(2+a),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(x,v,_,T){return v+_+T.substr(0,(a+c)%a)+"."+T.substr(c)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var h3=/# (\?+)( ?)\/( ?)(\d+)/;function n5(n,e,t){var r=parseInt(n[4],10),a=Math.round(e*r),c=Math.floor(a/r),h=a-c*r,x=r;return t+(c===0?"":""+c)+" "+(h===0?Ir(" ",n[1].length+1+n[4].length):p2(h,n[1].length)+n[2]+"/"+n[3]+da(x,n[4].length))}function r5(n,e,t){return t+(e===0?"":""+e)+Ir(" ",n[1].length+2+n[4].length)}var d3=/^#*0*\.([0#]+)/,g3=/\).*[0#]/,m3=/\(###\) ###\\?-####/;function Wi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function Dv(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function Mv(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function i5(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function s5(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Ys(n,e,t){if(n.charCodeAt(0)===40&&!e.match(g3)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ys("n",r,t):"("+Ys("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return t5(n,e,t);if(e.indexOf("%")!==-1)return e5(n,e,t);if(e.indexOf("E")!==-1)return f3(e,t);if(e.charCodeAt(0)===36)return"$"+Ys(n,e.substr(e.charAt(1)==" "?2:1),t);var a,c,h,x,v=Math.abs(t),_=t<0?"-":"";if(e.match(/^00+$/))return _+eu(v,e.length);if(e.match(/^[#?]+$/))return a=eu(t,0),a==="0"&&(a=""),a.length>e.length?a:Wi(e.substr(0,e.length-a.length))+a;if(c=e.match(h3))return n5(c,v,_);if(e.match(/^#+0+$/))return _+eu(v,e.length-e.indexOf("0"));if(c=e.match(d3))return a=Dv(t,c[1].length).replace(/^([^\.]+)$/,"$1."+Wi(c[1])).replace(/\.$/,"."+Wi(c[1])).replace(/\.(\d*)$/,function(U,M){return"."+M+Ir("0",Wi(c[1]).length-M.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),c=e.match(/^(0*)\.(#*)$/))return _+Dv(v,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=e.match(/^#{1,3},##0(\.?)$/))return _+pl(eu(v,0));if(c=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ys(n,e,-t):pl(""+(Math.floor(t)+i5(t,c[1].length)))+"."+da(Mv(t,c[1].length),c[1].length);if(c=e.match(/^#,#*,#0/))return Ys(n,e.replace(/^#,#*,/,""),t);if(c=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pu(Ys(n,e.replace(/[\\-]/g,""),t)),h=0,pu(pu(e.replace(/\\/g,"")).replace(/[0#]/g,function(U){return h<a.length?a.charAt(h++):U==="0"?"0":""}));if(e.match(m3))return a=Ys(n,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var T="";if(c=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return h=Math.min(c[4].length,7),x=O1(v,Math.pow(10,h)-1,!1),a=""+_,T=_o("n",c[1],x[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),a+=T+c[2]+"/"+c[3],T=R1(x[2],h),T.length<c[4].length&&(T=Wi(c[4].substr(c[4].length-T.length))+T),a+=T,a;if(c=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return h=Math.min(Math.max(c[1].length,c[4].length),7),x=O1(v,Math.pow(10,h)-1,!0),_+(x[0]||(x[1]?"":"0"))+" "+(x[1]?p2(x[1],h)+c[2]+"/"+c[3]+R1(x[2],h):Ir(" ",2*h+1+c[2].length+c[3].length));if(c=e.match(/^[#0?]+$/))return a=eu(t,0),e.length<=a.length?a:Wi(e.substr(0,e.length-a.length))+a;if(c=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),h=a.indexOf(".");var C=e.indexOf(".")-h,b=e.length-a.length-C;return Wi(e.substr(0,C)+a+e.substr(e.length-b))}if(c=e.match(/^00,000\.([#0]*0)$/))return h=Mv(t,c[1].length),t<0?"-"+Ys(n,e,-t):pl(s5(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(U){return"00,"+(U.length<3?da(0,3-U.length):"")+U})+"."+da(h,c[1].length);switch(e){case"###,##0.00":return Ys(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var O=pl(eu(v,0));return O!=="0"?_+O:"";case"###,###.00":return Ys(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Ys(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function a5(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return _o(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function o5(n,e,t){var r=e.replace(u3,""),a=e.length-r.length;return _o(n,r,t*Math.pow(10,2*a))+Ir("%",a)}function p3(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+p3(n,-e);var a=n.indexOf(".");a===-1&&(a=n.indexOf("E"));var c=Math.floor(Math.log(e)*Math.LOG10E)%a;if(c<0&&(c+=a),t=(e/Math.pow(10,c)).toPrecision(r+1+(a+c)%a),!t.match(/[Ee]/)){var h=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(h-t.length+c):t+="E+"+(h-c),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(x,v,_,T){return v+_+T.substr(0,(a+c)%a)+"."+T.substr(c)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Ia(n,e,t){if(n.charCodeAt(0)===40&&!e.match(g3)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Ia("n",r,t):"("+Ia("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return a5(n,e,t);if(e.indexOf("%")!==-1)return o5(n,e,t);if(e.indexOf("E")!==-1)return p3(e,t);if(e.charCodeAt(0)===36)return"$"+Ia(n,e.substr(e.charAt(1)==" "?2:1),t);var a,c,h,x,v=Math.abs(t),_=t<0?"-":"";if(e.match(/^00+$/))return _+da(v,e.length);if(e.match(/^[#?]+$/))return a=""+t,t===0&&(a=""),a.length>e.length?a:Wi(e.substr(0,e.length-a.length))+a;if(c=e.match(h3))return r5(c,v,_);if(e.match(/^#+0+$/))return _+da(v,e.length-e.indexOf("0"));if(c=e.match(d3))return a=(""+t).replace(/^([^\.]+)$/,"$1."+Wi(c[1])).replace(/\.$/,"."+Wi(c[1])),a=a.replace(/\.(\d*)$/,function(U,M){return"."+M+Ir("0",Wi(c[1]).length-M.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),c=e.match(/^(0*)\.(#*)$/))return _+(""+v).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=e.match(/^#{1,3},##0(\.?)$/))return _+pl(""+v);if(c=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Ia(n,e,-t):pl(""+t)+"."+Ir("0",c[1].length);if(c=e.match(/^#,#*,#0/))return Ia(n,e.replace(/^#,#*,/,""),t);if(c=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=pu(Ia(n,e.replace(/[\\-]/g,""),t)),h=0,pu(pu(e.replace(/\\/g,"")).replace(/[0#]/g,function(U){return h<a.length?a.charAt(h++):U==="0"?"0":""}));if(e.match(m3))return a=Ia(n,"##########",t),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var T="";if(c=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return h=Math.min(c[4].length,7),x=O1(v,Math.pow(10,h)-1,!1),a=""+_,T=_o("n",c[1],x[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),a+=T+c[2]+"/"+c[3],T=R1(x[2],h),T.length<c[4].length&&(T=Wi(c[4].substr(c[4].length-T.length))+T),a+=T,a;if(c=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return h=Math.min(Math.max(c[1].length,c[4].length),7),x=O1(v,Math.pow(10,h)-1,!0),_+(x[0]||(x[1]?"":"0"))+" "+(x[1]?p2(x[1],h)+c[2]+"/"+c[3]+R1(x[2],h):Ir(" ",2*h+1+c[2].length+c[3].length));if(c=e.match(/^[#0?]+$/))return a=""+t,e.length<=a.length?a:Wi(e.substr(0,e.length-a.length))+a;if(c=e.match(/^([#0]+)\.([#0]+)$/)){a=""+t.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),h=a.indexOf(".");var C=e.indexOf(".")-h,b=e.length-a.length-C;return Wi(e.substr(0,C)+a+e.substr(e.length-b))}if(c=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Ia(n,e,-t):pl(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(U){return"00,"+(U.length<3?da(0,3-U.length):"")+U})+"."+da(0,c[1].length);switch(e){case"###,###":case"##,###":case"#,###":var O=pl(""+v);return O!=="0"?_+O:"";default:if(e.match(/\.[0#?]*$/))return Ia(n,e.slice(0,e.lastIndexOf(".")),t)+Wi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function _o(n,e,t){return(t|0)===t?Ia(n,e,t):Ys(n,e,t)}function l5(n){for(var e=[],t=!1,r=0,a=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(a,r-a),a=r+1}if(e[e.length]=n.substr(a),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var x3=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _3(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":N1(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(x3))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function c5(n,e,t,r){for(var a=[],c="",h=0,x="",v="t",_,T,C,b="H";h<n.length;)switch(x=n.charAt(h)){case"G":if(!N1(n,h))throw new Error("unrecognized character "+x+" in "+n);a[a.length]={t:"G",v:"General"},h+=7;break;case'"':for(c="";(C=n.charCodeAt(++h))!==34&&h<n.length;)c+=String.fromCharCode(C);a[a.length]={t:"t",v:c},++h;break;case"\\":var O=n.charAt(++h),U=O==="("||O===")"?O:"t";a[a.length]={t:U,v:O},++h;break;case"_":a[a.length]={t:"t",v:" "},h+=2;break;case"@":a[a.length]={t:"T",v:e},++h;break;case"B":case"b":if(n.charAt(h+1)==="1"||n.charAt(h+1)==="2"){if(_==null&&(_=Hh(e,t,n.charAt(h+1)==="2"),_==null))return"";a[a.length]={t:"X",v:n.substr(h,2)},v=x,h+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":x=x.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||_==null&&(_=Hh(e,t),_==null))return"";for(c=x;++h<n.length&&n.charAt(h).toLowerCase()===x;)c+=x;x==="m"&&v.toLowerCase()==="h"&&(x="M"),x==="h"&&(x=b),a[a.length]={t:x,v:c},v=x;break;case"A":case"a":case"":var M={t:x,v:x};if(_==null&&(_=Hh(e,t)),n.substr(h,3).toUpperCase()==="A/P"?(_!=null&&(M.v=_.H>=12?"P":"A"),M.t="T",b="h",h+=3):n.substr(h,5).toUpperCase()==="AM/PM"?(_!=null&&(M.v=_.H>=12?"PM":"AM"),M.t="T",h+=5,b="h"):n.substr(h,5).toUpperCase()==="/"?(_!=null&&(M.v=_.H>=12?"":""),M.t="T",h+=5,b="h"):(M.t="t",++h),_==null&&M.t==="T")return"";a[a.length]=M,v=x;break;case"[":for(c=x;n.charAt(h++)!=="]"&&h<n.length;)c+=n.charAt(h);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(x3)){if(_==null&&(_=Hh(e,t),_==null))return"";a[a.length]={t:"Z",v:c.toLowerCase()},v=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",_3(n)||(a[a.length]={t:"t",v:c}));break;case".":if(_!=null){for(c=x;++h<n.length&&(x=n.charAt(h))==="0";)c+=x;a[a.length]={t:"s",v:c};break}case"0":case"#":for(c=x;++h<n.length&&"0#?.,E+-%".indexOf(x=n.charAt(h))>-1;)c+=x;a[a.length]={t:"n",v:c};break;case"?":for(c=x;n.charAt(++h)===x;)c+=x;a[a.length]={t:x,v:c},v=x;break;case"*":++h,(n.charAt(h)==" "||n.charAt(h)=="*")&&++h;break;case"(":case")":a[a.length]={t:r===1?"t":x,v:x},++h;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=x;h<n.length&&"0123456789".indexOf(n.charAt(++h))>-1;)c+=n.charAt(h);a[a.length]={t:"D",v:c};break;case" ":a[a.length]={t:x,v:x},++h;break;case"$":a[a.length]={t:"t",v:"$"},++h;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(x)===-1)throw new Error("unrecognized character "+x+" in "+n);a[a.length]={t:"t",v:x},++h;break}var V=0,le=0,ce;for(h=a.length-1,v="t";h>=0;--h)switch(a[h].t){case"h":case"H":a[h].t=b,v="h",V<1&&(V=1);break;case"s":(ce=a[h].v.match(/\.0+$/))&&(le=Math.max(le,ce[0].length-1)),V<3&&(V=3);case"d":case"y":case"M":case"e":v=a[h].t;break;case"m":v==="s"&&(a[h].t="M",V<2&&(V=2));break;case"X":break;case"Z":V<1&&a[h].v.match(/[Hh]/)&&(V=1),V<2&&a[h].v.match(/[Mm]/)&&(V=2),V<3&&a[h].v.match(/[Ss]/)&&(V=3)}switch(V){case 0:break;case 1:_.u>=.5&&(_.u=0,++_.S),_.S>=60&&(_.S=0,++_.M),_.M>=60&&(_.M=0,++_.H);break;case 2:_.u>=.5&&(_.u=0,++_.S),_.S>=60&&(_.S=0,++_.M);break}var ie="",me;for(h=0;h<a.length;++h)switch(a[h].t){case"t":case"T":case" ":case"D":break;case"X":a[h].v="",a[h].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[h].v=$O(a[h].t.charCodeAt(0),a[h].v,_,le),a[h].t="t";break;case"n":case"?":for(me=h+1;a[me]!=null&&((x=a[me].t)==="?"||x==="D"||(x===" "||x==="t")&&a[me+1]!=null&&(a[me+1].t==="?"||a[me+1].t==="t"&&a[me+1].v==="/")||a[h].t==="("&&(x===" "||x==="n"||x===")")||x==="t"&&(a[me].v==="/"||a[me].v===" "&&a[me+1]!=null&&a[me+1].t=="?"));)a[h].v+=a[me].v,a[me]={v:"",t:";"},++me;ie+=a[h].v,h=me-1;break;case"G":a[h].t="t",a[h].v=up(e,t);break}var Ue="",De,k;if(ie.length>0){ie.charCodeAt(0)==40?(De=e<0&&ie.charCodeAt(0)===45?-e:e,k=_o("n",ie,De)):(De=e<0&&r>1?-e:e,k=_o("n",ie,De),De<0&&a[0]&&a[0].t=="t"&&(k=k.substr(1),a[0].v="-"+a[0].v)),me=k.length-1;var H=a.length;for(h=0;h<a.length;++h)if(a[h]!=null&&a[h].t!="t"&&a[h].v.indexOf(".")>-1){H=h;break}var P=a.length;if(H===a.length&&k.indexOf("E")===-1){for(h=a.length-1;h>=0;--h)a[h]==null||"n?".indexOf(a[h].t)===-1||(me>=a[h].v.length-1?(me-=a[h].v.length,a[h].v=k.substr(me+1,a[h].v.length)):me<0?a[h].v="":(a[h].v=k.substr(0,me+1),me=-1),a[h].t="t",P=h);me>=0&&P<a.length&&(a[P].v=k.substr(0,me+1)+a[P].v)}else if(H!==a.length&&k.indexOf("E")===-1){for(me=k.indexOf(".")-1,h=H;h>=0;--h)if(!(a[h]==null||"n?".indexOf(a[h].t)===-1)){for(T=a[h].v.indexOf(".")>-1&&h===H?a[h].v.indexOf(".")-1:a[h].v.length-1,Ue=a[h].v.substr(T+1);T>=0;--T)me>=0&&(a[h].v.charAt(T)==="0"||a[h].v.charAt(T)==="#")&&(Ue=k.charAt(me--)+Ue);a[h].v=Ue,a[h].t="t",P=h}for(me>=0&&P<a.length&&(a[P].v=k.substr(0,me+1)+a[P].v),me=k.indexOf(".")+1,h=H;h<a.length;++h)if(!(a[h]==null||"n?(".indexOf(a[h].t)===-1&&h!==H)){for(T=a[h].v.indexOf(".")>-1&&h===H?a[h].v.indexOf(".")+1:0,Ue=a[h].v.substr(0,T);T<a[h].v.length;++T)me<k.length&&(Ue+=k.charAt(me++));a[h].v=Ue,a[h].t="t",P=h}}}for(h=0;h<a.length;++h)a[h]!=null&&"n?".indexOf(a[h].t)>-1&&(De=r>1&&e<0&&h>0&&a[h-1].v==="-"?-e:e,a[h].v=_o(a[h].t,a[h].v,De),a[h].t="t");var te="";for(h=0;h!==a.length;++h)a[h]!=null&&(te+=a[h].v);return te}var Lv=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function kv(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function u5(n,e){var t=l5(n),r=t.length,a=t[r-1].indexOf("@");if(r<4&&a>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||a>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=a>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=a>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=a>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var c=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,c];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var h=t[0].match(Lv),x=t[1].match(Lv);return kv(e,h)?[r,t[0]]:kv(e,x)?[r,t[1]]:[r,t[h!=null&&x!=null?2:1]]}return[r,c]}function Nl(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:br)[n],r==null&&(r=t.table&&t.table[Ov[n]]||br[Ov[n]]),r==null&&(r=WO[n]||"General");break}if(N1(r,0))return up(e,t);e instanceof Date&&(e=c3(e,t.date1904));var a=u5(r,e);if(N1(a[1]))return up(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return c5(a[1],e,t,a[0])}function y3(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(br[t]==null){e<0&&(e=t);continue}if(br[t]==n){e=t;break}}e<0&&(e=391)}return br[e]=n,e}function md(n){for(var e=0;e!=392;++e)n[e]!==void 0&&y3(n[e],e)}function pd(){br=GO()}var E3=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function f5(n){var e=typeof n=="number"?br[n]:n;return e=e.replace(E3,"(\\d+)"),new RegExp("^"+e+"$")}function h5(n,e,t){var r=-1,a=-1,c=-1,h=-1,x=-1,v=-1;(e.match(E3)||[]).forEach(function(C,b){var O=parseInt(t[b+1],10);switch(C.toLowerCase().charAt(0)){case"y":r=O;break;case"d":c=O;break;case"h":h=O;break;case"s":v=O;break;case"m":h>=0?x=O:a=O;break}}),v>=0&&x==-1&&a>=0&&(x=a,a=-1);var _=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);_.length==7&&(_="0"+_),_.length==8&&(_="20"+_);var T=("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(x>=0?x:0)).slice(-2)+":"+("00"+(v>=0?v:0)).slice(-2);return h==-1&&x==-1&&v==-1?_:r==-1&&a==-1&&c==-1?T:_+"T"+T}var d5=(function(){var n={};n.version="1.2.0";function e(){for(var k=0,H=new Array(256),P=0;P!=256;++P)k=P,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,H[P]=k;return typeof Int32Array<"u"?new Int32Array(H):H}var t=e();function r(k){var H=0,P=0,te=0,K=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(te=0;te!=256;++te)K[te]=k[te];for(te=0;te!=256;++te)for(P=k[te],H=256+te;H<4096;H+=256)P=K[H]=P>>>8^k[P&255];var J=[];for(te=1;te!=16;++te)J[te-1]=typeof Int32Array<"u"?K.subarray(te*256,te*256+256):K.slice(te*256,te*256+256);return J}var a=r(t),c=a[0],h=a[1],x=a[2],v=a[3],_=a[4],T=a[5],C=a[6],b=a[7],O=a[8],U=a[9],M=a[10],V=a[11],le=a[12],ce=a[13],ie=a[14];function me(k,H){for(var P=H^-1,te=0,K=k.length;te<K;)P=P>>>8^t[(P^k.charCodeAt(te++))&255];return~P}function Ue(k,H){for(var P=H^-1,te=k.length-15,K=0;K<te;)P=ie[k[K++]^P&255]^ce[k[K++]^P>>8&255]^le[k[K++]^P>>16&255]^V[k[K++]^P>>>24]^M[k[K++]]^U[k[K++]]^O[k[K++]]^b[k[K++]]^C[k[K++]]^T[k[K++]]^_[k[K++]]^v[k[K++]]^x[k[K++]]^h[k[K++]]^c[k[K++]]^t[k[K++]];for(te+=15;K<te;)P=P>>>8^t[(P^k[K++])&255];return~P}function De(k,H){for(var P=H^-1,te=0,K=k.length,J=0,Y=0;te<K;)J=k.charCodeAt(te++),J<128?P=P>>>8^t[(P^J)&255]:J<2048?(P=P>>>8^t[(P^(192|J>>6&31))&255],P=P>>>8^t[(P^(128|J&63))&255]):J>=55296&&J<57344?(J=(J&1023)+64,Y=k.charCodeAt(te++)&1023,P=P>>>8^t[(P^(240|J>>8&7))&255],P=P>>>8^t[(P^(128|J>>2&63))&255],P=P>>>8^t[(P^(128|Y>>6&15|(J&3)<<4))&255],P=P>>>8^t[(P^(128|Y&63))&255]):(P=P>>>8^t[(P^(224|J>>12&15))&255],P=P>>>8^t[(P^(128|J>>6&63))&255],P=P>>>8^t[(P^(128|J&63))&255]);return~P}return n.table=t,n.bstr=me,n.buf=Ue,n.str=De,n})(),$n=(function(){var e={};e.version="1.2.1";function t(j,X){for(var Q=j.split("/"),ee=X.split("/"),ne=0,oe=0,Ie=Math.min(Q.length,ee.length);ne<Ie;++ne){if(oe=Q[ne].length-ee[ne].length)return oe;if(Q[ne]!=ee[ne])return Q[ne]<ee[ne]?-1:1}return Q.length-ee.length}function r(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:r(j.slice(0,-1));var X=j.lastIndexOf("/");return X===-1?j:j.slice(0,X+1)}function a(j){if(j.charAt(j.length-1)=="/")return a(j.slice(0,-1));var X=j.lastIndexOf("/");return X===-1?j:j.slice(X+1)}function c(j,X){typeof X=="string"&&(X=new Date(X));var Q=X.getHours();Q=Q<<6|X.getMinutes(),Q=Q<<5|X.getSeconds()>>>1,j.write_shift(2,Q);var ee=X.getFullYear()-1980;ee=ee<<4|X.getMonth()+1,ee=ee<<5|X.getDate(),j.write_shift(2,ee)}function h(j){var X=j.read_shift(2)&65535,Q=j.read_shift(2)&65535,ee=new Date,ne=Q&31;Q>>>=5;var oe=Q&15;Q>>>=4,ee.setMilliseconds(0),ee.setFullYear(Q+1980),ee.setMonth(oe-1),ee.setDate(ne);var Ie=X&31;X>>>=5;var He=X&63;return X>>>=6,ee.setHours(X),ee.setMinutes(He),ee.setSeconds(Ie<<1),ee}function x(j){Cs(j,0);for(var X={},Q=0;j.l<=j.length-4;){var ee=j.read_shift(2),ne=j.read_shift(2),oe=j.l+ne,Ie={};switch(ee){case 21589:Q=j.read_shift(1),Q&1&&(Ie.mtime=j.read_shift(4)),ne>5&&(Q&2&&(Ie.atime=j.read_shift(4)),Q&4&&(Ie.ctime=j.read_shift(4))),Ie.mtime&&(Ie.mt=new Date(Ie.mtime*1e3));break}j.l=oe,X[ee]=Ie}return X}var v;function _(){return v||(v={})}function T(j,X){if(j[0]==80&&j[1]==75)return Ai(j,X);if((j[0]|32)==109&&(j[1]|32)==105)return Yi(j,X);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var Q=3,ee=512,ne=0,oe=0,Ie=0,He=0,Te=0,Oe=[],Re=j.slice(0,512);Cs(Re,0);var qe=C(Re);switch(Q=qe[0],Q){case 3:ee=512;break;case 4:ee=4096;break;case 0:if(qe[1]==0)return Ai(j,X);default:throw new Error("Major Version: Expected 3 or 4 saw "+Q)}ee!==512&&(Re=j.slice(0,ee),Cs(Re,28));var $e=j.slice(0,ee);b(Re,Q);var et=Re.read_shift(4,"i");if(Q===3&&et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+et);Re.l+=4,Ie=Re.read_shift(4,"i"),Re.l+=4,Re.chk("00100000","Mini Stream Cutoff Size: "),He=Re.read_shift(4,"i"),ne=Re.read_shift(4,"i"),Te=Re.read_shift(4,"i"),oe=Re.read_shift(4,"i");for(var tt=-1,ct=0;ct<109&&(tt=Re.read_shift(4,"i"),!(tt<0));++ct)Oe[ct]=tt;var Et=O(j,ee);V(Te,oe,Et,ee,Oe);var Ve=ce(Et,Ie,Oe,ee);Ve[Ie].name="!Directory",ne>0&&He!==Y&&(Ve[He].name="!MiniFAT"),Ve[Oe[0]].name="!FAT",Ve.fat_addrs=Oe,Ve.ssz=ee;var Mn={},Vt=[],_r=[],fs=[];ie(Ie,Ve,Et,Vt,ne,Mn,_r,He),U(_r,fs,Vt),Vt.shift();var $t={FileIndex:_r,FullPaths:fs};return X&&X.raw&&($t.raw={header:$e,sectors:Et}),$t}function C(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(dt,"Header Signature: "),j.l+=16;var X=j.read_shift(2,"u");return[j.read_shift(2,"u"),X]}function b(j,X){var Q=9;switch(j.l+=2,Q=j.read_shift(2)){case 9:if(X!=3)throw new Error("Sector Shift: Expected 9 saw "+Q);break;case 12:if(X!=4)throw new Error("Sector Shift: Expected 12 saw "+Q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Q)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function O(j,X){for(var Q=Math.ceil(j.length/X)-1,ee=[],ne=1;ne<Q;++ne)ee[ne-1]=j.slice(ne*X,(ne+1)*X);return ee[Q-1]=j.slice(Q*X),ee}function U(j,X,Q){for(var ee=0,ne=0,oe=0,Ie=0,He=0,Te=Q.length,Oe=[],Re=[];ee<Te;++ee)Oe[ee]=Re[ee]=ee,X[ee]=Q[ee];for(;He<Re.length;++He)ee=Re[He],ne=j[ee].L,oe=j[ee].R,Ie=j[ee].C,Oe[ee]===ee&&(ne!==-1&&Oe[ne]!==ne&&(Oe[ee]=Oe[ne]),oe!==-1&&Oe[oe]!==oe&&(Oe[ee]=Oe[oe])),Ie!==-1&&(Oe[Ie]=ee),ne!==-1&&ee!=Oe[ee]&&(Oe[ne]=Oe[ee],Re.lastIndexOf(ne)<He&&Re.push(ne)),oe!==-1&&ee!=Oe[ee]&&(Oe[oe]=Oe[ee],Re.lastIndexOf(oe)<He&&Re.push(oe));for(ee=1;ee<Te;++ee)Oe[ee]===ee&&(oe!==-1&&Oe[oe]!==oe?Oe[ee]=Oe[oe]:ne!==-1&&Oe[ne]!==ne&&(Oe[ee]=Oe[ne]));for(ee=1;ee<Te;++ee)if(j[ee].type!==0){if(He=ee,He!=Oe[He])do He=Oe[He],X[ee]=X[He]+"/"+X[ee];while(He!==0&&Oe[He]!==-1&&He!=Oe[He]);Oe[ee]=-1}for(X[0]+="/",ee=1;ee<Te;++ee)j[ee].type!==2&&(X[ee]+="/")}function M(j,X,Q){for(var ee=j.start,ne=j.size,oe=[],Ie=ee;Q&&ne>0&&Ie>=0;)oe.push(X.slice(Ie*J,Ie*J+J)),ne-=J,Ie=sc(Q,Ie*4);return oe.length===0?je(0):_i(oe).slice(0,j.size)}function V(j,X,Q,ee,ne){var oe=Y;if(j===Y){if(X!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var Ie=Q[j],He=(ee>>>2)-1;if(!Ie)return;for(var Te=0;Te<He&&(oe=sc(Ie,Te*4))!==Y;++Te)ne.push(oe);V(sc(Ie,ee-4),X-1,Q,ee,ne)}}function le(j,X,Q,ee,ne){var oe=[],Ie=[];ne||(ne=[]);var He=ee-1,Te=0,Oe=0;for(Te=X;Te>=0;){ne[Te]=!0,oe[oe.length]=Te,Ie.push(j[Te]);var Re=Q[Math.floor(Te*4/ee)];if(Oe=Te*4&He,ee<4+Oe)throw new Error("FAT boundary crossed: "+Te+" 4 "+ee);if(!j[Re])break;Te=sc(j[Re],Oe)}return{nodes:oe,data:zv([Ie])}}function ce(j,X,Q,ee){var ne=j.length,oe=[],Ie=[],He=[],Te=[],Oe=ee-1,Re=0,qe=0,$e=0,et=0;for(Re=0;Re<ne;++Re)if(He=[],$e=Re+X,$e>=ne&&($e-=ne),!Ie[$e]){Te=[];var tt=[];for(qe=$e;qe>=0;){tt[qe]=!0,Ie[qe]=!0,He[He.length]=qe,Te.push(j[qe]);var ct=Q[Math.floor(qe*4/ee)];if(et=qe*4&Oe,ee<4+et)throw new Error("FAT boundary crossed: "+qe+" 4 "+ee);if(!j[ct]||(qe=sc(j[ct],et),tt[qe]))break}oe[$e]={nodes:He,data:zv([Te])}}return oe}function ie(j,X,Q,ee,ne,oe,Ie,He){for(var Te=0,Oe=ee.length?2:0,Re=X[j].data,qe=0,$e=0,et;qe<Re.length;qe+=128){var tt=Re.slice(qe,qe+128);Cs(tt,64),$e=tt.read_shift(2),et=w2(tt,0,$e-Oe),ee.push(et);var ct={name:et,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},Et=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Et!==0&&(ct.ct=me(tt,tt.l-8));var Ve=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Ve!==0&&(ct.mt=me(tt,tt.l-8)),ct.start=tt.read_shift(4,"i"),ct.size=tt.read_shift(4,"i"),ct.size<0&&ct.start<0&&(ct.size=ct.type=0,ct.start=Y,ct.name=""),ct.type===5?(Te=ct.start,ne>0&&Te!==Y&&(X[Te].name="!StreamData")):ct.size>=4096?(ct.storage="fat",X[ct.start]===void 0&&(X[ct.start]=le(Q,ct.start,X.fat_addrs,X.ssz)),X[ct.start].name=ct.name,ct.content=X[ct.start].data.slice(0,ct.size)):(ct.storage="minifat",ct.size<0?ct.size=0:Te!==Y&&ct.start!==Y&&X[Te]&&(ct.content=M(ct,X[Te].data,(X[He]||{}).data))),ct.content&&Cs(ct.content,0),oe[et]=ct,Ie.push(ct)}}function me(j,X){return new Date((bs(j,X+4)/1e7*Math.pow(2,32)+bs(j,X)/1e7-11644473600)*1e3)}function Ue(j,X){return _(),T(v.readFileSync(j),X)}function De(j,X){var Q=X&&X.type;switch(Q||kn&&Buffer.isBuffer(j)&&(Q="buffer"),Q||"base64"){case"file":return Ue(j,X);case"base64":return T(fa(Io(j)),X);case"binary":return T(fa(j),X)}return T(j,X)}function k(j,X){var Q=X||{},ee=Q.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=ee+"/",j.FileIndex[0]={name:ee,type:5}),Q.CLSID&&(j.FileIndex[0].clsid=Q.CLSID),H(j)}function H(j){var X="Sh33tJ5";if(!$n.find(j,"/"+X)){var Q=je(4);Q[0]=55,Q[1]=Q[3]=50,Q[2]=54,j.FileIndex.push({name:X,type:2,content:Q,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+X),P(j)}}function P(j,X){k(j);for(var Q=!1,ee=!1,ne=j.FullPaths.length-1;ne>=0;--ne){var oe=j.FileIndex[ne];switch(oe.type){case 0:ee?Q=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:ee=!0,isNaN(oe.R*oe.L*oe.C)&&(Q=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(Q=!0);break;default:Q=!0;break}}if(!(!Q&&!X)){var Ie=new Date(1987,1,19),He=0,Te=Object.create?Object.create(null):{},Oe=[];for(ne=0;ne<j.FullPaths.length;++ne)Te[j.FullPaths[ne]]=!0,j.FileIndex[ne].type!==0&&Oe.push([j.FullPaths[ne],j.FileIndex[ne]]);for(ne=0;ne<Oe.length;++ne){var Re=r(Oe[ne][0]);ee=Te[Re],ee||(Oe.push([Re,{name:a(Re).replace("/",""),type:1,clsid:Se,ct:Ie,mt:Ie,content:null}]),Te[Re]=!0)}for(Oe.sort(function(et,tt){return t(et[0],tt[0])}),j.FullPaths=[],j.FileIndex=[],ne=0;ne<Oe.length;++ne)j.FullPaths[ne]=Oe[ne][0],j.FileIndex[ne]=Oe[ne][1];for(ne=0;ne<Oe.length;++ne){var qe=j.FileIndex[ne],$e=j.FullPaths[ne];if(qe.name=a($e).replace("/",""),qe.L=qe.R=qe.C=-(qe.color=1),qe.size=qe.content?qe.content.length:0,qe.start=0,qe.clsid=qe.clsid||Se,ne===0)qe.C=Oe.length>1?1:-1,qe.size=0,qe.type=5;else if($e.slice(-1)=="/"){for(He=ne+1;He<Oe.length&&r(j.FullPaths[He])!=$e;++He);for(qe.C=He>=Oe.length?-1:He,He=ne+1;He<Oe.length&&r(j.FullPaths[He])!=r($e);++He);qe.R=He>=Oe.length?-1:He,qe.type=1}else r(j.FullPaths[ne+1]||"")==r($e)&&(qe.R=ne+1),qe.type=2}}}function te(j,X){var Q=X||{};if(Q.fileType=="mad")return Ti(j,Q);switch(P(j),Q.fileType){case"zip":return Pn(j,Q)}var ee=(function(et){for(var tt=0,ct=0,Et=0;Et<et.FileIndex.length;++Et){var Ve=et.FileIndex[Et];if(Ve.content){var Mn=Ve.content.length;Mn>0&&(Mn<4096?tt+=Mn+63>>6:ct+=Mn+511>>9)}}for(var Vt=et.FullPaths.length+3>>2,_r=tt+7>>3,fs=tt+127>>7,$t=_r+ct+Vt+fs,Xt=$t+127>>7,Kt=Xt<=109?0:Math.ceil((Xt-109)/127);$t+Xt+Kt+127>>7>Xt;)Kt=++Xt<=109?0:Math.ceil((Xt-109)/127);var Lr=[1,Kt,Xt,fs,Vt,ct,tt,0];return et.FileIndex[0].size=tt<<6,Lr[7]=(et.FileIndex[0].start=Lr[0]+Lr[1]+Lr[2]+Lr[3]+Lr[4]+Lr[5])+(Lr[6]+7>>3),Lr})(j),ne=je(ee[7]<<9),oe=0,Ie=0;{for(oe=0;oe<8;++oe)ne.write_shift(1,ye[oe]);for(oe=0;oe<8;++oe)ne.write_shift(2,0);for(ne.write_shift(2,62),ne.write_shift(2,3),ne.write_shift(2,65534),ne.write_shift(2,9),ne.write_shift(2,6),oe=0;oe<3;++oe)ne.write_shift(2,0);for(ne.write_shift(4,0),ne.write_shift(4,ee[2]),ne.write_shift(4,ee[0]+ee[1]+ee[2]+ee[3]-1),ne.write_shift(4,0),ne.write_shift(4,4096),ne.write_shift(4,ee[3]?ee[0]+ee[1]+ee[2]-1:Y),ne.write_shift(4,ee[3]),ne.write_shift(-4,ee[1]?ee[0]-1:Y),ne.write_shift(4,ee[1]),oe=0;oe<109;++oe)ne.write_shift(-4,oe<ee[2]?ee[1]+oe:-1)}if(ee[1])for(Ie=0;Ie<ee[1];++Ie){for(;oe<236+Ie*127;++oe)ne.write_shift(-4,oe<ee[2]?ee[1]+oe:-1);ne.write_shift(-4,Ie===ee[1]-1?Y:Ie+1)}var He=function(et){for(Ie+=et;oe<Ie-1;++oe)ne.write_shift(-4,oe+1);et&&(++oe,ne.write_shift(-4,Y))};for(Ie=oe=0,Ie+=ee[1];oe<Ie;++oe)ne.write_shift(-4,Pe.DIFSECT);for(Ie+=ee[2];oe<Ie;++oe)ne.write_shift(-4,Pe.FATSECT);He(ee[3]),He(ee[4]);for(var Te=0,Oe=0,Re=j.FileIndex[0];Te<j.FileIndex.length;++Te)Re=j.FileIndex[Te],Re.content&&(Oe=Re.content.length,!(Oe<4096)&&(Re.start=Ie,He(Oe+511>>9)));for(He(ee[6]+7>>3);ne.l&511;)ne.write_shift(-4,Pe.ENDOFCHAIN);for(Ie=oe=0,Te=0;Te<j.FileIndex.length;++Te)Re=j.FileIndex[Te],Re.content&&(Oe=Re.content.length,!(!Oe||Oe>=4096)&&(Re.start=Ie,He(Oe+63>>6)));for(;ne.l&511;)ne.write_shift(-4,Pe.ENDOFCHAIN);for(oe=0;oe<ee[4]<<2;++oe){var qe=j.FullPaths[oe];if(!qe||qe.length===0){for(Te=0;Te<17;++Te)ne.write_shift(4,0);for(Te=0;Te<3;++Te)ne.write_shift(4,-1);for(Te=0;Te<12;++Te)ne.write_shift(4,0);continue}Re=j.FileIndex[oe],oe===0&&(Re.start=Re.size?Re.start-1:Y);var $e=oe===0&&Q.root||Re.name;if(Oe=2*($e.length+1),ne.write_shift(64,$e,"utf16le"),ne.write_shift(2,Oe),ne.write_shift(1,Re.type),ne.write_shift(1,Re.color),ne.write_shift(-4,Re.L),ne.write_shift(-4,Re.R),ne.write_shift(-4,Re.C),Re.clsid)ne.write_shift(16,Re.clsid,"hex");else for(Te=0;Te<4;++Te)ne.write_shift(4,0);ne.write_shift(4,Re.state||0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(4,Re.start),ne.write_shift(4,Re.size),ne.write_shift(4,0)}for(oe=1;oe<j.FileIndex.length;++oe)if(Re=j.FileIndex[oe],Re.size>=4096)if(ne.l=Re.start+1<<9,kn&&Buffer.isBuffer(Re.content))Re.content.copy(ne,ne.l,0,Re.size),ne.l+=Re.size+511&-512;else{for(Te=0;Te<Re.size;++Te)ne.write_shift(1,Re.content[Te]);for(;Te&511;++Te)ne.write_shift(1,0)}for(oe=1;oe<j.FileIndex.length;++oe)if(Re=j.FileIndex[oe],Re.size>0&&Re.size<4096)if(kn&&Buffer.isBuffer(Re.content))Re.content.copy(ne,ne.l,0,Re.size),ne.l+=Re.size+63&-64;else{for(Te=0;Te<Re.size;++Te)ne.write_shift(1,Re.content[Te]);for(;Te&63;++Te)ne.write_shift(1,0)}if(kn)ne.l=ne.length;else for(;ne.l<ne.length;)ne.write_shift(1,0);return ne}function K(j,X){var Q=j.FullPaths.map(function(Te){return Te.toUpperCase()}),ee=Q.map(function(Te){var Oe=Te.split("/");return Oe[Oe.length-(Te.slice(-1)=="/"?2:1)]}),ne=!1;X.charCodeAt(0)===47?(ne=!0,X=Q[0].slice(0,-1)+X):ne=X.indexOf("/")!==-1;var oe=X.toUpperCase(),Ie=ne===!0?Q.indexOf(oe):ee.indexOf(oe);if(Ie!==-1)return j.FileIndex[Ie];var He=!oe.match(Vh);for(oe=oe.replace(Uf,""),He&&(oe=oe.replace(Vh,"!")),Ie=0;Ie<Q.length;++Ie)if((He?Q[Ie].replace(Vh,"!"):Q[Ie]).replace(Uf,"")==oe||(He?ee[Ie].replace(Vh,"!"):ee[Ie]).replace(Uf,"")==oe)return j.FileIndex[Ie];return null}var J=64,Y=-2,dt="d0cf11e0a1b11ae1",ye=[208,207,17,224,161,177,26,225],Se="00000000000000000000000000000000",Pe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Y,FREESECT:-1,HEADER_SIGNATURE:dt,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Se,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function gt(j,X,Q){_();var ee=te(j,Q);v.writeFileSync(X,ee)}function yt(j){for(var X=new Array(j.length),Q=0;Q<j.length;++Q)X[Q]=String.fromCharCode(j[Q]);return X.join("")}function Ke(j,X){var Q=te(j,X);switch(X&&X.type||"buffer"){case"file":return _(),v.writeFileSync(X.filename,Q),Q;case"binary":return typeof Q=="string"?Q:yt(Q);case"base64":return r0(typeof Q=="string"?Q:yt(Q));case"buffer":if(kn)return Buffer.isBuffer(Q)?Q:Do(Q);case"array":return typeof Q=="string"?fa(Q):Q}return Q}var he;function q(j){try{var X=j.InflateRaw,Q=new X;if(Q._processChunk(new Uint8Array([3,0]),Q._finishFlushFlag),Q.bytesRead)he=j;else throw new Error("zlib does not expose bytesRead")}catch(ee){console.error("cannot use native zlib: "+(ee.message||ee))}}function ue(j,X){if(!he)return Fi(j,X);var Q=he.InflateRaw,ee=new Q,ne=ee._processChunk(j.slice(j.l),ee._finishFlushFlag);return j.l+=ee.bytesRead,ne}function se(j){return he?he.deflateRawSync(j):xa(j)}var fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Je=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function rt(j){var X=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(X>>16|X>>8|X)&255}for(var at=typeof Uint8Array<"u",lt=at?new Uint8Array(256):[],Mt=0;Mt<256;++Mt)lt[Mt]=rt(Mt);function Ut(j,X){var Q=lt[j&255];return X<=8?Q>>>8-X:(Q=Q<<8|lt[j>>8&255],X<=16?Q>>>16-X:(Q=Q<<8|lt[j>>16&255],Q>>>24-X))}function Rt(j,X){var Q=X&7,ee=X>>>3;return(j[ee]|(Q<=6?0:j[ee+1]<<8))>>>Q&3}function _t(j,X){var Q=X&7,ee=X>>>3;return(j[ee]|(Q<=5?0:j[ee+1]<<8))>>>Q&7}function Hn(j,X){var Q=X&7,ee=X>>>3;return(j[ee]|(Q<=4?0:j[ee+1]<<8))>>>Q&15}function cn(j,X){var Q=X&7,ee=X>>>3;return(j[ee]|(Q<=3?0:j[ee+1]<<8))>>>Q&31}function ut(j,X){var Q=X&7,ee=X>>>3;return(j[ee]|(Q<=1?0:j[ee+1]<<8))>>>Q&127}function zt(j,X,Q){var ee=X&7,ne=X>>>3,oe=(1<<Q)-1,Ie=j[ne]>>>ee;return Q<8-ee||(Ie|=j[ne+1]<<8-ee,Q<16-ee)||(Ie|=j[ne+2]<<16-ee,Q<24-ee)||(Ie|=j[ne+3]<<24-ee),Ie&oe}function pt(j,X,Q){var ee=X&7,ne=X>>>3;return ee<=5?j[ne]|=(Q&7)<<ee:(j[ne]|=Q<<ee&255,j[ne+1]=(Q&7)>>8-ee),X+3}function Sn(j,X,Q){var ee=X&7,ne=X>>>3;return Q=(Q&1)<<ee,j[ne]|=Q,X+1}function ve(j,X,Q){var ee=X&7,ne=X>>>3;return Q<<=ee,j[ne]|=Q&255,Q>>>=8,j[ne+1]=Q,X+8}function on(j,X,Q){var ee=X&7,ne=X>>>3;return Q<<=ee,j[ne]|=Q&255,Q>>>=8,j[ne+1]=Q&255,j[ne+2]=Q>>>8,X+16}function Lt(j,X){var Q=j.length,ee=2*Q>X?2*Q:X+5,ne=0;if(Q>=X)return j;if(kn){var oe=bv(ee);if(j.copy)j.copy(oe);else for(;ne<j.length;++ne)oe[ne]=j[ne];return oe}else if(at){var Ie=new Uint8Array(ee);if(Ie.set)Ie.set(j);else for(;ne<Q;++ne)Ie[ne]=j[ne];return Ie}return j.length=ee,j}function At(j){for(var X=new Array(j),Q=0;Q<j;++Q)X[Q]=0;return X}function Gt(j,X,Q){var ee=1,ne=0,oe=0,Ie=0,He=0,Te=j.length,Oe=at?new Uint16Array(32):At(32);for(oe=0;oe<32;++oe)Oe[oe]=0;for(oe=Te;oe<Q;++oe)j[oe]=0;Te=j.length;var Re=at?new Uint16Array(Te):At(Te);for(oe=0;oe<Te;++oe)Oe[ne=j[oe]]++,ee<ne&&(ee=ne),Re[oe]=0;for(Oe[0]=0,oe=1;oe<=ee;++oe)Oe[oe+16]=He=He+Oe[oe-1]<<1;for(oe=0;oe<Te;++oe)He=j[oe],He!=0&&(Re[oe]=Oe[He+16]++);var qe=0;for(oe=0;oe<Te;++oe)if(qe=j[oe],qe!=0)for(He=Ut(Re[oe],ee)>>ee-qe,Ie=(1<<ee+4-qe)-1;Ie>=0;--Ie)X[He|Ie<<qe]=qe&15|oe<<4;return ee}var bt=at?new Uint16Array(512):At(512),rr=at?new Uint16Array(32):At(32);if(!at){for(var ln=0;ln<512;++ln)bt[ln]=0;for(ln=0;ln<32;++ln)rr[ln]=0}(function(){for(var j=[],X=0;X<32;X++)j.push(5);Gt(j,rr,32);var Q=[];for(X=0;X<=143;X++)Q.push(8);for(;X<=255;X++)Q.push(9);for(;X<=279;X++)Q.push(7);for(;X<=287;X++)Q.push(8);Gt(Q,bt,288)})();var jn=(function(){for(var X=at?new Uint8Array(32768):[],Q=0,ee=0;Q<Je.length-1;++Q)for(;ee<Je[Q+1];++ee)X[ee]=Q;for(;ee<32768;++ee)X[ee]=29;var ne=at?new Uint8Array(259):[];for(Q=0,ee=0;Q<pe.length-1;++Q)for(;ee<pe[Q+1];++ee)ne[ee]=Q;function oe(He,Te){for(var Oe=0;Oe<He.length;){var Re=Math.min(65535,He.length-Oe),qe=Oe+Re==He.length;for(Te.write_shift(1,+qe),Te.write_shift(2,Re),Te.write_shift(2,~Re&65535);Re-- >0;)Te[Te.l++]=He[Oe++]}return Te.l}function Ie(He,Te){for(var Oe=0,Re=0,qe=at?new Uint16Array(32768):[];Re<He.length;){var $e=Math.min(65535,He.length-Re);if($e<10){for(Oe=pt(Te,Oe,+(Re+$e==He.length)),Oe&7&&(Oe+=8-(Oe&7)),Te.l=Oe/8|0,Te.write_shift(2,$e),Te.write_shift(2,~$e&65535);$e-- >0;)Te[Te.l++]=He[Re++];Oe=Te.l*8;continue}Oe=pt(Te,Oe,+(Re+$e==He.length)+2);for(var et=0;$e-- >0;){var tt=He[Re];et=(et<<5^tt)&32767;var ct=-1,Et=0;if((ct=qe[et])&&(ct|=Re&-32768,ct>Re&&(ct-=32768),ct<Re))for(;He[ct+Et]==He[Re+Et]&&Et<250;)++Et;if(Et>2){tt=ne[Et],tt<=22?Oe=ve(Te,Oe,lt[tt+1]>>1)-1:(ve(Te,Oe,3),Oe+=5,ve(Te,Oe,lt[tt-23]>>5),Oe+=3);var Ve=tt<8?0:tt-4>>2;Ve>0&&(on(Te,Oe,Et-pe[tt]),Oe+=Ve),tt=X[Re-ct],Oe=ve(Te,Oe,lt[tt]>>3),Oe-=3;var Mn=tt<4?0:tt-2>>1;Mn>0&&(on(Te,Oe,Re-ct-Je[tt]),Oe+=Mn);for(var Vt=0;Vt<Et;++Vt)qe[et]=Re&32767,et=(et<<5^He[Re])&32767,++Re;$e-=Et-1}else tt<=143?tt=tt+48:Oe=Sn(Te,Oe,1),Oe=ve(Te,Oe,lt[tt]),qe[et]=Re&32767,++Re}Oe=ve(Te,Oe,0)-1}return Te.l=(Oe+7)/8|0,Te.l}return function(Te,Oe){return Te.length<8?oe(Te,Oe):Ie(Te,Oe)}})();function xa(j){var X=je(50+Math.floor(j.length*1.1)),Q=jn(j,X);return X.slice(0,Q)}var Ds=at?new Uint16Array(32768):At(32768),Va=at?new Uint16Array(32768):At(32768),vn=at?new Uint16Array(128):At(128),nt=1,wn=1;function Pt(j,X){var Q=cn(j,X)+257;X+=5;var ee=cn(j,X)+1;X+=5;var ne=Hn(j,X)+4;X+=4;for(var oe=0,Ie=at?new Uint8Array(19):At(19),He=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Te=1,Oe=at?new Uint8Array(8):At(8),Re=at?new Uint8Array(8):At(8),qe=Ie.length,$e=0;$e<ne;++$e)Ie[fe[$e]]=oe=_t(j,X),Te<oe&&(Te=oe),Oe[oe]++,X+=3;var et=0;for(Oe[0]=0,$e=1;$e<=Te;++$e)Re[$e]=et=et+Oe[$e-1]<<1;for($e=0;$e<qe;++$e)(et=Ie[$e])!=0&&(He[$e]=Re[et]++);var tt=0;for($e=0;$e<qe;++$e)if(tt=Ie[$e],tt!=0){et=lt[He[$e]]>>8-tt;for(var ct=(1<<7-tt)-1;ct>=0;--ct)vn[et|ct<<tt]=tt&7|$e<<3}var Et=[];for(Te=1;Et.length<Q+ee;)switch(et=vn[ut(j,X)],X+=et&7,et>>>=3){case 16:for(oe=3+Rt(j,X),X+=2,et=Et[Et.length-1];oe-- >0;)Et.push(et);break;case 17:for(oe=3+_t(j,X),X+=3;oe-- >0;)Et.push(0);break;case 18:for(oe=11+ut(j,X),X+=7;oe-- >0;)Et.push(0);break;default:Et.push(et),Te<et&&(Te=et);break}var Ve=Et.slice(0,Q),Mn=Et.slice(Q);for($e=Q;$e<286;++$e)Ve[$e]=0;for($e=ee;$e<30;++$e)Mn[$e]=0;return nt=Gt(Ve,Ds,286),wn=Gt(Mn,Va,30),X}function zn(j,X){if(j[0]==3&&!(j[1]&3))return[mc(X),2];for(var Q=0,ee=0,ne=bv(X||1<<18),oe=0,Ie=ne.length>>>0,He=0,Te=0;(ee&1)==0;){if(ee=_t(j,Q),Q+=3,ee>>>1)ee>>1==1?(He=9,Te=5):(Q=Pt(j,Q),He=nt,Te=wn);else{Q&7&&(Q+=8-(Q&7));var Oe=j[Q>>>3]|j[(Q>>>3)+1]<<8;if(Q+=32,Oe>0)for(!X&&Ie<oe+Oe&&(ne=Lt(ne,oe+Oe),Ie=ne.length);Oe-- >0;)ne[oe++]=j[Q>>>3],Q+=8;continue}for(;;){!X&&Ie<oe+32767&&(ne=Lt(ne,oe+32767),Ie=ne.length);var Re=zt(j,Q,He),qe=ee>>>1==1?bt[Re]:Ds[Re];if(Q+=qe&15,qe>>>=4,(qe>>>8&255)===0)ne[oe++]=qe;else{if(qe==256)break;qe-=257;var $e=qe<8?0:qe-4>>2;$e>5&&($e=0);var et=oe+pe[qe];$e>0&&(et+=zt(j,Q,$e),Q+=$e),Re=zt(j,Q,Te),qe=ee>>>1==1?rr[Re]:Va[Re],Q+=qe&15,qe>>>=4;var tt=qe<4?0:qe-2>>1,ct=Je[qe];for(tt>0&&(ct+=zt(j,Q,tt),Q+=tt),!X&&Ie<et&&(ne=Lt(ne,et+100),Ie=ne.length);oe<et;)ne[oe]=ne[oe-ct],++oe}}}return X?[ne,Q+7>>>3]:[ne.slice(0,oe),Q+7>>>3]}function Fi(j,X){var Q=j.slice(j.l||0),ee=zn(Q,X);return j.l+=ee[1],ee[0]}function ea(j,X){if(j)typeof console<"u"&&console.error(X);else throw new Error(X)}function Ai(j,X){var Q=j;Cs(Q,0);var ee=[],ne=[],oe={FileIndex:ee,FullPaths:ne};k(oe,{root:X.root});for(var Ie=Q.length-4;(Q[Ie]!=80||Q[Ie+1]!=75||Q[Ie+2]!=5||Q[Ie+3]!=6)&&Ie>=0;)--Ie;Q.l=Ie+4,Q.l+=4;var He=Q.read_shift(2);Q.l+=6;var Te=Q.read_shift(4);for(Q.l=Te,Ie=0;Ie<He;++Ie){Q.l+=20;var Oe=Q.read_shift(4),Re=Q.read_shift(4),qe=Q.read_shift(2),$e=Q.read_shift(2),et=Q.read_shift(2);Q.l+=8;var tt=Q.read_shift(4),ct=x(Q.slice(Q.l+qe,Q.l+qe+$e));Q.l+=qe+$e+et;var Et=Q.l;Q.l=tt+4,tn(Q,Oe,Re,oe,ct),Q.l=Et}return oe}function tn(j,X,Q,ee,ne){j.l+=2;var oe=j.read_shift(2),Ie=j.read_shift(2),He=h(j);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var Te=j.read_shift(4),Oe=j.read_shift(4),Re=j.read_shift(4),qe=j.read_shift(2),$e=j.read_shift(2),et="",tt=0;tt<qe;++tt)et+=String.fromCharCode(j[j.l++]);if($e){var ct=x(j.slice(j.l,j.l+$e));(ct[21589]||{}).mt&&(He=ct[21589].mt),((ne||{})[21589]||{}).mt&&(He=ne[21589].mt)}j.l+=$e;var Et=j.slice(j.l,j.l+Oe);switch(Ie){case 8:Et=ue(j,Re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ie)}var Ve=!1;oe&8&&(Te=j.read_shift(4),Te==134695760&&(Te=j.read_shift(4),Ve=!0),Oe=j.read_shift(4),Re=j.read_shift(4)),Oe!=X&&ea(Ve,"Bad compressed size: "+X+" != "+Oe),Re!=Q&&ea(Ve,"Bad uncompressed size: "+Q+" != "+Re),ai(ee,et,Et,{unsafe:!0,mt:He})}function Pn(j,X){var Q=X||{},ee=[],ne=[],oe=je(1),Ie=Q.compression?8:0,He=0,Te=0,Oe=0,Re=0,qe=0,$e=j.FullPaths[0],et=$e,tt=j.FileIndex[0],ct=[],Et=0;for(Te=1;Te<j.FullPaths.length;++Te)if(et=j.FullPaths[Te].slice($e.length),tt=j.FileIndex[Te],!(!tt.size||!tt.content||et=="Sh33tJ5")){var Ve=Re,Mn=je(et.length);for(Oe=0;Oe<et.length;++Oe)Mn.write_shift(1,et.charCodeAt(Oe)&127);Mn=Mn.slice(0,Mn.l),ct[qe]=d5.buf(tt.content,0);var Vt=tt.content;Ie==8&&(Vt=se(Vt)),oe=je(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,He),oe.write_shift(2,Ie),tt.mt?c(oe,tt.mt):oe.write_shift(4,0),oe.write_shift(-4,ct[qe]),oe.write_shift(4,Vt.length),oe.write_shift(4,tt.content.length),oe.write_shift(2,Mn.length),oe.write_shift(2,0),Re+=oe.length,ee.push(oe),Re+=Mn.length,ee.push(Mn),Re+=Vt.length,ee.push(Vt),oe=je(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,He),oe.write_shift(2,Ie),oe.write_shift(4,0),oe.write_shift(-4,ct[qe]),oe.write_shift(4,Vt.length),oe.write_shift(4,tt.content.length),oe.write_shift(2,Mn.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Ve),Et+=oe.l,ne.push(oe),Et+=Mn.length,ne.push(Mn),++qe}return oe=je(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,qe),oe.write_shift(2,qe),oe.write_shift(4,Et),oe.write_shift(4,Re),oe.write_shift(2,0),_i([_i(ee),_i(ne),oe])}var Jr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Bi(j,X){if(j.ctype)return j.ctype;var Q=j.name||"",ee=Q.match(/\.([^\.]+)$/);return ee&&Jr[ee[1]]||X&&(ee=(Q=X).match(/[\.\\]([^\.\\])+$/),ee&&Jr[ee[1]])?Jr[ee[1]]:"application/octet-stream"}function sr(j){for(var X=r0(j),Q=[],ee=0;ee<X.length;ee+=76)Q.push(X.slice(ee,ee+76));return Q.join(`\r
`)+`\r
`}function Ha(j){var X=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Oe){var Re=Oe.charCodeAt(0).toString(16).toUpperCase();return"="+(Re.length==1?"0"+Re:Re)});X=X.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),X.charAt(0)==`
`&&(X="=0D"+X.slice(1)),X=X.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Q=[],ee=X.split(`\r
`),ne=0;ne<ee.length;++ne){var oe=ee[ne];if(oe.length==0){Q.push("");continue}for(var Ie=0;Ie<oe.length;){var He=76,Te=oe.slice(Ie,Ie+He);Te.charAt(He-1)=="="?He--:Te.charAt(He-2)=="="?He-=2:Te.charAt(He-3)=="="&&(He-=3),Te=oe.slice(Ie,Ie+He),Ie+=He,Ie<oe.length&&(Te+="="),Q.push(Te)}}return Q.join(`\r
`)}function xr(j){for(var X=[],Q=0;Q<j.length;++Q){for(var ee=j[Q];Q<=j.length&&ee.charAt(ee.length-1)=="=";)ee=ee.slice(0,ee.length-1)+j[++Q];X.push(ee)}for(var ne=0;ne<X.length;++ne)X[ne]=X[ne].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return fa(X.join(`\r
`))}function Xr(j,X,Q){for(var ee="",ne="",oe="",Ie,He=0;He<10;++He){var Te=X[He];if(!Te||Te.match(/^\s*$/))break;var Oe=Te.match(/^(.*?):\s*([^\s].*)$/);if(Oe)switch(Oe[1].toLowerCase()){case"content-location":ee=Oe[2].trim();break;case"content-type":oe=Oe[2].trim();break;case"content-transfer-encoding":ne=Oe[2].trim();break}}switch(++He,ne.toLowerCase()){case"base64":Ie=fa(Io(X.slice(He).join("")));break;case"quoted-printable":Ie=xr(X.slice(He));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ne)}var Re=ai(j,ee.slice(Q.length),Ie,{unsafe:!0});oe&&(Re.ctype=oe)}function Yi(j,X){if(yt(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Q=X&&X.root||"",ee=(kn&&Buffer.isBuffer(j)?j.toString("binary"):yt(j)).split(`\r
`),ne=0,oe="";for(ne=0;ne<ee.length;++ne)if(oe=ee[ne],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),Q||(Q=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,Q.length)!=Q))for(;Q.length>0&&(Q=Q.slice(0,Q.length-1),Q=Q.slice(0,Q.lastIndexOf("/")+1),oe.slice(0,Q.length)!=Q););var Ie=(ee[1]||"").match(/boundary="(.*?)"/);if(!Ie)throw new Error("MAD cannot find boundary");var He="--"+(Ie[1]||""),Te=[],Oe=[],Re={FileIndex:Te,FullPaths:Oe};k(Re);var qe,$e=0;for(ne=0;ne<ee.length;++ne){var et=ee[ne];et!==He&&et!==He+"--"||($e++&&Xr(Re,ee.slice(qe,ne),Q),qe=ne)}return Re}function Ti(j,X){var Q=X||{},ee=Q.boundary||"SheetJS";ee="------="+ee;for(var ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ee.slice(2)+'"',"","",""],oe=j.FullPaths[0],Ie=oe,He=j.FileIndex[0],Te=1;Te<j.FullPaths.length;++Te)if(Ie=j.FullPaths[Te].slice(oe.length),He=j.FileIndex[Te],!(!He.size||!He.content||Ie=="Sh33tJ5")){Ie=Ie.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Et){return"_x"+Et.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Et){return"_u"+Et.charCodeAt(0).toString(16)+"_"});for(var Oe=He.content,Re=kn&&Buffer.isBuffer(Oe)?Oe.toString("binary"):yt(Oe),qe=0,$e=Math.min(1024,Re.length),et=0,tt=0;tt<=$e;++tt)(et=Re.charCodeAt(tt))>=32&&et<128&&++qe;var ct=qe>=$e*4/5;ne.push(ee),ne.push("Content-Location: "+(Q.root||"file:///C:/SheetJS/")+Ie),ne.push("Content-Transfer-Encoding: "+(ct?"quoted-printable":"base64")),ne.push("Content-Type: "+Bi(He,Ie)),ne.push(""),ne.push(ct?Ha(Re):sr(Re))}return ne.push(ee+`--\r
`),ne.join(`\r
`)}function ta(j){var X={};return k(X,j),X}function ai(j,X,Q,ee){var ne=ee&&ee.unsafe;ne||k(j);var oe=!ne&&$n.find(j,X);if(!oe){var Ie=j.FullPaths[0];X.slice(0,Ie.length)==Ie?Ie=X:(Ie.slice(-1)!="/"&&(Ie+="/"),Ie=(Ie+X).replace("//","/")),oe={name:a(X),type:2},j.FileIndex.push(oe),j.FullPaths.push(Ie),ne||$n.utils.cfb_gc(j)}return oe.content=Q,oe.size=Q?Q.length:0,ee&&(ee.CLSID&&(oe.clsid=ee.CLSID),ee.mt&&(oe.mt=ee.mt),ee.ct&&(oe.ct=ee.ct)),oe}function na(j,X){k(j);var Q=$n.find(j,X);if(Q){for(var ee=0;ee<j.FileIndex.length;++ee)if(j.FileIndex[ee]==Q)return j.FileIndex.splice(ee,1),j.FullPaths.splice(ee,1),!0}return!1}function fr(j,X,Q){k(j);var ee=$n.find(j,X);if(ee){for(var ne=0;ne<j.FileIndex.length;++ne)if(j.FileIndex[ne]==ee)return j.FileIndex[ne].name=a(Q),j.FullPaths[ne]=Q,!0}return!1}function qr(j){P(j,!0)}return e.find=K,e.read=De,e.parse=T,e.write=Ke,e.writeFile=gt,e.utils={cfb_new:ta,cfb_add:ai,cfb_del:na,cfb_mov:fr,cfb_gc:qr,ReadShift:Hf,CheckField:B3,prep_blob:Cs,bconcat:_i,use_zlib:q,_deflateRaw:xa,_inflateRaw:Fi,consts:Pe},e})();function g5(n){return typeof n=="string"?gd(n):Array.isArray(n)?VO(n):n}function w0(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=gd(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?s0(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var a=new Blob([g5(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,n);if(typeof saveAs<"u")return saveAs(a,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:n,saveAs:!0});var h=document.createElement("a");if(h.download!=null)return h.download=n,h.href=c,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var x=File(n);return x.open("w"),x.encoding="binary",Array.isArray(e)&&(e=v0(e)),x.write(e),x.close(),e}catch(v){if(!v.message||!v.message.match(/onstruct/))throw v}throw new Error("cannot save file "+n)}function wi(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function Pv(n,e){for(var t=[],r=wi(n),a=0;a!==r.length;++a)t[n[r[a]][e]]==null&&(t[n[r[a]][e]]=r[a]);return t}function _2(n){for(var e=[],t=wi(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function xd(n){for(var e=[],t=wi(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function m5(n){for(var e=[],t=wi(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var D1=new Date(1899,11,30,0,0,0);function cs(n,e){var t=n.getTime(),r=D1.getTime()+(n.getTimezoneOffset()-D1.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var v3=new Date,p5=D1.getTime()+(v3.getTimezoneOffset()-D1.getTimezoneOffset())*6e4,Fv=v3.getTimezoneOffset();function w3(n){var e=new Date;return e.setTime(n*24*60*60*1e3+p5),e.getTimezoneOffset()!==Fv&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Fv)*6e4),e}var Bv=new Date("2017-02-19T19:06:09.000Z"),A3=isNaN(Bv.getFullYear())?new Date("2/19/17"):Bv,x5=A3.getFullYear()==2017;function qi(n,e){var t=new Date(n);if(x5)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(A3.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var a=n.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return n.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function _d(n,e){if(kn&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(c){return t[c]||c})}catch{}for(var r=[],a=0;a!=n.length;++a)r.push(String.fromCharCode(n[a]));return r.join("")}function us(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=us(n[t]));return e}function Ir(n,e){for(var t="";t.length<e;)t+=n;return t}function yo(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(a,c){return t=-t,c}),!isNaN(e=Number(r)))?e/t:e}var _5=["january","february","march","april","may","june","july","august","september","october","november","december"];function i0(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),a=e.getMonth(),c=e.getDate();if(isNaN(c))return t;var h=n.toLowerCase();if(h.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(h=h.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),h.length>3&&_5.indexOf(h)==-1)return t}else if(h.match(/[a-z]/))return t;return r<0||r>8099?t:(a>0||c>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function an(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return kn?r=Do(t):r=HO(t),$n.utils.cfb_add(n,e,r)}$n.utils.cfb_add(n,e,t)}else n.file(e,t)}function y2(){return $n.utils.cfb_new()}var Wr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,y5={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},E2=_2(y5),v2=/[&<>'"]/g,E5=/[\u0000-\u0008\u000b-\u001f]/g;function Yn(n){var e=n+"";return e.replace(v2,function(t){return E2[t]}).replace(E5,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Uv(n){return Yn(n).replace(/ /g,"_x0020_")}var T3=/[\u0000-\u001f]/g;function v5(n){var e=n+"";return e.replace(v2,function(t){return E2[t]}).replace(/\n/g,"<br/>").replace(T3,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function w5(n){var e=n+"";return e.replace(v2,function(t){return E2[t]}).replace(T3,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function A5(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function T5(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bm(n){for(var e="",t=0,r=0,a=0,c=0,h=0,x=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(a=n.charCodeAt(t++),r>191&&r<224){h=(r&31)<<6,h|=a&63,e+=String.fromCharCode(h);continue}if(c=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(a&63)<<6|c&63);continue}h=n.charCodeAt(t++),x=((r&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536,e+=String.fromCharCode(55296+(x>>>10&1023)),e+=String.fromCharCode(56320+(x&1023))}return e}function Vv(n){var e=mc(2*n.length),t,r,a=1,c=0,h=0,x;for(r=0;r<n.length;r+=a)a=1,(x=n.charCodeAt(r))<128?t=x:x<224?(t=(x&31)*64+(n.charCodeAt(r+1)&63),a=2):x<240?(t=(x&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),a=3):(a=4,t=(x&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,h=55296+(t>>>10&1023),t=56320+(t&1023)),h!==0&&(e[c++]=h&255,e[c++]=h>>>8,h=0),e[c++]=t%256,e[c++]=t>>>8;return e.slice(0,c).toString("ucs2")}function Hv(n){return Do(n,"binary").toString("utf8")}var jh="foo bar baz",Vf=kn&&(Hv(jh)==bm(jh)&&Hv||Vv(jh)==bm(jh)&&Vv)||bm,s0=kn?function(n){return Do(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,a=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,a=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},S5=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<n.length;++a)r=r.replace(n[a][0],n[a][1]);return r}})(),S3=/(^\s|\s$|\n)/;function yi(n,e){return"<"+n+(e.match(S3)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function a0(n){return wi(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function ft(n,e,t){return"<"+n+(t!=null?a0(t):"")+(e!=null?(e.match(S3)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function fp(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function C5(n,e){switch(typeof n){case"string":var t=ft("vt:lpwstr",Yn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return ft((n|0)==n?"vt:i4":"vt:r8",Yn(String(n)));case"boolean":return ft("vt:bool",n?"true":"false")}if(n instanceof Date)return ft("vt:filetime",fp(n));throw new Error("Unable to serialize "+n)}var ri={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Fu=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Is={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function I5(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),a=n[e+6]&15,c=5;c>=0;--c)a=a*256+n[e+c];return r==2047?a==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,a+=Math.pow(2,52)),t*Math.pow(2,r-52)*a)}function b5(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,a=0,c=0,h=r?-e:e;isFinite(h)?h==0?a=c=0:(a=Math.floor(Math.log(h)/Math.LN2),c=h*Math.pow(2,52-a),a<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?a=-1022:(c-=Math.pow(2,52),a+=1023)):(a=2047,c=isNaN(e)?26985:0);for(var x=0;x<=5;++x,c/=256)n[t+x]=c&255;n[t+6]=(a&15)<<4|c&15,n[t+7]=a>>4|r}var jv=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var a=0,c=n[0][r].length;a<c;a+=t)e.push.apply(e,n[0][r].slice(a,a+t));return e},zv=kn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Do(e)})):jv(n)}:jv,Gv=function(n,e,t){for(var r=[],a=e;a<t;a+=2)r.push(String.fromCharCode(Of(n,a)));return r.join("").replace(Uf,"")},w2=kn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Uf,""):Gv(n,e,t)}:Gv,Wv=function(n,e,t){for(var r=[],a=e;a<e+t;++a)r.push(("0"+n[a].toString(16)).slice(-2));return r.join("")},C3=kn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):Wv(n,e,t)}:Wv,Xv=function(n,e,t){for(var r=[],a=e;a<t;a++)r.push(String.fromCharCode(ou(n,a)));return r.join("")},A0=kn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):Xv(e,t,r)}:Xv,I3=function(n,e){var t=bs(n,e);return t>0?A0(n,e+4,e+4+t-1):""},b3=I3,R3=function(n,e){var t=bs(n,e);return t>0?A0(n,e+4,e+4+t-1):""},N3=R3,O3=function(n,e){var t=2*bs(n,e);return t>0?A0(n,e+4,e+4+t-1):""},D3=O3,M3=function(e,t){var r=bs(e,t);return r>0?w2(e,t+4,t+4+r):""},L3=M3,k3=function(n,e){var t=bs(n,e);return t>0?A0(n,e+4,e+4+t):""},P3=k3,F3=function(n,e){return I5(n,e)},M1=F3,A2=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};kn&&(b3=function(e,t){if(!Buffer.isBuffer(e))return I3(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},N3=function(e,t){if(!Buffer.isBuffer(e))return R3(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},D3=function(e,t){if(!Buffer.isBuffer(e))return O3(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},L3=function(e,t){if(!Buffer.isBuffer(e))return M3(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},P3=function(e,t){if(!Buffer.isBuffer(e))return k3(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},M1=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):F3(e,t)},A2=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var ou=function(n,e){return n[e]},Of=function(n,e){return n[e+1]*256+n[e]},R5=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},bs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},sc=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},N5=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Hf(n,e){var t="",r,a,c=[],h,x,v,_;switch(e){case"dbcs":if(_=this.l,kn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(v=0;v<n;++v)t+=String.fromCharCode(Of(this,_)),_+=2;n*=2;break;case"utf8":t=A0(this,this.l,this.l+n);break;case"utf16le":n*=2,t=w2(this,this.l,this.l+n);break;case"wstr":return Hf.call(this,n,"dbcs");case"lpstr-ansi":t=b3(this,this.l),n=4+bs(this,this.l);break;case"lpstr-cp":t=N3(this,this.l),n=4+bs(this,this.l);break;case"lpwstr":t=D3(this,this.l),n=4+2*bs(this,this.l);break;case"lpp4":n=4+bs(this,this.l),t=L3(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+bs(this,this.l),t=P3(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(h=ou(this,this.l+n++))!==0;)c.push(Uh(h));t=c.join("");break;case"_wstr":for(n=0,t="";(h=Of(this,this.l+n))!==0;)c.push(Uh(h)),n+=2;n+=2,t=c.join("");break;case"dbcs-cont":for(t="",_=this.l,v=0;v<n;++v){if(this.lens&&this.lens.indexOf(_)!==-1)return h=ou(this,_),this.l=_+1,x=Hf.call(this,n-v,h?"dbcs-cont":"sbcs-cont"),c.join("")+x;c.push(Uh(Of(this,_))),_+=2}t=c.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",_=this.l,v=0;v!=n;++v){if(this.lens&&this.lens.indexOf(_)!==-1)return h=ou(this,_),this.l=_+1,x=Hf.call(this,n-v,h?"dbcs-cont":"sbcs-cont"),c.join("")+x;c.push(Uh(ou(this,_))),_+=1}t=c.join("");break;default:switch(n){case 1:return r=ou(this,this.l),this.l++,r;case 2:return r=(e==="i"?R5:Of)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?sc:N5)(this,this.l),this.l+=4,r):(a=bs(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return n==8?a=M1(this,this.l):a=M1([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;n=8;case 16:t=C3(this,this.l,n);break}}return this.l+=n,t}var O5=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},D5=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},M5=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function L5(n,e,t){var r=0,a=0;if(t==="dbcs"){for(a=0;a!=e.length;++a)M5(this,e.charCodeAt(a),this.l+2*a);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;r=e.length}else if(t==="hex"){for(;a<n;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(t==="utf16le"){var c=Math.min(this.l+n,this.length);for(a=0;a<Math.min(e.length,n);++a){var h=e.charCodeAt(a);this[this.l++]=h&255,this[this.l++]=h>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,O5(this,e,this.l);break;case 8:if(r=8,t==="f"){b5(this,e,this.l);break}case 16:break;case-4:r=4,D5(this,e,this.l);break}return this.l+=r,this}function B3(n,e){var t=C3(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Cs(n,e){n.l=e,n.read_shift=Hf,n.chk=B3,n.write_shift=L5}function Ua(n,e){n.l+=e}function je(n){var e=mc(n);return Cs(e,0),e}function ls(){var n=[],e=kn?256:2048,t=function(_){var T=je(_);return Cs(T,0),T},r=t(e),a=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},c=function(_){return r&&_<r.length-r.l?r:(a(),r=t(Math.max(_+1,e)))},h=function(){return a(),_i(n)},x=function(_){a(),r=_,r.l==null&&(r.l=r.length),c(e)};return{next:c,push:x,end:h,_bufs:n}}function Qe(n,e,t,r){var a=+e,c;if(!isNaN(a)){r||(r=Ik[a].p||(t||[]).length||0),c=1+(a>=128?1:0)+1,r>=128&&++c,r>=16384&&++c,r>=2097152&&++c;var h=n.next(c);a<=127?h.write_shift(1,a):(h.write_shift(1,(a&127)+128),h.write_shift(1,a>>7));for(var x=0;x!=4;++x)if(r>=128)h.write_shift(1,(r&127)+128),r>>=7;else{h.write_shift(1,r);break}r>0&&A2(t)&&n.push(t)}}function jf(n,e,t){var r=us(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function qv(n,e,t){var r=us(n);return r.s=jf(r.s,e.s,t),r.e=jf(r.e,e.s,t),r}function zf(n,e){if(n.cRel&&n.c<0)for(n=us(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=us(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Kn(n);return!n.cRel&&n.cRel!=null&&(t=F5(t)),!n.rRel&&n.rRel!=null&&(t=k5(t)),t}function Rm(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Li(n.s.c)+":"+(n.e.cRel?"":"$")+Li(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Ei(n.s.r)+":"+(n.e.rRel?"":"$")+Ei(n.e.r):zf(n.s,e.biff)+":"+zf(n.e,e.biff)}function T2(n){return parseInt(P5(n),10)-1}function Ei(n){return""+(n+1)}function k5(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function P5(n){return n.replace(/\$(\d+)$/,"$1")}function S2(n){for(var e=B5(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Li(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function F5(n){return n.replace(/^([A-Z])/,"$$$1")}function B5(n){return n.replace(/^\$([A-Z])/,"$1")}function U5(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ii(n){for(var e=0,t=0,r=0;r<n.length;++r){var a=n.charCodeAt(r);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(t=26*t+(a-64))}return{c:t-1,r:e-1}}function Kn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Os(n){var e=n.indexOf(":");return e==-1?{s:ii(n),e:ii(n)}:{s:ii(n.slice(0,e)),e:ii(n.slice(e+1))}}function zr(n,e){return typeof e>"u"||typeof e=="number"?zr(n.s,n.e):(typeof n!="string"&&(n=Kn(n)),typeof e!="string"&&(e=Kn(e)),n==e?n:n+":"+e)}function ur(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,a=0,c=n.length;for(t=0;r<c&&!((a=n.charCodeAt(r)-64)<1||a>26);++r)t=26*t+a;for(e.s.c=--t,t=0;r<c&&!((a=n.charCodeAt(r)-48)<0||a>9);++r)t=10*t+a;if(e.s.r=--t,r===c||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=c&&!((a=n.charCodeAt(r)-64)<1||a>26);++r)t=26*t+a;for(e.e.c=--t,t=0;r!=c&&!((a=n.charCodeAt(r)-48)<0||a>9);++r)t=10*t+a;return e.e.r=--t,e}function Yv(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=Nl(n.z,t?cs(e):e)}catch{}try{return n.w=Nl((n.XF||{}).numFmtId||(t?14:0),t?cs(e):e)}catch{return""+e}}function bo(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?T0[n.v]||n.v:e==null?Yv(n,n.v):Yv(n,e))}function Ec(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function U3(n,e,t){var r=t||{},a=n?Array.isArray(n):r.dense,c=n||(a?[]:{}),h=0,x=0;if(c&&r.origin!=null){if(typeof r.origin=="number")h=r.origin;else{var v=typeof r.origin=="string"?ii(r.origin):r.origin;h=v.r,x=v.c}c["!ref"]||(c["!ref"]="A1:A1")}var _={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var T=ur(c["!ref"]);_.s.c=T.s.c,_.s.r=T.s.r,_.e.c=Math.max(_.e.c,T.e.c),_.e.r=Math.max(_.e.r,T.e.r),h==-1&&(_.e.r=h=T.e.r+1)}for(var C=0;C!=e.length;++C)if(e[C]){if(!Array.isArray(e[C]))throw new Error("aoa_to_sheet expects an array of arrays");for(var b=0;b!=e[C].length;++b)if(!(typeof e[C][b]>"u")){var O={v:e[C][b]},U=h+C,M=x+b;if(_.s.r>U&&(_.s.r=U),_.s.c>M&&(_.s.c=M),_.e.r<U&&(_.e.r=U),_.e.c<M&&(_.e.c=M),e[C][b]&&typeof e[C][b]=="object"&&!Array.isArray(e[C][b])&&!(e[C][b]instanceof Date))O=e[C][b];else if(Array.isArray(O.v)&&(O.f=e[C][b][1],O.v=O.v[0]),O.v===null)if(O.f)O.t="n";else if(r.nullError)O.t="e",O.v=0;else if(r.sheetStubs)O.t="z";else continue;else typeof O.v=="number"?O.t="n":typeof O.v=="boolean"?O.t="b":O.v instanceof Date?(O.z=r.dateNF||br[14],r.cellDates?(O.t="d",O.w=Nl(O.z,cs(O.v))):(O.t="n",O.v=cs(O.v),O.w=Nl(O.z,O.v))):O.t="s";if(a)c[U]||(c[U]=[]),c[U][M]&&c[U][M].z&&(O.z=c[U][M].z),c[U][M]=O;else{var V=Kn({c:M,r:U});c[V]&&c[V].z&&(O.z=c[V].z),c[V]=O}}}return _.s.c<1e7&&(c["!ref"]=zr(_)),c}function Bu(n,e){return U3(null,n,e)}function V5(n){return n.read_shift(4,"i")}function ga(n,e){return e||(e=je(4)),e.write_shift(4,n),e}function ki(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function si(n,e){var t=!1;return e==null&&(t=!0,e=je(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function H5(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function j5(n,e){return e||(e=je(4)),e.write_shift(2,0),e.write_shift(2,0),e}function C2(n,e){var t=n.l,r=n.read_shift(1),a=ki(n),c=[],h={t:a,h:a};if((r&1)!==0){for(var x=n.read_shift(4),v=0;v!=x;++v)c.push(H5(n));h.r=c}else h.r=[{ich:0,ifnt:0}];return n.l=t+e,h}function z5(n,e){var t=!1;return e==null&&(t=!0,e=je(15+4*n.t.length)),e.write_shift(1,0),si(n.t,e),t?e.slice(0,e.l):e}var G5=C2;function W5(n,e){var t=!1;return e==null&&(t=!0,e=je(23+4*n.t.length)),e.write_shift(1,1),si(n.t,e),e.write_shift(4,1),j5({},e),t?e.slice(0,e.l):e}function $s(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function vc(n,e){return e==null&&(e=je(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function wc(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Ac(n,e){return e==null&&(e=je(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var X5=ki,V3=si;function I2(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function L1(n,e){var t=!1;return e==null&&(t=!0,e=je(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var q5=ki,hp=I2,b2=L1;function H3(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var a=r===0?M1([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):sc(e,0)>>2;return t?a/100:a}function j3(n,e){e==null&&(e=je(4));var t=0,r=0,a=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?a:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function z3(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function Y5(n,e){return e||(e=je(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Tc=z3,Uu=Y5;function Vu(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function pc(n,e){return(e||je(8)).write_shift(8,n,"f")}function K5(n){var e={},t=n.read_shift(1),r=t>>>1,a=n.read_shift(1),c=n.read_shift(2,"i"),h=n.read_shift(1),x=n.read_shift(1),v=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=a;var _=iD[a];_&&(e.rgb=sw(_));break;case 2:e.rgb=sw([h,x,v]);break;case 3:e.theme=a;break}return c!=0&&(e.tint=c>0?c/32767:c/32768),e}function k1(n,e){if(e||(e=je(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Q5(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function Z5(n,e){e||(e=je(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var G3=2,Ss=3,zh=11,P1=19,Gh=64,J5=65,$5=71,eD=4108,tD=4126,mi=80,Kv={1:{n:"CodePage",t:G3},2:{n:"Category",t:mi},3:{n:"PresentationFormat",t:mi},4:{n:"ByteCount",t:Ss},5:{n:"LineCount",t:Ss},6:{n:"ParagraphCount",t:Ss},7:{n:"SlideCount",t:Ss},8:{n:"NoteCount",t:Ss},9:{n:"HiddenCount",t:Ss},10:{n:"MultimediaClipCount",t:Ss},11:{n:"ScaleCrop",t:zh},12:{n:"HeadingPairs",t:eD},13:{n:"TitlesOfParts",t:tD},14:{n:"Manager",t:mi},15:{n:"Company",t:mi},16:{n:"LinksUpToDate",t:zh},17:{n:"CharacterCount",t:Ss},19:{n:"SharedDoc",t:zh},22:{n:"HyperlinksChanged",t:zh},23:{n:"AppVersion",t:Ss,p:"version"},24:{n:"DigSig",t:J5},26:{n:"ContentType",t:mi},27:{n:"ContentStatus",t:mi},28:{n:"Language",t:mi},29:{n:"Version",t:mi},255:{},2147483648:{n:"Locale",t:P1},2147483651:{n:"Behavior",t:P1},1919054434:{}},Qv={1:{n:"CodePage",t:G3},2:{n:"Title",t:mi},3:{n:"Subject",t:mi},4:{n:"Author",t:mi},5:{n:"Keywords",t:mi},6:{n:"Comments",t:mi},7:{n:"Template",t:mi},8:{n:"LastAuthor",t:mi},9:{n:"RevNumber",t:mi},10:{n:"EditTime",t:Gh},11:{n:"LastPrinted",t:Gh},12:{n:"CreatedDate",t:Gh},13:{n:"ModifiedDate",t:Gh},14:{n:"PageCount",t:Ss},15:{n:"WordCount",t:Ss},16:{n:"CharCount",t:Ss},17:{n:"Thumbnail",t:$5},18:{n:"Application",t:mi},19:{n:"DocSecurity",t:Ss},255:{},2147483648:{n:"Locale",t:P1},2147483651:{n:"Behavior",t:P1},1919054434:{}};function nD(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var rD=nD([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),iD=us(rD),T0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},sD={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Wh={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function W3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function X3(n,e){var t=m5(sD),r=[],a;r[r.length]=Wr,r[r.length]=ft("Types",null,{xmlns:ri.CT,"xmlns:xsd":ri.xsd,"xmlns:xsi":ri.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(v){return ft("Default",null,{Extension:v[0],ContentType:v[1]})}));var c=function(v){n[v]&&n[v].length>0&&(a=n[v][0],r[r.length]=ft("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:Wh[v][e.bookType]||Wh[v].xlsx}))},h=function(v){(n[v]||[]).forEach(function(_){r[r.length]=ft("Override",null,{PartName:(_[0]=="/"?"":"/")+_,ContentType:Wh[v][e.bookType]||Wh[v].xlsx})})},x=function(v){(n[v]||[]).forEach(function(_){r[r.length]=ft("Override",null,{PartName:(_[0]=="/"?"":"/")+_,ContentType:t[v][0]})})};return c("workbooks"),h("sheets"),h("charts"),x("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(x),x("vba"),x("comments"),x("threadedcomments"),x("drawings"),h("metadata"),x("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Dn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function q3(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function xu(n){var e=[Wr,ft("Relationships",null,{xmlns:ri.RELS})];return wi(n["!id"]).forEach(function(t){e[e.length]=ft("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function qn(n,e,t,r,a,c){if(a||(a={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,a.Id="rId"+e,a.Type=r,a.Target=t,[Dn.HLINK,Dn.XPATH,Dn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),n["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][a.Id]=a,n[("/"+a.Target).replace("//","/")]=a,e}function aD(n){var e=[Wr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Zv(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function oD(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function lD(n){var e=[Wr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(Zv(n[t][0],n[t][1])),e.push(oD("",n[t][0]));return e.push(Zv("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Y3(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+I1.version+"</meta:generator></office:meta></office:document-meta>"}var cc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Nm(n,e,t,r,a){a[n]!=null||e==null||e===""||(a[n]=e,e=Yn(e),r[r.length]=t?ft(n,e,t):yi(n,e))}function K3(n,e){var t=e||{},r=[Wr,ft("cp:coreProperties",null,{"xmlns:cp":ri.CORE_PROPS,"xmlns:dc":ri.dc,"xmlns:dcterms":ri.dcterms,"xmlns:dcmitype":ri.dcmitype,"xmlns:xsi":ri.xsi})],a={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&Nm("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:fp(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a),n.ModifiedDate!=null&&Nm("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:fp(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,a));for(var c=0;c!=cc.length;++c){var h=cc[c],x=t.Props&&t.Props[h[1]]!=null?t.Props[h[1]]:n?n[h[1]]:null;x===!0?x="1":x===!1?x="0":typeof x=="number"&&(x=String(x)),x!=null&&Nm(h[0],x,null,r,a)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var _u=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Q3=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Z3(n){var e=[],t=ft;return n||(n={}),n.Application="SheetJS",e[e.length]=Wr,e[e.length]=ft("Properties",null,{xmlns:ri.EXT_PROPS,"xmlns:vt":ri.vt}),_u.forEach(function(r){if(n[r[1]]!==void 0){var a;switch(r[2]){case"string":a=Yn(String(n[r[1]]));break;case"bool":a=n[r[1]]?"true":"false";break}a!==void 0&&(e[e.length]=t(r[0],a))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Yn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function J3(n){var e=[Wr,ft("Properties",null,{xmlns:ri.CUST_PROPS,"xmlns:vt":ri.vt})];if(!n)return e.join("");var t=1;return wi(n).forEach(function(a){++t,e[e.length]=ft("property",C5(n[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Yn(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Jv={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function cD(n,e){var t=[];return wi(Jv).map(function(r){for(var a=0;a<cc.length;++a)if(cc[a][1]==r)return cc[a];for(a=0;a<_u.length;++a)if(_u[a][1]==r)return _u[a];throw r}).forEach(function(r){if(n[r[1]]!=null){var a=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),t.push(yi(Jv[r[1]]||r[1],a))}}),ft("DocumentProperties",t.join(""),{xmlns:Is.o})}function uD(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",a=[];return n&&wi(n).forEach(function(c){if(Object.prototype.hasOwnProperty.call(n,c)){for(var h=0;h<cc.length;++h)if(c==cc[h][1])return;for(h=0;h<_u.length;++h)if(c==_u[h][1])return;for(h=0;h<t.length;++h)if(c==t[h])return;var x=n[c],v="string";typeof x=="number"?(v="float",x=String(x)):x===!0||x===!1?(v="boolean",x=x?"1":"0"):x=String(x),a.push(ft(Uv(c),x,{"dt:dt":v}))}}),e&&wi(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)&&!(n&&Object.prototype.hasOwnProperty.call(n,c))){var h=e[c],x="string";typeof h=="number"?(x="float",h=String(h)):h===!0||h===!1?(x="boolean",h=h?"1":"0"):h instanceof Date?(x="dateTime.tz",h=h.toISOString()):h=String(h),a.push(ft(Uv(c),h,{"dt:dt":x}))}}),"<"+r+' xmlns="'+Is.o+'">'+a.join("")+"</"+r+">"}function fD(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),a=(t-r)/Math.pow(2,32);r*=1e7,a*=1e7;var c=r/Math.pow(2,32)|0;c>0&&(r=r%Math.pow(2,32),a+=c);var h=je(8);return h.write_shift(4,r),h.write_shift(4,a),h}function $v(n,e){var t=je(4),r=je(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=je(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=fD(e);break;case 31:case 80:for(r=je(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return _i([t,r])}var $3=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hD(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function ew(n,e,t){var r=je(8),a=[],c=[],h=8,x=0,v=je(8),_=je(8);if(v.write_shift(4,2),v.write_shift(4,1200),_.write_shift(4,1),c.push(v),a.push(_),h+=8+v.length,!e){_=je(8),_.write_shift(4,0),a.unshift(_);var T=[je(4)];for(T[0].write_shift(4,n.length),x=0;x<n.length;++x){var C=n[x][0];for(v=je(8+2*(C.length+1)+(C.length%2?0:2)),v.write_shift(4,x+2),v.write_shift(4,C.length+1),v.write_shift(0,C,"dbcs");v.l!=v.length;)v.write_shift(1,0);T.push(v)}v=_i(T),c.unshift(v),h+=8+v.length}for(x=0;x<n.length;++x)if(!(e&&!e[n[x][0]])&&!($3.indexOf(n[x][0])>-1||Q3.indexOf(n[x][0])>-1)&&n[x][1]!=null){var b=n[x][1],O=0;if(e){O=+e[n[x][0]];var U=t[O];if(U.p=="version"&&typeof b=="string"){var M=b.split(".");b=(+M[0]<<16)+(+M[1]||0)}v=$v(U.t,b)}else{var V=hD(b);V==-1&&(V=31,b=String(b)),v=$v(V,b)}c.push(v),_=je(8),_.write_shift(4,e?O:2+x),a.push(_),h+=8+v.length}var le=8*(c.length+1);for(x=0;x<c.length;++x)a[x].write_shift(4,le),le+=c[x].length;return r.write_shift(4,h),r.write_shift(4,c.length),_i([r].concat(a).concat(c))}function tw(n,e,t,r,a,c){var h=je(a?68:48),x=[h];h.write_shift(2,65534),h.write_shift(2,0),h.write_shift(4,842412599),h.write_shift(16,$n.utils.consts.HEADER_CLSID,"hex"),h.write_shift(4,a?2:1),h.write_shift(16,e,"hex"),h.write_shift(4,a?68:48);var v=ew(n,t,r);if(x.push(v),a){var _=ew(a,null,null);h.write_shift(16,c,"hex"),h.write_shift(4,68+v.length),x.push(_)}return _i(x)}function dD(n,e){e||(e=je(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function gD(n,e){return n.read_shift(e)===1}function Xi(n,e){return e||(e=je(2)),e.write_shift(2,+!!n),e}function e4(n){return n.read_shift(2,"u")}function Ks(n,e){return e||(e=je(2)),e.write_shift(2,n),e}function t4(n,e,t){return t||(t=je(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function n4(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),a="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var c=n.read_shift(1);c&&(a="dbcs-cont")}else t.biff==12&&(a="wstr");t.biff>=2&&t.biff<=5&&(a="cpstr");var h=r?n.read_shift(r,a):"";return h}function mD(n){var e=n.t||"",t=je(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=je(2*e.length);r.write_shift(2*e.length,e,"utf16le");var a=[t,r];return _i(a)}function pD(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var a=n.read_shift(1);return a===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function xD(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):pD(n,r,t)}function _D(n,e,t){if(t.biff>5)return xD(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function r4(n,e,t){return t||(t=je(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function nw(n,e){e||(e=je(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function yD(n){var e=je(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var a=r.indexOf("#"),c=a>-1?31:23;switch(r.charAt(0)){case"#":c=28;break;case".":c&=-3;break}e.write_shift(4,2),e.write_shift(4,c);var h=[8,6815827,6619237,4849780,83];for(t=0;t<h.length;++t)e.write_shift(4,h[t]);if(c==28)r=r.slice(1),nw(r,e);else if(c&2){for(h="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<h.length;++t)e.write_shift(1,parseInt(h[t],16));var x=a>-1?r.slice(0,a):r;for(e.write_shift(4,2*(x.length+1)),t=0;t<x.length;++t)e.write_shift(2,x.charCodeAt(t));e.write_shift(2,0),c&8&&nw(a>-1?r.slice(a+1):"",e)}else{for(h="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<h.length;++t)e.write_shift(1,parseInt(h[t],16));for(var v=0;r.slice(v*3,v*3+3)=="../"||r.slice(v*3,v*3+3)=="..\\";)++v;for(e.write_shift(2,v),e.write_shift(4,r.length-3*v+1),t=0;t<r.length-3*v;++t)e.write_shift(1,r.charCodeAt(t+3*v)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function xc(n,e,t,r){return r||(r=je(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function ED(n,e,t){var r=t.biff>8?4:2,a=n.read_shift(r),c=n.read_shift(r,"i"),h=n.read_shift(r,"i");return[a,c,h]}function vD(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),a=n.read_shift(2);return{s:{c:r,r:e},e:{c:a,r:t}}}function i4(n,e){return e||(e=je(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function R2(n,e,t){var r=1536,a=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,a=8;break;case"biff4":r=4,a=6;break;case"biff3":r=3,a=6;break;case"biff2":r=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=je(a);return c.write_shift(2,r),c.write_shift(2,e),a>4&&c.write_shift(2,29282),a>6&&c.write_shift(2,1997),a>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function wD(n,e){var t=!e||e.biff==8,r=je(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function AD(n,e){var t=!e||e.biff>=8?2:1,r=je(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var a=r.slice(0,r.l);return a.l=r.l,a}function TD(n,e){var t=je(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],a=0;a<n.length;++a)r[a]=mD(n[a]);var c=_i([t].concat(r));return c.parts=[t.length].concat(r.map(function(h){return h.length})),c}function SD(){var n=je(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function CD(n){var e=je(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function ID(n,e){var t=n.name||"Arial",r=e&&e.biff==5,a=r?15+t.length:16+2*t.length,c=je(a);return c.write_shift(2,n.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,t.length),r||c.write_shift(1,1),c.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),c}function bD(n,e,t,r){var a=je(10);return xc(n,e,r,a),a.write_shift(4,t),a}function RD(n,e,t,r,a){var c=!a||a.biff==8,h=je(8+ +c+(1+c)*t.length);return xc(n,e,r,h),h.write_shift(2,t.length),c&&h.write_shift(1,1),h.write_shift((1+c)*t.length,t,c?"utf16le":"sbcs"),h}function ND(n,e,t,r){var a=t&&t.biff==5;r||(r=je(a?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(a?1:2,e.length),a||r.write_shift(1,1),r.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var c=r.length>r.l?r.slice(0,r.l):r;return c.l==null&&(c.l=c.length),c}function OD(n,e){var t=e.biff==8||!e.biff?4:2,r=je(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function rw(n,e,t,r){var a=t&&t.biff==5;r||(r=je(a?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var c=0;return n.numFmtId>0&&a&&(c|=1024),r.write_shift(4,c),r.write_shift(4,0),a||r.write_shift(4,0),r.write_shift(2,0),r}function DD(n){var e=je(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function MD(n,e,t,r,a,c){var h=je(8);return xc(n,e,r,h),t4(t,c,h),h}function LD(n,e,t,r){var a=je(14);return xc(n,e,r,a),pc(t,a),a}function kD(n,e,t){if(t.biff<8)return PD(n,e,t);for(var r=[],a=n.l+e,c=n.read_shift(t.biff>8?4:2);c--!==0;)r.push(ED(n,t.biff>8?12:6,t));if(n.l!=a)throw new Error("Bad ExternSheet: "+n.l+" != "+a);return r}function PD(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=n4(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function FD(n){var e=je(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)i4(n[t],e);return e}function BD(n){var e=je(24),t=ii(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(r[a],16));return _i([e,yD(n[1])])}function UD(n){var e=n[1].Tooltip,t=je(10+2*(e.length+1));t.write_shift(2,2048);var r=ii(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a=0;a<e.length;++a)t.write_shift(2,e.charCodeAt(a));return t.write_shift(2,0),t}function VD(n){return n||(n=je(4)),n.write_shift(2,1),n.write_shift(2,1),n}function HD(n,e,t){if(!t.cellStyles)return Ua(n,e);var r=t&&t.biff>=12?4:2,a=n.read_shift(r),c=n.read_shift(r),h=n.read_shift(r),x=n.read_shift(r),v=n.read_shift(2);r==2&&(n.l+=2);var _={s:a,e:c,w:h,ixfe:x,flags:v};return(t.biff>=5||!t.biff)&&(_.level=v>>8&7),_}function jD(n,e){var t=je(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function zD(n){for(var e=je(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function GD(n,e,t){var r=je(15);return C0(r,n,e),r.write_shift(8,t,"f"),r}function WD(n,e,t){var r=je(9);return C0(r,n,e),r.write_shift(2,t),r}var XD=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=_2({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(x,v){var _=[],T=mc(1);switch(v.type){case"base64":T=fa(Io(x));break;case"binary":T=fa(x);break;case"buffer":case"array":T=x;break}Cs(T,0);var C=T.read_shift(1),b=!!(C&136),O=!1,U=!1;switch(C){case 2:break;case 3:break;case 48:O=!0,b=!0;break;case 49:O=!0,b=!0;break;case 131:break;case 139:break;case 140:U=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+C.toString(16))}var M=0,V=521;C==2&&(M=T.read_shift(2)),T.l+=3,C!=2&&(M=T.read_shift(4)),M>1048576&&(M=1e6),C!=2&&(V=T.read_shift(2));var le=T.read_shift(2),ce=v.codepage||1252;C!=2&&(T.l+=16,T.read_shift(1),T[T.l]!==0&&(ce=n[T[T.l]]),T.l+=1,T.l+=2),U&&(T.l+=36);for(var ie=[],me={},Ue=Math.min(T.length,C==2?521:V-10-(O?264:0)),De=U?32:11;T.l<Ue&&T[T.l]!=13;)switch(me={},me.name=b1.utils.decode(ce,T.slice(T.l,T.l+De)).replace(/[\u0000\r\n].*$/g,""),T.l+=De,me.type=String.fromCharCode(T.read_shift(1)),C!=2&&!U&&(me.offset=T.read_shift(4)),me.len=T.read_shift(1),C==2&&(me.offset=T.read_shift(2)),me.dec=T.read_shift(1),me.name.length&&ie.push(me),C!=2&&(T.l+=U?13:14),me.type){case"B":(!O||me.len!=8)&&v.WTF&&console.log("Skipping "+me.name+":"+me.type);break;case"G":case"P":v.WTF&&console.log("Skipping "+me.name+":"+me.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+me.type)}if(T[T.l]!==13&&(T.l=V-1),T.read_shift(1)!==13)throw new Error("DBF Terminator not found "+T.l+" "+T[T.l]);T.l=V;var k=0,H=0;for(_[0]=[],H=0;H!=ie.length;++H)_[0][H]=ie[H].name;for(;M-- >0;){if(T[T.l]===42){T.l+=le;continue}for(++T.l,_[++k]=[],H=0,H=0;H!=ie.length;++H){var P=T.slice(T.l,T.l+ie[H].len);T.l+=ie[H].len,Cs(P,0);var te=b1.utils.decode(ce,P);switch(ie[H].type){case"C":te.trim().length&&(_[k][H]=te.replace(/\s+$/,""));break;case"D":te.length===8?_[k][H]=new Date(+te.slice(0,4),+te.slice(4,6)-1,+te.slice(6,8)):_[k][H]=te;break;case"F":_[k][H]=parseFloat(te.trim());break;case"+":case"I":_[k][H]=U?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(te.trim().toUpperCase()){case"Y":case"T":_[k][H]=!0;break;case"N":case"F":_[k][H]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+te+"|")}break;case"M":if(!b)throw new Error("DBF Unexpected MEMO for type "+C.toString(16));_[k][H]="##MEMO##"+(U?parseInt(te.trim(),10):P.read_shift(4));break;case"N":te=te.replace(/\u0000/g,"").trim(),te&&te!="."&&(_[k][H]=+te||0);break;case"@":_[k][H]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":_[k][H]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":_[k][H]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":_[k][H]=-P.read_shift(-8,"f");break;case"B":if(O&&ie[H].len==8){_[k][H]=P.read_shift(8,"f");break}case"G":case"P":P.l+=ie[H].len;break;case"0":if(ie[H].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+ie[H].type)}}}if(C!=2&&T.l<T.length&&T[T.l++]!=26)throw new Error("DBF EOF Marker missing "+(T.l-1)+" of "+T.length+" "+T[T.l-1].toString(16));return v&&v.sheetRows&&(_=_.slice(0,v.sheetRows)),v.DBF=ie,_}function r(x,v){var _=v||{};_.dateNF||(_.dateNF="yyyymmdd");var T=Bu(t(x,_),_);return T["!cols"]=_.DBF.map(function(C){return{wch:C.len,DBF:C}}),delete _.DBF,T}function a(x,v){try{return Ec(r(x,v),v)}catch(_){if(v&&v.WTF)throw _}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function h(x,v){var _=v||{};if(+_.codepage>=0&&n0(+_.codepage),_.type=="string")throw new Error("Cannot write DBF to JS string");var T=ls(),C=H1(x,{header:1,raw:!0,cellDates:!0}),b=C[0],O=C.slice(1),U=x["!cols"]||[],M=0,V=0,le=0,ce=1;for(M=0;M<b.length;++M){if(((U[M]||{}).DBF||{}).name){b[M]=U[M].DBF.name,++le;continue}if(b[M]!=null){if(++le,typeof b[M]=="number"&&(b[M]=b[M].toString(10)),typeof b[M]!="string")throw new Error("DBF Invalid column name "+b[M]+" |"+typeof b[M]+"|");if(b.indexOf(b[M])!==M){for(V=0;V<1024;++V)if(b.indexOf(b[M]+"_"+V)==-1){b[M]+="_"+V;break}}}}var ie=ur(x["!ref"]),me=[],Ue=[],De=[];for(M=0;M<=ie.e.c-ie.s.c;++M){var k="",H="",P=0,te=[];for(V=0;V<O.length;++V)O[V][M]!=null&&te.push(O[V][M]);if(te.length==0||b[M]==null){me[M]="?";continue}for(V=0;V<te.length;++V){switch(typeof te[V]){case"number":H="B";break;case"string":H="C";break;case"boolean":H="L";break;case"object":H=te[V]instanceof Date?"D":"C";break;default:H="C"}P=Math.max(P,String(te[V]).length),k=k&&k!=H?"C":H}P>250&&(P=250),H=((U[M]||{}).DBF||{}).type,H=="C"&&U[M].DBF.len>P&&(P=U[M].DBF.len),k=="B"&&H=="N"&&(k="N",De[M]=U[M].DBF.dec,P=U[M].DBF.len),Ue[M]=k=="C"||H=="N"?P:c[k]||0,ce+=Ue[M],me[M]=k}var K=T.next(32);for(K.write_shift(4,318902576),K.write_shift(4,O.length),K.write_shift(2,296+32*le),K.write_shift(2,ce),M=0;M<4;++M)K.write_shift(4,0);for(K.write_shift(4,0|(+e[a3]||3)<<8),M=0,V=0;M<b.length;++M)if(b[M]!=null){var J=T.next(32),Y=(b[M].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);J.write_shift(1,Y,"sbcs"),J.write_shift(1,me[M]=="?"?"C":me[M],"sbcs"),J.write_shift(4,V),J.write_shift(1,Ue[M]||c[me[M]]||0),J.write_shift(1,De[M]||0),J.write_shift(1,2),J.write_shift(4,0),J.write_shift(1,0),J.write_shift(4,0),J.write_shift(4,0),V+=Ue[M]||c[me[M]]||0}var dt=T.next(264);for(dt.write_shift(4,13),M=0;M<65;++M)dt.write_shift(4,0);for(M=0;M<O.length;++M){var ye=T.next(ce);for(ye.write_shift(1,0),V=0;V<b.length;++V)if(b[V]!=null)switch(me[V]){case"L":ye.write_shift(1,O[M][V]==null?63:O[M][V]?84:70);break;case"B":ye.write_shift(8,O[M][V]||0,"f");break;case"N":var Se="0";for(typeof O[M][V]=="number"&&(Se=O[M][V].toFixed(De[V]||0)),le=0;le<Ue[V]-Se.length;++le)ye.write_shift(1,32);ye.write_shift(1,Se,"sbcs");break;case"D":O[M][V]?(ye.write_shift(4,("0000"+O[M][V].getFullYear()).slice(-4),"sbcs"),ye.write_shift(2,("00"+(O[M][V].getMonth()+1)).slice(-2),"sbcs"),ye.write_shift(2,("00"+O[M][V].getDate()).slice(-2),"sbcs")):ye.write_shift(8,"00000000","sbcs");break;case"C":var Pe=String(O[M][V]!=null?O[M][V]:"").slice(0,Ue[V]);for(ye.write_shift(1,Pe,"sbcs"),le=0;le<Ue[V]-Pe.length;++le)ye.write_shift(1,32);break}}return T.next(1).write_shift(1,26),T.end()}return{to_workbook:a,to_sheet:r,from_sheet:h}})(),qD=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+wi(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(b,O){var U=n[O];return typeof U=="number"?Iv(U):U},r=function(b,O,U){var M=O.charCodeAt(0)-32<<4|U.charCodeAt(0)-48;return M==59?b:Iv(M)};n["|"]=254;function a(b,O){switch(O.type){case"base64":return c(Io(b),O);case"binary":return c(b,O);case"buffer":return c(kn&&Buffer.isBuffer(b)?b.toString("binary"):v0(b),O);case"array":return c(_d(b),O)}throw new Error("Unrecognized type "+O.type)}function c(b,O){var U=b.split(/[\n\r]+/),M=-1,V=-1,le=0,ce=0,ie=[],me=[],Ue=null,De={},k=[],H=[],P=[],te=0,K;for(+O.codepage>=0&&n0(+O.codepage);le!==U.length;++le){te=0;var J=U[le].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),Y=J.replace(/;;/g,"\0").split(";").map(function(fe){return fe.replace(/\u0000/g,";")}),dt=Y[0],ye;if(J.length>0)switch(dt){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Y[1].charAt(0)=="P"&&me.push(J.slice(3).replace(/;;/g,";"));break;case"C":var Se=!1,Pe=!1,gt=!1,yt=!1,Ke=-1,he=-1;for(ce=1;ce<Y.length;++ce)switch(Y[ce].charAt(0)){case"A":break;case"X":V=parseInt(Y[ce].slice(1))-1,Pe=!0;break;case"Y":for(M=parseInt(Y[ce].slice(1))-1,Pe||(V=0),K=ie.length;K<=M;++K)ie[K]=[];break;case"K":ye=Y[ce].slice(1),ye.charAt(0)==='"'?ye=ye.slice(1,ye.length-1):ye==="TRUE"?ye=!0:ye==="FALSE"?ye=!1:isNaN(yo(ye))?isNaN(i0(ye).getDate())||(ye=qi(ye)):(ye=yo(ye),Ue!==null&&_3(Ue)&&(ye=w3(ye))),Se=!0;break;case"E":yt=!0;var q=W7(Y[ce].slice(1),{r:M,c:V});ie[M][V]=[ie[M][V],q];break;case"S":gt=!0,ie[M][V]=[ie[M][V],"S5S"];break;case"G":break;case"R":Ke=parseInt(Y[ce].slice(1))-1;break;case"C":he=parseInt(Y[ce].slice(1))-1;break;default:if(O&&O.WTF)throw new Error("SYLK bad record "+J)}if(Se&&(ie[M][V]&&ie[M][V].length==2?ie[M][V][0]=ye:ie[M][V]=ye,Ue=null),gt){if(yt)throw new Error("SYLK shared formula cannot have own formula");var ue=Ke>-1&&ie[Ke][he];if(!ue||!ue[1])throw new Error("SYLK shared formula cannot find base");ie[M][V][1]=X7(ue[1],{r:M-Ke,c:V-he})}break;case"F":var se=0;for(ce=1;ce<Y.length;++ce)switch(Y[ce].charAt(0)){case"X":V=parseInt(Y[ce].slice(1))-1,++se;break;case"Y":for(M=parseInt(Y[ce].slice(1))-1,K=ie.length;K<=M;++K)ie[K]=[];break;case"M":te=parseInt(Y[ce].slice(1))/20;break;case"F":break;case"G":break;case"P":Ue=me[parseInt(Y[ce].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=Y[ce].slice(1).split(" "),K=parseInt(P[0],10);K<=parseInt(P[1],10);++K)te=parseInt(P[2],10),H[K-1]=te===0?{hidden:!0}:{wch:te},N2(H[K-1]);break;case"C":V=parseInt(Y[ce].slice(1))-1,H[V]||(H[V]={});break;case"R":M=parseInt(Y[ce].slice(1))-1,k[M]||(k[M]={}),te>0?(k[M].hpt=te,k[M].hpx=c4(te)):te===0&&(k[M].hidden=!0);break;default:if(O&&O.WTF)throw new Error("SYLK bad record "+J)}se<1&&(Ue=null);break;default:if(O&&O.WTF)throw new Error("SYLK bad record "+J)}}return k.length>0&&(De["!rows"]=k),H.length>0&&(De["!cols"]=H),O&&O.sheetRows&&(ie=ie.slice(0,O.sheetRows)),[ie,De]}function h(b,O){var U=a(b,O),M=U[0],V=U[1],le=Bu(M,O);return wi(V).forEach(function(ce){le[ce]=V[ce]}),le}function x(b,O){return Ec(h(b,O),O)}function v(b,O,U,M){var V="C;Y"+(U+1)+";X"+(M+1)+";K";switch(b.t){case"n":V+=b.v||0,b.f&&!b.F&&(V+=";E"+D2(b.f,{r:U,c:M}));break;case"b":V+=b.v?"TRUE":"FALSE";break;case"e":V+=b.w||b.v;break;case"d":V+='"'+(b.w||b.v)+'"';break;case"s":V+='"'+b.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return V}function _(b,O){O.forEach(function(U,M){var V="F;W"+(M+1)+" "+(M+1)+" ";U.hidden?V+="0":(typeof U.width=="number"&&!U.wpx&&(U.wpx=F1(U.width)),typeof U.wpx=="number"&&!U.wch&&(U.wch=B1(U.wpx)),typeof U.wch=="number"&&(V+=Math.round(U.wch))),V.charAt(V.length-1)!=" "&&b.push(V)})}function T(b,O){O.forEach(function(U,M){var V="F;";U.hidden?V+="M0;":U.hpt?V+="M"+20*U.hpt+";":U.hpx&&(V+="M"+20*U1(U.hpx)+";"),V.length>2&&b.push(V+"R"+(M+1))})}function C(b,O){var U=["ID;PWXL;N;E"],M=[],V=ur(b["!ref"]),le,ce=Array.isArray(b),ie=`\r
`;U.push("P;PGeneral"),U.push("F;P0;DG0G8;M255"),b["!cols"]&&_(U,b["!cols"]),b["!rows"]&&T(U,b["!rows"]),U.push("B;Y"+(V.e.r-V.s.r+1)+";X"+(V.e.c-V.s.c+1)+";D"+[V.s.c,V.s.r,V.e.c,V.e.r].join(" "));for(var me=V.s.r;me<=V.e.r;++me)for(var Ue=V.s.c;Ue<=V.e.c;++Ue){var De=Kn({r:me,c:Ue});le=ce?(b[me]||[])[Ue]:b[De],!(!le||le.v==null&&(!le.f||le.F))&&M.push(v(le,b,me,Ue))}return U.join(ie)+ie+M.join(ie)+ie+"E"+ie}return{to_workbook:x,to_sheet:h,from_sheet:C}})(),YD=(function(){function n(c,h){switch(h.type){case"base64":return e(Io(c),h);case"binary":return e(c,h);case"buffer":return e(kn&&Buffer.isBuffer(c)?c.toString("binary"):v0(c),h);case"array":return e(_d(c),h)}throw new Error("Unrecognized type "+h.type)}function e(c,h){for(var x=c.split(`
`),v=-1,_=-1,T=0,C=[];T!==x.length;++T){if(x[T].trim()==="BOT"){C[++v]=[],_=0;continue}if(!(v<0)){var b=x[T].trim().split(","),O=b[0],U=b[1];++T;for(var M=x[T]||"";(M.match(/["]/g)||[]).length&1&&T<x.length-1;)M+=`
`+x[++T];switch(M=M.trim(),+O){case-1:if(M==="BOT"){C[++v]=[],_=0;continue}else if(M!=="EOD")throw new Error("Unrecognized DIF special command "+M);break;case 0:M==="TRUE"?C[v][_]=!0:M==="FALSE"?C[v][_]=!1:isNaN(yo(U))?isNaN(i0(U).getDate())?C[v][_]=U:C[v][_]=qi(U):C[v][_]=yo(U),++_;break;case 1:M=M.slice(1,M.length-1),M=M.replace(/""/g,'"'),M&&M.match(/^=".*"$/)&&(M=M.slice(2,-1)),C[v][_++]=M!==""?M:null;break}if(M==="EOD")break}}return h&&h.sheetRows&&(C=C.slice(0,h.sheetRows)),C}function t(c,h){return Bu(n(c,h),h)}function r(c,h){return Ec(t(c,h),h)}var a=(function(){var c=function(v,_,T,C,b){v.push(_),v.push(T+","+C),v.push('"'+b.replace(/"/g,'""')+'"')},h=function(v,_,T,C){v.push(_+","+T),v.push(_==1?'"'+C.replace(/"/g,'""')+'"':C)};return function(v){var _=[],T=ur(v["!ref"]),C,b=Array.isArray(v);c(_,"TABLE",0,1,"sheetjs"),c(_,"VECTORS",0,T.e.r-T.s.r+1,""),c(_,"TUPLES",0,T.e.c-T.s.c+1,""),c(_,"DATA",0,0,"");for(var O=T.s.r;O<=T.e.r;++O){h(_,-1,0,"BOT");for(var U=T.s.c;U<=T.e.c;++U){var M=Kn({r:O,c:U});if(C=b?(v[O]||[])[U]:v[M],!C){h(_,1,0,"");continue}switch(C.t){case"n":var V=C.w;!V&&C.v!=null&&(V=C.v),V==null?C.f&&!C.F?h(_,1,0,"="+C.f):h(_,1,0,""):h(_,0,V,"V");break;case"b":h(_,0,C.v?1:0,C.v?"TRUE":"FALSE");break;case"s":h(_,1,0,isNaN(C.v)?C.v:'="'+C.v+'"');break;case"d":C.w||(C.w=Nl(C.z||br[14],cs(qi(C.v)))),h(_,0,C.w,"V");break;default:h(_,1,0,"")}}}h(_,-1,0,"EOD");var le=`\r
`,ce=_.join(le);return ce}})();return{to_workbook:r,to_sheet:t,from_sheet:a}})(),s4=(function(){function n(C){return C.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(C){return C.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(C,b){for(var O=C.split(`
`),U=-1,M=-1,V=0,le=[];V!==O.length;++V){var ce=O[V].trim().split(":");if(ce[0]==="cell"){var ie=ii(ce[1]);if(le.length<=ie.r)for(U=le.length;U<=ie.r;++U)le[U]||(le[U]=[]);switch(U=ie.r,M=ie.c,ce[2]){case"t":le[U][M]=n(ce[3]);break;case"v":le[U][M]=+ce[3];break;case"vtf":var me=ce[ce.length-1];case"vtc":switch(ce[3]){case"nl":le[U][M]=!!+ce[4];break;default:le[U][M]=+ce[4];break}ce[2]=="vtf"&&(le[U][M]=[le[U][M],me])}}}return b&&b.sheetRows&&(le=le.slice(0,b.sheetRows)),le}function r(C,b){return Bu(t(C,b),b)}function a(C,b){return Ec(r(C,b),b)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),h=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,x=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),v="--SocialCalcSpreadsheetControlSave--";function _(C){if(!C||!C["!ref"])return"";for(var b=[],O=[],U,M="",V=Os(C["!ref"]),le=Array.isArray(C),ce=V.s.r;ce<=V.e.r;++ce)for(var ie=V.s.c;ie<=V.e.c;++ie)if(M=Kn({r:ce,c:ie}),U=le?(C[ce]||[])[ie]:C[M],!(!U||U.v==null||U.t==="z")){switch(O=["cell",M,"t"],U.t){case"s":case"str":O.push(e(U.v));break;case"n":U.f?(O[2]="vtf",O[3]="n",O[4]=U.v,O[5]=e(U.f)):(O[2]="v",O[3]=U.v);break;case"b":O[2]="vt"+(U.f?"f":"c"),O[3]="nl",O[4]=U.v?"1":"0",O[5]=e(U.f||(U.v?"TRUE":"FALSE"));break;case"d":var me=cs(qi(U.v));O[2]="vtc",O[3]="nd",O[4]=""+me,O[5]=U.w||Nl(U.z||br[14],me);break;case"e":continue}b.push(O.join(":"))}return b.push("sheet:c:"+(V.e.c-V.s.c+1)+":r:"+(V.e.r-V.s.r+1)+":tvf:1"),b.push("valueformat:1:text-wiki"),b.join(`
`)}function T(C){return[c,h,x,h,_(C),v].join(`
`)}return{to_workbook:a,to_sheet:r,from_sheet:T}})(),KD=(function(){function n(T,C,b,O,U){U.raw?C[b][O]=T:T===""||(T==="TRUE"?C[b][O]=!0:T==="FALSE"?C[b][O]=!1:isNaN(yo(T))?isNaN(i0(T).getDate())?C[b][O]=T:C[b][O]=qi(T):C[b][O]=yo(T))}function e(T,C){var b=C||{},O=[];if(!T||T.length===0)return O;for(var U=T.split(/[\r\n]/),M=U.length-1;M>=0&&U[M].length===0;)--M;for(var V=10,le=0,ce=0;ce<=M;++ce)le=U[ce].indexOf(" "),le==-1?le=U[ce].length:le++,V=Math.max(V,le);for(ce=0;ce<=M;++ce){O[ce]=[];var ie=0;for(n(U[ce].slice(0,V).trim(),O,ce,ie,b),ie=1;ie<=(U[ce].length-V)/10+1;++ie)n(U[ce].slice(V+(ie-1)*10,V+ie*10).trim(),O,ce,ie,b)}return b.sheetRows&&(O=O.slice(0,b.sheetRows)),O}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function a(T){for(var C={},b=!1,O=0,U=0;O<T.length;++O)(U=T.charCodeAt(O))==34?b=!b:!b&&U in t&&(C[U]=(C[U]||0)+1);U=[];for(O in C)Object.prototype.hasOwnProperty.call(C,O)&&U.push([C[O],O]);if(!U.length){C=r;for(O in C)Object.prototype.hasOwnProperty.call(C,O)&&U.push([C[O],O])}return U.sort(function(M,V){return M[0]-V[0]||r[M[1]]-r[V[1]]}),t[U.pop()[1]]||44}function c(T,C){var b=C||{},O="",U=b.dense?[]:{},M={s:{c:0,r:0},e:{c:0,r:0}};T.slice(0,4)=="sep="?T.charCodeAt(5)==13&&T.charCodeAt(6)==10?(O=T.charAt(4),T=T.slice(7)):T.charCodeAt(5)==13||T.charCodeAt(5)==10?(O=T.charAt(4),T=T.slice(6)):O=a(T.slice(0,1024)):b&&b.FS?O=b.FS:O=a(T.slice(0,1024));var V=0,le=0,ce=0,ie=0,me=0,Ue=O.charCodeAt(0),De=!1,k=0,H=T.charCodeAt(0);T=T.replace(/\r\n/mg,`
`);var P=b.dateNF!=null?f5(b.dateNF):null;function te(){var K=T.slice(ie,me),J={};if(K.charAt(0)=='"'&&K.charAt(K.length-1)=='"'&&(K=K.slice(1,-1).replace(/""/g,'"')),K.length===0)J.t="z";else if(b.raw)J.t="s",J.v=K;else if(K.trim().length===0)J.t="s",J.v=K;else if(K.charCodeAt(0)==61)K.charCodeAt(1)==34&&K.charCodeAt(K.length-1)==34?(J.t="s",J.v=K.slice(2,-1).replace(/""/g,'"')):q7(K)?(J.t="n",J.f=K.slice(1)):(J.t="s",J.v=K);else if(K=="TRUE")J.t="b",J.v=!0;else if(K=="FALSE")J.t="b",J.v=!1;else if(!isNaN(ce=yo(K)))J.t="n",b.cellText!==!1&&(J.w=K),J.v=ce;else if(!isNaN(i0(K).getDate())||P&&K.match(P)){J.z=b.dateNF||br[14];var Y=0;P&&K.match(P)&&(K=h5(K,b.dateNF,K.match(P)||[]),Y=1),b.cellDates?(J.t="d",J.v=qi(K,Y)):(J.t="n",J.v=cs(qi(K,Y))),b.cellText!==!1&&(J.w=Nl(J.z,J.v instanceof Date?cs(J.v):J.v)),b.cellNF||delete J.z}else J.t="s",J.v=K;if(J.t=="z"||(b.dense?(U[V]||(U[V]=[]),U[V][le]=J):U[Kn({c:le,r:V})]=J),ie=me+1,H=T.charCodeAt(ie),M.e.c<le&&(M.e.c=le),M.e.r<V&&(M.e.r=V),k==Ue)++le;else if(le=0,++V,b.sheetRows&&b.sheetRows<=V)return!0}e:for(;me<T.length;++me)switch(k=T.charCodeAt(me)){case 34:H===34&&(De=!De);break;case Ue:case 10:case 13:if(!De&&te())break e;break}return me-ie>0&&te(),U["!ref"]=zr(M),U}function h(T,C){return!(C&&C.PRN)||C.FS||T.slice(0,4)=="sep="||T.indexOf("	")>=0||T.indexOf(",")>=0||T.indexOf(";")>=0?c(T,C):Bu(e(T,C),C)}function x(T,C){var b="",O=C.type=="string"?[0,0,0,0]:oP(T,C);switch(C.type){case"base64":b=Io(T);break;case"binary":b=T;break;case"buffer":C.codepage==65001?b=T.toString("utf8"):C.codepage&&typeof b1<"u"||(b=kn&&Buffer.isBuffer(T)?T.toString("binary"):v0(T));break;case"array":b=_d(T);break;case"string":b=T;break;default:throw new Error("Unrecognized type "+C.type)}return O[0]==239&&O[1]==187&&O[2]==191?b=Vf(b.slice(3)):C.type!="string"&&C.type!="buffer"&&C.codepage==65001?b=Vf(b):C.type=="binary"&&typeof b1<"u",b.slice(0,19)=="socialcalc:version:"?s4.to_sheet(C.type=="string"?b:Vf(b),C):h(b,C)}function v(T,C){return Ec(x(T,C),C)}function _(T){for(var C=[],b=ur(T["!ref"]),O,U=Array.isArray(T),M=b.s.r;M<=b.e.r;++M){for(var V=[],le=b.s.c;le<=b.e.c;++le){var ce=Kn({r:M,c:le});if(O=U?(T[M]||[])[le]:T[ce],!O||O.v==null){V.push("          ");continue}for(var ie=(O.w||(bo(O),O.w)||"").slice(0,10);ie.length<10;)ie+=" ";V.push(ie+(le===0?" ":""))}C.push(V.join(""))}return C.join(`
`)}return{to_workbook:v,to_sheet:x,from_sheet:_}})(),iw=(function(){function n(q,ue,se){if(q){Cs(q,q.l||0);for(var fe=se.Enum||Ke;q.l<q.length;){var pe=q.read_shift(2),Je=fe[pe]||fe[65535],rt=q.read_shift(2),at=q.l+rt,lt=Je.f&&Je.f(q,rt,se);if(q.l=at,ue(lt,Je,pe))return}}}function e(q,ue){switch(ue.type){case"base64":return t(fa(Io(q)),ue);case"binary":return t(fa(q),ue);case"buffer":case"array":return t(q,ue)}throw"Unsupported type "+ue.type}function t(q,ue){if(!q)return q;var se=ue||{},fe=se.dense?[]:{},pe="Sheet1",Je="",rt=0,at={},lt=[],Mt=[],Ut={s:{r:0,c:0},e:{r:0,c:0}},Rt=se.sheetRows||0;if(q[2]==0&&(q[3]==8||q[3]==9)&&q.length>=16&&q[14]==5&&q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(q[2]==2)se.Enum=Ke,n(q,function(ut,zt,pt){switch(pt){case 0:se.vers=ut,ut>=4096&&(se.qpro=!0);break;case 6:Ut=ut;break;case 204:ut&&(Je=ut);break;case 222:Je=ut;break;case 15:case 51:se.qpro||(ut[1].v=ut[1].v.slice(1));case 13:case 14:case 16:pt==14&&(ut[2]&112)==112&&(ut[2]&15)>1&&(ut[2]&15)<15&&(ut[1].z=se.dateNF||br[14],se.cellDates&&(ut[1].t="d",ut[1].v=w3(ut[1].v))),se.qpro&&ut[3]>rt&&(fe["!ref"]=zr(Ut),at[pe]=fe,lt.push(pe),fe=se.dense?[]:{},Ut={s:{r:0,c:0},e:{r:0,c:0}},rt=ut[3],pe=Je||"Sheet"+(rt+1),Je="");var Sn=se.dense?(fe[ut[0].r]||[])[ut[0].c]:fe[Kn(ut[0])];if(Sn){Sn.t=ut[1].t,Sn.v=ut[1].v,ut[1].z!=null&&(Sn.z=ut[1].z),ut[1].f!=null&&(Sn.f=ut[1].f);break}se.dense?(fe[ut[0].r]||(fe[ut[0].r]=[]),fe[ut[0].r][ut[0].c]=ut[1]):fe[Kn(ut[0])]=ut[1];break}},se);else if(q[2]==26||q[2]==14)se.Enum=he,q[2]==14&&(se.qpro=!0,q.l=0),n(q,function(ut,zt,pt){switch(pt){case 204:pe=ut;break;case 22:ut[1].v=ut[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ut[3]>rt&&(fe["!ref"]=zr(Ut),at[pe]=fe,lt.push(pe),fe=se.dense?[]:{},Ut={s:{r:0,c:0},e:{r:0,c:0}},rt=ut[3],pe="Sheet"+(rt+1)),Rt>0&&ut[0].r>=Rt)break;se.dense?(fe[ut[0].r]||(fe[ut[0].r]=[]),fe[ut[0].r][ut[0].c]=ut[1]):fe[Kn(ut[0])]=ut[1],Ut.e.c<ut[0].c&&(Ut.e.c=ut[0].c),Ut.e.r<ut[0].r&&(Ut.e.r=ut[0].r);break;case 27:ut[14e3]&&(Mt[ut[14e3][0]]=ut[14e3][1]);break;case 1537:Mt[ut[0]]=ut[1],ut[0]==rt&&(pe=ut[1]);break}},se);else throw new Error("Unrecognized LOTUS BOF "+q[2]);if(fe["!ref"]=zr(Ut),at[Je||pe]=fe,lt.push(Je||pe),!Mt.length)return{SheetNames:lt,Sheets:at};for(var _t={},Hn=[],cn=0;cn<Mt.length;++cn)at[lt[cn]]?(Hn.push(Mt[cn]||lt[cn]),_t[Mt[cn]]=at[Mt[cn]]||at[lt[cn]]):(Hn.push(Mt[cn]),_t[Mt[cn]]={"!ref":"A1"});return{SheetNames:Hn,Sheets:_t}}function r(q,ue){var se=ue||{};if(+se.codepage>=0&&n0(+se.codepage),se.type=="string")throw new Error("Cannot write WK1 to JS string");var fe=ls(),pe=ur(q["!ref"]),Je=Array.isArray(q),rt=[];ht(fe,0,c(1030)),ht(fe,6,v(pe));for(var at=Math.min(pe.e.r,8191),lt=pe.s.r;lt<=at;++lt)for(var Mt=Ei(lt),Ut=pe.s.c;Ut<=pe.e.c;++Ut){lt===pe.s.r&&(rt[Ut]=Li(Ut));var Rt=rt[Ut]+Mt,_t=Je?(q[lt]||[])[Ut]:q[Rt];if(!(!_t||_t.t=="z"))if(_t.t=="n")(_t.v|0)==_t.v&&_t.v>=-32768&&_t.v<=32767?ht(fe,13,O(lt,Ut,_t.v)):ht(fe,14,M(lt,Ut,_t.v));else{var Hn=bo(_t);ht(fe,15,C(lt,Ut,Hn.slice(0,239)))}}return ht(fe,1),fe.end()}function a(q,ue){var se=ue||{};if(+se.codepage>=0&&n0(+se.codepage),se.type=="string")throw new Error("Cannot write WK3 to JS string");var fe=ls();ht(fe,0,h(q));for(var pe=0,Je=0;pe<q.SheetNames.length;++pe)(q.Sheets[q.SheetNames[pe]]||{})["!ref"]&&ht(fe,27,yt(q.SheetNames[pe],Je++));var rt=0;for(pe=0;pe<q.SheetNames.length;++pe){var at=q.Sheets[q.SheetNames[pe]];if(!(!at||!at["!ref"])){for(var lt=ur(at["!ref"]),Mt=Array.isArray(at),Ut=[],Rt=Math.min(lt.e.r,8191),_t=lt.s.r;_t<=Rt;++_t)for(var Hn=Ei(_t),cn=lt.s.c;cn<=lt.e.c;++cn){_t===lt.s.r&&(Ut[cn]=Li(cn));var ut=Ut[cn]+Hn,zt=Mt?(at[_t]||[])[cn]:at[ut];if(!(!zt||zt.t=="z"))if(zt.t=="n")ht(fe,23,te(_t,cn,rt,zt.v));else{var pt=bo(zt);ht(fe,22,k(_t,cn,rt,pt.slice(0,239)))}}++rt}}return ht(fe,1),fe.end()}function c(q){var ue=je(2);return ue.write_shift(2,q),ue}function h(q){var ue=je(26);ue.write_shift(2,4096),ue.write_shift(2,4),ue.write_shift(4,0);for(var se=0,fe=0,pe=0,Je=0;Je<q.SheetNames.length;++Je){var rt=q.SheetNames[Je],at=q.Sheets[rt];if(!(!at||!at["!ref"])){++pe;var lt=Os(at["!ref"]);se<lt.e.r&&(se=lt.e.r),fe<lt.e.c&&(fe=lt.e.c)}}return se>8191&&(se=8191),ue.write_shift(2,se),ue.write_shift(1,pe),ue.write_shift(1,fe),ue.write_shift(2,0),ue.write_shift(2,0),ue.write_shift(1,1),ue.write_shift(1,2),ue.write_shift(4,0),ue.write_shift(4,0),ue}function x(q,ue,se){var fe={s:{c:0,r:0},e:{c:0,r:0}};return ue==8&&se.qpro?(fe.s.c=q.read_shift(1),q.l++,fe.s.r=q.read_shift(2),fe.e.c=q.read_shift(1),q.l++,fe.e.r=q.read_shift(2),fe):(fe.s.c=q.read_shift(2),fe.s.r=q.read_shift(2),ue==12&&se.qpro&&(q.l+=2),fe.e.c=q.read_shift(2),fe.e.r=q.read_shift(2),ue==12&&se.qpro&&(q.l+=2),fe.s.c==65535&&(fe.s.c=fe.e.c=fe.s.r=fe.e.r=0),fe)}function v(q){var ue=je(8);return ue.write_shift(2,q.s.c),ue.write_shift(2,q.s.r),ue.write_shift(2,q.e.c),ue.write_shift(2,q.e.r),ue}function _(q,ue,se){var fe=[{c:0,r:0},{t:"n",v:0},0,0];return se.qpro&&se.vers!=20768?(fe[0].c=q.read_shift(1),fe[3]=q.read_shift(1),fe[0].r=q.read_shift(2),q.l+=2):(fe[2]=q.read_shift(1),fe[0].c=q.read_shift(2),fe[0].r=q.read_shift(2)),fe}function T(q,ue,se){var fe=q.l+ue,pe=_(q,ue,se);if(pe[1].t="s",se.vers==20768){q.l++;var Je=q.read_shift(1);return pe[1].v=q.read_shift(Je,"utf8"),pe}return se.qpro&&q.l++,pe[1].v=q.read_shift(fe-q.l,"cstr"),pe}function C(q,ue,se){var fe=je(7+se.length);fe.write_shift(1,255),fe.write_shift(2,ue),fe.write_shift(2,q),fe.write_shift(1,39);for(var pe=0;pe<fe.length;++pe){var Je=se.charCodeAt(pe);fe.write_shift(1,Je>=128?95:Je)}return fe.write_shift(1,0),fe}function b(q,ue,se){var fe=_(q,ue,se);return fe[1].v=q.read_shift(2,"i"),fe}function O(q,ue,se){var fe=je(7);return fe.write_shift(1,255),fe.write_shift(2,ue),fe.write_shift(2,q),fe.write_shift(2,se,"i"),fe}function U(q,ue,se){var fe=_(q,ue,se);return fe[1].v=q.read_shift(8,"f"),fe}function M(q,ue,se){var fe=je(13);return fe.write_shift(1,255),fe.write_shift(2,ue),fe.write_shift(2,q),fe.write_shift(8,se,"f"),fe}function V(q,ue,se){var fe=q.l+ue,pe=_(q,ue,se);if(pe[1].v=q.read_shift(8,"f"),se.qpro)q.l=fe;else{var Je=q.read_shift(2);me(q.slice(q.l,q.l+Je),pe),q.l+=Je}return pe}function le(q,ue,se){var fe=ue&32768;return ue&=-32769,ue=(fe?q:0)+(ue>=8192?ue-16384:ue),(fe?"":"$")+(se?Li(ue):Ei(ue))}var ce={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},ie=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function me(q,ue){Cs(q,0);for(var se=[],fe=0,pe="",Je="",rt="",at="";q.l<q.length;){var lt=q[q.l++];switch(lt){case 0:se.push(q.read_shift(8,"f"));break;case 1:Je=le(ue[0].c,q.read_shift(2),!0),pe=le(ue[0].r,q.read_shift(2),!1),se.push(Je+pe);break;case 2:{var Mt=le(ue[0].c,q.read_shift(2),!0),Ut=le(ue[0].r,q.read_shift(2),!1);Je=le(ue[0].c,q.read_shift(2),!0),pe=le(ue[0].r,q.read_shift(2),!1),se.push(Mt+Ut+":"+Je+pe)}break;case 3:if(q.l<q.length){console.error("WK1 premature formula end");return}break;case 4:se.push("("+se.pop()+")");break;case 5:se.push(q.read_shift(2));break;case 6:{for(var Rt="";lt=q[q.l++];)Rt+=String.fromCharCode(lt);se.push('"'+Rt.replace(/"/g,'""')+'"')}break;case 8:se.push("-"+se.pop());break;case 23:se.push("+"+se.pop());break;case 22:se.push("NOT("+se.pop()+")");break;case 20:case 21:at=se.pop(),rt=se.pop(),se.push(["AND","OR"][lt-20]+"("+rt+","+at+")");break;default:if(lt<32&&ie[lt])at=se.pop(),rt=se.pop(),se.push(rt+ie[lt]+at);else if(ce[lt]){if(fe=ce[lt][1],fe==69&&(fe=q[q.l++]),fe>se.length){console.error("WK1 bad formula parse 0x"+lt.toString(16)+":|"+se.join("|")+"|");return}var _t=se.slice(-fe);se.length-=fe,se.push(ce[lt][0]+"("+_t.join(",")+")")}else return lt<=7?console.error("WK1 invalid opcode "+lt.toString(16)):lt<=24?console.error("WK1 unsupported op "+lt.toString(16)):lt<=30?console.error("WK1 invalid opcode "+lt.toString(16)):lt<=115?console.error("WK1 unsupported function opcode "+lt.toString(16)):console.error("WK1 unrecognized opcode "+lt.toString(16))}}se.length==1?ue[1].f=""+se[0]:console.error("WK1 bad formula parse |"+se.join("|")+"|")}function Ue(q){var ue=[{c:0,r:0},{t:"n",v:0},0];return ue[0].r=q.read_shift(2),ue[3]=q[q.l++],ue[0].c=q[q.l++],ue}function De(q,ue){var se=Ue(q);return se[1].t="s",se[1].v=q.read_shift(ue-4,"cstr"),se}function k(q,ue,se,fe){var pe=je(6+fe.length);pe.write_shift(2,q),pe.write_shift(1,se),pe.write_shift(1,ue),pe.write_shift(1,39);for(var Je=0;Je<fe.length;++Je){var rt=fe.charCodeAt(Je);pe.write_shift(1,rt>=128?95:rt)}return pe.write_shift(1,0),pe}function H(q,ue){var se=Ue(q);se[1].v=q.read_shift(2);var fe=se[1].v>>1;if(se[1].v&1)switch(fe&7){case 0:fe=(fe>>3)*5e3;break;case 1:fe=(fe>>3)*500;break;case 2:fe=(fe>>3)/20;break;case 3:fe=(fe>>3)/200;break;case 4:fe=(fe>>3)/2e3;break;case 5:fe=(fe>>3)/2e4;break;case 6:fe=(fe>>3)/16;break;case 7:fe=(fe>>3)/64;break}return se[1].v=fe,se}function P(q,ue){var se=Ue(q),fe=q.read_shift(4),pe=q.read_shift(4),Je=q.read_shift(2);if(Je==65535)return fe===0&&pe===3221225472?(se[1].t="e",se[1].v=15):fe===0&&pe===3489660928?(se[1].t="e",se[1].v=42):se[1].v=0,se;var rt=Je&32768;return Je=(Je&32767)-16446,se[1].v=(1-rt*2)*(pe*Math.pow(2,Je+32)+fe*Math.pow(2,Je)),se}function te(q,ue,se,fe){var pe=je(14);if(pe.write_shift(2,q),pe.write_shift(1,se),pe.write_shift(1,ue),fe==0)return pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(2,65535),pe;var Je=0,rt=0,at=0,lt=0;return fe<0&&(Je=1,fe=-fe),rt=Math.log2(fe)|0,fe/=Math.pow(2,rt-31),lt=fe>>>0,(lt&2147483648)==0&&(fe/=2,++rt,lt=fe>>>0),fe-=lt,lt|=2147483648,lt>>>=0,fe*=Math.pow(2,32),at=fe>>>0,pe.write_shift(4,at),pe.write_shift(4,lt),rt+=16383+(Je?32768:0),pe.write_shift(2,rt),pe}function K(q,ue){var se=P(q);return q.l+=ue-14,se}function J(q,ue){var se=Ue(q),fe=q.read_shift(4);return se[1].v=fe>>6,se}function Y(q,ue){var se=Ue(q),fe=q.read_shift(8,"f");return se[1].v=fe,se}function dt(q,ue){var se=Y(q);return q.l+=ue-10,se}function ye(q,ue){return q[q.l+ue-1]==0?q.read_shift(ue,"cstr"):""}function Se(q,ue){var se=q[q.l++];se>ue-1&&(se=ue-1);for(var fe="";fe.length<se;)fe+=String.fromCharCode(q[q.l++]);return fe}function Pe(q,ue,se){if(!(!se.qpro||ue<21)){var fe=q.read_shift(1);q.l+=17,q.l+=1,q.l+=2;var pe=q.read_shift(ue-21,"cstr");return[fe,pe]}}function gt(q,ue){for(var se={},fe=q.l+ue;q.l<fe;){var pe=q.read_shift(2);if(pe==14e3){for(se[pe]=[0,""],se[pe][0]=q.read_shift(2);q[q.l];)se[pe][1]+=String.fromCharCode(q[q.l]),q.l++;q.l++}}return se}function yt(q,ue){var se=je(5+q.length);se.write_shift(2,14e3),se.write_shift(2,ue);for(var fe=0;fe<q.length;++fe){var pe=q.charCodeAt(fe);se[se.l++]=pe>127?95:pe}return se[se.l++]=0,se}var Ke={0:{n:"BOF",f:e4},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:x},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:b},14:{n:"NUMBER",f:U},15:{n:"LABEL",f:T},16:{n:"FORMULA",f:V},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:T},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ye},222:{n:"SHEETNAMELP",f:Se},65535:{n:""}},he={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:De},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:H},25:{n:"FORMULA19",f:K},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:gt},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:J},38:{n:"??"},39:{n:"NUMBER27",f:Y},40:{n:"FORMULA28",f:dt},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ye},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Pe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:a,to_workbook:e}})(),QD=/^\s|\s$|[\t\n\r]/;function a4(n,e){if(!e.bookSST)return"";var t=[Wr];t[t.length]=ft("sst",null,{xmlns:Fu[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var a=n[r],c="<si>";a.r?c+=a.r:(c+="<t",a.t||(a.t=""),a.t.match(QD)&&(c+=' xml:space="preserve"'),c+=">"+Yn(a.t)+"</t>"),c+="</si>",t[t.length]=c}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function ZD(n){return[n.read_shift(4),n.read_shift(4)]}function JD(n,e){return e||(e=je(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var $D=z5;function e7(n){var e=ls();Qe(e,159,JD(n));for(var t=0;t<n.length;++t)Qe(e,19,$D(n[t]));return Qe(e,160),e.end()}function t7(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function o4(n){var e=0,t,r=t7(n),a=r.length+1,c,h,x,v,_;for(t=mc(a),t[0]=r.length,c=1;c!=a;++c)t[c]=r[c-1];for(c=a-1;c>=0;--c)h=t[c],x=(e&16384)===0?0:1,v=e<<1&32767,_=x|v,e=_^h;return e^52811}var n7=(function(){function n(a,c){switch(c.type){case"base64":return e(Io(a),c);case"binary":return e(a,c);case"buffer":return e(kn&&Buffer.isBuffer(a)?a.toString("binary"):v0(a),c);case"array":return e(_d(a),c)}throw new Error("Unrecognized type "+c.type)}function e(a,c){var h=c||{},x=h.dense?[]:{},v=a.match(/\\trowd.*?\\row\b/g);if(!v.length)throw new Error("RTF missing table");var _={s:{c:0,r:0},e:{c:0,r:v.length-1}};return v.forEach(function(T,C){Array.isArray(x)&&(x[C]=[]);for(var b=/\\\w+\b/g,O=0,U,M=-1;U=b.exec(T);){switch(U[0]){case"\\cell":var V=T.slice(O,b.lastIndex-U[0].length);if(V[0]==" "&&(V=V.slice(1)),++M,V.length){var le={v:V,t:"s"};Array.isArray(x)?x[C][M]=le:x[Kn({r:C,c:M})]=le}break}O=b.lastIndex}M>_.e.c&&(_.e.c=M)}),x["!ref"]=zr(_),x}function t(a,c){return Ec(n(a,c),c)}function r(a){for(var c=["{\\rtf1\\ansi"],h=ur(a["!ref"]),x,v=Array.isArray(a),_=h.s.r;_<=h.e.r;++_){c.push("\\trowd\\trautofit1");for(var T=h.s.c;T<=h.e.c;++T)c.push("\\cellx"+(T+1));for(c.push("\\pard\\intbl"),T=h.s.c;T<=h.e.c;++T){var C=Kn({r:_,c:T});x=v?(a[_]||[])[T]:a[C],!(!x||x.v==null&&(!x.f||x.F))&&(c.push(" "+(x.w||(bo(x),x.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function sw(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var r7=6,Eo=r7;function F1(n){return Math.floor((n+Math.round(128/Eo)/256)*Eo)}function B1(n){return Math.floor((n-5)/Eo*100+.5)/100}function dp(n){return Math.round((n*Eo+5)/Eo*256)/256}function N2(n){n.width?(n.wpx=F1(n.width),n.wch=B1(n.wpx),n.MDW=Eo):n.wpx?(n.wch=B1(n.wpx),n.width=dp(n.wch),n.MDW=Eo):typeof n.wch=="number"&&(n.width=dp(n.wch),n.wpx=F1(n.width),n.MDW=Eo),n.customWidth&&delete n.customWidth}var i7=96,l4=i7;function U1(n){return n*96/l4}function c4(n){return n*l4/96}function s7(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=ft("numFmt",null,{numFmtId:r,formatCode:Yn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ft("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function a7(n){var e=[];return e[e.length]=ft("cellXfs",null),n.forEach(function(t){e[e.length]=ft("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ft("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function u4(n,e){var t=[Wr,ft("styleSheet",null,{xmlns:Fu[0],"xmlns:vt":ri.vt})],r;return n.SSF&&(r=s7(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=a7(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function o7(n,e){var t=n.read_shift(2),r=ki(n);return[t,r]}function l7(n,e,t){t||(t=je(6+4*e.length)),t.write_shift(2,n),si(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function c7(n,e,t){var r={};r.sz=n.read_shift(2)/20;var a=Q5(n);a.fItalic&&(r.italic=1),a.fCondense&&(r.condense=1),a.fExtend&&(r.extend=1),a.fShadow&&(r.shadow=1),a.fOutline&&(r.outline=1),a.fStrikeout&&(r.strike=1);var c=n.read_shift(2);switch(c===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var h=n.read_shift(1);h!=0&&(r.underline=h);var x=n.read_shift(1);x>0&&(r.family=x);var v=n.read_shift(1);switch(v>0&&(r.charset=v),n.l++,r.color=K5(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ki(n),r}function u7(n,e){e||(e=je(153)),e.write_shift(2,n.sz*20),Z5(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),k1(n.color,e);var r=0;return r=2,e.write_shift(1,r),si(n.name,e),e.length>e.l?e.slice(0,e.l):e}var f7=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Om,h7=Ua;function aw(n,e){e||(e=je(84)),Om||(Om=_2(f7));var t=Om[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(k1({auto:1},e),k1({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function d7(n,e){var t=n.l+e,r=n.read_shift(2),a=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:a}}function f4(n,e,t){t||(t=je(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Tf(n,e){return e||(e=je(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var g7=Ua;function m7(n,e){return e||(e=je(51)),e.write_shift(1,0),Tf(null,e),Tf(null,e),Tf(null,e),Tf(null,e),Tf(null,e),e.length>e.l?e.slice(0,e.l):e}function p7(n,e){return e||(e=je(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),L1(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function x7(n,e,t){var r=je(2052);return r.write_shift(4,n),L1(e,r),L1(t,r),r.length>r.l?r.slice(0,r.l):r}function _7(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&++t}),t!=0&&(Qe(n,615,ga(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&Qe(n,44,l7(a,e[a]))}),Qe(n,616))}}function y7(n){var e=1;Qe(n,611,ga(e)),Qe(n,43,u7({sz:12,color:{theme:1},name:"Calibri",family:2})),Qe(n,612)}function E7(n){var e=2;Qe(n,603,ga(e)),Qe(n,45,aw({patternType:"none"})),Qe(n,45,aw({patternType:"gray125"})),Qe(n,604)}function v7(n){var e=1;Qe(n,613,ga(e)),Qe(n,46,m7()),Qe(n,614)}function w7(n){var e=1;Qe(n,626,ga(e)),Qe(n,47,f4({numFmtId:0},65535)),Qe(n,627)}function A7(n,e){Qe(n,617,ga(e.length)),e.forEach(function(t){Qe(n,47,f4(t,0))}),Qe(n,618)}function T7(n){var e=1;Qe(n,619,ga(e)),Qe(n,48,p7({xfId:0,name:"Normal"})),Qe(n,620)}function S7(n){var e=0;Qe(n,505,ga(e)),Qe(n,506)}function C7(n){var e=0;Qe(n,508,x7(e,"TableStyleMedium9","PivotStyleMedium4")),Qe(n,509)}function I7(n,e){var t=ls();return Qe(t,278),_7(t,n.SSF),y7(t),E7(t),v7(t),w7(t),A7(t,e.cellXfs),T7(t),S7(t),C7(t),Qe(t,279),t.end()}function h4(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Wr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function b7(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:ki(n)}}function R7(n){var e=je(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),si(n.name,e),e.slice(0,e.l)}function N7(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function O7(n){var e=je(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function D7(n,e){var t=je(8+2*e.length);return t.write_shift(4,n),si(e,t),t.slice(0,t.l)}function M7(n){return n.l+=4,n.read_shift(4)!=0}function L7(n,e){var t=je(8);return t.write_shift(4,n),t.write_shift(4,1),t}function k7(){var n=ls();return Qe(n,332),Qe(n,334,ga(1)),Qe(n,335,R7({name:"XLDAPR",version:12e4,flags:3496657072})),Qe(n,336),Qe(n,339,D7(1,"XLDAPR")),Qe(n,52),Qe(n,35,ga(514)),Qe(n,4096,ga(0)),Qe(n,4097,Ks(1)),Qe(n,36),Qe(n,53),Qe(n,340),Qe(n,337,L7(1)),Qe(n,51,O7([[1,0]])),Qe(n,338),Qe(n,333),n.end()}function d4(){var n=[Wr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function P7(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Kn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var cu=1024;function g4(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),a=[ft("xml",null,{"xmlns:v":Is.v,"xmlns:o":Is.o,"xmlns:x":Is.x,"xmlns:mv":Is.mv}).replace(/\/>/,">"),ft("o:shapelayout",ft("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),ft("v:shapetype",[ft("v:stroke",null,{joinstyle:"miter"}),ft("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];cu<n*1e3;)cu+=1e3;return e.forEach(function(c){var h=ii(c[0]),x={color2:"#BEFF82",type:"gradient"};x.type=="gradient"&&(x.angle="-180");var v=x.type=="gradient"?ft("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,_=ft("v:fill",v,x),T={on:"t",obscured:"t"};++cu,a=a.concat(["<v:shape"+a0({id:"_x0000_s"+cu,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",_,ft("v:shadow",null,T),ft("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",yi("x:Anchor",[h.c+1,0,h.r+1,0,h.c+3,20,h.r+5,20].join(",")),yi("x:AutoFill","False"),yi("x:Row",String(h.r)),yi("x:Column",String(h.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function m4(n){var e=[Wr,ft("comments",null,{xmlns:Fu[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(a){var c=Yn(a.a);t.indexOf(c)==-1&&(t.push(c),e.push("<author>"+c+"</author>")),a.T&&a.ID&&t.indexOf("tc="+a.ID)==-1&&(t.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var a=0,c=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?a=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(v){v.a&&(a=t.indexOf(Yn(v.a))),c.push(v.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+a+'"><text>'),c.length<=1)e.push(yi("t",Yn(c[0]||"")));else{for(var h=`Comment:
    `+c[0]+`
`,x=1;x<c.length;++x)h+=`Reply:
    `+c[x]+`
`;e.push(yi("t",Yn(h)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function F7(n,e,t){var r=[Wr,ft("ThreadedComments",null,{xmlns:ri.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(a){var c="";(a[1]||[]).forEach(function(h,x){if(!h.T){delete h.ID;return}h.a&&e.indexOf(h.a)==-1&&e.push(h.a);var v={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};x==0?c=v.id:v.parentId=c,h.ID=v.id,h.a&&(v.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(h.a)).slice(-12)+"}"),r.push(ft("threadedComment",yi("text",h.t||""),v))})}),r.push("</ThreadedComments>"),r.join("")}function B7(n){var e=[Wr,ft("personList",null,{xmlns:ri.TCMNT,"xmlns:x":Fu[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(ft("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function U7(n){var e={};e.iauthor=n.read_shift(4);var t=Tc(n);return e.rfx=t.s,e.ref=Kn(t.s),n.l+=16,e}function V7(n,e){return e==null&&(e=je(36)),e.write_shift(4,n[1].iauthor),Uu(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var H7=ki;function j7(n){return si(n.slice(0,54))}function z7(n){var e=ls(),t=[];return Qe(e,628),Qe(e,630),n.forEach(function(r){r[1].forEach(function(a){t.indexOf(a.a)>-1||(t.push(a.a.slice(0,54)),Qe(e,632,j7(a.a)))})}),Qe(e,631),Qe(e,633),n.forEach(function(r){r[1].forEach(function(a){a.iauthor=t.indexOf(a.a);var c={s:ii(r[0]),e:ii(r[0])};Qe(e,635,V7([c,a])),a.t&&a.t.length>0&&Qe(e,637,W5(a)),Qe(e,636),delete a.iauthor})}),Qe(e,634),Qe(e,629),e.end()}function G7(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var a=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&$n.utils.cfb_add(n,a,e.FileIndex[r].content)}})}var p4=["xlsb","xlsm","xlam","biff8","xla"],W7=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,a,c,h){var x=!1,v=!1;c.length==0?v=!0:c.charAt(0)=="["&&(v=!0,c=c.slice(1,-1)),h.length==0?x=!0:h.charAt(0)=="["&&(x=!0,h=h.slice(1,-1));var _=c.length>0?parseInt(c,10)|0:0,T=h.length>0?parseInt(h,10)|0:0;return x?T+=e.c:--T,v?_+=e.r:--_,a+(x?"":"$")+Li(T)+(v?"":"$")+Ei(_)}return function(a,c){return e=c,a.replace(n,t)}})(),O2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,D2=(function(){return function(e,t){return e.replace(O2,function(r,a,c,h,x,v){var _=S2(h)-(c?0:t.c),T=T2(v)-(x?0:t.r),C=T==0?"":x?T+1:"["+T+"]",b=_==0?"":c?_+1:"["+_+"]";return a+"R"+C+"C"+b})}})();function X7(n,e){return n.replace(O2,function(t,r,a,c,h,x){return r+(a=="$"?a+c:Li(S2(c)+e.c))+(h=="$"?h+x:Ei(T2(x)+e.r))})}function q7(n){return n.length!=1}function Ur(n){n.l+=1}function Ol(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function x4(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return _4(n);t.biff==12&&(r=4)}var a=n.read_shift(r),c=n.read_shift(r),h=Ol(n),x=Ol(n);return{s:{r:a,c:h[0],cRel:h[1],rRel:h[2]},e:{r:c,c:x[0],cRel:x[1],rRel:x[2]}}}function _4(n){var e=Ol(n),t=Ol(n),r=n.read_shift(1),a=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:a,cRel:t[1],rRel:t[2]}}}function Y7(n,e,t){if(t.biff<8)return _4(n);var r=n.read_shift(t.biff==12?4:2),a=n.read_shift(t.biff==12?4:2),c=Ol(n),h=Ol(n);return{s:{r,c:c[0],cRel:c[1],rRel:c[2]},e:{r:a,c:h[0],cRel:h[1],rRel:h[2]}}}function y4(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return K7(n);var r=n.read_shift(t&&t.biff==12?4:2),a=Ol(n);return{r,c:a[0],cRel:a[1],rRel:a[2]}}function K7(n){var e=Ol(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function Q7(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function Z7(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return J7(n);var a=n.read_shift(r>=12?4:2),c=n.read_shift(2),h=(c&16384)>>14,x=(c&32768)>>15;if(c&=16383,x==1)for(;a>524287;)a-=1048576;if(h==1)for(;c>8191;)c=c-16384;return{r:a,c,cRel:h,rRel:x}}function J7(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),a==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:a,rRel:r}}function $7(n,e,t){var r=(n[n.l++]&96)>>5,a=x4(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,a]}function e9(n,e,t){var r=(n[n.l++]&96)>>5,a=n.read_shift(2,"i"),c=8;if(t)switch(t.biff){case 5:n.l+=12,c=6;break;case 12:c=12;break}var h=x4(n,c,t);return[r,a,h]}function t9(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function n9(n,e,t){var r=(n[n.l++]&96)>>5,a=n.read_shift(2),c=8;if(t)switch(t.biff){case 5:n.l+=12,c=6;break;case 12:c=12;break}return n.l+=c,[r,a]}function r9(n,e,t){var r=(n[n.l++]&96)>>5,a=Y7(n,e-1,t);return[r,a]}function i9(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function ow(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function s9(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),a=[],c=0;c<=r;++c)a.push(n.read_shift(t&&t.biff==2?1:2));return a}function a9(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function o9(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function l9(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function c9(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function E4(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function u9(n){return n.read_shift(2),E4(n)}function f9(n){return n.read_shift(2),E4(n)}function h9(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var a=y4(n,0,t);return[r,a]}function d9(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var a=Z7(n,0,t);return[r,a]}function g9(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var a=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var c=y4(n,0,t);return[r,a,c]}function m9(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var a=n.read_shift(t&&t.biff<=3?1:2);return[mM[a],A4[a],r]}function p9(n,e,t){var r=n[n.l++],a=n.read_shift(1),c=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:x9(n);return[a,(c[0]===0?A4:gM)[c[1]]]}function x9(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function _9(n,e,t){n.l+=t&&t.biff==2?3:4}function y9(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),a=n.read_shift(t&&t.biff==2?1:2);return[r,a]}function E9(n){return n.l++,T0[n.read_shift(1)]}function v9(n){return n.l++,n.read_shift(2)}function w9(n){return n.l++,n.read_shift(1)!==0}function A9(n){return n.l++,Vu(n)}function T9(n,e,t){return n.l++,n4(n,e-1,t)}function S9(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=gD(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=T0[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=Vu(n);break;case 2:t[1]=_D(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function C9(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),a=[],c=0;c!=r;++c)a.push((t.biff==12?Tc:vD)(n));return a}function I9(n,e,t){var r=0,a=0;t.biff==12?(r=n.read_shift(4),a=n.read_shift(4)):(a=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--a==0&&(a=256));for(var c=0,h=[];c!=r&&(h[c]=[]);++c)for(var x=0;x!=a;++x)h[c][x]=S9(n,t.biff);return h}function b9(n,e,t){var r=n.read_shift(1)>>>5&3,a=!t||t.biff>=8?4:2,c=n.read_shift(a);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,c]}function R9(n,e,t){if(t.biff==5)return N9(n);var r=n.read_shift(1)>>>5&3,a=n.read_shift(2),c=n.read_shift(4);return[r,a,c]}function N9(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function O9(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var a=n.read_shift(t&&t.biff==2?1:2);return[r,a]}function D9(n,e,t){var r=n.read_shift(1)>>>5&3,a=n.read_shift(t&&t.biff==2?1:2);return[r,a]}function M9(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function L9(n,e,t){var r=(n[n.l++]&96)>>5,a=n.read_shift(2),c=4;if(t)switch(t.biff){case 5:c=15;break;case 12:c=6;break}return n.l+=c,[r,a]}var k9=Ua,P9=Ua,F9=Ua;function S0(n,e,t){return n.l+=2,[Q7(n)]}function M2(n){return n.l+=6,[]}var B9=S0,U9=M2,V9=M2,H9=S0;function v4(n){return n.l+=2,[e4(n),n.read_shift(2)&1]}var j9=S0,z9=v4,G9=M2,W9=S0,X9=S0,q9=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Y9(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),a=n.read_shift(2),c=n.read_shift(2),h=q9[t>>2&31];return{ixti:e,coltype:t&3,rt:h,idx:r,c:a,C:c}}function K9(n){return n.l+=2,[n.read_shift(4)]}function Q9(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function Z9(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function J9(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function $9(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function eM(n){return n.l+=4,[0,0]}var lw={1:{n:"PtgExp",f:y9},2:{n:"PtgTbl",f:F9},3:{n:"PtgAdd",f:Ur},4:{n:"PtgSub",f:Ur},5:{n:"PtgMul",f:Ur},6:{n:"PtgDiv",f:Ur},7:{n:"PtgPower",f:Ur},8:{n:"PtgConcat",f:Ur},9:{n:"PtgLt",f:Ur},10:{n:"PtgLe",f:Ur},11:{n:"PtgEq",f:Ur},12:{n:"PtgGe",f:Ur},13:{n:"PtgGt",f:Ur},14:{n:"PtgNe",f:Ur},15:{n:"PtgIsect",f:Ur},16:{n:"PtgUnion",f:Ur},17:{n:"PtgRange",f:Ur},18:{n:"PtgUplus",f:Ur},19:{n:"PtgUminus",f:Ur},20:{n:"PtgPercent",f:Ur},21:{n:"PtgParen",f:Ur},22:{n:"PtgMissArg",f:Ur},23:{n:"PtgStr",f:T9},26:{n:"PtgSheet",f:Q9},27:{n:"PtgEndSheet",f:Z9},28:{n:"PtgErr",f:E9},29:{n:"PtgBool",f:w9},30:{n:"PtgInt",f:v9},31:{n:"PtgNum",f:A9},32:{n:"PtgArray",f:i9},33:{n:"PtgFunc",f:m9},34:{n:"PtgFuncVar",f:p9},35:{n:"PtgName",f:b9},36:{n:"PtgRef",f:h9},37:{n:"PtgArea",f:$7},38:{n:"PtgMemArea",f:O9},39:{n:"PtgMemErr",f:k9},40:{n:"PtgMemNoMem",f:P9},41:{n:"PtgMemFunc",f:D9},42:{n:"PtgRefErr",f:M9},43:{n:"PtgAreaErr",f:t9},44:{n:"PtgRefN",f:d9},45:{n:"PtgAreaN",f:r9},46:{n:"PtgMemAreaN",f:J9},47:{n:"PtgMemNoMemN",f:$9},57:{n:"PtgNameX",f:R9},58:{n:"PtgRef3d",f:g9},59:{n:"PtgArea3d",f:e9},60:{n:"PtgRefErr3d",f:L9},61:{n:"PtgAreaErr3d",f:n9},255:{}},tM={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},nM={1:{n:"PtgElfLel",f:v4},2:{n:"PtgElfRw",f:W9},3:{n:"PtgElfCol",f:B9},6:{n:"PtgElfRwV",f:X9},7:{n:"PtgElfColV",f:H9},10:{n:"PtgElfRadical",f:j9},11:{n:"PtgElfRadicalS",f:G9},13:{n:"PtgElfColS",f:U9},15:{n:"PtgElfColSV",f:V9},16:{n:"PtgElfRadicalLel",f:z9},25:{n:"PtgList",f:Y9},29:{n:"PtgSxName",f:K9},255:{}},rM={0:{n:"PtgAttrNoop",f:eM},1:{n:"PtgAttrSemi",f:c9},2:{n:"PtgAttrIf",f:o9},4:{n:"PtgAttrChoose",f:s9},8:{n:"PtgAttrGoto",f:a9},16:{n:"PtgAttrSum",f:_9},32:{n:"PtgAttrBaxcel",f:ow},33:{n:"PtgAttrBaxcel",f:ow},64:{n:"PtgAttrSpace",f:u9},65:{n:"PtgAttrSpaceSemi",f:f9},128:{n:"PtgAttrIfError",f:l9},255:{}};function iM(n,e,t,r){if(r.biff<8)return Ua(n,e);for(var a=n.l+e,c=[],h=0;h!==t.length;++h)switch(t[h][0]){case"PtgArray":t[h][1]=I9(n,0,r),c.push(t[h][1]);break;case"PtgMemArea":t[h][2]=C9(n,t[h][1],r),c.push(t[h][2]);break;case"PtgExp":r&&r.biff==12&&(t[h][1][1]=n.read_shift(4),c.push(t[h][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[h][0]}return e=a-n.l,e!==0&&c.push(Ua(n,e)),c}function sM(n,e,t){for(var r=n.l+e,a,c,h=[];r!=n.l;)e=r-n.l,c=n[n.l],a=lw[c]||lw[tM[c]],(c===24||c===25)&&(a=(c===24?nM:rM)[n[n.l+1]]),!a||!a.f?Ua(n,e):h.push([a.n,a.f(n,e,t)]);return h}function aM(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],a=[],c=0;c<r.length;++c){var h=r[c];if(h)switch(h[0]){case 2:a.push('"'+h[1].replace(/"/g,'""')+'"');break;default:a.push(h[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var oM={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function lM(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function w4(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var a="";if(t.biff>8)switch(n[r[0]][0]){case 357:return a=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?a:a+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return a=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?a:a+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return n[r[0]][0][3]?(a=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?a:a+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function cw(n,e,t){var r=w4(n,e,t);return r=="#REF"?r:lM(r,t)}function bu(n,e,t,r,a){var c=a&&a.biff||8,h={s:{c:0,r:0}},x=[],v,_,T,C=0,b=0,O,U="";if(!n[0]||!n[0][0])return"";for(var M=-1,V="",le=0,ce=n[0].length;le<ce;++le){var ie=n[0][le];switch(ie[0]){case"PtgUminus":x.push("-"+x.pop());break;case"PtgUplus":x.push("+"+x.pop());break;case"PtgPercent":x.push(x.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(v=x.pop(),_=x.pop(),M>=0){switch(n[0][M][1][0]){case 0:V=Ir(" ",n[0][M][1][1]);break;case 1:V=Ir("\r",n[0][M][1][1]);break;default:if(V="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][M][1][0])}_=_+V,M=-1}x.push(_+oM[ie[0]]+v);break;case"PtgIsect":v=x.pop(),_=x.pop(),x.push(_+" "+v);break;case"PtgUnion":v=x.pop(),_=x.pop(),x.push(_+","+v);break;case"PtgRange":v=x.pop(),_=x.pop(),x.push(_+":"+v);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":T=jf(ie[1][1],h,a),x.push(zf(T,c));break;case"PtgRefN":T=t?jf(ie[1][1],t,a):ie[1][1],x.push(zf(T,c));break;case"PtgRef3d":C=ie[1][1],T=jf(ie[1][2],h,a),U=cw(r,C,a),x.push(U+"!"+zf(T,c));break;case"PtgFunc":case"PtgFuncVar":var me=ie[1][0],Ue=ie[1][1];me||(me=0),me&=127;var De=me==0?[]:x.slice(-me);x.length-=me,Ue==="User"&&(Ue=De.shift()),x.push(Ue+"("+De.join(",")+")");break;case"PtgBool":x.push(ie[1]?"TRUE":"FALSE");break;case"PtgInt":x.push(ie[1]);break;case"PtgNum":x.push(String(ie[1]));break;case"PtgStr":x.push('"'+ie[1].replace(/"/g,'""')+'"');break;case"PtgErr":x.push(ie[1]);break;case"PtgAreaN":O=qv(ie[1][1],t?{s:t}:h,a),x.push(Rm(O,a));break;case"PtgArea":O=qv(ie[1][1],h,a),x.push(Rm(O,a));break;case"PtgArea3d":C=ie[1][1],O=ie[1][2],U=cw(r,C,a),x.push(U+"!"+Rm(O,a));break;case"PtgAttrSum":x.push("SUM("+x.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":b=ie[1][2];var k=(r.names||[])[b-1]||(r[0]||[])[b],H=k?k.Name:"SH33TJSNAME"+String(b);H&&H.slice(0,6)=="_xlfn."&&!a.xlfn&&(H=H.slice(6)),x.push(H);break;case"PtgNameX":var P=ie[1][1];b=ie[1][2];var te;if(a.biff<=5)P<0&&(P=-P),r[P]&&(te=r[P][b]);else{var K="";if(((r[P]||[])[0]||[])[0]==14849||(((r[P]||[])[0]||[])[0]==1025?r[P][b]&&r[P][b].itab>0&&(K=r.SheetNames[r[P][b].itab-1]+"!"):K=r.SheetNames[b-1]+"!"),r[P]&&r[P][b])K+=r[P][b].Name;else if(r[0]&&r[0][b])K+=r[0][b].Name;else{var J=(w4(r,P,a)||"").split(";;");J[b-1]?K=J[b-1]:K+="SH33TJSERRX"}x.push(K);break}te||(te={Name:"SH33TJSERRY"}),x.push(te.Name);break;case"PtgParen":var Y="(",dt=")";if(M>=0){switch(V="",n[0][M][1][0]){case 2:Y=Ir(" ",n[0][M][1][1])+Y;break;case 3:Y=Ir("\r",n[0][M][1][1])+Y;break;case 4:dt=Ir(" ",n[0][M][1][1])+dt;break;case 5:dt=Ir("\r",n[0][M][1][1])+dt;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][M][1][0])}M=-1}x.push(Y+x.pop()+dt);break;case"PtgRefErr":x.push("#REF!");break;case"PtgRefErr3d":x.push("#REF!");break;case"PtgExp":T={c:ie[1][1],r:ie[1][0]};var ye={c:t.c,r:t.r};if(r.sharedf[Kn(T)]){var Se=r.sharedf[Kn(T)];x.push(bu(Se,h,ye,r,a))}else{var Pe=!1;for(v=0;v!=r.arrayf.length;++v)if(_=r.arrayf[v],!(T.c<_[0].s.c||T.c>_[0].e.c)&&!(T.r<_[0].s.r||T.r>_[0].e.r)){x.push(bu(_[1],h,ye,r,a)),Pe=!0;break}Pe||x.push(ie[1])}break;case"PtgArray":x.push("{"+aM(ie[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":M=le;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":x.push("");break;case"PtgAreaErr":x.push("#REF!");break;case"PtgAreaErr3d":x.push("#REF!");break;case"PtgList":x.push("Table"+ie[1].idx+"[#"+ie[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(ie));default:throw new Error("Unrecognized Formula Token: "+String(ie))}var gt=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&M>=0&&gt.indexOf(n[0][le][0])==-1){ie=n[0][M];var yt=!0;switch(ie[1][0]){case 4:yt=!1;case 0:V=Ir(" ",ie[1][1]);break;case 5:yt=!1;case 1:V=Ir("\r",ie[1][1]);break;default:if(V="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+ie[1][0])}x.push((yt?V:"")+x.pop()+(yt?"":V)),M=-1}}if(x.length>1&&a.WTF)throw new Error("bad formula stack");return x[0]}function cM(n){if(n==null){var e=je(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return pc(n);return pc(0)}function uM(n,e,t,r,a){var c=xc(e,t,a),h=cM(n.v),x=je(6),v=33;x.write_shift(2,v),x.write_shift(4,0);for(var _=je(n.bf.length),T=0;T<n.bf.length;++T)_[T]=n.bf[T];var C=_i([c,h,x,_]);return C}function yd(n,e,t){var r=n.read_shift(4),a=sM(n,r,t),c=n.read_shift(4),h=c>0?iM(n,c,a,t):null;return[a,h]}var fM=yd,Ed=yd,hM=yd,dM=yd,gM={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},A4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},mM={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function pM(n){var e="of:="+n.replace(O2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function xM(n){return n.replace(/\./,"!")}var Gf=typeof Map<"u";function L2(n,e,t){var r=0,a=n.length;if(t){if(Gf?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var c=Gf?t.get(e):t[e];r<c.length;++r)if(n[c[r]].t===e)return n.Count++,c[r]}}else for(;r<a;++r)if(n[r].t===e)return n.Count++,r;return n[a]={t:e},n.Count++,n.Unique++,t&&(Gf?(t.has(e)||t.set(e,[]),t.get(e).push(a)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(a))),a}function vd(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Eo=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=B1(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=dp(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function T4(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Fl(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],a=60,c=n.length;if(r==null&&t.ssf){for(;a<392;++a)if(t.ssf[a]==null){y3(e.z,a),t.ssf[a]=e.z,t.revssf[e.z]=r=a;break}}for(a=0;a!=c;++a)if(n[a].numFmtId===r)return a;return n[c]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function _M(n,e,t){if(n&&n["!ref"]){var r=ur(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function yM(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+zr(n[t])+'"/>';return e+"</mergeCells>"}function EM(n,e,t,r,a){var c=!1,h={},x=null;if(r.bookType!=="xlsx"&&e.vbaraw){var v=e.SheetNames[t];try{e.Workbook&&(v=e.Workbook.Sheets[t].CodeName||v)}catch{}c=!0,h.codeName=s0(Yn(v))}if(n&&n["!outline"]){var _={summaryBelow:1,summaryRight:1};n["!outline"].above&&(_.summaryBelow=0),n["!outline"].left&&(_.summaryRight=0),x=(x||"")+ft("outlinePr",null,_)}!c&&!x||(a[a.length]=ft("sheetPr",x,h))}var vM=["objects","scenarios","selectLockedCells","selectUnlockedCells"],wM=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function AM(n){var e={sheet:1};return vM.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),wM.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=o4(n.password).toString(16).toUpperCase()),ft("sheetProtection",null,e)}function TM(n){return T4(n),ft("pageMargins",null,n)}function SM(n,e){for(var t=["<cols>"],r,a=0;a!=e.length;++a)(r=e[a])&&(t[t.length]=ft("col",null,vd(a,r)));return t[t.length]="</cols>",t.join("")}function CM(n,e,t,r){var a=typeof n.ref=="string"?n.ref:zr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var c=t.Workbook.Names,h=Os(a);h.s.r==h.e.r&&(h.e.r=Os(e["!ref"]).e.r,a=zr(h));for(var x=0;x<c.length;++x){var v=c[x];if(v.Name=="_xlnm._FilterDatabase"&&v.Sheet==r){v.Ref="'"+t.SheetNames[r]+"'!"+a;break}}return x==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+a}),ft("autoFilter",null,{ref:a})}function IM(n,e,t,r){var a={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),ft("sheetViews",ft("sheetView",null,a),{})}function bM(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var a="",c=n.t,h=n.v;if(n.t!=="z")switch(n.t){case"b":a=n.v?"1":"0";break;case"n":a=""+n.v;break;case"e":a=T0[n.v];break;case"d":r&&r.cellDates?a=qi(n.v,-1).toISOString():(n=us(n),n.t="n",a=""+(n.v=cs(qi(n.v)))),typeof n.z>"u"&&(n.z=br[14]);break;default:a=n.v;break}var x=yi("v",Yn(a)),v={r:e},_=Fl(r.cellXfs,n,r);switch(_!==0&&(v.s=_),n.t){case"n":break;case"d":v.t="d";break;case"b":v.t="b";break;case"e":v.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){x=yi("v",""+L2(r.Strings,n.v,r.revStrings)),v.t="s";break}v.t="str";break}if(n.t!=c&&(n.t=c,n.v=h),typeof n.f=="string"&&n.f){var T=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;x=ft("f",Yn(n.f),T)+(n.v!=null?x:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(v.cm=1),ft("c",x,v)}function RM(n,e,t,r){var a=[],c=[],h=ur(n["!ref"]),x="",v,_="",T=[],C=0,b=0,O=n["!rows"],U=Array.isArray(n),M={r:_},V,le=-1;for(b=h.s.c;b<=h.e.c;++b)T[b]=Li(b);for(C=h.s.r;C<=h.e.r;++C){for(c=[],_=Ei(C),b=h.s.c;b<=h.e.c;++b){v=T[b]+_;var ce=U?(n[C]||[])[b]:n[v];ce!==void 0&&(x=bM(ce,v,n,e))!=null&&c.push(x)}(c.length>0||O&&O[C])&&(M={r:_},O&&O[C]&&(V=O[C],V.hidden&&(M.hidden=1),le=-1,V.hpx?le=U1(V.hpx):V.hpt&&(le=V.hpt),le>-1&&(M.ht=le,M.customHeight=1),V.level&&(M.outlineLevel=V.level)),a[a.length]=ft("row",c.join(""),M))}if(O)for(;C<O.length;++C)O&&O[C]&&(M={r:C+1},V=O[C],V.hidden&&(M.hidden=1),le=-1,V.hpx?le=U1(V.hpx):V.hpt&&(le=V.hpt),le>-1&&(M.ht=le,M.customHeight=1),V.level&&(M.outlineLevel=V.level),a[a.length]=ft("row","",M));return a.join("")}function S4(n,e,t,r){var a=[Wr,ft("worksheet",null,{xmlns:Fu[0],"xmlns:r":ri.r})],c=t.SheetNames[n],h=0,x="",v=t.Sheets[c];v==null&&(v={});var _=v["!ref"]||"A1",T=ur(_);if(T.e.c>16383||T.e.r>1048575){if(e.WTF)throw new Error("Range "+_+" exceeds format limit A1:XFD1048576");T.e.c=Math.min(T.e.c,16383),T.e.r=Math.min(T.e.c,1048575),_=zr(T)}r||(r={}),v["!comments"]=[];var C=[];EM(v,t,n,e,a),a[a.length]=ft("dimension",null,{ref:_}),a[a.length]=IM(v,e,n,t),e.sheetFormat&&(a[a.length]=ft("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),v["!cols"]!=null&&v["!cols"].length>0&&(a[a.length]=SM(v,v["!cols"])),a[h=a.length]="<sheetData/>",v["!links"]=[],v["!ref"]!=null&&(x=RM(v,e),x.length>0&&(a[a.length]=x)),a.length>h+1&&(a[a.length]="</sheetData>",a[h]=a[h].replace("/>",">")),v["!protect"]&&(a[a.length]=AM(v["!protect"])),v["!autofilter"]!=null&&(a[a.length]=CM(v["!autofilter"],v,t,n)),v["!merges"]!=null&&v["!merges"].length>0&&(a[a.length]=yM(v["!merges"]));var b=-1,O,U=-1;return v["!links"].length>0&&(a[a.length]="<hyperlinks>",v["!links"].forEach(function(M){M[1].Target&&(O={ref:M[0]},M[1].Target.charAt(0)!="#"&&(U=qn(r,-1,Yn(M[1].Target).replace(/#.*$/,""),Dn.HLINK),O["r:id"]="rId"+U),(b=M[1].Target.indexOf("#"))>-1&&(O.location=Yn(M[1].Target.slice(b+1))),M[1].Tooltip&&(O.tooltip=Yn(M[1].Tooltip)),a[a.length]=ft("hyperlink",null,O))}),a[a.length]="</hyperlinks>"),delete v["!links"],v["!margins"]!=null&&(a[a.length]=TM(v["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=yi("ignoredErrors",ft("ignoredError",null,{numberStoredAsText:1,sqref:_}))),C.length>0&&(U=qn(r,-1,"../drawings/drawing"+(n+1)+".xml",Dn.DRAW),a[a.length]=ft("drawing",null,{"r:id":"rId"+U}),v["!drawing"]=C),v["!comments"].length>0&&(U=qn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Dn.VML),a[a.length]=ft("legacyDrawing",null,{"r:id":"rId"+U}),v["!legacy"]=U),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function NM(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var a=n.read_shift(2);n.l+=1;var c=n.read_shift(1);return n.l=r,c&7&&(t.level=c&7),c&16&&(t.hidden=!0),c&32&&(t.hpt=a/20),t}function OM(n,e,t){var r=je(145),a=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var c=320;a.hpx?c=U1(a.hpx)*20:a.hpt&&(c=a.hpt*20),r.write_shift(2,c),r.write_shift(1,0);var h=0;a.level&&(h|=a.level),a.hidden&&(h|=16),(a.hpx||a.hpt)&&(h|=32),r.write_shift(1,h),r.write_shift(1,0);var x=0,v=r.l;r.l+=4;for(var _={r:n,c:0},T=0;T<16;++T)if(!(e.s.c>T+1<<10||e.e.c<T<<10)){for(var C=-1,b=-1,O=T<<10;O<T+1<<10;++O){_.c=O;var U=Array.isArray(t)?(t[_.r]||[])[_.c]:t[Kn(_)];U&&(C<0&&(C=O),b=O)}C<0||(++x,r.write_shift(4,C),r.write_shift(4,b))}var M=r.l;return r.l=v,r.write_shift(4,x),r.l=M,r.length>r.l?r.slice(0,r.l):r}function DM(n,e,t,r){var a=OM(r,t,e);(a.length>17||(e["!rows"]||[])[r])&&Qe(n,0,a)}var MM=Tc,LM=Uu;function kM(){}function PM(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=X5(n),t}function FM(n,e,t){t==null&&(t=je(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var a=1;a<3;++a)t.write_shift(1,0);return k1({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),V3(n,t),t.slice(0,t.l)}function BM(n){var e=$s(n);return[e]}function UM(n,e,t){return t==null&&(t=je(8)),vc(e,t)}function VM(n){var e=wc(n);return[e]}function HM(n,e,t){return t==null&&(t=je(4)),Ac(e,t)}function jM(n){var e=$s(n),t=n.read_shift(1);return[e,t,"b"]}function zM(n,e,t){return t==null&&(t=je(9)),vc(e,t),t.write_shift(1,n.v?1:0),t}function GM(n){var e=wc(n),t=n.read_shift(1);return[e,t,"b"]}function WM(n,e,t){return t==null&&(t=je(5)),Ac(e,t),t.write_shift(1,n.v?1:0),t}function XM(n){var e=$s(n),t=n.read_shift(1);return[e,t,"e"]}function qM(n,e,t){return t==null&&(t=je(9)),vc(e,t),t.write_shift(1,n.v),t}function YM(n){var e=wc(n),t=n.read_shift(1);return[e,t,"e"]}function KM(n,e,t){return t==null&&(t=je(8)),Ac(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function QM(n){var e=$s(n),t=n.read_shift(4);return[e,t,"s"]}function ZM(n,e,t){return t==null&&(t=je(12)),vc(e,t),t.write_shift(4,e.v),t}function JM(n){var e=wc(n),t=n.read_shift(4);return[e,t,"s"]}function $M(n,e,t){return t==null&&(t=je(8)),Ac(e,t),t.write_shift(4,e.v),t}function eL(n){var e=$s(n),t=Vu(n);return[e,t,"n"]}function tL(n,e,t){return t==null&&(t=je(16)),vc(e,t),pc(n.v,t),t}function nL(n){var e=wc(n),t=Vu(n);return[e,t,"n"]}function rL(n,e,t){return t==null&&(t=je(12)),Ac(e,t),pc(n.v,t),t}function iL(n){var e=$s(n),t=H3(n);return[e,t,"n"]}function sL(n,e,t){return t==null&&(t=je(12)),vc(e,t),j3(n.v,t),t}function aL(n){var e=wc(n),t=H3(n);return[e,t,"n"]}function oL(n,e,t){return t==null&&(t=je(8)),Ac(e,t),j3(n.v,t),t}function lL(n){var e=$s(n),t=C2(n);return[e,t,"is"]}function cL(n){var e=$s(n),t=ki(n);return[e,t,"str"]}function uL(n,e,t){return t==null&&(t=je(12+4*n.v.length)),vc(e,t),si(n.v,t),t.length>t.l?t.slice(0,t.l):t}function fL(n){var e=wc(n),t=ki(n);return[e,t,"str"]}function hL(n,e,t){return t==null&&(t=je(8+4*n.v.length)),Ac(e,t),si(n.v,t),t.length>t.l?t.slice(0,t.l):t}function dL(n,e,t){var r=n.l+e,a=$s(n);a.r=t["!row"];var c=n.read_shift(1),h=[a,c,"b"];if(t.cellFormula){n.l+=2;var x=Ed(n,r-n.l,t);h[3]=bu(x,null,a,t.supbooks,t)}else n.l=r;return h}function gL(n,e,t){var r=n.l+e,a=$s(n);a.r=t["!row"];var c=n.read_shift(1),h=[a,c,"e"];if(t.cellFormula){n.l+=2;var x=Ed(n,r-n.l,t);h[3]=bu(x,null,a,t.supbooks,t)}else n.l=r;return h}function mL(n,e,t){var r=n.l+e,a=$s(n);a.r=t["!row"];var c=Vu(n),h=[a,c,"n"];if(t.cellFormula){n.l+=2;var x=Ed(n,r-n.l,t);h[3]=bu(x,null,a,t.supbooks,t)}else n.l=r;return h}function pL(n,e,t){var r=n.l+e,a=$s(n);a.r=t["!row"];var c=ki(n),h=[a,c,"str"];if(t.cellFormula){n.l+=2;var x=Ed(n,r-n.l,t);h[3]=bu(x,null,a,t.supbooks,t)}else n.l=r;return h}var xL=Tc,_L=Uu;function yL(n,e){return e==null&&(e=je(4)),e.write_shift(4,n),e}function EL(n,e){var t=n.l+e,r=Tc(n),a=I2(n),c=ki(n),h=ki(n),x=ki(n);n.l=t;var v={rfx:r,relId:a,loc:c,display:x};return h&&(v.Tooltip=h),v}function vL(n,e){var t=je(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Uu({s:ii(n[0]),e:ii(n[0])},t),b2("rId"+e,t);var r=n[1].Target.indexOf("#"),a=r==-1?"":n[1].Target.slice(r+1);return si(a||"",t),si(n[1].Tooltip||"",t),si("",t),t.slice(0,t.l)}function wL(){}function AL(n,e,t){var r=n.l+e,a=z3(n),c=n.read_shift(1),h=[a];if(h[2]=c,t.cellFormula){var x=fM(n,r-n.l,t);h[1]=x}else n.l=r;return h}function TL(n,e,t){var r=n.l+e,a=Tc(n),c=[a];if(t.cellFormula){var h=dM(n,r-n.l,t);c[1]=h,n.l=r}else n.l=r;return c}function SL(n,e,t){t==null&&(t=je(18));var r=vd(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof r.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),t.write_shift(2,a),t}var C4=["left","right","top","bottom","header","footer"];function CL(n){var e={};return C4.forEach(function(t){e[t]=Vu(n)}),e}function IL(n,e){return e==null&&(e=je(48)),T4(n),C4.forEach(function(t){pc(n[t],e)}),e}function bL(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function RL(n,e,t){t==null&&(t=je(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function NL(n){var e=je(24);return e.write_shift(4,4),e.write_shift(4,1),Uu(n,e),e}function OL(n,e){return e==null&&(e=je(66)),e.write_shift(2,n.password?o4(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function DL(){}function ML(){}function LL(n,e,t,r,a,c,h){if(e.v===void 0)return!1;var x="";switch(e.t){case"b":x=e.v?"1":"0";break;case"d":e=us(e),e.z=e.z||br[14],e.v=cs(qi(e.v)),e.t="n";break;case"n":case"e":x=""+e.v;break;default:x=e.v;break}var v={r:t,c:r};switch(v.s=Fl(a.cellXfs,e,a),e.l&&c["!links"].push([Kn(v),e.l]),e.c&&c["!comments"].push([Kn(v),e.c]),e.t){case"s":case"str":return a.bookSST?(x=L2(a.Strings,e.v,a.revStrings),v.t="s",v.v=x,h?Qe(n,18,$M(e,v)):Qe(n,7,ZM(e,v))):(v.t="str",h?Qe(n,17,hL(e,v)):Qe(n,6,uL(e,v))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?h?Qe(n,13,oL(e,v)):Qe(n,2,sL(e,v)):h?Qe(n,16,rL(e,v)):Qe(n,5,tL(e,v)),!0;case"b":return v.t="b",h?Qe(n,15,WM(e,v)):Qe(n,4,zM(e,v)),!0;case"e":return v.t="e",h?Qe(n,14,KM(e,v)):Qe(n,3,qM(e,v)),!0}return h?Qe(n,12,HM(e,v)):Qe(n,1,UM(e,v)),!0}function kL(n,e,t,r){var a=ur(e["!ref"]||"A1"),c,h="",x=[];Qe(n,145);var v=Array.isArray(e),_=a.e.r;e["!rows"]&&(_=Math.max(a.e.r,e["!rows"].length-1));for(var T=a.s.r;T<=_;++T){h=Ei(T),DM(n,e,a,T);var C=!1;if(T<=a.e.r)for(var b=a.s.c;b<=a.e.c;++b){T===a.s.r&&(x[b]=Li(b)),c=x[b]+h;var O=v?(e[T]||[])[b]:e[c];if(!O){C=!1;continue}C=LL(n,O,T,b,r,e,C)}}Qe(n,146)}function PL(n,e){!e||!e["!merges"]||(Qe(n,177,yL(e["!merges"].length)),e["!merges"].forEach(function(t){Qe(n,176,_L(t))}),Qe(n,178))}function FL(n,e){!e||!e["!cols"]||(Qe(n,390),e["!cols"].forEach(function(t,r){t&&Qe(n,60,SL(r,t))}),Qe(n,391))}function BL(n,e){!e||!e["!ref"]||(Qe(n,648),Qe(n,649,NL(ur(e["!ref"]))),Qe(n,650))}function UL(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var a=qn(t,-1,r[1].Target.replace(/#.*$/,""),Dn.HLINK);Qe(n,494,vL(r,a))}}),delete e["!links"]}function VL(n,e,t,r){if(e["!comments"].length>0){var a=qn(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Dn.VML);Qe(n,551,b2("rId"+a)),e["!legacy"]=a}}function HL(n,e,t,r){if(e["!autofilter"]){var a=e["!autofilter"],c=typeof a.ref=="string"?a.ref:zr(a.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var h=t.Workbook.Names,x=Os(c);x.s.r==x.e.r&&(x.e.r=Os(e["!ref"]).e.r,c=zr(x));for(var v=0;v<h.length;++v){var _=h[v];if(_.Name=="_xlnm._FilterDatabase"&&_.Sheet==r){_.Ref="'"+t.SheetNames[r]+"'!"+c;break}}v==h.length&&h.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+c}),Qe(n,161,Uu(ur(c))),Qe(n,162)}}function jL(n,e,t){Qe(n,133),Qe(n,137,RL(e,t)),Qe(n,138),Qe(n,134)}function zL(n,e){e["!protect"]&&Qe(n,535,OL(e["!protect"]))}function GL(n,e,t,r){var a=ls(),c=t.SheetNames[n],h=t.Sheets[c]||{},x=c;try{t&&t.Workbook&&(x=t.Workbook.Sheets[n].CodeName||x)}catch{}var v=ur(h["!ref"]||"A1");if(v.e.c>16383||v.e.r>1048575){if(e.WTF)throw new Error("Range "+(h["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");v.e.c=Math.min(v.e.c,16383),v.e.r=Math.min(v.e.c,1048575)}return h["!links"]=[],h["!comments"]=[],Qe(a,129),(t.vbaraw||h["!outline"])&&Qe(a,147,FM(x,h["!outline"])),Qe(a,148,LM(v)),jL(a,h,t.Workbook),FL(a,h),kL(a,h,n,e),zL(a,h),HL(a,h,t,n),PL(a,h),UL(a,h,r),h["!margins"]&&Qe(a,476,IL(h["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&BL(a,h),VL(a,h,n,r),Qe(a,130),a.end()}function WL(n,e){n.l+=10;var t=ki(n);return{name:t}}var XL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function qL(n){return!n.Workbook||!n.Workbook.WBProps?"false":T5(n.Workbook.WBProps.date1904)?"true":"false"}var YL="][*?/\\".split("");function I4(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return YL.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function KL(n,e,t){n.forEach(function(r,a){I4(r);for(var c=0;c<a;++c)if(r==n[c])throw new Error("Duplicate Sheet Name: "+r);if(t){var h=e&&e[a]&&e[a].CodeName||r;if(h.charCodeAt(0)==95&&h.length>22)throw new Error("Bad Code Name: Worksheet"+h)}})}function QL(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];KL(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)_M(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function b4(n){var e=[Wr];e[e.length]=ft("workbook",null,{xmlns:Fu[0],"xmlns:r":ri.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(XL.forEach(function(x){n.Workbook.WBProps[x[0]]!=null&&n.Workbook.WBProps[x[0]]!=x[1]&&(r[x[0]]=n.Workbook.WBProps[x[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=ft("workbookPr",null,r);var a=n.Workbook&&n.Workbook.Sheets||[],c=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",c=0;c!=n.SheetNames.length&&!(!a[c]||!a[c].Hidden);++c);c==n.SheetNames.length&&(c=0),e[e.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",c=0;c!=n.SheetNames.length;++c){var h={name:Yn(n.SheetNames[c].slice(0,31))};if(h.sheetId=""+(c+1),h["r:id"]="rId"+(c+1),a[c])switch(a[c].Hidden){case 1:h.state="hidden";break;case 2:h.state="veryHidden";break}e[e.length]=ft("sheet",null,h)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(x){var v={name:x.Name};x.Comment&&(v.comment=x.Comment),x.Sheet!=null&&(v.localSheetId=""+x.Sheet),x.Hidden&&(v.hidden="1"),x.Ref&&(e[e.length]=ft("definedName",Yn(x.Ref),v))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function ZL(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=hp(n),t.name=ki(n),t}function JL(n,e){return e||(e=je(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),b2(n.strRelID,e),si(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function $L(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var a=e>8?ki(n):"";return a.length>0&&(t.CodeName=a),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function ek(n,e){e||(e=je(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),V3(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function tk(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var a=n.read_shift(4),c=q5(n),h=hM(n,0,t),x=I2(n);n.l=r;var v={Name:c,Ptg:h};return a<268435455&&(v.Sheet=a),x&&(v.Comment=x),v}function nk(n,e){Qe(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,a={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Qe(n,156,JL(a))}Qe(n,144)}function rk(n,e){e||(e=je(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return si("SheetJS",e),si(I1.version,e),si(I1.version,e),si("7262",e),e.length>e.l?e.slice(0,e.l):e}function ik(n,e){e||(e=je(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function sk(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,a=-1,c=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&a==-1?a=r:t[r].Hidden==1&&c==-1&&(c=r);c>a||(Qe(n,135),Qe(n,158,ik(a)),Qe(n,136))}}function ak(n,e){var t=ls();return Qe(t,131),Qe(t,128,rk()),Qe(t,153,ek(n.Workbook&&n.Workbook.WBProps||null)),sk(t,n),nk(t,n),Qe(t,132),t.end()}function ok(n,e,t){return(e.slice(-4)===".bin"?ak:b4)(n)}function lk(n,e,t,r,a){return(e.slice(-4)===".bin"?GL:S4)(n,t,r,a)}function ck(n,e,t){return(e.slice(-4)===".bin"?I7:u4)(n,t)}function uk(n,e,t){return(e.slice(-4)===".bin"?e7:a4)(n,t)}function fk(n,e,t){return(e.slice(-4)===".bin"?z7:m4)(n)}function hk(n){return(n.slice(-4)===".bin"?k7:d4)()}function dk(n,e){var t=[];return n.Props&&t.push(cD(n.Props,e)),n.Custprops&&t.push(uD(n.Props,n.Custprops)),t.join("")}function gk(){return""}function mk(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,a){var c=[];c.push(ft("NumberFormat",null,{"ss:Format":Yn(br[r.numFmtId])}));var h={"ss:ID":"s"+(21+a)};t.push(ft("Style",c.join(""),h))}),ft("Styles",t.join(""))}function R4(n){return ft("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+D2(n.Ref,{r:0,c:0})})}function pk(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var a=e[r];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||t.push(R4(a)))}return ft("Names",t.join(""))}function xk(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var a=r.Workbook.Names,c=[],h=0;h<a.length;++h){var x=a[h];x.Sheet==t&&(x.Name.match(/^_xlfn\./)||c.push(R4(x)))}return c.join("")}function _k(n,e,t,r){if(!n)return"";var a=[];if(n["!margins"]&&(a.push("<PageSetup>"),n["!margins"].header&&a.push(ft("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&a.push(ft("Footer",null,{"x:Margin":n["!margins"].footer})),a.push(ft("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),a.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)a.push(ft("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<t&&!(r.Workbook.Sheets[c]&&!r.Workbook.Sheets[c].Hidden);++c);c==t&&a.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),n["!protect"]&&(a.push(yi("ProtectContents","True")),n["!protect"].objects&&a.push(yi("ProtectObjects","True")),n["!protect"].scenarios&&a.push(yi("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?a.push(yi("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&a.push(yi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(h){n["!protect"][h[0]]&&a.push("<"+h[1]+"/>")})),a.length==0?"":ft("WorksheetOptions",a.join(""),{xmlns:Is.x})}function yk(n){return n.map(function(e){var t=A5(e.t||""),r=ft("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return ft("Comment",r,{"ss:Author":e.a})}).join("")}function Ek(n,e,t,r,a,c,h){if(!n||n.v==null&&n.f==null)return"";var x={};if(n.f&&(x["ss:Formula"]="="+Yn(D2(n.f,h))),n.F&&n.F.slice(0,e.length)==e){var v=ii(n.F.slice(e.length+1));x["ss:ArrayRange"]="RC:R"+(v.r==h.r?"":"["+(v.r-h.r)+"]")+"C"+(v.c==h.c?"":"["+(v.c-h.c)+"]")}if(n.l&&n.l.Target&&(x["ss:HRef"]=Yn(n.l.Target),n.l.Tooltip&&(x["x:HRefScreenTip"]=Yn(n.l.Tooltip))),t["!merges"])for(var _=t["!merges"],T=0;T!=_.length;++T)_[T].s.c!=h.c||_[T].s.r!=h.r||(_[T].e.c>_[T].s.c&&(x["ss:MergeAcross"]=_[T].e.c-_[T].s.c),_[T].e.r>_[T].s.r&&(x["ss:MergeDown"]=_[T].e.r-_[T].s.r));var C="",b="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":C="Number",b=String(n.v);break;case"b":C="Boolean",b=n.v?"1":"0";break;case"e":C="Error",b=T0[n.v];break;case"d":C="DateTime",b=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||br[14]);break;case"s":C="String",b=w5(n.v||"");break}var O=Fl(r.cellXfs,n,r);x["ss:StyleID"]="s"+(21+O),x["ss:Index"]=h.c+1;var U=n.v!=null?b:"",M=n.t=="z"?"":'<Data ss:Type="'+C+'">'+U+"</Data>";return(n.c||[]).length>0&&(M+=yk(n.c)),ft("Cell",M,x)}function vk(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=c4(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function wk(n,e,t,r){if(!n["!ref"])return"";var a=ur(n["!ref"]),c=n["!merges"]||[],h=0,x=[];n["!cols"]&&n["!cols"].forEach(function(V,le){N2(V);var ce=!!V.width,ie=vd(le,V),me={"ss:Index":le+1};ce&&(me["ss:Width"]=F1(ie.width)),V.hidden&&(me["ss:Hidden"]="1"),x.push(ft("Column",null,me))});for(var v=Array.isArray(n),_=a.s.r;_<=a.e.r;++_){for(var T=[vk(_,(n["!rows"]||[])[_])],C=a.s.c;C<=a.e.c;++C){var b=!1;for(h=0;h!=c.length;++h)if(!(c[h].s.c>C)&&!(c[h].s.r>_)&&!(c[h].e.c<C)&&!(c[h].e.r<_)){(c[h].s.c!=C||c[h].s.r!=_)&&(b=!0);break}if(!b){var O={r:_,c:C},U=Kn(O),M=v?(n[_]||[])[C]:n[U];T.push(Ek(M,U,n,e,t,r,O))}}T.push("</Row>"),T.length>2&&x.push(T.join(""))}return x.join("")}function Ak(n,e,t){var r=[],a=t.SheetNames[n],c=t.Sheets[a],h=c?xk(c,e,n,t):"";return h.length>0&&r.push("<Names>"+h+"</Names>"),h=c?wk(c,e,n,t):"",h.length>0&&r.push("<Table>"+h+"</Table>"),r.push(_k(c,e,n,t)),r.join("")}function Tk(n,e){e||(e={}),n.SSF||(n.SSF=us(br)),n.SSF&&(pd(),md(n.SSF),e.revssf=xd(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Fl(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(dk(n,e)),t.push(gk()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(ft("Worksheet",Ak(r,e,n),{"ss:Name":Yn(n.SheetNames[r])}));return t[2]=mk(n,e),t[3]=pk(n),Wr+ft("Workbook",t.join(""),{xmlns:Is.ss,"xmlns:o":Is.o,"xmlns:x":Is.x,"xmlns:ss":Is.ss,"xmlns:dt":Is.dt,"xmlns:html":Is.html})}var Dm={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Sk(n,e){var t=[],r=[],a=[],c=0,h,x=Pv(Kv,"n"),v=Pv(Qv,"n");if(n.Props)for(h=wi(n.Props),c=0;c<h.length;++c)(Object.prototype.hasOwnProperty.call(x,h[c])?t:Object.prototype.hasOwnProperty.call(v,h[c])?r:a).push([h[c],n.Props[h[c]]]);if(n.Custprops)for(h=wi(n.Custprops),c=0;c<h.length;++c)Object.prototype.hasOwnProperty.call(n.Props||{},h[c])||(Object.prototype.hasOwnProperty.call(x,h[c])?t:Object.prototype.hasOwnProperty.call(v,h[c])?r:a).push([h[c],n.Custprops[h[c]]]);var _=[];for(c=0;c<a.length;++c)$3.indexOf(a[c][0])>-1||Q3.indexOf(a[c][0])>-1||a[c][1]!=null&&_.push(a[c]);r.length&&$n.utils.cfb_add(e,"/SummaryInformation",tw(r,Dm.SI,v,Qv)),(t.length||_.length)&&$n.utils.cfb_add(e,"/DocumentSummaryInformation",tw(t,Dm.DSI,x,Kv,_.length?_:null,Dm.UDI))}function Ck(n,e){var t=e||{},r=$n.utils.cfb_new({root:"R"}),a="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":a="/Workbook",t.biff=8;break;case"biff5":a="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return $n.utils.cfb_add(r,a,N4(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Sk(n,r),t.biff==8&&n.vbaraw&&G7(r,$n.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Ik={0:{f:NM},1:{f:BM},2:{f:iL},3:{f:XM},4:{f:jM},5:{f:eL},6:{f:cL},7:{f:QM},8:{f:pL},9:{f:mL},10:{f:dL},11:{f:gL},12:{f:VM},13:{f:aL},14:{f:YM},15:{f:GM},16:{f:nL},17:{f:fL},18:{f:JM},19:{f:C2},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:tk},40:{},42:{},43:{f:c7},44:{f:o7},45:{f:h7},46:{f:g7},47:{f:d7},48:{},49:{f:V5},50:{},51:{f:N7},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:HD},62:{f:lL},63:{f:P7},64:{f:DL},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ua,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:bL},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:PM},148:{f:MM,p:16},151:{f:wL},152:{},153:{f:$L},154:{},155:{},156:{f:ZL},157:{},158:{},159:{T:1,f:ZD},160:{T:-1},161:{T:1,f:Tc},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xL},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:b7},336:{T:-1},337:{f:M7,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:hp},357:{},358:{},359:{},360:{T:1},361:{},362:{f:kD},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:AL},427:{f:TL},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:CL},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:kM},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:EL},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:hp},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:H7},633:{T:1},634:{T:-1},635:{T:1,f:U7},636:{T:-1},637:{f:G5},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:WL},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ML},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ht(n,e,t,r){var a=e;if(!isNaN(a)){var c=r||(t||[]).length||0,h=n.next(4);h.write_shift(2,a),h.write_shift(2,c),c>0&&A2(t)&&n.push(t)}}function bk(n,e,t,r){var a=(t||[]).length||0;if(a<=8224)return ht(n,e,t,a);var c=e;if(!isNaN(c)){for(var h=t.parts||[],x=0,v=0,_=0;_+(h[x]||8224)<=8224;)_+=h[x]||8224,x++;var T=n.next(4);for(T.write_shift(2,c),T.write_shift(2,_),n.push(t.slice(v,v+_)),v+=_;v<a;){for(T=n.next(4),T.write_shift(2,60),_=0;_+(h[x]||8224)<=8224;)_+=h[x]||8224,x++;T.write_shift(2,_),n.push(t.slice(v,v+_)),v+=_}}}function C0(n,e,t){return n||(n=je(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Rk(n,e,t,r){var a=je(9);return C0(a,n,e),t4(t,r||"b",a),a}function Nk(n,e,t){var r=je(8+2*t.length);return C0(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Ok(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?cs(qi(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?ht(n,2,WD(t,r,a)):ht(n,3,GD(t,r,a));return;case"b":case"e":ht(n,5,Rk(t,r,e.v,e.t));return;case"s":case"str":ht(n,4,Nk(t,r,(e.v||"").slice(0,255)));return}ht(n,1,C0(null,t,r))}function Dk(n,e,t,r){var a=Array.isArray(e),c=ur(e["!ref"]||"A1"),h,x="",v=[];if(c.e.c>255||c.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),h=zr(c)}for(var _=c.s.r;_<=c.e.r;++_){x=Ei(_);for(var T=c.s.c;T<=c.e.c;++T){_===c.s.r&&(v[T]=Li(T)),h=v[T]+x;var C=a?(e[_]||[])[T]:e[h];C&&Ok(n,C,_,T)}}}function Mk(n,e){for(var t=e||{},r=ls(),a=0,c=0;c<n.SheetNames.length;++c)n.SheetNames[c]==t.sheet&&(a=c);if(a==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ht(r,t.biff==4?1033:t.biff==3?521:9,R2(n,16,t)),Dk(r,n.Sheets[n.SheetNames[a]],a,t),ht(r,10),r.end()}function Lk(n,e,t){ht(n,49,ID({sz:12,name:"Arial"},t))}function kk(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&ht(n,1054,ND(a,e[a],t))})}function Pk(n,e){var t=je(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ht(n,2151,t),t=je(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),i4(ur(e["!ref"]||"A1"),t),t.write_shift(4,4),ht(n,2152,t)}function Fk(n,e){for(var t=0;t<16;++t)ht(n,224,rw({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){ht(n,224,rw(r,0,e))})}function Bk(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];ht(n,440,BD(r)),r[1].Tooltip&&ht(n,2048,UD(r))}delete e["!links"]}function Uk(n,e){if(e){var t=0;e.forEach(function(r,a){++t<=256&&r&&ht(n,125,jD(vd(a,r),a))})}}function Vk(n,e,t,r,a){var c=16+Fl(a.cellXfs,e,a);if(e.v==null&&!e.bf){ht(n,513,xc(t,r,c));return}if(e.bf)ht(n,6,uM(e,t,r,a,c));else switch(e.t){case"d":case"n":var h=e.t=="d"?cs(qi(e.v)):e.v;ht(n,515,LD(t,r,h,c));break;case"b":case"e":ht(n,517,MD(t,r,e.v,c,a,e.t));break;case"s":case"str":if(a.bookSST){var x=L2(a.Strings,e.v,a.revStrings);ht(n,253,bD(t,r,x,c))}else ht(n,516,RD(t,r,(e.v||"").slice(0,255),c,a));break;default:ht(n,513,xc(t,r,c))}}function Hk(n,e,t){var r=ls(),a=t.SheetNames[n],c=t.Sheets[a]||{},h=(t||{}).Workbook||{},x=(h.Sheets||[])[n]||{},v=Array.isArray(c),_=e.biff==8,T,C="",b=[],O=ur(c["!ref"]||"A1"),U=_?65536:16384;if(O.e.c>255||O.e.r>=U){if(e.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");O.e.c=Math.min(O.e.c,255),O.e.r=Math.min(O.e.c,U-1)}ht(r,2057,R2(t,16,e)),ht(r,13,Ks(1)),ht(r,12,Ks(100)),ht(r,15,Xi(!0)),ht(r,17,Xi(!1)),ht(r,16,pc(.001)),ht(r,95,Xi(!0)),ht(r,42,Xi(!1)),ht(r,43,Xi(!1)),ht(r,130,Ks(1)),ht(r,128,DD()),ht(r,131,Xi(!1)),ht(r,132,Xi(!1)),_&&Uk(r,c["!cols"]),ht(r,512,OD(O,e)),_&&(c["!links"]=[]);for(var M=O.s.r;M<=O.e.r;++M){C=Ei(M);for(var V=O.s.c;V<=O.e.c;++V){M===O.s.r&&(b[V]=Li(V)),T=b[V]+C;var le=v?(c[M]||[])[V]:c[T];le&&(Vk(r,le,M,V,e),_&&le.l&&c["!links"].push([T,le.l]))}}var ce=x.CodeName||x.name||a;return _&&ht(r,574,CD((h.Views||[])[0])),_&&(c["!merges"]||[]).length&&ht(r,229,FD(c["!merges"])),_&&Bk(r,c),ht(r,442,r4(ce)),_&&Pk(r,c),ht(r,10),r.end()}function jk(n,e,t){var r=ls(),a=(n||{}).Workbook||{},c=a.Sheets||[],h=a.WBProps||{},x=t.biff==8,v=t.biff==5;if(ht(r,2057,R2(n,5,t)),t.bookType=="xla"&&ht(r,135),ht(r,225,x?Ks(1200):null),ht(r,193,dD(2)),v&&ht(r,191),v&&ht(r,192),ht(r,226),ht(r,92,wD("SheetJS",t)),ht(r,66,Ks(x?1200:1252)),x&&ht(r,353,Ks(0)),x&&ht(r,448),ht(r,317,zD(n.SheetNames.length)),x&&n.vbaraw&&ht(r,211),x&&n.vbaraw){var _=h.CodeName||"ThisWorkbook";ht(r,442,r4(_))}ht(r,156,Ks(17)),ht(r,25,Xi(!1)),ht(r,18,Xi(!1)),ht(r,19,Ks(0)),x&&ht(r,431,Xi(!1)),x&&ht(r,444,Ks(0)),ht(r,61,SD()),ht(r,64,Xi(!1)),ht(r,141,Ks(0)),ht(r,34,Xi(qL(n)=="true")),ht(r,14,Xi(!0)),x&&ht(r,439,Xi(!1)),ht(r,218,Ks(0)),Lk(r,n,t),kk(r,n.SSF,t),Fk(r,t),x&&ht(r,352,Xi(!1));var T=r.end(),C=ls();x&&ht(C,140,VD()),x&&t.Strings&&bk(C,252,TD(t.Strings)),ht(C,10);var b=C.end(),O=ls(),U=0,M=0;for(M=0;M<n.SheetNames.length;++M)U+=(x?12:11)+(x?2:1)*n.SheetNames[M].length;var V=T.length+U+b.length;for(M=0;M<n.SheetNames.length;++M){var le=c[M]||{};ht(O,133,AD({pos:V,hs:le.Hidden||0,dt:0,name:n.SheetNames[M]},t)),V+=e[M].length}var ce=O.end();if(U!=ce.length)throw new Error("BS8 "+U+" != "+ce.length);var ie=[];return T.length&&ie.push(T),ce.length&&ie.push(ce),b.length&&ie.push(b),_i(ie)}function zk(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=us(br)),n&&n.SSF&&(pd(),md(n.SSF),t.revssf=xd(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,k2(t),t.cellXfs=[],Fl(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var a=0;a<n.SheetNames.length;++a)r[r.length]=Hk(a,t,n);return r.unshift(jk(n,r,t)),_i(r)}function N4(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var a=Os(r["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var c=e||{};switch(c.biff||2){case 8:case 5:return zk(n,e);case 4:case 3:case 2:return Mk(n,e)}throw new Error("invalid type "+c.bookType+" for BIFF")}function Gk(n,e,t,r){for(var a=n["!merges"]||[],c=[],h=e.s.c;h<=e.e.c;++h){for(var x=0,v=0,_=0;_<a.length;++_)if(!(a[_].s.r>t||a[_].s.c>h)&&!(a[_].e.r<t||a[_].e.c<h)){if(a[_].s.r<t||a[_].s.c<h){x=-1;break}x=a[_].e.r-a[_].s.r+1,v=a[_].e.c-a[_].s.c+1;break}if(!(x<0)){var T=Kn({r:t,c:h}),C=r.dense?(n[t]||[])[h]:n[T],b=C&&C.v!=null&&(C.h||v5(C.w||(bo(C),C.w)||""))||"",O={};x>1&&(O.rowspan=x),v>1&&(O.colspan=v),r.editable?b='<span contenteditable="true">'+b+"</span>":C&&(O["data-t"]=C&&C.t||"z",C.v!=null&&(O["data-v"]=C.v),C.z!=null&&(O["data-z"]=C.z),C.l&&(C.l.Target||"#").charAt(0)!="#"&&(b='<a href="'+C.l.Target+'">'+b+"</a>")),O.id=(r.id||"sjs")+"-"+T,c.push(ft("td",b,O))}}var U="<tr>";return U+c.join("")+"</tr>"}var Wk='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Xk="</body></html>";function qk(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function O4(n,e){var t=e||{},r=t.header!=null?t.header:Wk,a=t.footer!=null?t.footer:Xk,c=[r],h=Os(n["!ref"]);t.dense=Array.isArray(n),c.push(qk(n,h,t));for(var x=h.s.r;x<=h.e.r;++x)c.push(Gk(n,h,x,t));return c.push("</table>"+a),c.join("")}function D4(n,e,t){var r=t||{},a=0,c=0;if(r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var h=typeof r.origin=="string"?ii(r.origin):r.origin;a=h.r,c=h.c}var x=e.getElementsByTagName("tr"),v=Math.min(r.sheetRows||1e7,x.length),_={s:{r:0,c:0},e:{r:a,c}};if(n["!ref"]){var T=Os(n["!ref"]);_.s.r=Math.min(_.s.r,T.s.r),_.s.c=Math.min(_.s.c,T.s.c),_.e.r=Math.max(_.e.r,T.e.r),_.e.c=Math.max(_.e.c,T.e.c),a==-1&&(_.e.r=a=T.e.r+1)}var C=[],b=0,O=n["!rows"]||(n["!rows"]=[]),U=0,M=0,V=0,le=0,ce=0,ie=0;for(n["!cols"]||(n["!cols"]=[]);U<x.length&&M<v;++U){var me=x[U];if(uw(me)){if(r.display)continue;O[M]={hidden:!0}}var Ue=me.children;for(V=le=0;V<Ue.length;++V){var De=Ue[V];if(!(r.display&&uw(De))){var k=De.hasAttribute("data-v")?De.getAttribute("data-v"):De.hasAttribute("v")?De.getAttribute("v"):S5(De.innerHTML),H=De.getAttribute("data-z")||De.getAttribute("z");for(b=0;b<C.length;++b){var P=C[b];P.s.c==le+c&&P.s.r<M+a&&M+a<=P.e.r&&(le=P.e.c+1-c,b=-1)}ie=+De.getAttribute("colspan")||1,((ce=+De.getAttribute("rowspan")||1)>1||ie>1)&&C.push({s:{r:M+a,c:le+c},e:{r:M+a+(ce||1)-1,c:le+c+(ie||1)-1}});var te={t:"s",v:k},K=De.getAttribute("data-t")||De.getAttribute("t")||"";k!=null&&(k.length==0?te.t=K||"z":r.raw||k.trim().length==0||K=="s"||(k==="TRUE"?te={t:"b",v:!0}:k==="FALSE"?te={t:"b",v:!1}:isNaN(yo(k))?isNaN(i0(k).getDate())||(te={t:"d",v:qi(k)},r.cellDates||(te={t:"n",v:cs(te.v)}),te.z=r.dateNF||br[14]):te={t:"n",v:yo(k)})),te.z===void 0&&H!=null&&(te.z=H);var J="",Y=De.getElementsByTagName("A");if(Y&&Y.length)for(var dt=0;dt<Y.length&&!(Y[dt].hasAttribute("href")&&(J=Y[dt].getAttribute("href"),J.charAt(0)!="#"));++dt);J&&J.charAt(0)!="#"&&(te.l={Target:J}),r.dense?(n[M+a]||(n[M+a]=[]),n[M+a][le+c]=te):n[Kn({c:le+c,r:M+a})]=te,_.e.c<le+c&&(_.e.c=le+c),le+=ie}}++M}return C.length&&(n["!merges"]=(n["!merges"]||[]).concat(C)),_.e.r=Math.max(_.e.r,M-1+a),n["!ref"]=zr(_),M>=v&&(n["!fullref"]=zr((_.e.r=x.length-U+M-1+a,_))),n}function M4(n,e){var t=e||{},r=t.dense?[]:{};return D4(r,n,e)}function Yk(n,e){return Ec(M4(n,e),e)}function uw(n){var e="",t=Kk(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Kk(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Qk=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+a0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Wr+e}})(),fw=(function(){var n=function(c){return Yn(c).replace(/  +/g,function(h){return'<text:s text:c="'+h.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(c,h,x){var v=[];v.push('      <table:table table:name="'+Yn(h.SheetNames[x])+`" table:style-name="ta1">
`);var _=0,T=0,C=Os(c["!ref"]||"A1"),b=c["!merges"]||[],O=0,U=Array.isArray(c);if(c["!cols"])for(T=0;T<=C.e.c;++T)v.push("        <table:table-column"+(c["!cols"][T]?' table:style-name="co'+c["!cols"][T].ods+'"':"")+`></table:table-column>
`);var M="",V=c["!rows"]||[];for(_=0;_<C.s.r;++_)M=V[_]?' table:style-name="ro'+V[_].ods+'"':"",v.push("        <table:table-row"+M+`></table:table-row>
`);for(;_<=C.e.r;++_){for(M=V[_]?' table:style-name="ro'+V[_].ods+'"':"",v.push("        <table:table-row"+M+`>
`),T=0;T<C.s.c;++T)v.push(e);for(;T<=C.e.c;++T){var le=!1,ce={},ie="";for(O=0;O!=b.length;++O)if(!(b[O].s.c>T)&&!(b[O].s.r>_)&&!(b[O].e.c<T)&&!(b[O].e.r<_)){(b[O].s.c!=T||b[O].s.r!=_)&&(le=!0),ce["table:number-columns-spanned"]=b[O].e.c-b[O].s.c+1,ce["table:number-rows-spanned"]=b[O].e.r-b[O].s.r+1;break}if(le){v.push(t);continue}var me=Kn({r:_,c:T}),Ue=U?(c[_]||[])[T]:c[me];if(Ue&&Ue.f&&(ce["table:formula"]=Yn(pM(Ue.f)),Ue.F&&Ue.F.slice(0,me.length)==me)){var De=Os(Ue.F);ce["table:number-matrix-columns-spanned"]=De.e.c-De.s.c+1,ce["table:number-matrix-rows-spanned"]=De.e.r-De.s.r+1}if(!Ue){v.push(e);continue}switch(Ue.t){case"b":ie=Ue.v?"TRUE":"FALSE",ce["office:value-type"]="boolean",ce["office:boolean-value"]=Ue.v?"true":"false";break;case"n":ie=Ue.w||String(Ue.v||0),ce["office:value-type"]="float",ce["office:value"]=Ue.v||0;break;case"s":case"str":ie=Ue.v==null?"":Ue.v,ce["office:value-type"]="string";break;case"d":ie=Ue.w||qi(Ue.v).toISOString(),ce["office:value-type"]="date",ce["office:date-value"]=qi(Ue.v).toISOString(),ce["table:style-name"]="ce1";break;default:v.push(e);continue}var k=n(ie);if(Ue.l&&Ue.l.Target){var H=Ue.l.Target;H=H.charAt(0)=="#"?"#"+xM(H.slice(1)):H,H.charAt(0)!="#"&&!H.match(/^\w+:/)&&(H="../"+H),k=ft("text:a",k,{"xlink:href":H.replace(/&/g,"&amp;")})}v.push("          "+ft("table:table-cell",ft("text:p",k,{}),ce)+`
`)}v.push(`        </table:table-row>
`)}return v.push(`      </table:table>
`),v.join("")},a=function(c,h){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var x=0;h.SheetNames.map(function(_){return h.Sheets[_]}).forEach(function(_){if(_&&_["!cols"]){for(var T=0;T<_["!cols"].length;++T)if(_["!cols"][T]){var C=_["!cols"][T];if(C.width==null&&C.wpx==null&&C.wch==null)continue;N2(C),C.ods=x;var b=_["!cols"][T].wpx+"px";c.push('  <style:style style:name="co'+x+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+b+`"/>
`),c.push(`  </style:style>
`),++x}}});var v=0;h.SheetNames.map(function(_){return h.Sheets[_]}).forEach(function(_){if(_&&_["!rows"]){for(var T=0;T<_["!rows"].length;++T)if(_["!rows"][T]){_["!rows"][T].ods=v;var C=_["!rows"][T].hpx+"px";c.push('  <style:style style:name="ro'+v+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+C+`"/>
`),c.push(`  </style:style>
`),++v}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(h,x){var v=[Wr],_=a0({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),T=a0({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});x.bookType=="fods"?(v.push("<office:document"+_+T+`>
`),v.push(Y3().replace(/office:document-meta/g,"office:meta"))):v.push("<office:document-content"+_+`>
`),a(v,h),v.push(`  <office:body>
`),v.push(`    <office:spreadsheet>
`);for(var C=0;C!=h.SheetNames.length;++C)v.push(r(h.Sheets[h.SheetNames[C]],h,C));return v.push(`    </office:spreadsheet>
`),v.push(`  </office:body>
`),x.bookType=="fods"?v.push("</office:document>"):v.push("</office:document-content>"),v.join("")}})();function L4(n,e){if(e.bookType=="fods")return fw(n,e);var t=y2(),r="",a=[],c=[];return r="mimetype",an(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",an(t,r,fw(n,e)),a.push([r,"text/xml"]),c.push([r,"ContentFile"]),r="styles.xml",an(t,r,Qk(n,e)),a.push([r,"text/xml"]),c.push([r,"StylesFile"]),r="meta.xml",an(t,r,Wr+Y3()),a.push([r,"text/xml"]),c.push([r,"MetadataFile"]),r="manifest.rdf",an(t,r,lD(c)),a.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",an(t,r,aD(a)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function V1(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Zk(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):fa(s0(n))}function Jk(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function Dl(n){var e=n.reduce(function(a,c){return a+c.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(a){t.set(a,r),r+=a.length}),t}function $k(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,a=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var c=0;a>=1;++c,a/=256)n[e+c]=a&255;n[e+15]|=t>=0?0:128}function o0(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Xn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function yu(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Qr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],a=o0(n,t),c=a&7;a=Math.floor(a/8);var h=0,x;if(a==0)break;switch(c){case 0:{for(var v=t[0];n[t[0]++]>=128;);x=n.slice(v,t[0])}break;case 5:h=4,x=n.slice(t[0],t[0]+h),t[0]+=h;break;case 1:h=8,x=n.slice(t[0],t[0]+h),t[0]+=h;break;case 2:h=o0(n,t),x=n.slice(t[0],t[0]+h),t[0]+=h;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(a," at offset ").concat(r))}var _={data:x,type:c};e[a]==null?e[a]=[_]:e[a].push(_)}return e}function gi(n){var e=[];return n.forEach(function(t,r){t.forEach(function(a){a.data&&(e.push(Xn(r*8+a.type)),a.type==2&&e.push(Xn(a.data.length)),e.push(a.data))})}),Dl(e)}function ca(n){for(var e,t=[],r=[0];r[0]<n.length;){var a=o0(n,r),c=Qr(n.slice(r[0],r[0]+a));r[0]+=a;var h={id:yu(c[1][0].data),messages:[]};c[2].forEach(function(x){var v=Qr(x.data),_=yu(v[3][0].data);h.messages.push({meta:v,data:n.slice(r[0],r[0]+_)}),r[0]+=_}),(e=c[3])!=null&&e[0]&&(h.merge=yu(c[3][0].data)>>>0>0),t.push(h)}return t}function tu(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Xn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Xn(+!!t.merge),type:0}]);var a=[];t.messages.forEach(function(h){a.push(h.data),h.meta[3]=[{type:0,data:Xn(h.data.length)}],r[2].push({data:gi(h.meta),type:2})});var c=gi(r);e.push(Xn(c.length)),e.push(c),a.forEach(function(h){return e.push(h)})}),Dl(e)}function eP(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=o0(e,t),a=[];t[0]<e.length;){var c=e[t[0]]&3;if(c==0){var h=e[t[0]++]>>2;if(h<60)++h;else{var x=h-59;h=e[t[0]],x>1&&(h|=e[t[0]+1]<<8),x>2&&(h|=e[t[0]+2]<<16),x>3&&(h|=e[t[0]+3]<<24),h>>>=0,h++,t[0]+=x}a.push(e.slice(t[0],t[0]+h)),t[0]+=h;continue}else{var v=0,_=0;if(c==1?(_=(e[t[0]]>>2&7)+4,v=(e[t[0]++]&224)<<3,v|=e[t[0]++]):(_=(e[t[0]++]>>2)+1,c==2?(v=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(v=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),a=[Dl(a)],v==0)throw new Error("Invalid offset 0");if(v>a[0].length)throw new Error("Invalid offset beyond length");if(_>=v)for(a.push(a[0].slice(-v)),_-=v;_>=a[a.length-1].length;)a.push(a[a.length-1]),_-=a[a.length-1].length;a.push(a[0].slice(-v,-v+_))}}var T=Dl(a);if(T.length!=r)throw new Error("Unexpected length: ".concat(T.length," != ").concat(r));return T}function ua(n){for(var e=[],t=0;t<n.length;){var r=n[t++],a=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(eP(r,n.slice(t,t+a))),t+=a}if(t!==n.length)throw new Error("data is not a valid framed stream!");return Dl(e)}function nu(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),a=new Uint8Array(4);e.push(a);var c=Xn(r),h=c.length;e.push(c),r<=60?(h++,e.push(new Uint8Array([r-1<<2]))):r<=256?(h+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(h+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(h+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(h+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),h+=r,a[0]=0,a[1]=h&255,a[2]=h>>8&255,a[3]=h>>16&255,t+=r}return Dl(e)}function Mm(n,e){var t=new Uint8Array(32),r=V1(t),a=12,c=0;switch(t[0]=5,n.t){case"n":t[1]=2,$k(t,a,n.v),c|=1,a+=16;break;case"b":t[1]=6,r.setFloat64(a,n.v?1:0,!0),c|=2,a+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(a,e.indexOf(n.v),!0),c|=8,a+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,c,!0),t.slice(0,a)}function Lm(n,e){var t=new Uint8Array(32),r=V1(t),a=12,c=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(a,n.v,!0),c|=32,a+=8;break;case"b":t[2]=6,r.setFloat64(a,n.v?1:0,!0),c|=32,a+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(a,e.indexOf(n.v),!0),c|=16,a+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,c,!0),t.slice(0,a)}function cl(n){var e=Qr(n);return o0(e[1][0].data)}function tP(n,e,t){var r,a,c,h;if(!((r=n[6])!=null&&r[0])||!((a=n[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var x=((h=(c=n[8])==null?void 0:c[0])==null?void 0:h.data)&&yu(n[8][0].data)>0||!1;if(x)throw"Math only works with normal offsets";for(var v=0,_=V1(n[7][0].data),T=0,C=[],b=V1(n[4][0].data),O=0,U=[],M=0;M<e.length;++M){if(e[M]==null){_.setUint16(M*2,65535,!0),b.setUint16(M*2,65535);continue}_.setUint16(M*2,T,!0),b.setUint16(M*2,O,!0);var V,le;switch(typeof e[M]){case"string":V=Mm({t:"s",v:e[M]},t),le=Lm({t:"s",v:e[M]},t);break;case"number":V=Mm({t:"n",v:e[M]},t),le=Lm({t:"n",v:e[M]},t);break;case"boolean":V=Mm({t:"b",v:e[M]},t),le=Lm({t:"b",v:e[M]},t);break;default:throw new Error("Unsupported value "+e[M])}C.push(V),T+=V.length,U.push(le),O+=le.length,++v}for(n[2][0].data=Xn(v);M<n[7][0].data.length/2;++M)_.setUint16(M*2,65535,!0),b.setUint16(M*2,65535,!0);return n[6][0].data=Dl(C),n[3][0].data=Dl(U),v}function nP(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Os(t["!ref"]);r.s.r=r.s.c=0;var a=!1;r.e.c>9&&(a=!0,r.e.c=9),r.e.r>49&&(a=!0,r.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(zr(r)));var c=H1(t,{range:r,header:1}),h=["~Sh33tJ5~"];c.forEach(function(ue){return ue.forEach(function(se){typeof se=="string"&&h.push(se)})});var x={},v=[],_=$n.read(e.numbers,{type:"base64"});_.FileIndex.map(function(ue,se){return[ue,_.FullPaths[se]]}).forEach(function(ue){var se=ue[0],fe=ue[1];if(se.type==2&&se.name.match(/\.iwa/)){var pe=se.content,Je=ua(pe),rt=ca(Je);rt.forEach(function(at){v.push(at.id),x[at.id]={deps:[],location:fe,type:yu(at.messages[0].meta[1][0].data)}})}}),v.sort(function(ue,se){return ue-se});var T=v.filter(function(ue){return ue>1}).map(function(ue){return[ue,Xn(ue)]});_.FileIndex.map(function(ue,se){return[ue,_.FullPaths[se]]}).forEach(function(ue){var se=ue[0];if(ue[1],!!se.name.match(/\.iwa/)){var fe=ca(ua(se.content));fe.forEach(function(pe){pe.messages.forEach(function(Je){T.forEach(function(rt){pe.messages.some(function(at){return yu(at.meta[1][0].data)!=11006&&Jk(at.data,rt[1])})&&x[rt[0]].deps.push(pe.id)})})})}});for(var C=$n.find(_,x[1].location),b=ca(ua(C.content)),O,U=0;U<b.length;++U){var M=b[U];M.id==1&&(O=M)}var V=cl(Qr(O.messages[0].data)[1][0].data);for(C=$n.find(_,x[V].location),b=ca(ua(C.content)),U=0;U<b.length;++U)M=b[U],M.id==V&&(O=M);for(V=cl(Qr(O.messages[0].data)[2][0].data),C=$n.find(_,x[V].location),b=ca(ua(C.content)),U=0;U<b.length;++U)M=b[U],M.id==V&&(O=M);for(V=cl(Qr(O.messages[0].data)[2][0].data),C=$n.find(_,x[V].location),b=ca(ua(C.content)),U=0;U<b.length;++U)M=b[U],M.id==V&&(O=M);var le=Qr(O.messages[0].data);{le[6][0].data=Xn(r.e.r+1),le[7][0].data=Xn(r.e.c+1);var ce=cl(le[46][0].data),ie=$n.find(_,x[ce].location),me=ca(ua(ie.content));{for(var Ue=0;Ue<me.length&&me[Ue].id!=ce;++Ue);if(me[Ue].id!=ce)throw"Bad ColumnRowUIDMapArchive";var De=Qr(me[Ue].messages[0].data);De[1]=[],De[2]=[],De[3]=[];for(var k=0;k<=r.e.c;++k){var H=[];H[1]=H[2]=[{type:0,data:Xn(k+420690)}],De[1].push({type:2,data:gi(H)}),De[2].push({type:0,data:Xn(k)}),De[3].push({type:0,data:Xn(k)})}De[4]=[],De[5]=[],De[6]=[];for(var P=0;P<=r.e.r;++P)H=[],H[1]=H[2]=[{type:0,data:Xn(P+726270)}],De[4].push({type:2,data:gi(H)}),De[5].push({type:0,data:Xn(P)}),De[6].push({type:0,data:Xn(P)});me[Ue].messages[0].data=gi(De)}ie.content=nu(tu(me)),ie.size=ie.content.length,delete le[46];var te=Qr(le[4][0].data);{te[7][0].data=Xn(r.e.r+1);var K=Qr(te[1][0].data),J=cl(K[2][0].data);ie=$n.find(_,x[J].location),me=ca(ua(ie.content));{if(me[0].id!=J)throw"Bad HeaderStorageBucket";var Y=Qr(me[0].messages[0].data);for(P=0;P<c.length;++P){var dt=Qr(Y[2][0].data);dt[1][0].data=Xn(P),dt[4][0].data=Xn(c[P].length),Y[2][P]={type:Y[2][0].type,data:gi(dt)}}me[0].messages[0].data=gi(Y)}ie.content=nu(tu(me)),ie.size=ie.content.length;var ye=cl(te[2][0].data);ie=$n.find(_,x[ye].location),me=ca(ua(ie.content));{if(me[0].id!=ye)throw"Bad HeaderStorageBucket";for(Y=Qr(me[0].messages[0].data),k=0;k<=r.e.c;++k)dt=Qr(Y[2][0].data),dt[1][0].data=Xn(k),dt[4][0].data=Xn(r.e.r+1),Y[2][k]={type:Y[2][0].type,data:gi(dt)};me[0].messages[0].data=gi(Y)}ie.content=nu(tu(me)),ie.size=ie.content.length;var Se=cl(te[4][0].data);(function(){for(var ue=$n.find(_,x[Se].location),se=ca(ua(ue.content)),fe,pe=0;pe<se.length;++pe){var Je=se[pe];Je.id==Se&&(fe=Je)}var rt=Qr(fe.messages[0].data);{rt[3]=[];var at=[];h.forEach(function(Ut,Rt){at[1]=[{type:0,data:Xn(Rt)}],at[2]=[{type:0,data:Xn(1)}],at[3]=[{type:2,data:Zk(Ut)}],rt[3].push({type:2,data:gi(at)})})}fe.messages[0].data=gi(rt);var lt=tu(se),Mt=nu(lt);ue.content=Mt,ue.size=ue.content.length})();var Pe=Qr(te[3][0].data);{var gt=Pe[1][0];delete Pe[2];var yt=Qr(gt.data);{var Ke=cl(yt[2][0].data);(function(){for(var ue=$n.find(_,x[Ke].location),se=ca(ua(ue.content)),fe,pe=0;pe<se.length;++pe){var Je=se[pe];Je.id==Ke&&(fe=Je)}var rt=Qr(fe.messages[0].data);{delete rt[6],delete Pe[7];var at=new Uint8Array(rt[5][0].data);rt[5]=[];for(var lt=0,Mt=0;Mt<=r.e.r;++Mt){var Ut=Qr(at);lt+=tP(Ut,c[Mt],h),Ut[1][0].data=Xn(Mt),rt[5].push({data:gi(Ut),type:2})}rt[1]=[{type:0,data:Xn(r.e.c+1)}],rt[2]=[{type:0,data:Xn(r.e.r+1)}],rt[3]=[{type:0,data:Xn(lt)}],rt[4]=[{type:0,data:Xn(r.e.r+1)}]}fe.messages[0].data=gi(rt);var Rt=tu(se),_t=nu(Rt);ue.content=_t,ue.size=ue.content.length})()}gt.data=gi(yt)}te[3][0].data=gi(Pe)}le[4][0].data=gi(te)}O.messages[0].data=gi(le);var he=tu(b),q=nu(he);return C.content=q,C.size=C.content.length,_}function rP(n){return function(t){for(var r=0;r!=n.length;++r){var a=n[r];t[a[0]]===void 0&&(t[a[0]]=a[1]),a[2]==="n"&&(t[a[0]]=Number(t[a[0]]))}}}function k2(n){rP([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function iP(n,e){return e.bookType=="ods"?L4(n,e):e.bookType=="numbers"?nP(n,e):e.bookType=="xlsb"?sP(n,e):aP(n,e)}function sP(n,e){cu=1024,n&&!n.SSF&&(n.SSF=us(br)),n&&n.SSF&&(pd(),md(n.SSF),e.revssf=xd(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Gf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=p4.indexOf(e.bookType)>-1,a=W3();k2(e=e||{});var c=y2(),h="",x=0;if(e.cellXfs=[],Fl(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),h="docProps/core.xml",an(c,h,K3(n.Props,e)),a.coreprops.push(h),qn(e.rels,2,h,Dn.CORE_PROPS),h="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var v=[],_=0;_<n.SheetNames.length;++_)(n.Workbook.Sheets[_]||{}).Hidden!=2&&v.push(n.SheetNames[_]);n.Props.SheetNames=v}for(n.Props.Worksheets=n.Props.SheetNames.length,an(c,h,Z3(n.Props)),a.extprops.push(h),qn(e.rels,3,h,Dn.EXT_PROPS),n.Custprops!==n.Props&&wi(n.Custprops||{}).length>0&&(h="docProps/custom.xml",an(c,h,J3(n.Custprops)),a.custprops.push(h),qn(e.rels,4,h,Dn.CUST_PROPS)),x=1;x<=n.SheetNames.length;++x){var T={"!id":{}},C=n.Sheets[n.SheetNames[x-1]],b=(C||{})["!type"]||"sheet";switch(b){case"chart":default:h="xl/worksheets/sheet"+x+"."+t,an(c,h,lk(x-1,h,e,n,T)),a.sheets.push(h),qn(e.wbrels,-1,"worksheets/sheet"+x+"."+t,Dn.WS[0])}if(C){var O=C["!comments"],U=!1,M="";O&&O.length>0&&(M="xl/comments"+x+"."+t,an(c,M,fk(O,M)),a.comments.push(M),qn(T,-1,"../comments"+x+"."+t,Dn.CMNT),U=!0),C["!legacy"]&&U&&an(c,"xl/drawings/vmlDrawing"+x+".vml",g4(x,C["!comments"])),delete C["!comments"],delete C["!legacy"]}T["!id"].rId1&&an(c,q3(h),xu(T))}return e.Strings!=null&&e.Strings.length>0&&(h="xl/sharedStrings."+t,an(c,h,uk(e.Strings,h,e)),a.strs.push(h),qn(e.wbrels,-1,"sharedStrings."+t,Dn.SST)),h="xl/workbook."+t,an(c,h,ok(n,h)),a.workbooks.push(h),qn(e.rels,1,h,Dn.WB),h="xl/theme/theme1.xml",an(c,h,h4(n.Themes,e)),a.themes.push(h),qn(e.wbrels,-1,"theme/theme1.xml",Dn.THEME),h="xl/styles."+t,an(c,h,ck(n,h,e)),a.styles.push(h),qn(e.wbrels,-1,"styles."+t,Dn.STY),n.vbaraw&&r&&(h="xl/vbaProject.bin",an(c,h,n.vbaraw),a.vba.push(h),qn(e.wbrels,-1,"vbaProject.bin",Dn.VBA)),h="xl/metadata."+t,an(c,h,hk(h)),a.metadata.push(h),qn(e.wbrels,-1,"metadata."+t,Dn.XLMETA),an(c,"[Content_Types].xml",X3(a,e)),an(c,"_rels/.rels",xu(e.rels)),an(c,"xl/_rels/workbook."+t+".rels",xu(e.wbrels)),delete e.revssf,delete e.ssf,c}function aP(n,e){cu=1024,n&&!n.SSF&&(n.SSF=us(br)),n&&n.SSF&&(pd(),md(n.SSF),e.revssf=xd(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Gf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=p4.indexOf(e.bookType)>-1,a=W3();k2(e=e||{});var c=y2(),h="",x=0;if(e.cellXfs=[],Fl(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),h="docProps/core.xml",an(c,h,K3(n.Props,e)),a.coreprops.push(h),qn(e.rels,2,h,Dn.CORE_PROPS),h="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var v=[],_=0;_<n.SheetNames.length;++_)(n.Workbook.Sheets[_]||{}).Hidden!=2&&v.push(n.SheetNames[_]);n.Props.SheetNames=v}n.Props.Worksheets=n.Props.SheetNames.length,an(c,h,Z3(n.Props)),a.extprops.push(h),qn(e.rels,3,h,Dn.EXT_PROPS),n.Custprops!==n.Props&&wi(n.Custprops||{}).length>0&&(h="docProps/custom.xml",an(c,h,J3(n.Custprops)),a.custprops.push(h),qn(e.rels,4,h,Dn.CUST_PROPS));var T=["SheetJ5"];for(e.tcid=0,x=1;x<=n.SheetNames.length;++x){var C={"!id":{}},b=n.Sheets[n.SheetNames[x-1]],O=(b||{})["!type"]||"sheet";switch(O){case"chart":default:h="xl/worksheets/sheet"+x+"."+t,an(c,h,S4(x-1,e,n,C)),a.sheets.push(h),qn(e.wbrels,-1,"worksheets/sheet"+x+"."+t,Dn.WS[0])}if(b){var U=b["!comments"],M=!1,V="";if(U&&U.length>0){var le=!1;U.forEach(function(ce){ce[1].forEach(function(ie){ie.T==!0&&(le=!0)})}),le&&(V="xl/threadedComments/threadedComment"+x+"."+t,an(c,V,F7(U,T,e)),a.threadedcomments.push(V),qn(C,-1,"../threadedComments/threadedComment"+x+"."+t,Dn.TCMNT)),V="xl/comments"+x+"."+t,an(c,V,m4(U)),a.comments.push(V),qn(C,-1,"../comments"+x+"."+t,Dn.CMNT),M=!0}b["!legacy"]&&M&&an(c,"xl/drawings/vmlDrawing"+x+".vml",g4(x,b["!comments"])),delete b["!comments"],delete b["!legacy"]}C["!id"].rId1&&an(c,q3(h),xu(C))}return e.Strings!=null&&e.Strings.length>0&&(h="xl/sharedStrings."+t,an(c,h,a4(e.Strings,e)),a.strs.push(h),qn(e.wbrels,-1,"sharedStrings."+t,Dn.SST)),h="xl/workbook."+t,an(c,h,b4(n)),a.workbooks.push(h),qn(e.rels,1,h,Dn.WB),h="xl/theme/theme1.xml",an(c,h,h4(n.Themes,e)),a.themes.push(h),qn(e.wbrels,-1,"theme/theme1.xml",Dn.THEME),h="xl/styles."+t,an(c,h,u4(n,e)),a.styles.push(h),qn(e.wbrels,-1,"styles."+t,Dn.STY),n.vbaraw&&r&&(h="xl/vbaProject.bin",an(c,h,n.vbaraw),a.vba.push(h),qn(e.wbrels,-1,"vbaProject.bin",Dn.VBA)),h="xl/metadata."+t,an(c,h,d4()),a.metadata.push(h),qn(e.wbrels,-1,"metadata."+t,Dn.XLMETA),T.length>1&&(h="xl/persons/person.xml",an(c,h,B7(T)),a.people.push(h),qn(e.wbrels,-1,"persons/person.xml",Dn.PEOPLE)),an(c,"[Content_Types].xml",X3(a,e)),an(c,"_rels/.rels",xu(e.rels)),an(c,"xl/_rels/workbook."+t+".rels",xu(e.wbrels)),delete e.revssf,delete e.ssf,c}function oP(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Io(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function k4(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return w0(e.file,$n.write(n,{type:kn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return $n.write(n,e)}function lP(n,e){var t=us(e||{}),r=iP(n,t);return cP(r,t)}function cP(n,e){var t={},r=kn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var a=n.FullPaths?$n.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(gd(a))}return e.password&&typeof encrypt_agile<"u"?k4(encrypt_agile(a,e.password),e):e.type==="file"?w0(e.file,a):e.type=="string"?Vf(a):a}function uP(n,e){var t=e||{},r=Ck(n,t);return k4(r,t)}function ba(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return r0(s0(r));case"binary":return s0(r);case"string":return n;case"file":return w0(e.file,r,"utf8");case"buffer":return kn?Do(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):ba(r,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function fP(n,e){switch(e.type){case"base64":return r0(n);case"binary":return n;case"string":return n;case"file":return w0(e.file,n,"binary");case"buffer":return kn?Do(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Xh(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?r0(t):e.type=="string"?Vf(t):t;case"file":return w0(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function P4(n,e){UO(),QL(n);var t=us(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=P4(n,t);return t.type="array",gd(r)}var a=0;if(t.sheet&&(typeof t.sheet=="number"?a=t.sheet:a=n.SheetNames.indexOf(t.sheet),!n.SheetNames[a]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return ba(Tk(n,t),t);case"slk":case"sylk":return ba(qD.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"htm":case"html":return ba(O4(n.Sheets[n.SheetNames[a]],t),t);case"txt":return fP(F4(n.Sheets[n.SheetNames[a]],t),t);case"csv":return ba(P2(n.Sheets[n.SheetNames[a]],t),t,"\uFEFF");case"dif":return ba(YD.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"dbf":return Xh(XD.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"prn":return ba(KD.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"rtf":return ba(n7.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"eth":return ba(s4.from_sheet(n.Sheets[n.SheetNames[a]],t),t);case"fods":return ba(L4(n,t),t);case"wk1":return Xh(iw.sheet_to_wk1(n.Sheets[n.SheetNames[a]],t),t);case"wk3":return Xh(iw.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Xh(N4(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),uP(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return lP(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function hP(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function dP(n,e,t){var r={};return r.type="file",r.file=e,hP(r),P4(n,r)}function gP(n,e,t,r,a,c,h,x){var v=Ei(t),_=x.defval,T=x.raw||!Object.prototype.hasOwnProperty.call(x,"raw"),C=!0,b=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(b,"__rowNum__",{value:t,enumerable:!1})}catch{b.__rowNum__=t}else b.__rowNum__=t;if(!h||n[t])for(var O=e.s.c;O<=e.e.c;++O){var U=h?n[t][O]:n[r[O]+v];if(U===void 0||U.t===void 0){if(_===void 0)continue;c[O]!=null&&(b[c[O]]=_);continue}var M=U.v;switch(U.t){case"z":if(M==null)break;continue;case"e":M=M==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+U.t)}if(c[O]!=null){if(M==null)if(U.t=="e"&&M===null)b[c[O]]=null;else if(_!==void 0)b[c[O]]=_;else if(T&&M===null)b[c[O]]=null;else continue;else b[c[O]]=T&&(U.t!=="n"||U.t==="n"&&x.rawNumbers!==!1)?M:bo(U,M,x);M!=null&&(C=!1)}}return{row:b,isempty:C}}function H1(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,a=1,c=[],h=0,x="",v={s:{r:0,c:0},e:{r:0,c:0}},_=e||{},T=_.range!=null?_.range:n["!ref"];switch(_.header===1?r=1:_.header==="A"?r=2:Array.isArray(_.header)?r=3:_.header==null&&(r=0),typeof T){case"string":v=ur(T);break;case"number":v=ur(n["!ref"]),v.s.r=T;break;default:v=T}r>0&&(a=0);var C=Ei(v.s.r),b=[],O=[],U=0,M=0,V=Array.isArray(n),le=v.s.r,ce=0,ie={};V&&!n[le]&&(n[le]=[]);var me=_.skipHidden&&n["!cols"]||[],Ue=_.skipHidden&&n["!rows"]||[];for(ce=v.s.c;ce<=v.e.c;++ce)if(!(me[ce]||{}).hidden)switch(b[ce]=Li(ce),t=V?n[le][ce]:n[b[ce]+C],r){case 1:c[ce]=ce-v.s.c;break;case 2:c[ce]=b[ce];break;case 3:c[ce]=_.header[ce-v.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),x=h=bo(t,null,_),M=ie[h]||0,!M)ie[h]=1;else{do x=h+"_"+M++;while(ie[x]);ie[h]=M,ie[x]=1}c[ce]=x}for(le=v.s.r+a;le<=v.e.r;++le)if(!(Ue[le]||{}).hidden){var De=gP(n,v,le,b,r,c,V,_);(De.isempty===!1||(r===1?_.blankrows!==!1:_.blankrows))&&(O[U++]=De.row)}return O.length=U,O}var hw=/"/g;function mP(n,e,t,r,a,c,h,x){for(var v=!0,_=[],T="",C=Ei(t),b=e.s.c;b<=e.e.c;++b)if(r[b]){var O=x.dense?(n[t]||[])[b]:n[r[b]+C];if(O==null)T="";else if(O.v!=null){v=!1,T=""+(x.rawNumbers&&O.t=="n"?O.v:bo(O,null,x));for(var U=0,M=0;U!==T.length;++U)if((M=T.charCodeAt(U))===a||M===c||M===34||x.forceQuotes){T='"'+T.replace(hw,'""')+'"';break}T=="ID"&&(T='"ID"')}else O.f!=null&&!O.F?(v=!1,T="="+O.f,T.indexOf(",")>=0&&(T='"'+T.replace(hw,'""')+'"')):T="";_.push(T)}return x.blankrows===!1&&v?null:_.join(h)}function P2(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var a=ur(n["!ref"]),c=r.FS!==void 0?r.FS:",",h=c.charCodeAt(0),x=r.RS!==void 0?r.RS:`
`,v=x.charCodeAt(0),_=new RegExp((c=="|"?"\\|":c)+"+$"),T="",C=[];r.dense=Array.isArray(n);for(var b=r.skipHidden&&n["!cols"]||[],O=r.skipHidden&&n["!rows"]||[],U=a.s.c;U<=a.e.c;++U)(b[U]||{}).hidden||(C[U]=Li(U));for(var M=0,V=a.s.r;V<=a.e.r;++V)(O[V]||{}).hidden||(T=mP(n,a,V,C,h,v,c,r),T!=null&&(r.strip&&(T=T.replace(_,"")),(T||r.blankrows!==!1)&&t.push((M++?x:"")+T)));return delete r.dense,t.join("")}function F4(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=P2(n,e);return t}function pP(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var a=ur(n["!ref"]),c="",h=[],x,v=[],_=Array.isArray(n);for(x=a.s.c;x<=a.e.c;++x)h[x]=Li(x);for(var T=a.s.r;T<=a.e.r;++T)for(c=Ei(T),x=a.s.c;x<=a.e.c;++x)if(e=h[x]+c,t=_?(n[T]||[])[x]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}v[v.length]=e+"="+r}return v}function B4(n,e,t){var r=t||{},a=+!r.skipHeader,c=n||{},h=0,x=0;if(c&&r.origin!=null)if(typeof r.origin=="number")h=r.origin;else{var v=typeof r.origin=="string"?ii(r.origin):r.origin;h=v.r,x=v.c}var _,T={s:{c:0,r:0},e:{c:x,r:h+e.length-1+a}};if(c["!ref"]){var C=ur(c["!ref"]);T.e.c=Math.max(T.e.c,C.e.c),T.e.r=Math.max(T.e.r,C.e.r),h==-1&&(h=C.e.r+1,T.e.r=h+e.length-1+a)}else h==-1&&(h=0,T.e.r=e.length-1+a);var b=r.header||[],O=0;e.forEach(function(M,V){wi(M).forEach(function(le){(O=b.indexOf(le))==-1&&(b[O=b.length]=le);var ce=M[le],ie="z",me="",Ue=Kn({c:x+O,r:h+V+a});_=l0(c,Ue),ce&&typeof ce=="object"&&!(ce instanceof Date)?c[Ue]=ce:(typeof ce=="number"?ie="n":typeof ce=="boolean"?ie="b":typeof ce=="string"?ie="s":ce instanceof Date?(ie="d",r.cellDates||(ie="n",ce=cs(ce)),me=r.dateNF||br[14]):ce===null&&r.nullError&&(ie="e",ce=0),_?(_.t=ie,_.v=ce,delete _.w,delete _.R,me&&(_.z=me)):c[Ue]=_={t:ie,v:ce},me&&(_.z=me))})}),T.e.c=Math.max(T.e.c,x+b.length-1);var U=Ei(h);if(a)for(O=0;O<b.length;++O)c[Li(O+x)+U]={t:"s",v:b[O]};return c["!ref"]=zr(T),c}function xP(n,e){return B4(null,n,e)}function l0(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=ii(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?l0(n,Kn(e)):l0(n,Kn({r:e,c:t||0}))}function _P(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function yP(){return{SheetNames:[],Sheets:{}}}function EP(n,e,t,r){var a=1;if(!t)for(;a<=65535&&n.SheetNames.indexOf(t="Sheet"+a)!=-1;++a,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var c=t.match(/(^.*?)(\d+)$/);a=c&&+c[2]||0;var h=c&&c[1]||t;for(++a;a<=65535&&n.SheetNames.indexOf(t=h+a)!=-1;++a);}if(I4(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function vP(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=_P(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function wP(n,e){return n.z=e,n}function U4(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function AP(n,e,t){return U4(n,"#"+e,t)}function TP(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function SP(n,e,t,r){for(var a=typeof e!="string"?e:ur(e),c=typeof e=="string"?e:zr(e),h=a.s.r;h<=a.e.r;++h)for(var x=a.s.c;x<=a.e.c;++x){var v=l0(n,h,x);v.t="n",v.F=c,delete v.v,h==a.s.r&&x==a.s.c&&(v.f=t,r&&(v.D=!0))}return n}var km={encode_col:Li,encode_row:Ei,encode_cell:Kn,encode_range:zr,decode_col:S2,decode_row:T2,split_cell:U5,decode_cell:ii,decode_range:Os,format_cell:bo,sheet_add_aoa:U3,sheet_add_json:B4,sheet_add_dom:D4,aoa_to_sheet:Bu,json_to_sheet:xP,table_to_sheet:M4,table_to_book:Yk,sheet_to_csv:P2,sheet_to_txt:F4,sheet_to_json:H1,sheet_to_html:O4,sheet_to_formulae:pP,sheet_to_row_object_array:H1,sheet_get_cell:l0,book_new:yP,book_append_sheet:EP,book_set_sheet_visibility:vP,cell_set_number_format:wP,cell_set_hyperlink:U4,cell_set_internal_link:AP,cell_add_comment:TP,sheet_set_array_formula:SP,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Wf=n=>n?(n.toDate?n.toDate():new Date(n)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A",s1=n=>n?(n.toDate?n.toDate():new Date(n)).toISOString().split("T")[0]:"",dw=n=>n?`${n.substring(0,8)}...`:"N/A",j1=n=>n?n.isAnonymous?`Guest (${dw(n.uid)})`:n.name||`User (${dw(n.uid)})`:"System",vo=1,Na=["All Temperatures","RT (Room Temp)","2-8 C (Refrigerated)","-18 to -40 C (Frozen)"],as=[{name:"All Sections",color:"bg-gray-200 text-gray-800"},{name:"Blood Bank",color:"bg-red-100 text-red-800"},{name:"Chemistry",color:"bg-blue-100 text-blue-800"},{name:"Hematology",color:"bg-pink-100 text-pink-800"},{name:"Histology",color:"bg-purple-100 text-purple-800"},{name:"Microbiology",color:"bg-yellow-100 text-yellow-800"},{name:"Molecular Diagnostics",color:"bg-indigo-100 text-indigo-800"},{name:"Office Items",color:"bg-gray-100 text-gray-800"},{name:"Phlebotomy",color:"bg-green-100 text-green-800"}],CP=n=>{const e=as.find(t=>t.name===n);return e?e.color:"bg-gray-100 text-gray-800"},gw="lab_inventory_last_section",qh=["All Statuses","Low Stock","Expiring/Expired"];var wt;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(wt||(wt={}));var mw=new Map([[wt.QR_CODE,"QR_CODE"],[wt.AZTEC,"AZTEC"],[wt.CODABAR,"CODABAR"],[wt.CODE_39,"CODE_39"],[wt.CODE_93,"CODE_93"],[wt.CODE_128,"CODE_128"],[wt.DATA_MATRIX,"DATA_MATRIX"],[wt.MAXICODE,"MAXICODE"],[wt.ITF,"ITF"],[wt.EAN_13,"EAN_13"],[wt.EAN_8,"EAN_8"],[wt.PDF_417,"PDF_417"],[wt.RSS_14,"RSS_14"],[wt.RSS_EXPANDED,"RSS_EXPANDED"],[wt.UPC_A,"UPC_A"],[wt.UPC_E,"UPC_E"],[wt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),pw;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(pw||(pw={}));function IP(n){return Object.values(wt).includes(n)}var z1;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(z1||(z1={}));var bP=(function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[z1.SCAN_TYPE_CAMERA,z1.SCAN_TYPE_FILE],n})(),V4=(function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!mw.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,mw.get(e))},n})(),xw=(function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n})(),gp;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(gp||(gp={}));var RP=(function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:gp.UNKWOWN_ERROR}},n})(),NP=(function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n})();function mo(n){return typeof n>"u"||n===null}var uu=(function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n})(),H4=(function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],c=new Set(a),h=Object.keys(e),x=0,v=h;x<v.length;x++){var _=v[x];if(c.has(_))return t.logError("".concat(_," is not supported videoConstaints."),!0),!1}return!0},n})(),Df={exports:{}},OP=Df.exports,_w;function DP(){return _w||(_w=1,(function(n,e){(function(t,r){r(e)})(OP,(function(t){function r(F){return F==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,s){F.__proto__=s}||function(F,s){for(var l in s)s.hasOwnProperty(l)&&(F[l]=s[l])};function c(F,s){a(F,s);function l(){this.constructor=F}F.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}function h(F,s){var l=Object.setPrototypeOf;l?l(F,s):F.__proto__=s}function x(F,s){s===void 0&&(s=F.constructor);var l=Error.captureStackTrace;l&&l(F,s)}var v=(function(F){c(s,F);function s(l){var u=this.constructor,d=F.call(this,l)||this;return Object.defineProperty(d,"name",{value:u.name,enumerable:!1}),h(d,u.prototype),x(d),d}return s})(Error);class _ extends v{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}_.kind="Exception";class T extends _{}T.kind="ArgumentException";class C extends _{}C.kind="IllegalArgumentException";class b{constructor(s){if(this.binarizer=s,s===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,l){return this.binarizer.getBlackRow(s,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,l,u,d){const g=this.binarizer.getLuminanceSource().crop(s,l,u,d);return new b(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class O extends _{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class U{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(s,l,u,d,g){for(;g--;)u[d++]=s[l++]}static currentTimeMillis(){return Date.now()}}class V extends _{}V.kind="IndexOutOfBoundsException";class le extends V{constructor(s=void 0,l=void 0){super(l),this.index=s,this.message=l}}le.kind="ArrayIndexOutOfBoundsException";class ce{static fill(s,l){for(let u=0,d=s.length;u<d;u++)s[u]=l}static fillWithin(s,l,u,d){ce.rangeCheck(s.length,l,u);for(let g=l;g<u;g++)s[g]=d}static rangeCheck(s,l,u){if(l>u)throw new C("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new le(l);if(u>s)throw new le(u)}static asList(...s){return s}static create(s,l,u){return Array.from({length:s}).map(g=>Array.from({length:l}).fill(u))}static createInt32Array(s,l,u){return Array.from({length:s}).map(g=>Int32Array.from({length:l}).fill(u))}static equals(s,l){if(!s||!l||!s.length||!l.length||s.length!==l.length)return!1;for(let u=0,d=s.length;u<d;u++)if(s[u]!==l[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let l=1;for(const u of s)l=31*l+u;return l}static fillUint8Array(s,l){for(let u=0;u!==s.length;u++)s[u]=l}static copyOf(s,l){return s.slice(0,l)}static copyOfUint8Array(s,l){if(s.length<=l){const u=new Uint8Array(l);return u.set(s),u}return s.slice(0,l)}static copyOfRange(s,l,u){const d=u-l,g=new Int32Array(d);return M.arraycopy(s,l,g,0,d),g}static binarySearch(s,l,u){u===void 0&&(u=ce.numberComparator);let d=0,g=s.length-1;for(;d<=g;){const p=g+d>>1,E=u(l,s[p]);if(E>0)d=p+1;else if(E<0)g=p-1;else return p}return-d-1}static numberComparator(s,l){return s-l}}class ie{static numberOfTrailingZeros(s){let l;if(s===0)return 32;let u=31;return l=s<<16,l!==0&&(u-=16,s=l),l=s<<8,l!==0&&(u-=8,s=l),l=s<<4,l!==0&&(u-=4,s=l),l=s<<2,l!==0&&(u-=2,s=l),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let l=1;return s>>>16||(l+=16,s<<=16),s>>>24||(l+=8,s<<=8),s>>>28||(l+=4,s<<=4),s>>>30||(l+=2,s<<=2),l-=s>>>31,l}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,l){return Math.trunc(s/l)}static parseInt(s,l=void 0){return parseInt(s,l)}}ie.MIN_VALUE_32_BITS=-2147483648,ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class me{constructor(s,l){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,l==null?this.bits=me.makeArray(s):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const l=me.makeArray(s);M.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const l=this.size;if(s>=l)return l;const u=this.bits;let d=Math.floor(s/32),g=u[d];g&=~((1<<(s&31))-1);const p=u.length;for(;g===0;){if(++d===p)return l;g=u[d]}const E=d*32+ie.numberOfTrailingZeros(g);return E>l?l:E}getNextUnset(s){const l=this.size;if(s>=l)return l;const u=this.bits;let d=Math.floor(s/32),g=~u[d];g&=~((1<<(s&31))-1);const p=u.length;for(;g===0;){if(++d===p)return l;g=~u[d]}const E=d*32+ie.numberOfTrailingZeros(g);return E>l?l:E}setBulk(s,l){this.bits[Math.floor(s/32)]=l}setRange(s,l){if(l<s||s<0||l>this.size)throw new C;if(l===s)return;l--;const u=Math.floor(s/32),d=Math.floor(l/32),g=this.bits;for(let p=u;p<=d;p++){const E=p>u?0:s&31,I=(2<<(p<d?31:l&31))-(1<<E);g[p]|=I}}clear(){const s=this.bits.length,l=this.bits;for(let u=0;u<s;u++)l[u]=0}isRange(s,l,u){if(l<s||s<0||l>this.size)throw new C;if(l===s)return!0;l--;const d=Math.floor(s/32),g=Math.floor(l/32),p=this.bits;for(let E=d;E<=g;E++){const A=E>d?0:s&31,N=(2<<(E<g?31:l&31))-(1<<A)&4294967295;if((p[E]&N)!==(u?N:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,l){if(l<0||l>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const l=s.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new C("Sizes don't match");const l=this.bits;for(let u=0,d=l.length;u<d;u++)l[u]^=s.bits[u]}toBytes(s,l,u,d){for(let g=0;g<d;g++){let p=0;for(let E=0;E<8;E++)this.get(s)&&(p|=1<<7-E),s++;l[u+g]=p}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,d=this.bits;for(let g=0;g<u;g++){let p=d[g];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,s[l-g]=p}if(this.size!==u*32){const g=u*32-this.size;let p=s[0]>>>g;for(let E=1;E<u;E++){const A=s[E];p|=A<<32-g,s[E-1]=p,p=A>>>g}s[u-1]=p}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof me))return!1;const l=s;return this.size===l.size&&ce.equals(this.bits,l.bits)}hashCode(){return 31*this.size+ce.hashCode(this.bits)}toString(){let s="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(s+=" "),s+=this.get(l)?"X":".";return s}clone(){return new me(this.size,this.bits.slice())}}var Ue;(function(F){F[F.OTHER=0]="OTHER",F[F.PURE_BARCODE=1]="PURE_BARCODE",F[F.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",F[F.TRY_HARDER=3]="TRY_HARDER",F[F.CHARACTER_SET=4]="CHARACTER_SET",F[F.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",F[F.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",F[F.ASSUME_GS1=7]="ASSUME_GS1",F[F.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",F[F.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",F[F.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ue||(Ue={}));var De=Ue;class k extends _{static getFormatInstance(){return new k}}k.kind="FormatException";var H;(function(F){F[F.Cp437=0]="Cp437",F[F.ISO8859_1=1]="ISO8859_1",F[F.ISO8859_2=2]="ISO8859_2",F[F.ISO8859_3=3]="ISO8859_3",F[F.ISO8859_4=4]="ISO8859_4",F[F.ISO8859_5=5]="ISO8859_5",F[F.ISO8859_6=6]="ISO8859_6",F[F.ISO8859_7=7]="ISO8859_7",F[F.ISO8859_8=8]="ISO8859_8",F[F.ISO8859_9=9]="ISO8859_9",F[F.ISO8859_10=10]="ISO8859_10",F[F.ISO8859_11=11]="ISO8859_11",F[F.ISO8859_13=12]="ISO8859_13",F[F.ISO8859_14=13]="ISO8859_14",F[F.ISO8859_15=14]="ISO8859_15",F[F.ISO8859_16=15]="ISO8859_16",F[F.SJIS=16]="SJIS",F[F.Cp1250=17]="Cp1250",F[F.Cp1251=18]="Cp1251",F[F.Cp1252=19]="Cp1252",F[F.Cp1256=20]="Cp1256",F[F.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",F[F.UTF8=22]="UTF8",F[F.ASCII=23]="ASCII",F[F.Big5=24]="Big5",F[F.GB18030=25]="GB18030",F[F.EUC_KR=26]="EUC_KR"})(H||(H={}));class P{constructor(s,l,u,...d){this.valueIdentifier=s,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=d,P.VALUE_IDENTIFIER_TO_ECI.set(s,this),P.NAME_TO_ECI.set(u,this);const g=this.values;for(let p=0,E=g.length;p!==E;p++){const A=g[p];P.VALUES_TO_ECI.set(A,this)}for(const p of d)P.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new k("incorect value");const l=P.VALUES_TO_ECI.get(s);if(l===void 0)throw new k("incorect value");return l}static getCharacterSetECIByName(s){const l=P.NAME_TO_ECI.get(s);if(l===void 0)throw new k("incorect value");return l}equals(s){if(!(s instanceof P))return!1;const l=s;return this.getName()===l.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(H.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(H.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(H.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(H.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(H.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(H.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(H.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(H.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(H.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(H.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(H.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(H.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(H.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(H.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(H.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(H.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(H.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(H.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(H.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(H.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(H.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(H.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(H.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(H.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(H.Big5,28,"Big5"),P.GB18030=new P(H.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(H.EUC_KR,30,"EUC_KR","EUC-KR");class te extends _{}te.kind="UnsupportedOperationException";class K{static decode(s,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!K.isBrowser()&&s==="ISO-8859-1"}static encode(s,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof P?s:P.getCharacterSetECIByName(s)}static decodeFallback(s,l){const u=this.encodingCharacterSet(l);if(K.isDecodeFallbackSupported(u)){let d="";for(let g=0,p=s.length;g<p;g++){let E=s[g].toString(16);E.length<2&&(E="0"+E),d+="%"+E}return decodeURIComponent(d)}if(u.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new te(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(P.UTF8)||s.equals(P.ISO8859_1)||s.equals(P.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),d=[];for(let g=0;g<u.length;g++)d.push(u[g].charCodeAt(0));return new Uint8Array(d)}}class J{static castAsNonUtf8Char(s,l=null){const u=l?l.getName():this.ISO88591;return K.decode(new Uint8Array([s]),u)}static guessEncoding(s,l){if(l!=null&&l.get(De.CHARACTER_SET)!==void 0)return l.get(De.CHARACTER_SET).toString();const u=s.length;let d=!0,g=!0,p=!0,E=0,A=0,I=0,N=0,B=0,G=0,ae=0,ge=0,xe=0,Ae=0,ke=0;const st=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let it=0;it<u&&(d||g||p);it++){const Ze=s[it]&255;p&&(E>0?(Ze&128)===0?p=!1:E--:(Ze&128)!==0&&((Ze&64)===0?p=!1:(E++,(Ze&32)===0?A++:(E++,(Ze&16)===0?I++:(E++,(Ze&8)===0?N++:p=!1))))),d&&(Ze>127&&Ze<160?d=!1:Ze>159&&(Ze<192||Ze===215||Ze===247)&&ke++),g&&(B>0?Ze<64||Ze===127||Ze>252?g=!1:B--:Ze===128||Ze===160||Ze>239?g=!1:Ze>160&&Ze<224?(G++,ge=0,ae++,ae>xe&&(xe=ae)):Ze>127?(B++,ae=0,ge++,ge>Ae&&(Ae=ge)):(ae=0,ge=0))}return p&&E>0&&(p=!1),g&&B>0&&(g=!1),p&&(st||A+I+N>0)?J.UTF8:g&&(J.ASSUME_SHIFT_JIS||xe>=3||Ae>=3)?J.SHIFT_JIS:d&&g?xe===2&&G===2||ke*10>=u?J.SHIFT_JIS:J.ISO88591:d?J.ISO88591:g?J.SHIFT_JIS:p?J.UTF8:J.PLATFORM_DEFAULT_ENCODING}static format(s,...l){let u=-1;function d(p,E,A,I,N,B){if(p==="%%")return"%";if(l[++u]===void 0)return;p=I?parseInt(I.substr(1)):void 0;let G=N?parseInt(N.substr(1)):void 0,ae;switch(B){case"s":ae=l[u];break;case"c":ae=l[u][0];break;case"f":ae=parseFloat(l[u]).toFixed(p);break;case"p":ae=parseFloat(l[u]).toPrecision(p);break;case"e":ae=parseFloat(l[u]).toExponential(p);break;case"x":ae=parseInt(l[u]).toString(G||16);break;case"d":ae=parseFloat(parseInt(l[u],G||10).toPrecision(p)).toFixed(0);break}ae=typeof ae=="object"?JSON.stringify(ae):(+ae).toString(G);let ge=parseInt(A),xe=A&&A[0]+""=="0"?"0":" ";for(;ae.length<ge;)ae=E!==void 0?ae+xe:xe+ae;return ae}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(g,d)}static getBytes(s,l){return K.encode(s,l)}static getCharCode(s,l=0){return s.charCodeAt(l)}static getCharAt(s){return String.fromCharCode(s)}}J.SHIFT_JIS=P.SJIS.getName(),J.GB2312="GB2312",J.ISO88591=P.ISO8859_1.getName(),J.EUC_JP="EUC_JP",J.UTF8=P.UTF8.getName(),J.PLATFORM_DEFAULT_ENCODING=J.UTF8,J.ASSUME_SHIFT_JIS=!1;class Y{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=J.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,l,u){for(let d=l;l<l+u;d++)this.append(s[d]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+1)}substring(s,l){return this.value.substring(s,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+l.length)}}class dt{constructor(s,l,u,d){if(this.width=s,this.height=l,this.rowSize=u,this.bits=d,l==null&&(l=s),this.height=l,s<1||l<1)throw new C("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const l=s.length,u=s[0].length,d=new dt(u,l);for(let g=0;g<l;g++){const p=s[g];for(let E=0;E<u;E++)p[E]&&d.set(E,g)}return d}static parseFromString(s,l,u){if(s===null)throw new C("stringRepresentation cannot be null");const d=new Array(s.length);let g=0,p=0,E=-1,A=0,I=0;for(;I<s.length;)if(s.charAt(I)===`
`||s.charAt(I)==="\r"){if(g>p){if(E===-1)E=g-p;else if(g-p!==E)throw new C("row lengths do not match");p=g,A++}I++}else if(s.substring(I,I+l.length)===l)I+=l.length,d[g]=!0,g++;else if(s.substring(I,I+u.length)===u)I+=u.length,d[g]=!1,g++;else throw new C("illegal character encountered: "+s.substring(I));if(g>p){if(E===-1)E=g-p;else if(g-p!==E)throw new C("row lengths do not match");A++}const N=new dt(E,A);for(let B=0;B<g;B++)d[B]&&N.set(Math.floor(B%E),Math.floor(B/E));return N}get(s,l){const u=l*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new C("input matrix dimensions do not match");const l=new me(Math.floor(this.width/32)+1),u=this.rowSize,d=this.bits;for(let g=0,p=this.height;g<p;g++){const E=g*u,A=s.getRow(g,l).getBitArray();for(let I=0;I<u;I++)d[E+I]^=A[I]}}clear(){const s=this.bits,l=s.length;for(let u=0;u<l;u++)s[u]=0}setRegion(s,l,u,d){if(l<0||s<0)throw new C("Left and top must be nonnegative");if(d<1||u<1)throw new C("Height and width must be at least 1");const g=s+u,p=l+d;if(p>this.height||g>this.width)throw new C("The region must fit inside the matrix");const E=this.rowSize,A=this.bits;for(let I=l;I<p;I++){const N=I*E;for(let B=s;B<g;B++)A[N+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(s,l){l==null||l.getSize()<this.width?l=new me(this.width):l.clear();const u=this.rowSize,d=this.bits,g=s*u;for(let p=0;p<u;p++)l.setBulk(p*32,d[g+p]);return l}setRow(s,l){M.arraycopy(l.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),l=this.getHeight();let u=new me(s),d=new me(s);for(let g=0,p=Math.floor((l+1)/2);g<p;g++)u=this.getRow(g,u),d=this.getRow(l-1-g,d),u.reverse(),d.reverse(),this.setRow(g,d),this.setRow(l-1-g,u)}getEnclosingRectangle(){const s=this.width,l=this.height,u=this.rowSize,d=this.bits;let g=s,p=l,E=-1,A=-1;for(let I=0;I<l;I++)for(let N=0;N<u;N++){const B=d[I*u+N];if(B!==0){if(I<p&&(p=I),I>A&&(A=I),N*32<g){let G=0;for(;(B<<31-G&4294967295)===0;)G++;N*32+G<g&&(g=N*32+G)}if(N*32+31>E){let G=31;for(;!(B>>>G);)G--;N*32+G>E&&(E=N*32+G)}}}return E<g||A<p?null:Int32Array.from([g,p,E-g+1,A-p+1])}getTopLeftOnBit(){const s=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const d=u/s;let g=u%s*32;const p=l[u];let E=0;for(;(p<<31-E&4294967295)===0;)E++;return g+=E,Int32Array.from([g,d])}getBottomRightOnBit(){const s=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const d=Math.floor(u/s);let g=Math.floor(u%s)*32;const p=l[u];let E=31;for(;!(p>>>E);)E--;return g+=E,Int32Array.from([g,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof dt))return!1;const l=s;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&ce.equals(this.bits,l.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+ce.hashCode(this.bits),s}toString(s="X ",l="  ",u=`
`){return this.buildToString(s,l,u)}buildToString(s,l,u){let d=new Y;for(let g=0,p=this.height;g<p;g++){for(let E=0,A=this.width;E<A;E++)d.append(this.get(E,g)?s:l);d.append(u)}return d.toString()}clone(){return new dt(this.width,this.height,this.rowSize,this.bits.slice())}}class ye extends _{static getNotFoundInstance(){return new ye}}ye.kind="NotFoundException";class Se extends U{constructor(s){super(s),this.luminances=Se.EMPTY,this.buckets=new Int32Array(Se.LUMINANCE_BUCKETS)}getBlackRow(s,l){const u=this.getLuminanceSource(),d=u.getWidth();l==null||l.getSize()<d?l=new me(d):l.clear(),this.initArrays(d);const g=u.getRow(s,this.luminances),p=this.buckets;for(let A=0;A<d;A++)p[(g[A]&255)>>Se.LUMINANCE_SHIFT]++;const E=Se.estimateBlackPoint(p);if(d<3)for(let A=0;A<d;A++)(g[A]&255)<E&&l.set(A);else{let A=g[0]&255,I=g[1]&255;for(let N=1;N<d-1;N++){const B=g[N+1]&255;(I*4-A-B)/2<E&&l.set(N),A=I,I=B}}return l}getBlackMatrix(){const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight(),d=new dt(l,u);this.initArrays(l);const g=this.buckets;for(let A=1;A<5;A++){const I=Math.floor(u*A/5),N=s.getRow(I,this.luminances),B=Math.floor(l*4/5);for(let G=Math.floor(l/5);G<B;G++){const ae=N[G]&255;g[ae>>Se.LUMINANCE_SHIFT]++}}const p=Se.estimateBlackPoint(g),E=s.getMatrix();for(let A=0;A<u;A++){const I=A*l;for(let N=0;N<l;N++)(E[I+N]&255)<p&&d.set(N,A)}return d}createBinarizer(s){return new Se(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const l=this.buckets;for(let u=0;u<Se.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(s){const l=s.length;let u=0,d=0,g=0;for(let N=0;N<l;N++)s[N]>g&&(d=N,g=s[N]),s[N]>u&&(u=s[N]);let p=0,E=0;for(let N=0;N<l;N++){const B=N-d,G=s[N]*B*B;G>E&&(p=N,E=G)}if(d>p){const N=d;d=p,p=N}if(p-d<=l/16)throw new ye;let A=p-1,I=-1;for(let N=p-1;N>d;N--){const B=N-d,G=B*B*(p-N)*(u-s[N]);G>I&&(A=N,I=G)}return A<<Se.LUMINANCE_SHIFT}}Se.LUMINANCE_BITS=5,Se.LUMINANCE_SHIFT=8-Se.LUMINANCE_BITS,Se.LUMINANCE_BUCKETS=1<<Se.LUMINANCE_BITS,Se.EMPTY=Uint8ClampedArray.from([0]);class Pe extends Se{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight();if(l>=Pe.MINIMUM_DIMENSION&&u>=Pe.MINIMUM_DIMENSION){const d=s.getMatrix();let g=l>>Pe.BLOCK_SIZE_POWER;(l&Pe.BLOCK_SIZE_MASK)!==0&&g++;let p=u>>Pe.BLOCK_SIZE_POWER;(u&Pe.BLOCK_SIZE_MASK)!==0&&p++;const E=Pe.calculateBlackPoints(d,g,p,l,u),A=new dt(l,u);Pe.calculateThresholdForBlock(d,g,p,l,u,E,A),this.matrix=A}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Pe(s)}static calculateThresholdForBlock(s,l,u,d,g,p,E){const A=g-Pe.BLOCK_SIZE,I=d-Pe.BLOCK_SIZE;for(let N=0;N<u;N++){let B=N<<Pe.BLOCK_SIZE_POWER;B>A&&(B=A);const G=Pe.cap(N,2,u-3);for(let ae=0;ae<l;ae++){let ge=ae<<Pe.BLOCK_SIZE_POWER;ge>I&&(ge=I);const xe=Pe.cap(ae,2,l-3);let Ae=0;for(let st=-2;st<=2;st++){const it=p[G+st];Ae+=it[xe-2]+it[xe-1]+it[xe]+it[xe+1]+it[xe+2]}const ke=Ae/25;Pe.thresholdBlock(s,ge,B,ke,d,E)}}}static cap(s,l,u){return s<l?l:s>u?u:s}static thresholdBlock(s,l,u,d,g,p){for(let E=0,A=u*g+l;E<Pe.BLOCK_SIZE;E++,A+=g)for(let I=0;I<Pe.BLOCK_SIZE;I++)(s[A+I]&255)<=d&&p.set(l+I,u+E)}static calculateBlackPoints(s,l,u,d,g){const p=g-Pe.BLOCK_SIZE,E=d-Pe.BLOCK_SIZE,A=new Array(u);for(let I=0;I<u;I++){A[I]=new Int32Array(l);let N=I<<Pe.BLOCK_SIZE_POWER;N>p&&(N=p);for(let B=0;B<l;B++){let G=B<<Pe.BLOCK_SIZE_POWER;G>E&&(G=E);let ae=0,ge=255,xe=0;for(let ke=0,st=N*d+G;ke<Pe.BLOCK_SIZE;ke++,st+=d){for(let it=0;it<Pe.BLOCK_SIZE;it++){const Ze=s[st+it]&255;ae+=Ze,Ze<ge&&(ge=Ze),Ze>xe&&(xe=Ze)}if(xe-ge>Pe.MIN_DYNAMIC_RANGE)for(ke++,st+=d;ke<Pe.BLOCK_SIZE;ke++,st+=d)for(let it=0;it<Pe.BLOCK_SIZE;it++)ae+=s[st+it]&255}let Ae=ae>>Pe.BLOCK_SIZE_POWER*2;if(xe-ge<=Pe.MIN_DYNAMIC_RANGE&&(Ae=ge/2,I>0&&B>0)){const ke=(A[I-1][B]+2*A[I][B-1]+A[I-1][B-1])/4;ge<ke&&(Ae=ke)}A[I][B]=Ae}}return A}}Pe.BLOCK_SIZE_POWER=3,Pe.BLOCK_SIZE=1<<Pe.BLOCK_SIZE_POWER,Pe.BLOCK_SIZE_MASK=Pe.BLOCK_SIZE-1,Pe.MINIMUM_DIMENSION=Pe.BLOCK_SIZE*5,Pe.MIN_DYNAMIC_RANGE=24;class gt{constructor(s,l){this.width=s,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,l,u,d){throw new te("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new te("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new te("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let l=new Y;for(let u=0;u<this.height;u++){const d=this.getRow(u,s);for(let g=0;g<this.width;g++){const p=d[g]&255;let E;p<64?E="#":p<128?E="+":p<192?E=".":E=" ",l.append(E)}l.append(`
`)}return l.toString()}}class yt extends gt{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,l){const u=this.delegate.getRow(s,l),d=this.getWidth();for(let g=0;g<d;g++)u[g]=255-(u[g]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let d=0;d<l;d++)u[d]=255-(s[d]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,l,u,d){return new yt(this.delegate.crop(s,l,u,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new yt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new yt(this.delegate.rotateCounterClockwise45())}}class Ke extends gt{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ke.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const l=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ke.toGrayscaleBuffer(l.data,s.width,s.height)}static toGrayscaleBuffer(s,l,u){const d=new Uint8ClampedArray(l*u);for(let g=0,p=0,E=s.length;g<E;g+=4,p++){let A;if(s[g+3]===0)A=255;else{const N=s[g],B=s[g+1],G=s[g+2];A=306*N+601*B+117*G+512>>10}d[p]=A}return d}getRow(s,l){if(s<0||s>=this.getHeight())throw new C("Requested row is outside the image: "+s);const u=this.getWidth(),d=s*u;return l===null?l=this.buffer.slice(d,d+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(d,d+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,l,u,d){return super.crop(s,l,u,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const l=this.getTempCanvasElement(),u=l.getContext("2d"),d=s*Ke.DEGREE_TO_RADIANS,g=this.canvas.width,p=this.canvas.height,E=Math.ceil(Math.abs(Math.cos(d))*g+Math.abs(Math.sin(d))*p),A=Math.ceil(Math.abs(Math.sin(d))*g+Math.abs(Math.cos(d))*p);return l.width=E,l.height=A,u.translate(E/2,A/2),u.rotate(d),u.drawImage(this.canvas,g/-2,p/-2),this.buffer=Ke.makeBufferFromCanvasImageData(l),this}invert(){return new yt(this)}}Ke.DEGREE_TO_RADIANS=Math.PI/180;class he{constructor(s,l,u){this.deviceId=s,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||Oh||self||window||void 0)&&(globalThis||Oh||self||window||void 0).__awaiter||function(F,s,l,u){function d(g){return g instanceof l?g:new l(function(p){p(g)})}return new(l||(l=Promise))(function(g,p){function E(N){try{I(u.next(N))}catch(B){p(B)}}function A(N){try{I(u.throw(N))}catch(B){p(B)}}function I(N){N.done?g(N.value):d(N.value).then(E,A)}I((u=u.apply(F,s||[])).next())})};class ue{constructor(s,l=500,u){this.reader=s,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of s){const d=u.kind==="video"?"videoinput":u.kind;if(d!=="videoinput")continue;const g=u.deviceId||u.id,p=u.label||`Video device ${l.length+1}`,E=u.groupId,A={deviceId:g,label:p,kind:d,groupId:E};l.push(A)}return l})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new he(l.deviceId,l.label))})}findDeviceById(s){return q(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,l){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,l)})}decodeOnceFromVideoDevice(s,l){return q(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeOnceFromConstraints(d,l)})}decodeOnceFromConstraints(s,l){return q(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(s,l){return q(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,l,u){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,l,u)})}decodeFromVideoDevice(s,l,u){return q(this,void 0,void 0,function*(){let d;s?d={deviceId:{exact:s}}:d={facingMode:"environment"};const g={video:d};return yield this.decodeFromConstraints(g,l,u)})}decodeFromConstraints(s,l,u){return q(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(d,l,u)})}decodeFromStream(s,l,u){return q(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(s,l);return yield this.decodeContinuously(d,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,l){return q(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((l,u)=>this.playVideoOnLoad(s,()=>l()))}playVideoOnLoad(s,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",l),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,l){const u=document.getElementById(s);if(!u)throw new T(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new T(`element with id '${s}' must be an ${l} element`);return u}decodeFromImage(s,l){if(!s&&!l)throw new T("either imageElement with a src set or an url must be provided");return l&&!s?this.decodeFromImageUrl(l):this.decodeFromImageElement(s)}decodeFromVideo(s,l){if(!s&&!l)throw new T("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,l,u){if(s===void 0&&l===void 0)throw new T("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new T("An image element must be provided.");this.reset();const l=this.prepareImageElement(s);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(s){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(s,l){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(s){if(!s)throw new T("A video element must be provided.");this.reset();const l=this.prepareVideoElement(s);return this.videoElement=l,l}decodeFromImageUrl(s){if(!s)throw new T("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=s,u}decodeFromVideoUrl(s){if(!s)throw new T("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=s,u}decodeFromVideoUrlContinuously(s,l){if(!s)throw new T("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(u,l);return u.src=s,d}_decodeOnLoadImage(s){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(l,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,l){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,l)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let l;return typeof s>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(l=s),l}prepareVideoElement(s){let l;return!s&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(l=s),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(s,l=!0,u=!0){this._stopAsyncDecode=!1;const d=(g,p)=>{if(this._stopAsyncDecode){p(new ye("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const E=this.decode(s);g(E)}catch(E){const A=l&&E instanceof ye,N=(E instanceof O||E instanceof k)&&u;if(A||N)return setTimeout(d,this._timeBetweenDecodingAttempts,g,p);p(E)}};return new Promise((g,p)=>d(g,p))}decodeContinuously(s,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(s);l(d,null),setTimeout(u,this.timeBetweenScansMillis)}catch(d){l(null,d);const g=d instanceof O||d instanceof k,p=d instanceof ye;(g||p)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const l=this.createBinaryBitmap(s);return this.decodeBitmap(l)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,l,u){l||(l={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(s,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const l=this.getCaptureCanvas(s),u=new Ke(l),d=new Pe(u);return new b(d)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const l=this.createCaptureCanvas(s);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,d;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,d=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,d=s.naturalHeight||s.height)),l.style.width=u+"px",l.style.height=d+"px",l.width=u,l.height=d,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,l){try{s.srcObject=l}catch{s.src=URL.createObjectURL(l)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(s,l,u=l==null?0:8*l.length,d,g,p=M.currentTimeMillis()){this.text=s,this.rawBytes=l,this.numBits=u,this.resultPoints=d,this.format=g,this.timestamp=p,this.text=s,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=d,this.format=g,this.resultMetadata=null,p==null?this.timestamp=M.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,l)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const l=this.resultPoints;if(l===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(l.length+s.length);M.arraycopy(l,0,u,0,l.length),M.arraycopy(s,0,u,l.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var fe;(function(F){F[F.AZTEC=0]="AZTEC",F[F.CODABAR=1]="CODABAR",F[F.CODE_39=2]="CODE_39",F[F.CODE_93=3]="CODE_93",F[F.CODE_128=4]="CODE_128",F[F.DATA_MATRIX=5]="DATA_MATRIX",F[F.EAN_8=6]="EAN_8",F[F.EAN_13=7]="EAN_13",F[F.ITF=8]="ITF",F[F.MAXICODE=9]="MAXICODE",F[F.PDF_417=10]="PDF_417",F[F.QR_CODE=11]="QR_CODE",F[F.RSS_14=12]="RSS_14",F[F.RSS_EXPANDED=13]="RSS_EXPANDED",F[F.UPC_A=14]="UPC_A",F[F.UPC_E=15]="UPC_E",F[F.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(fe||(fe={}));var pe=fe,Je;(function(F){F[F.OTHER=0]="OTHER",F[F.ORIENTATION=1]="ORIENTATION",F[F.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",F[F.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",F[F.ISSUE_NUMBER=4]="ISSUE_NUMBER",F[F.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",F[F.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",F[F.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",F[F.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",F[F.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",F[F.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Je||(Je={}));var rt=Je;class at{constructor(s,l,u,d,g=-1,p=-1){this.rawBytes=s,this.text=l,this.byteSegments=u,this.ecLevel=d,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=p,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class lt{exp(s){return this.expTable[s]}log(s){if(s===0)throw new C;return this.logTable[s]}static addOrSubtract(s,l){return s^l}}class Mt{constructor(s,l){if(l.length===0)throw new C;this.field=s;const u=l.length;if(u>1&&l[0]===0){let d=1;for(;d<u&&l[d]===0;)d++;d===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-d),M.arraycopy(l,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(s===1){u=0;for(let p=0,E=l.length;p!==E;p++){const A=l[p];u=lt.addOrSubtract(u,A)}return u}u=l[0];const d=l.length,g=this.field;for(let p=1;p<d;p++)u=lt.addOrSubtract(g.multiply(s,u),l[p]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){const p=l;l=u,u=p}let d=new Int32Array(u.length);const g=u.length-l.length;M.arraycopy(u,0,d,0,g);for(let p=g;p<u.length;p++)d[p]=lt.addOrSubtract(l[p-g],u[p]);return new Mt(this.field,d)}multiply(s){if(!this.field.equals(s.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,d=s.coefficients,g=d.length,p=new Int32Array(u+g-1),E=this.field;for(let A=0;A<u;A++){const I=l[A];for(let N=0;N<g;N++)p[A+N]=lt.addOrSubtract(p[A+N],E.multiply(I,d[N]))}return new Mt(E,p)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const l=this.coefficients.length,u=this.field,d=new Int32Array(l),g=this.coefficients;for(let p=0;p<l;p++)d[p]=u.multiply(g[p],s);return new Mt(u,d)}multiplyByMonomial(s,l){if(s<0)throw new C;if(l===0)return this.field.getZero();const u=this.coefficients,d=u.length,g=new Int32Array(d+s),p=this.field;for(let E=0;E<d;E++)g[E]=p.multiply(u[E],l);return new Mt(p,g)}divide(s){if(!this.field.equals(s.field))throw new C("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new C("Divide by 0");const l=this.field;let u=l.getZero(),d=this;const g=s.getCoefficient(s.getDegree()),p=l.inverse(g);for(;d.getDegree()>=s.getDegree()&&!d.isZero();){const E=d.getDegree()-s.getDegree(),A=l.multiply(d.getCoefficient(d.getDegree()),p),I=s.multiplyByMonomial(E,A),N=l.buildMonomial(E,A);u=u.addOrSubtract(N),d=d.addOrSubtract(I)}return[u,d]}toString(){let s="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),l===0||u!==1){const d=this.field.log(u);d===0?s+="1":d===1?s+="a":(s+="a^",s+=d)}l!==0&&(l===1?s+="x":(s+="x^",s+=l))}}return s}}class Ut extends _{}Ut.kind="ArithmeticException";class Rt extends lt{constructor(s,l,u){super(),this.primitive=s,this.size=l,this.generatorBase=u;const d=new Int32Array(l);let g=1;for(let E=0;E<l;E++)d[E]=g,g*=2,g>=l&&(g^=s,g&=l-1);this.expTable=d;const p=new Int32Array(l);for(let E=0;E<l-1;E++)p[d[E]]=E;this.logTable=p,this.zero=new Mt(this,Int32Array.from([0])),this.one=new Mt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new C;if(l===0)return this.zero;const u=new Int32Array(s+1);return u[0]=l,new Mt(this,u)}inverse(s){if(s===0)throw new Ut;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Rt.AZTEC_DATA_12=new Rt(4201,4096,1),Rt.AZTEC_DATA_10=new Rt(1033,1024,1),Rt.AZTEC_DATA_6=new Rt(67,64,1),Rt.AZTEC_PARAM=new Rt(19,16,1),Rt.QR_CODE_FIELD_256=new Rt(285,256,0),Rt.DATA_MATRIX_FIELD_256=new Rt(301,256,1),Rt.AZTEC_DATA_8=Rt.DATA_MATRIX_FIELD_256,Rt.MAXICODE_FIELD_64=Rt.AZTEC_DATA_6;class _t extends _{}_t.kind="ReedSolomonException";class Hn extends _{}Hn.kind="IllegalStateException";class cn{constructor(s){this.field=s}decode(s,l){const u=this.field,d=new Mt(u,s),g=new Int32Array(l);let p=!0;for(let ae=0;ae<l;ae++){const ge=d.evaluateAt(u.exp(ae+u.getGeneratorBase()));g[g.length-1-ae]=ge,ge!==0&&(p=!1)}if(p)return;const E=new Mt(u,g),A=this.runEuclideanAlgorithm(u.buildMonomial(l,1),E,l),I=A[0],N=A[1],B=this.findErrorLocations(I),G=this.findErrorMagnitudes(N,B);for(let ae=0;ae<B.length;ae++){const ge=s.length-1-u.log(B[ae]);if(ge<0)throw new _t("Bad error location");s[ge]=Rt.addOrSubtract(s[ge],G[ae])}}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){const ae=s;s=l,l=ae}const d=this.field;let g=s,p=l,E=d.getZero(),A=d.getOne();for(;p.getDegree()>=(u/2|0);){let ae=g,ge=E;if(g=p,E=A,g.isZero())throw new _t("r_{i-1} was zero");p=ae;let xe=d.getZero();const Ae=g.getCoefficient(g.getDegree()),ke=d.inverse(Ae);for(;p.getDegree()>=g.getDegree()&&!p.isZero();){const st=p.getDegree()-g.getDegree(),it=d.multiply(p.getCoefficient(p.getDegree()),ke);xe=xe.addOrSubtract(d.buildMonomial(st,it)),p=p.addOrSubtract(g.multiplyByMonomial(st,it))}if(A=xe.multiply(E).addOrSubtract(ge),p.getDegree()>=g.getDegree())throw new Hn("Division algorithm failed to reduce polynomial?")}const I=A.getCoefficient(0);if(I===0)throw new _t("sigmaTilde(0) was zero");const N=d.inverse(I),B=A.multiplyScalar(N),G=p.multiplyScalar(N);return[B,G]}findErrorLocations(s){const l=s.getDegree();if(l===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(l);let d=0;const g=this.field;for(let p=1;p<g.getSize()&&d<l;p++)s.evaluateAt(p)===0&&(u[d]=g.inverse(p),d++);if(d!==l)throw new _t("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,l){const u=l.length,d=new Int32Array(u),g=this.field;for(let p=0;p<u;p++){const E=g.inverse(l[p]);let A=1;for(let I=0;I<u;I++)if(p!==I){const N=g.multiply(l[I],E),B=(N&1)===0?N|1:N&-2;A=g.multiply(A,B)}d[p]=g.multiply(s.evaluateAt(E),g.inverse(A)),g.getGeneratorBase()!==0&&(d[p]=g.multiply(d[p],E))}return d}}var ut;(function(F){F[F.UPPER=0]="UPPER",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.DIGIT=3]="DIGIT",F[F.PUNCT=4]="PUNCT",F[F.BINARY=5]="BINARY"})(ut||(ut={}));class zt{decode(s){this.ddata=s;let l=s.getBits(),u=this.extractBits(l),d=this.correctBits(u),g=zt.convertBoolArrayToByteArray(d),p=zt.getEncodedData(d),E=new at(g,p,null,null);return E.setNumBits(d.length),E}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,u=ut.UPPER,d=ut.UPPER,g="",p=0;for(;p<l;)if(d===ut.BINARY){if(l-p<5)break;let E=zt.readCode(s,p,5);if(p+=5,E===0){if(l-p<11)break;E=zt.readCode(s,p,11)+31,p+=11}for(let A=0;A<E;A++){if(l-p<8){p=l;break}const I=zt.readCode(s,p,8);g+=J.castAsNonUtf8Char(I),p+=8}d=u}else{let E=d===ut.DIGIT?4:5;if(l-p<E)break;let A=zt.readCode(s,p,E);p+=E;let I=zt.getCharacter(d,A);I.startsWith("CTRL_")?(u=d,d=zt.getTable(I.charAt(5)),I.charAt(6)==="L"&&(u=d)):(g+=I,d=u)}return g}static getTable(s){switch(s){case"L":return ut.LOWER;case"P":return ut.PUNCT;case"M":return ut.MIXED;case"D":return ut.DIGIT;case"B":return ut.BINARY;case"U":default:return ut.UPPER}}static getCharacter(s,l){switch(s){case ut.UPPER:return zt.UPPER_TABLE[l];case ut.LOWER:return zt.LOWER_TABLE[l];case ut.MIXED:return zt.MIXED_TABLE[l];case ut.PUNCT:return zt.PUNCT_TABLE[l];case ut.DIGIT:return zt.DIGIT_TABLE[l];default:throw new Hn("Bad table")}}correctBits(s){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=Rt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=Rt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=Rt.AZTEC_DATA_10):(u=12,l=Rt.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),g=s.length/u;if(g<d)throw new k;let p=s.length%u,E=new Int32Array(g);for(let G=0;G<g;G++,p+=u)E[G]=zt.readCode(s,p,u);try{new cn(l).decode(E,g-d)}catch(G){throw new k(G)}let A=(1<<u)-1,I=0;for(let G=0;G<d;G++){let ae=E[G];if(ae===0||ae===A)throw new k;(ae===1||ae===A-1)&&I++}let N=new Array(d*u-I),B=0;for(let G=0;G<d;G++){let ae=E[G];if(ae===1||ae===A-1)N.fill(ae>1,B,B+u-1),B+=u-1;else for(let ge=u-1;ge>=0;--ge)N[B++]=(ae&1<<ge)!==0}return N}extractBits(s){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),d=(l?11:14)+u*4,g=new Int32Array(d),p=new Array(this.totalBitsInLayer(u,l));if(l)for(let E=0;E<g.length;E++)g[E]=E;else{let E=d+1+2*ie.truncDivision(ie.truncDivision(d,2)-1,15),A=d/2,I=ie.truncDivision(E,2);for(let N=0;N<A;N++){let B=N+ie.truncDivision(N,15);g[A-N-1]=I-B-1,g[A+N]=I+B+1}}for(let E=0,A=0;E<u;E++){let I=(u-E)*4+(l?9:12),N=E*2,B=d-1-N;for(let G=0;G<I;G++){let ae=G*2;for(let ge=0;ge<2;ge++)p[A+ae+ge]=s.get(g[N+ge],g[N+G]),p[A+2*I+ae+ge]=s.get(g[N+G],g[B-ge]),p[A+4*I+ae+ge]=s.get(g[B-ge],g[B-G]),p[A+6*I+ae+ge]=s.get(g[B-G],g[N+ge])}A+=I*8}return p}static readCode(s,l,u){let d=0;for(let g=l;g<l+u;g++)d<<=1,s[g]&&(d|=1);return d}static readByte(s,l){let u=s.length-l;return u>=8?zt.readCode(s,l,8):zt.readCode(s,l,u)<<8-u}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let u=0;u<l.length;u++)l[u]=zt.readByte(s,8*u);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,l,u,d){const g=s-u,p=l-d;return Math.sqrt(g*g+p*p)}static sum(s){let l=0;for(let u=0,d=s.length;u!==d;u++){const g=s[u];l+=g}return l}}class Sn{static floatToIntBits(s){return s}}Sn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ve{constructor(s,l){this.x=s,this.y=l}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ve){const l=s;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*Sn.floatToIntBits(this.x)+Sn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const l=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),d=this.distance(s[0],s[2]);let g,p,E;if(u>=l&&u>=d?(p=s[0],g=s[1],E=s[2]):d>=u&&d>=l?(p=s[1],g=s[0],E=s[2]):(p=s[2],g=s[0],E=s[1]),this.crossProductZ(g,p,E)<0){const A=g;g=E,E=A}s[0]=g,s[1]=p,s[2]=E}static distance(s,l){return pt.distance(s.x,s.y,l.x,l.y)}static crossProductZ(s,l,u){const d=l.x,g=l.y;return(u.x-d)*(s.y-g)-(u.y-g)*(s.x-d)}}class on{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class Lt extends on{constructor(s,l,u,d,g){super(s,l),this.compact=u,this.nbDatablocks=d,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class At{constructor(s,l,u,d){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),l==null&&(l=At.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),d==null&&(d=s.getHeight()/2|0);const g=l/2|0;if(this.leftInit=u-g,this.rightInit=u+g,this.upInit=d-g,this.downInit=d+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ye}detect(){let s=this.leftInit,l=this.rightInit,u=this.upInit,d=this.downInit,g=!1,p=!0,E=!1,A=!1,I=!1,N=!1,B=!1;const G=this.width,ae=this.height;for(;p;){p=!1;let ge=!0;for(;(ge||!A)&&l<G;)ge=this.containsBlackPoint(u,d,l,!1),ge?(l++,p=!0,A=!0):A||l++;if(l>=G){g=!0;break}let xe=!0;for(;(xe||!I)&&d<ae;)xe=this.containsBlackPoint(s,l,d,!0),xe?(d++,p=!0,I=!0):I||d++;if(d>=ae){g=!0;break}let Ae=!0;for(;(Ae||!N)&&s>=0;)Ae=this.containsBlackPoint(u,d,s,!1),Ae?(s--,p=!0,N=!0):N||s--;if(s<0){g=!0;break}let ke=!0;for(;(ke||!B)&&u>=0;)ke=this.containsBlackPoint(s,l,u,!0),ke?(u--,p=!0,B=!0):B||u--;if(u<0){g=!0;break}p&&(E=!0)}if(!g&&E){const ge=l-s;let xe=null;for(let it=1;xe===null&&it<ge;it++)xe=this.getBlackPointOnSegment(s,d-it,s+it,d);if(xe==null)throw new ye;let Ae=null;for(let it=1;Ae===null&&it<ge;it++)Ae=this.getBlackPointOnSegment(s,u+it,s+it,u);if(Ae==null)throw new ye;let ke=null;for(let it=1;ke===null&&it<ge;it++)ke=this.getBlackPointOnSegment(l,u+it,l-it,u);if(ke==null)throw new ye;let st=null;for(let it=1;st===null&&it<ge;it++)st=this.getBlackPointOnSegment(l,d-it,l-it,d);if(st==null)throw new ye;return this.centerEdges(st,xe,ke,Ae)}else throw new ye}getBlackPointOnSegment(s,l,u,d){const g=pt.round(pt.distance(s,l,u,d)),p=(u-s)/g,E=(d-l)/g,A=this.image;for(let I=0;I<g;I++){const N=pt.round(s+I*p),B=pt.round(l+I*E);if(A.get(N,B))return new ve(N,B)}return null}centerEdges(s,l,u,d){const g=s.getX(),p=s.getY(),E=l.getX(),A=l.getY(),I=u.getX(),N=u.getY(),B=d.getX(),G=d.getY(),ae=At.CORR;return g<this.width/2?[new ve(B-ae,G+ae),new ve(E+ae,A+ae),new ve(I-ae,N-ae),new ve(g+ae,p-ae)]:[new ve(B+ae,G+ae),new ve(E+ae,A-ae),new ve(I-ae,N+ae),new ve(g-ae,p-ae)]}containsBlackPoint(s,l,u,d){const g=this.image;if(d){for(let p=s;p<=l;p++)if(g.get(p,u))return!0}else for(let p=s;p<=l;p++)if(g.get(u,p))return!0;return!1}}At.INIT_SIZE=10,At.CORR=1;class Gt{static checkAndNudgePoints(s,l){const u=s.getWidth(),d=s.getHeight();let g=!0;for(let p=0;p<l.length&&g;p+=2){const E=Math.floor(l[p]),A=Math.floor(l[p+1]);if(E<-1||E>u||A<-1||A>d)throw new ye;g=!1,E===-1?(l[p]=0,g=!0):E===u&&(l[p]=u-1,g=!0),A===-1?(l[p+1]=0,g=!0):A===d&&(l[p+1]=d-1,g=!0)}g=!0;for(let p=l.length-2;p>=0&&g;p-=2){const E=Math.floor(l[p]),A=Math.floor(l[p+1]);if(E<-1||E>u||A<-1||A>d)throw new ye;g=!1,E===-1?(l[p]=0,g=!0):E===u&&(l[p]=u-1,g=!0),A===-1?(l[p+1]=0,g=!0):A===d&&(l[p+1]=d-1,g=!0)}}}class bt{constructor(s,l,u,d,g,p,E,A,I){this.a11=s,this.a21=l,this.a31=u,this.a12=d,this.a22=g,this.a32=p,this.a13=E,this.a23=A,this.a33=I}static quadrilateralToQuadrilateral(s,l,u,d,g,p,E,A,I,N,B,G,ae,ge,xe,Ae){const ke=bt.quadrilateralToSquare(s,l,u,d,g,p,E,A);return bt.squareToQuadrilateral(I,N,B,G,ae,ge,xe,Ae).times(ke)}transformPoints(s){const l=s.length,u=this.a11,d=this.a12,g=this.a13,p=this.a21,E=this.a22,A=this.a23,I=this.a31,N=this.a32,B=this.a33;for(let G=0;G<l;G+=2){const ae=s[G],ge=s[G+1],xe=g*ae+A*ge+B;s[G]=(u*ae+p*ge+I)/xe,s[G+1]=(d*ae+E*ge+N)/xe}}transformPointsWithValues(s,l){const u=this.a11,d=this.a12,g=this.a13,p=this.a21,E=this.a22,A=this.a23,I=this.a31,N=this.a32,B=this.a33,G=s.length;for(let ae=0;ae<G;ae++){const ge=s[ae],xe=l[ae],Ae=g*ge+A*xe+B;s[ae]=(u*ge+p*xe+I)/Ae,l[ae]=(d*ge+E*xe+N)/Ae}}static squareToQuadrilateral(s,l,u,d,g,p,E,A){const I=s-u+g-E,N=l-d+p-A;if(I===0&&N===0)return new bt(u-s,g-u,s,d-l,p-d,l,0,0,1);{const B=u-g,G=E-g,ae=d-p,ge=A-p,xe=B*ge-G*ae,Ae=(I*ge-G*N)/xe,ke=(B*N-I*ae)/xe;return new bt(u-s+Ae*u,E-s+ke*E,s,d-l+Ae*d,A-l+ke*A,l,Ae,ke,1)}}static quadrilateralToSquare(s,l,u,d,g,p,E,A){return bt.squareToQuadrilateral(s,l,u,d,g,p,E,A).buildAdjoint()}buildAdjoint(){return new bt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new bt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class rr extends Gt{sampleGrid(s,l,u,d,g,p,E,A,I,N,B,G,ae,ge,xe,Ae,ke,st,it){const Ze=bt.quadrilateralToQuadrilateral(d,g,p,E,A,I,N,B,G,ae,ge,xe,Ae,ke,st,it);return this.sampleGridWithTransform(s,l,u,Ze)}sampleGridWithTransform(s,l,u,d){if(l<=0||u<=0)throw new ye;const g=new dt(l,u),p=new Float32Array(2*l);for(let E=0;E<u;E++){const A=p.length,I=E+.5;for(let N=0;N<A;N+=2)p[N]=N/2+.5,p[N+1]=I;d.transformPoints(p),Gt.checkAndNudgePoints(s,p);try{for(let N=0;N<A;N+=2)s.get(Math.floor(p[N]),Math.floor(p[N+1]))&&g.set(N/2,E)}catch{throw new ye}}return g}}class ln{static setGridSampler(s){ln.gridSampler=s}static getInstance(){return ln.gridSampler}}ln.gridSampler=new rr;class jn{constructor(s,l){this.x=s,this.y=l}toResultPoint(){return new ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class xa{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(s){let p=u[0];u[0]=u[2],u[2]=p}this.extractParameters(u);let d=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),g=this.getMatrixCornerPoints(u);return new Lt(d,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new ye;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],l),this.sampleLine(s[1],s[2],l),this.sampleLine(s[2],s[3],l),this.sampleLine(s[3],s[0],l)]);this.shift=this.getRotation(u,l);let d=0;for(let p=0;p<4;p++){let E=u[(this.shift+p)%4];this.compact?(d<<=7,d+=E>>1&127):(d<<=10,d+=(E>>2&992)+(E>>1&31))}let g=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(s,l){let u=0;s.forEach((d,g,p)=>{let E=(d>>l-2<<1)+(d&1);u=(u<<3)+E}),u=((u&1)<<11)+(u>>1);for(let d=0;d<4;d++)if(ie.bitCount(u^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new ye}getCorrectedParameterData(s,l){let u,d;l?(u=7,d=2):(u=10,d=4);let g=u-d,p=new Int32Array(u);for(let A=u-1;A>=0;--A)p[A]=s&15,s>>=4;try{new cn(Rt.AZTEC_PARAM).decode(p,g)}catch{throw new ye}let E=0;for(let A=0;A<d;A++)E=(E<<4)+p[A];return E}getBullsEyeCorners(s){let l=s,u=s,d=s,g=s,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(l,p,1,-1),G=this.getFirstDifferent(u,p,1,1),ae=this.getFirstDifferent(d,p,-1,1),ge=this.getFirstDifferent(g,p,-1,-1);if(this.nbCenterLayers>2){let xe=this.distancePoint(ge,B)*this.nbCenterLayers/(this.distancePoint(g,l)*(this.nbCenterLayers+2));if(xe<.75||xe>1.25||!this.isWhiteOrBlackRectangle(B,G,ae,ge))break}l=B,u=G,d=ae,g=ge,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ye;this.compact=this.nbCenterLayers===5;let E=new ve(l.getX()+.5,l.getY()-.5),A=new ve(u.getX()+.5,u.getY()+.5),I=new ve(d.getX()-.5,d.getY()+.5),N=new ve(g.getX()-.5,g.getY()-.5);return this.expandSquare([E,A,I,N],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,l,u,d;try{let E=new At(this.image).detect();s=E[0],l=E[1],u=E[2],d=E[3]}catch{let A=this.image.getWidth()/2,I=this.image.getHeight()/2;s=this.getFirstDifferent(new jn(A+7,I-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new jn(A+7,I+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new jn(A-7,I+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new jn(A-7,I-7),!1,-1,-1).toResultPoint()}let g=pt.round((s.getX()+d.getX()+l.getX()+u.getX())/4),p=pt.round((s.getY()+d.getY()+l.getY()+u.getY())/4);try{let E=new At(this.image,15,g,p).detect();s=E[0],l=E[1],u=E[2],d=E[3]}catch{s=this.getFirstDifferent(new jn(g+7,p-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new jn(g+7,p+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new jn(g-7,p+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new jn(g-7,p-7),!1,-1,-1).toResultPoint()}return g=pt.round((s.getX()+d.getX()+l.getX()+u.getX())/4),p=pt.round((s.getY()+d.getY()+l.getY()+u.getY())/4),new jn(g,p)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,l,u,d,g){let p=ln.getInstance(),E=this.getDimension(),A=E/2-this.nbCenterLayers,I=E/2+this.nbCenterLayers;return p.sampleGrid(s,E,E,A,A,I,A,I,I,A,I,l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY(),g.getX(),g.getY())}sampleLine(s,l,u){let d=0,g=this.distanceResultPoint(s,l),p=g/u,E=s.getX(),A=s.getY(),I=p*(l.getX()-s.getX())/g,N=p*(l.getY()-s.getY())/g;for(let B=0;B<u;B++)this.image.get(pt.round(E+B*I),pt.round(A+B*N))&&(d|=1<<u-B-1);return d}isWhiteOrBlackRectangle(s,l,u,d){let g=3;s=new jn(s.getX()-g,s.getY()+g),l=new jn(l.getX()-g,l.getY()-g),u=new jn(u.getX()+g,u.getY()-g),d=new jn(d.getX()+g,d.getY()+g);let p=this.getColor(d,s);if(p===0)return!1;let E=this.getColor(s,l);return E!==p||(E=this.getColor(l,u),E!==p)?!1:(E=this.getColor(u,d),E===p)}getColor(s,l){let u=this.distancePoint(s,l),d=(l.getX()-s.getX())/u,g=(l.getY()-s.getY())/u,p=0,E=s.getX(),A=s.getY(),I=this.image.get(s.getX(),s.getY()),N=Math.ceil(u);for(let G=0;G<N;G++)E+=d,A+=g,this.image.get(pt.round(E),pt.round(A))!==I&&p++;let B=p/u;return B>.1&&B<.9?0:B<=.1===I?1:-1}getFirstDifferent(s,l,u,d){let g=s.getX()+u,p=s.getY()+d;for(;this.isValid(g,p)&&this.image.get(g,p)===l;)g+=u,p+=d;for(g-=u,p-=d;this.isValid(g,p)&&this.image.get(g,p)===l;)g+=u;for(g-=u;this.isValid(g,p)&&this.image.get(g,p)===l;)p+=d;return p-=d,new jn(g,p)}expandSquare(s,l,u){let d=u/(2*l),g=s[0].getX()-s[2].getX(),p=s[0].getY()-s[2].getY(),E=(s[0].getX()+s[2].getX())/2,A=(s[0].getY()+s[2].getY())/2,I=new ve(E+d*g,A+d*p),N=new ve(E-d*g,A-d*p);g=s[1].getX()-s[3].getX(),p=s[1].getY()-s[3].getY(),E=(s[1].getX()+s[3].getX())/2,A=(s[1].getY()+s[3].getY())/2;let B=new ve(E+d*g,A+d*p),G=new ve(E-d*g,A-d*p);return[I,B,N,G]}isValid(s,l){return s>=0&&s<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(s){let l=pt.round(s.getX()),u=pt.round(s.getY());return this.isValid(l,u)}distancePoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}distanceResultPoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15}}class Ds{decode(s,l=null){let u=null,d=new xa(s.getBlackMatrix()),g=null,p=null;try{let N=d.detectMirror(!1);g=N.getPoints(),this.reportFoundResultPoints(l,g),p=new zt().decode(N)}catch(N){u=N}if(p==null)try{let N=d.detectMirror(!0);g=N.getPoints(),this.reportFoundResultPoints(l,g),p=new zt().decode(N)}catch(N){throw u??N}let E=new se(p.getText(),p.getRawBytes(),p.getNumBits(),g,pe.AZTEC,M.currentTimeMillis()),A=p.getByteSegments();A!=null&&E.putMetadata(rt.BYTE_SEGMENTS,A);let I=p.getECLevel();return I!=null&&E.putMetadata(rt.ERROR_CORRECTION_LEVEL,I),E}reportFoundResultPoints(s,l){if(s!=null){let u=s.get(De.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((d,g,p)=>{u.foundPossibleResultPoint(d)})}}reset(){}}class Va extends ue{constructor(s=500){super(new Ds,s)}}class vn{decode(s,l){try{return this.doDecode(s,l)}catch{if(l&&l.get(De.TRY_HARDER)===!0&&s.isRotateSupported()){const g=s.rotateCounterClockwise(),p=this.doDecode(g,l),E=p.getResultMetadata();let A=270;E!==null&&E.get(rt.ORIENTATION)===!0&&(A=A+E.get(rt.ORIENTATION)%360),p.putMetadata(rt.ORIENTATION,A);const I=p.getResultPoints();if(I!==null){const N=g.getHeight();for(let B=0;B<I.length;B++)I[B]=new ve(N-I[B].getY()-1,I[B].getX())}return p}else throw new ye}}reset(){}doDecode(s,l){const u=s.getWidth(),d=s.getHeight();let g=new me(u);const p=l&&l.get(De.TRY_HARDER)===!0,E=Math.max(1,d>>(p?8:5));let A;p?A=d:A=15;const I=Math.trunc(d/2);for(let N=0;N<A;N++){const B=Math.trunc((N+1)/2),G=(N&1)===0,ae=I+E*(G?B:-B);if(ae<0||ae>=d)break;try{g=s.getBlackRow(ae,g)}catch{continue}for(let ge=0;ge<2;ge++){if(ge===1&&(g.reverse(),l&&l.get(De.NEED_RESULT_POINT_CALLBACK)===!0)){const xe=new Map;l.forEach((Ae,ke)=>xe.set(ke,Ae)),xe.delete(De.NEED_RESULT_POINT_CALLBACK),l=xe}try{const xe=this.decodeRow(ae,g,l);if(ge===1){xe.putMetadata(rt.ORIENTATION,180);const Ae=xe.getResultPoints();Ae!==null&&(Ae[0]=new ve(u-Ae[0].getX()-1,Ae[0].getY()),Ae[1]=new ve(u-Ae[1].getX()-1,Ae[1].getY()))}return xe}catch{}}}throw new ye}static recordPattern(s,l,u){const d=u.length;for(let I=0;I<d;I++)u[I]=0;const g=s.getSize();if(l>=g)throw new ye;let p=!s.get(l),E=0,A=l;for(;A<g;){if(s.get(A)!==p)u[E]++;else{if(++E===d)break;u[E]=1,p=!p}A++}if(!(E===d||E===d-1&&A===g))throw new ye}static recordPatternInReverse(s,l,u){let d=u.length,g=s.get(l);for(;l>0&&d>=0;)s.get(--l)!==g&&(d--,g=!g);if(d>=0)throw new ye;vn.recordPattern(s,l+1,u)}static patternMatchVariance(s,l,u){const d=s.length;let g=0,p=0;for(let I=0;I<d;I++)g+=s[I],p+=l[I];if(g<p)return Number.POSITIVE_INFINITY;const E=g/p;u*=E;let A=0;for(let I=0;I<d;I++){const N=s[I],B=l[I]*E,G=N>B?N-B:B-N;if(G>u)return Number.POSITIVE_INFINITY;A+=G}return A/g}}class nt extends vn{static findStartPattern(s){const l=s.getSize(),u=s.getNextSet(0);let d=0,g=Int32Array.from([0,0,0,0,0,0]),p=u,E=!1;const A=6;for(let I=u;I<l;I++)if(s.get(I)!==E)g[d]++;else{if(d===A-1){let N=nt.MAX_AVG_VARIANCE,B=-1;for(let G=nt.CODE_START_A;G<=nt.CODE_START_C;G++){const ae=vn.patternMatchVariance(g,nt.CODE_PATTERNS[G],nt.MAX_INDIVIDUAL_VARIANCE);ae<N&&(N=ae,B=G)}if(B>=0&&s.isRange(Math.max(0,p-(I-p)/2),p,!1))return Int32Array.from([p,I,B]);p+=g[0]+g[1],g=g.slice(2,g.length-1),g[d-1]=0,g[d]=0,d--}else d++;g[d]=1,E=!E}throw new ye}static decodeCode(s,l,u){vn.recordPattern(s,u,l);let d=nt.MAX_AVG_VARIANCE,g=-1;for(let p=0;p<nt.CODE_PATTERNS.length;p++){const E=nt.CODE_PATTERNS[p],A=this.patternMatchVariance(l,E,nt.MAX_INDIVIDUAL_VARIANCE);A<d&&(d=A,g=p)}if(g>=0)return g;throw new ye}decodeRow(s,l,u){const d=u&&u.get(De.ASSUME_GS1)===!0,g=nt.findStartPattern(l),p=g[2];let E=0;const A=new Uint8Array(20);A[E++]=p;let I;switch(p){case nt.CODE_START_A:I=nt.CODE_CODE_A;break;case nt.CODE_START_B:I=nt.CODE_CODE_B;break;case nt.CODE_START_C:I=nt.CODE_CODE_C;break;default:throw new k}let N=!1,B=!1,G="",ae=g[0],ge=g[1];const xe=Int32Array.from([0,0,0,0,0,0]);let Ae=0,ke=0,st=p,it=0,Ze=!0,sn=!1,qt=!1;for(;!N;){const Ja=B;switch(B=!1,Ae=ke,ke=nt.decodeCode(l,xe,ge),A[E++]=ke,ke!==nt.CODE_STOP&&(Ze=!0),ke!==nt.CODE_STOP&&(it++,st+=it*ke),ae=ge,ge+=xe.reduce((b0,ju)=>b0+ju,0),ke){case nt.CODE_START_A:case nt.CODE_START_B:case nt.CODE_START_C:throw new k}switch(I){case nt.CODE_CODE_A:if(ke<64)qt===sn?G+=String.fromCharCode(32+ke):G+=String.fromCharCode(32+ke+128),qt=!1;else if(ke<96)qt===sn?G+=String.fromCharCode(ke-64):G+=String.fromCharCode(ke+64),qt=!1;else switch(ke!==nt.CODE_STOP&&(Ze=!1),ke){case nt.CODE_FNC_1:d&&(G.length===0?G+="]C1":G+="");break;case nt.CODE_FNC_2:case nt.CODE_FNC_3:break;case nt.CODE_FNC_4_A:!sn&&qt?(sn=!0,qt=!1):sn&&qt?(sn=!1,qt=!1):qt=!0;break;case nt.CODE_SHIFT:B=!0,I=nt.CODE_CODE_B;break;case nt.CODE_CODE_B:I=nt.CODE_CODE_B;break;case nt.CODE_CODE_C:I=nt.CODE_CODE_C;break;case nt.CODE_STOP:N=!0;break}break;case nt.CODE_CODE_B:if(ke<96)qt===sn?G+=String.fromCharCode(32+ke):G+=String.fromCharCode(32+ke+128),qt=!1;else switch(ke!==nt.CODE_STOP&&(Ze=!1),ke){case nt.CODE_FNC_1:d&&(G.length===0?G+="]C1":G+="");break;case nt.CODE_FNC_2:case nt.CODE_FNC_3:break;case nt.CODE_FNC_4_B:!sn&&qt?(sn=!0,qt=!1):sn&&qt?(sn=!1,qt=!1):qt=!0;break;case nt.CODE_SHIFT:B=!0,I=nt.CODE_CODE_A;break;case nt.CODE_CODE_A:I=nt.CODE_CODE_A;break;case nt.CODE_CODE_C:I=nt.CODE_CODE_C;break;case nt.CODE_STOP:N=!0;break}break;case nt.CODE_CODE_C:if(ke<100)ke<10&&(G+="0"),G+=ke;else switch(ke!==nt.CODE_STOP&&(Ze=!1),ke){case nt.CODE_FNC_1:d&&(G.length===0?G+="]C1":G+="");break;case nt.CODE_CODE_A:I=nt.CODE_CODE_A;break;case nt.CODE_CODE_B:I=nt.CODE_CODE_B;break;case nt.CODE_STOP:N=!0;break}break}Ja&&(I=I===nt.CODE_CODE_A?nt.CODE_CODE_B:nt.CODE_CODE_A)}const Ar=ge-ae;if(ge=l.getNextUnset(ge),!l.isRange(ge,Math.min(l.getSize(),ge+(ge-ae)/2),!1))throw new ye;if(st-=it*Ae,st%103!==Ae)throw new O;const $i=G.length;if($i===0)throw new ye;$i>0&&Ze&&(I===nt.CODE_CODE_C?G=G.substring(0,$i-2):G=G.substring(0,$i-1));const ci=(g[1]+g[0])/2,Un=ae+Ar/2,Yr=A.length,zi=new Uint8Array(Yr);for(let Ja=0;Ja<Yr;Ja++)zi[Ja]=A[Ja];const Uo=[new ve(ci,s),new ve(Un,s)];return new se(G,zi,0,Uo,pe.CODE_128,new Date().getTime())}}nt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],nt.MAX_AVG_VARIANCE=.25,nt.MAX_INDIVIDUAL_VARIANCE=.7,nt.CODE_SHIFT=98,nt.CODE_CODE_C=99,nt.CODE_CODE_B=100,nt.CODE_CODE_A=101,nt.CODE_FNC_1=102,nt.CODE_FNC_2=97,nt.CODE_FNC_3=96,nt.CODE_FNC_4_A=101,nt.CODE_FNC_4_B=100,nt.CODE_START_A=103,nt.CODE_START_B=104,nt.CODE_START_C=105,nt.CODE_STOP=106;class wn extends vn{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,u){let d=this.counters;d.fill(0),this.decodeRowResult="";let g=wn.findAsteriskPattern(l,d),p=l.getNextSet(g[1]),E=l.getSize(),A,I;do{wn.recordPattern(l,p,d);let xe=wn.toNarrowWidePattern(d);if(xe<0)throw new ye;A=wn.patternToChar(xe),this.decodeRowResult+=A,I=p;for(let Ae of d)p+=Ae;p=l.getNextSet(p)}while(A!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let N=0;for(let xe of d)N+=xe;let B=p-I-N;if(p!==E&&B*2<N)throw new ye;if(this.usingCheckDigit){let xe=this.decodeRowResult.length-1,Ae=0;for(let ke=0;ke<xe;ke++)Ae+=wn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ke));if(this.decodeRowResult.charAt(xe)!==wn.ALPHABET_STRING.charAt(Ae%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,xe)}if(this.decodeRowResult.length===0)throw new ye;let G;this.extendedMode?G=wn.decodeExtended(this.decodeRowResult):G=this.decodeRowResult;let ae=(g[1]+g[0])/2,ge=I+N/2;return new se(G,null,0,[new ve(ae,s),new ve(ge,s)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(s,l){let u=s.getSize(),d=s.getNextSet(0),g=0,p=d,E=!1,A=l.length;for(let I=d;I<u;I++)if(s.get(I)!==E)l[g]++;else{if(g===A-1){if(this.toNarrowWidePattern(l)===wn.ASTERISK_ENCODING&&s.isRange(Math.max(0,p-Math.floor((I-p)/2)),p,!1))return[p,I];p+=l[0]+l[1],l.copyWithin(0,2,2+g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,E=!E}throw new ye}static toNarrowWidePattern(s){let l=s.length,u=0,d;do{let g=2147483647;for(let A of s)A<g&&A>u&&(g=A);u=g,d=0;let p=0,E=0;for(let A=0;A<l;A++){let I=s[A];I>u&&(E|=1<<l-1-A,d++,p+=I)}if(d===3){for(let A=0;A<l&&d>0;A++){let I=s[A];if(I>u&&(d--,I*2>=p))return-1}return E}}while(d>3);return-1}static patternToChar(s){for(let l=0;l<wn.CHARACTER_ENCODINGS.length;l++)if(wn.CHARACTER_ENCODINGS[l]===s)return wn.ALPHABET_STRING.charAt(l);if(s===wn.ASTERISK_ENCODING)return"*";throw new ye}static decodeExtended(s){let l=s.length,u="";for(let d=0;d<l;d++){let g=s.charAt(d);if(g==="+"||g==="$"||g==="%"||g==="/"){let p=s.charAt(d+1),E="\0";switch(g){case"+":if(p>="A"&&p<="Z")E=String.fromCharCode(p.charCodeAt(0)+32);else throw new k;break;case"$":if(p>="A"&&p<="Z")E=String.fromCharCode(p.charCodeAt(0)-64);else throw new k;break;case"%":if(p>="A"&&p<="E")E=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")E=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")E=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")E=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")E="\0";else if(p==="V")E="@";else if(p==="W")E="`";else if(p==="X"||p==="Y"||p==="Z")E="";else throw new k;break;case"/":if(p>="A"&&p<="O")E=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")E=":";else throw new k;break}u+=E,d++}else u+=g}return u}}wn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",wn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],wn.ASTERISK_ENCODING=148;class Pt extends vn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,l,u){let d=this.decodeStart(l),g=this.decodeEnd(l),p=new Y;Pt.decodeMiddle(l,d[1],g[0],p);let E=p.toString(),A=null;u!=null&&(A=u.get(De.ALLOWED_LENGTHS)),A==null&&(A=Pt.DEFAULT_ALLOWED_LENGTHS);let I=E.length,N=!1,B=0;for(let ge of A){if(I===ge){N=!0;break}ge>B&&(B=ge)}if(!N&&I>B&&(N=!0),!N)throw new k;const G=[new ve(d[1],s),new ve(g[0],s)];return new se(E,null,0,G,pe.ITF,new Date().getTime())}static decodeMiddle(s,l,u,d){let g=new Int32Array(10),p=new Int32Array(5),E=new Int32Array(5);for(g.fill(0),p.fill(0),E.fill(0);l<u;){vn.recordPattern(s,l,g);for(let I=0;I<5;I++){let N=2*I;p[I]=g[N],E[I]=g[N+1]}let A=Pt.decodeDigit(p);d.append(A.toString()),A=this.decodeDigit(E),d.append(A.toString()),g.forEach(function(I){l+=I})}}decodeStart(s){let l=Pt.skipWhiteSpace(s),u=Pt.findGuardPattern(s,l,Pt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let d=l-1;u>0&&d>=0&&!s.get(d);d--)u--;if(u!==0)throw new ye}static skipWhiteSpace(s){const l=s.getSize(),u=s.getNextSet(0);if(u===l)throw new ye;return u}decodeEnd(s){s.reverse();try{let l=Pt.skipWhiteSpace(s),u;try{u=Pt.findGuardPattern(s,l,Pt.END_PATTERN_REVERSED[0])}catch(g){g instanceof ye&&(u=Pt.findGuardPattern(s,l,Pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let d=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-d,u}finally{s.reverse()}}static findGuardPattern(s,l,u){let d=u.length,g=new Int32Array(d),p=s.getSize(),E=!1,A=0,I=l;g.fill(0);for(let N=l;N<p;N++)if(s.get(N)!==E)g[A]++;else{if(A===d-1){if(vn.patternMatchVariance(g,u,Pt.MAX_INDIVIDUAL_VARIANCE)<Pt.MAX_AVG_VARIANCE)return[I,N];I+=g[0]+g[1],M.arraycopy(g,2,g,0,A-1),g[A-1]=0,g[A]=0,A--}else A++;g[A]=1,E=!E}throw new ye}static decodeDigit(s){let l=Pt.MAX_AVG_VARIANCE,u=-1,d=Pt.PATTERNS.length;for(let g=0;g<d;g++){let p=Pt.PATTERNS[g],E=vn.patternMatchVariance(s,p,Pt.MAX_INDIVIDUAL_VARIANCE);E<l?(l=E,u=g):E===l&&(u=-1)}if(u>=0)return u%10;throw new ye}}Pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Pt.MAX_AVG_VARIANCE=.38,Pt.MAX_INDIVIDUAL_VARIANCE=.5,Pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Pt.START_PATTERN=Int32Array.from([1,1,1,1]),Pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class zn extends vn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let l=!1,u,d=0,g=Int32Array.from([0,0,0]);for(;!l;){g=Int32Array.from([0,0,0]),u=zn.findGuardPattern(s,d,!1,this.START_END_PATTERN,g);let p=u[0];d=u[1];let E=p-(d-p);E>=0&&(l=s.isRange(E,p,!1))}return u}static checkChecksum(s){return zn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return zn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let d=l-1;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new k;u+=g}u*=3;for(let d=l-2;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new k;u+=g}return(1e3-u)%10}static decodeEnd(s,l){return zn.findGuardPattern(s,l,!1,zn.START_END_PATTERN,new Int32Array(zn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,l,u,d){return this.findGuardPattern(s,l,u,d,new Int32Array(d.length))}static findGuardPattern(s,l,u,d,g){let p=s.getSize();l=u?s.getNextUnset(l):s.getNextSet(l);let E=0,A=l,I=d.length,N=u;for(let B=l;B<p;B++)if(s.get(B)!==N)g[E]++;else{if(E===I-1){if(vn.patternMatchVariance(g,d,zn.MAX_INDIVIDUAL_VARIANCE)<zn.MAX_AVG_VARIANCE)return Int32Array.from([A,B]);A+=g[0]+g[1];let G=g.slice(2,g.length-1);for(let ae=0;ae<E-1;ae++)g[ae]=G[ae];g[E-1]=0,g[E]=0,E--}else E++;g[E]=1,N=!N}throw new ye}static decodeDigit(s,l,u,d){this.recordPattern(s,u,l);let g=this.MAX_AVG_VARIANCE,p=-1,E=d.length;for(let A=0;A<E;A++){let I=d[A],N=vn.patternMatchVariance(l,I,zn.MAX_INDIVIDUAL_VARIANCE);N<g&&(g=N,p=A)}if(p>=0)return p;throw new ye}}zn.MAX_AVG_VARIANCE=.48,zn.MAX_INDIVIDUAL_VARIANCE=.7,zn.START_END_PATTERN=Int32Array.from([1,1,1]),zn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),zn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),zn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Fi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(l,u,d),p=d.toString(),E=Fi.parseExtensionString(p),A=[new ve((u[0]+u[1])/2,s),new ve(g,s)],I=new se(p,null,0,A,pe.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&I.putAllMetadata(E),I}decodeMiddle(s,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=l[1],E=0;for(let I=0;I<5&&p<g;I++){let N=zn.decodeDigit(s,d,p,zn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+N%10);for(let B of d)p+=B;N>=10&&(E|=1<<4-I),I!==4&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(u.length!==5)throw new ye;let A=this.determineCheckDigit(E);if(Fi.extensionChecksum(u.toString())!==A)throw new ye;return p}static extensionChecksum(s){let l=s.length,u=0;for(let d=l-2;d>=0;d-=2)u+=s.charAt(d).charCodeAt(0)-48;u*=3;for(let d=l-1;d>=0;d-=2)u+=s.charAt(d).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let l=0;l<10;l++)if(s===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new ye}static parseExtensionString(s){if(s.length!==5)return null;let l=Fi.parseExtension5String(s);return l==null?null:new Map([[rt.SUGGESTED_PRICE,l]])}static parseExtension5String(s){let l;switch(s.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(s.substring(1)),d=(u/100).toString(),g=u%100,p=g<10?"0"+g:g.toString();return l+d+"."+p}}class ea{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let d=this.decodeRowStringBuffer,g=this.decodeMiddle(l,u,d),p=d.toString(),E=ea.parseExtensionString(p),A=[new ve((u[0]+u[1])/2,s),new ve(g,s)],I=new se(p,null,0,A,pe.UPC_EAN_EXTENSION,new Date().getTime());return E!=null&&I.putAllMetadata(E),I}decodeMiddle(s,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=l[1],E=0;for(let A=0;A<2&&p<g;A++){let I=zn.decodeDigit(s,d,p,zn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+I%10);for(let N of d)p+=N;I>=10&&(E|=1<<1-A),A!==1&&(p=s.getNextSet(p),p=s.getNextUnset(p))}if(u.length!==2)throw new ye;if(parseInt(u.toString())%4!==E)throw new ye;return p}static parseExtensionString(s){return s.length!==2?null:new Map([[rt.ISSUE_NUMBER,parseInt(s)]])}}class Ai{static decodeRow(s,l,u){let d=zn.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Fi().decodeRow(s,l,d)}catch{return new ea().decodeRow(s,l,d)}}}Ai.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tn extends zn{constructor(){super(),this.decodeRowStringBuffer="",tn.L_AND_G_PATTERNS=tn.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let l=tn.L_PATTERNS[s-10],u=new Int32Array(l.length);for(let d=0;d<l.length;d++)u[d]=l[l.length-d-1];tn.L_AND_G_PATTERNS[s]=u}}decodeRow(s,l,u){let d=tn.findStartGuardPattern(l),g=u==null?null:u.get(De.NEED_RESULT_POINT_CALLBACK);if(g!=null){const Ze=new ve((d[0]+d[1])/2,s);g.foundPossibleResultPoint(Ze)}let p=this.decodeMiddle(l,d,this.decodeRowStringBuffer),E=p.rowOffset,A=p.resultString;if(g!=null){const Ze=new ve(E,s);g.foundPossibleResultPoint(Ze)}let I=this.decodeEnd(l,E);if(g!=null){const Ze=new ve((I[0]+I[1])/2,s);g.foundPossibleResultPoint(Ze)}let N=I[1],B=N+(N-I[0]);if(B>=l.getSize()||!l.isRange(N,B,!1))throw new ye;let G=A.toString();if(G.length<8)throw new k;if(!tn.checkChecksum(G))throw new O;let ae=(d[1]+d[0])/2,ge=(I[1]+I[0])/2,xe=this.getBarcodeFormat(),Ae=[new ve(ae,s),new ve(ge,s)],ke=new se(G,null,0,Ae,xe,new Date().getTime()),st=0;try{let Ze=Ai.decodeRow(s,l,I[1]);ke.putMetadata(rt.UPC_EAN_EXTENSION,Ze.getText()),ke.putAllMetadata(Ze.getResultMetadata()),ke.addResultPoints(Ze.getResultPoints()),st=Ze.getText().length}catch{}let it=u==null?null:u.get(De.ALLOWED_EAN_EXTENSIONS);if(it!=null){let Ze=!1;for(let sn in it)if(st.toString()===sn){Ze=!0;break}if(!Ze)throw new ye}return ke}decodeEnd(s,l){return tn.findGuardPattern(s,l,!1,tn.START_END_PATTERN,new Int32Array(tn.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return tn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return tn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let d=l-1;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new k;u+=g}u*=3;for(let d=l-2;d>=0;d-=2){let g=s.charAt(d).charCodeAt(0)-48;if(g<0||g>9)throw new k;u+=g}return(1e3-u)%10}}class Pn extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=l[1],E=0;for(let I=0;I<6&&p<g;I++){let N=tn.decodeDigit(s,d,p,tn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+N%10);for(let B of d)p+=B;N>=10&&(E|=1<<5-I)}u=Pn.determineFirstDigit(u,E),p=tn.findGuardPattern(s,p,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<6&&p<g;I++){let N=tn.decodeDigit(s,d,p,tn.L_PATTERNS);u+=String.fromCharCode(48+N);for(let B of d)p+=B}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(s,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new ye}}Pn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Jr extends tn{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p=l[1];for(let A=0;A<4&&p<g;A++){let I=tn.decodeDigit(s,d,p,tn.L_PATTERNS);u+=String.fromCharCode(48+I);for(let N of d)p+=N}p=tn.findGuardPattern(s,p,!0,tn.MIDDLE_PATTERN,new Int32Array(tn.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<4&&p<g;A++){let I=tn.decodeDigit(s,d,p,tn.L_PATTERNS);u+=String.fromCharCode(48+I);for(let N of d)p+=N}return{rowOffset:p,resultString:u}}getBarcodeFormat(){return pe.EAN_8}}class Bi extends tn{constructor(){super(...arguments),this.ean13Reader=new Pn}getBarcodeFormat(){return pe.UPC_A}decode(s,l){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,l,u))}decodeMiddle(s,l,u){return this.ean13Reader.decodeMiddle(s,l,u)}maybeReturnResult(s){let l=s.getText();if(l.charAt(0)==="0"){let u=new se(l.substring(1),null,null,s.getResultPoints(),pe.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new ye}reset(){this.ean13Reader.reset()}}class sr extends tn{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,l,u){const d=this.decodeMiddleCounters.map(I=>I);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const g=s.getSize();let p=l[1],E=0;for(let I=0;I<6&&p<g;I++){const N=sr.decodeDigit(s,d,p,sr.L_AND_G_PATTERNS);u+=String.fromCharCode(48+N%10);for(let B of d)p+=B;N>=10&&(E|=1<<5-I)}let A=sr.determineNumSysAndCheckDigit(u,E);return{rowOffset:p,resultString:A}}decodeEnd(s,l){return sr.findGuardPatternWithoutCounters(s,l,!0,sr.MIDDLE_END_PATTERN)}checkChecksum(s){return tn.checkChecksum(sr.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,l){for(let u=0;u<=1;u++)for(let d=0;d<10;d++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][d]){let g=String.fromCharCode(48+u),p=String.fromCharCode(48+d);return g+s+p}throw ye.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(s){const l=s.slice(1,7).split("").map(g=>g.charCodeAt(0)),u=new Y;u.append(s.charAt(0));let d=l[5];switch(d){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(d),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(d);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}sr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ha extends vn{constructor(s){super();let l=s==null?null:s.get(De.POSSIBLE_FORMATS),u=[];r(l)?(u.push(new Pn),u.push(new Bi),u.push(new Jr),u.push(new sr)):(l.indexOf(pe.EAN_13)>-1&&u.push(new Pn),l.indexOf(pe.UPC_A)>-1&&u.push(new Bi),l.indexOf(pe.EAN_8)>-1&&u.push(new Jr),l.indexOf(pe.UPC_E)>-1&&u.push(new sr)),this.readers=u}decodeRow(s,l,u){for(let d of this.readers)try{const g=d.decodeRow(s,l,u),p=g.getBarcodeFormat()===pe.EAN_13&&g.getText().charAt(0)==="0",E=u==null?null:u.get(De.POSSIBLE_FORMATS),A=E==null||E.includes(pe.UPC_A);if(p&&A){const I=g.getRawBytes(),N=new se(g.getText().substring(1),I,I?I.length:null,g.getResultPoints(),pe.UPC_A);return N.putAllMetadata(g.getResultMetadata()),N}return g}catch{}throw new ye}reset(){for(let s of this.readers)s.reset()}}class xr extends vn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let u=0;u<l.length;u++)if(vn.patternMatchVariance(s,l[u],xr.MAX_INDIVIDUAL_VARIANCE)<xr.MAX_AVG_VARIANCE)return u;throw new ye}static count(s){return pt.sum(new Int32Array(s))}static increment(s,l){let u=0,d=l[0];for(let g=1;g<s.length;g++)l[g]>d&&(d=l[g],u=g);s[u]++}static decrement(s,l){let u=0,d=l[0];for(let g=1;g<s.length;g++)l[g]<d&&(d=l[g],u=g);s[u]--}static isFinderPattern(s){let l=s[0]+s[1],u=l+s[2]+s[3],d=l/u;if(d>=xr.MIN_FINDER_PATTERN_RATIO&&d<=xr.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let E of s)E>p&&(p=E),E<g&&(g=E);return p<10*g}return!1}}xr.MAX_AVG_VARIANCE=.2,xr.MAX_INDIVIDUAL_VARIANCE=.45,xr.MIN_FINDER_PATTERN_RATIO=9.5/12,xr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xr{constructor(s,l){this.value=s,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Xr))return!1;const l=s;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Yi{constructor(s,l,u,d,g){this.value=s,this.startEnd=l,this.value=s,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new ve(u,g)),this.resultPoints.push(new ve(d,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Yi))return!1;const l=s;return this.value===l.value}hashCode(){return this.value}}class Ti{constructor(){}static getRSSvalue(s,l,u){let d=0;for(let A of s)d+=A;let g=0,p=0,E=s.length;for(let A=0;A<E-1;A++){let I;for(I=1,p|=1<<A;I<s[A];I++,p&=~(1<<A)){let N=Ti.combins(d-I-1,E-A-2);if(u&&p===0&&d-I-(E-A-1)>=E-A-1&&(N-=Ti.combins(d-I-(E-A),E-A-2)),E-A-1>1){let B=0;for(let G=d-I-(E-A-2);G>l;G--)B+=Ti.combins(d-I-G-1,E-A-3);N-=B*(E-1-A)}else d-I>l&&N--;g+=N}d-=I}return g}static combins(s,l){let u,d;s-l>l?(d=l,u=s-l):(d=s-l,u=l);let g=1,p=1;for(let E=s;E>u;E--)g*=E,p<=d&&(g/=p,p++);for(;p<=d;)g/=p,p++;return g}}class ta{static buildBitArray(s){let l=s.length*2-1;s[s.length-1].getRightChar()==null&&(l-=1);let u=12*l,d=new me(u),g=0,E=s[0].getRightChar().getValue();for(let A=11;A>=0;--A)(E&1<<A)!=0&&d.set(g),g++;for(let A=1;A<s.length;++A){let I=s[A],N=I.getLeftChar().getValue();for(let B=11;B>=0;--B)(N&1<<B)!=0&&d.set(g),g++;if(I.getRightChar()!=null){let B=I.getRightChar().getValue();for(let G=11;G>=0;--G)(B&1<<G)!=0&&d.set(g),g++}}return d}}class ai{constructor(s,l){l?this.decodedInformation=null:(this.finished=s,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class na{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class fr extends na{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===fr.FNC1}}fr.FNC1="$";class qr extends na{constructor(s,l,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class j extends na{constructor(s,l,u){if(super(s),l<0||l>10||u<0||u>10)throw new k;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===j.FNC1}isSecondDigitFNC1(){return this.secondDigit===j.FNC1}isAnyFNC1(){return this.firstDigit===j.FNC1||this.secondDigit===j.FNC1}}j.FNC1=10;class X{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new ye;let l=s.substring(0,2);for(let g of X.TWO_DIGIT_DATA_LENGTH)if(g[0]===l)return g[1]===X.VARIABLE_LENGTH?X.processVariableAI(2,g[2],s):X.processFixedAI(2,g[1],s);if(s.length<3)throw new ye;let u=s.substring(0,3);for(let g of X.THREE_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===X.VARIABLE_LENGTH?X.processVariableAI(3,g[2],s):X.processFixedAI(3,g[1],s);for(let g of X.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===X.VARIABLE_LENGTH?X.processVariableAI(4,g[2],s):X.processFixedAI(4,g[1],s);if(s.length<4)throw new ye;let d=s.substring(0,4);for(let g of X.FOUR_DIGIT_DATA_LENGTH)if(g[0]===d)return g[1]===X.VARIABLE_LENGTH?X.processVariableAI(4,g[2],s):X.processFixedAI(4,g[1],s);throw new ye}static processFixedAI(s,l,u){if(u.length<s)throw new ye;let d=u.substring(0,s);if(u.length<s+l)throw new ye;let g=u.substring(s,s+l),p=u.substring(s+l),E="("+d+")"+g,A=X.parseFieldsInGeneralPurpose(p);return A==null?E:E+A}static processVariableAI(s,l,u){let d=u.substring(0,s),g;u.length<s+l?g=u.length:g=s+l;let p=u.substring(s,g),E=u.substring(g),A="("+d+")"+p,I=X.parseFieldsInGeneralPurpose(E);return I==null?A:A+I}}X.VARIABLE_LENGTH=[],X.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",X.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",X.VARIABLE_LENGTH,20],["22",X.VARIABLE_LENGTH,29],["30",X.VARIABLE_LENGTH,8],["37",X.VARIABLE_LENGTH,8],["90",X.VARIABLE_LENGTH,30],["91",X.VARIABLE_LENGTH,30],["92",X.VARIABLE_LENGTH,30],["93",X.VARIABLE_LENGTH,30],["94",X.VARIABLE_LENGTH,30],["95",X.VARIABLE_LENGTH,30],["96",X.VARIABLE_LENGTH,30],["97",X.VARIABLE_LENGTH,3],["98",X.VARIABLE_LENGTH,30],["99",X.VARIABLE_LENGTH,30]],X.THREE_DIGIT_DATA_LENGTH=[["240",X.VARIABLE_LENGTH,30],["241",X.VARIABLE_LENGTH,30],["242",X.VARIABLE_LENGTH,6],["250",X.VARIABLE_LENGTH,30],["251",X.VARIABLE_LENGTH,30],["253",X.VARIABLE_LENGTH,17],["254",X.VARIABLE_LENGTH,20],["400",X.VARIABLE_LENGTH,30],["401",X.VARIABLE_LENGTH,30],["402",17],["403",X.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",X.VARIABLE_LENGTH,20],["421",X.VARIABLE_LENGTH,15],["422",3],["423",X.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],X.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",X.VARIABLE_LENGTH,15],["391",X.VARIABLE_LENGTH,18],["392",X.VARIABLE_LENGTH,15],["393",X.VARIABLE_LENGTH,18],["703",X.VARIABLE_LENGTH,30]],X.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",X.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",X.VARIABLE_LENGTH,20],["8003",X.VARIABLE_LENGTH,30],["8004",X.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",X.VARIABLE_LENGTH,30],["8008",X.VARIABLE_LENGTH,12],["8018",18],["8020",X.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",X.VARIABLE_LENGTH,70],["8200",X.VARIABLE_LENGTH,70]];class Q{constructor(s){this.buffer=new Y,this.information=s}decodeAllCodes(s,l){let u=l,d=null;do{let g=this.decodeGeneralPurposeField(u,d),p=X.parseFieldsInGeneralPurpose(g.getNewString());if(p!=null&&s.append(p),g.isRemaining()?d=""+g.getRemainingValue():d=null,u===g.getNewPosition())break;u=g.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let l=s;l<s+3;++l)if(this.information.get(l))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(s,4);return g===0?new j(this.information.getSize(),j.FNC1,j.FNC1):new j(this.information.getSize(),g-1,j.FNC1)}let l=this.extractNumericValueFromBitArray(s,7),u=(l-8)/11,d=(l-8)%11;return new j(s+7,u,d)}extractNumericValueFromBitArray(s,l){return Q.extractNumericValueFromBitArray(this.information,s,l)}static extractNumericValueFromBitArray(s,l,u){let d=0;for(let g=0;g<u;++g)s.get(l+g)&&(d|=1<<u-g-1);return d}decodeGeneralPurposeField(s,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new qr(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new qr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),s=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),s=l.isFinished()):(l=this.parseNumericBlock(),s=l.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let l;return s.isSecondDigitFNC1()?l=new qr(this.current.getPosition(),this.buffer.toString()):l=new qr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new ai(!0,l)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let l=new qr(this.current.getPosition(),this.buffer.toString());return new ai(!0,l)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ai(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new qr(this.current.getPosition(),this.buffer.toString());return new ai(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ai(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new qr(this.current.getPosition(),this.buffer.toString());return new ai(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ai(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(s,8);return d>=232&&d<253}decodeIsoIec646(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new fr(s+5,fr.FNC1);if(l>=5&&l<15)return new fr(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new fr(s+7,""+(u+1));if(u>=90&&u<116)return new fr(s+7,""+(u+7));let d=this.extractNumericValueFromBitArray(s,8),g;switch(d){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new k}return new fr(s+8,g)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new fr(s+5,fr.FNC1);if(l>=5&&l<15)return new fr(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new fr(s+6,""+(u+33));let d;switch(u){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new Hn("Decoding invalid alphanumeric value: "+u)}return new fr(s+6,d)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<5&&l+s<this.information.getSize();++l)if(l===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+l))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let l=s;l<s+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<4&&l+s<this.information.getSize();++l)if(this.information.get(s+l))return!1;return!0}}class ee{constructor(s){this.information=s,this.generalDecoder=new Q(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ne extends ee{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,u)}encodeCompressedGtinWithoutAI(s,l,u){for(let d=0;d<4;++d){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*d,10);g/100===0&&s.append("0"),g/10===0&&s.append("0"),s.append(g)}ne.appendCheckDigit(s,u)}static appendCheckDigit(s,l){let u=0;for(let d=0;d<13;d++){let g=s.charAt(d+l).charCodeAt(0)-48;u+=(d&1)===0?3*g:g}u=10-u%10,u===10&&(u=0),s.append(u)}}ne.GTIN_SIZE=40;class oe extends ne{constructor(s){super(s)}parseInformation(){let s=new Y;s.append("(01)");let l=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(oe.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,oe.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,oe.HEADER_SIZE+44)}}oe.HEADER_SIZE=4;class Ie extends ee{constructor(s){super(s)}parseInformation(){let s=new Y;return this.getGeneralDecoder().decodeAllCodes(s,Ie.HEADER_SIZE)}}Ie.HEADER_SIZE=5;class He extends ne{constructor(s){super(s)}encodeCompressedWeight(s,l,u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(s,d);let g=this.checkWeight(d),p=1e5;for(let E=0;E<5;++E)g/p===0&&s.append("0"),p/=10;s.append(g)}}class Te extends He{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Te.HEADER_SIZE+He.GTIN_SIZE+Te.WEIGHT_SIZE)throw new ye;let s=new Y;return this.encodeCompressedGtin(s,Te.HEADER_SIZE),this.encodeCompressedWeight(s,Te.HEADER_SIZE+He.GTIN_SIZE,Te.WEIGHT_SIZE),s.toString()}}Te.HEADER_SIZE=5,Te.WEIGHT_SIZE=15;class Oe extends Te{constructor(s){super(s)}addWeightCode(s,l){s.append("(3103)")}checkWeight(s){return s}}class Re extends Te{constructor(s){super(s)}addWeightCode(s,l){l<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class qe extends ne{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<qe.HEADER_SIZE+ne.GTIN_SIZE)throw new ye;let s=new Y;this.encodeCompressedGtin(s,qe.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(qe.HEADER_SIZE+ne.GTIN_SIZE,qe.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(qe.HEADER_SIZE+ne.GTIN_SIZE+qe.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}qe.HEADER_SIZE=8,qe.LAST_DIGIT_SIZE=2;class $e extends ne{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<$e.HEADER_SIZE+ne.GTIN_SIZE)throw new ye;let s=new Y;this.encodeCompressedGtin(s,$e.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+ne.GTIN_SIZE,$e.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray($e.HEADER_SIZE+ne.GTIN_SIZE+$e.LAST_DIGIT_SIZE,$e.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let d=this.getGeneralDecoder().decodeGeneralPurposeField($e.HEADER_SIZE+ne.GTIN_SIZE+$e.LAST_DIGIT_SIZE+$e.FIRST_THREE_DIGITS_SIZE,null);return s.append(d.getNewString()),s.toString()}}$e.HEADER_SIZE=8,$e.LAST_DIGIT_SIZE=2,$e.FIRST_THREE_DIGITS_SIZE=10;class et extends He{constructor(s,l,u){super(s),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=et.HEADER_SIZE+et.GTIN_SIZE+et.WEIGHT_SIZE+et.DATE_SIZE)throw new ye;let s=new Y;return this.encodeCompressedGtin(s,et.HEADER_SIZE),this.encodeCompressedWeight(s,et.HEADER_SIZE+et.GTIN_SIZE,et.WEIGHT_SIZE),this.encodeCompressedDate(s,et.HEADER_SIZE+et.GTIN_SIZE+et.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,et.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let d=u%32;u/=32;let g=u%12+1;u/=12;let p=u;p/10==0&&s.append("0"),s.append(p),g/10==0&&s.append("0"),s.append(g),d/10==0&&s.append("0"),s.append(d)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}et.HEADER_SIZE=8,et.WEIGHT_SIZE=20,et.DATE_SIZE=16;function tt(F){try{if(F.get(1))return new oe(F);if(!F.get(2))return new Ie(F);switch(Q.extractNumericValueFromBitArray(F,1,4)){case 4:return new Oe(F);case 5:return new Re(F)}switch(Q.extractNumericValueFromBitArray(F,1,5)){case 12:return new qe(F);case 13:return new $e(F)}switch(Q.extractNumericValueFromBitArray(F,1,7)){case 56:return new et(F,"310","11");case 57:return new et(F,"320","11");case 58:return new et(F,"310","13");case 59:return new et(F,"320","13");case 60:return new et(F,"310","15");case 61:return new et(F,"320","15");case 62:return new et(F,"310","17");case 63:return new et(F,"320","17")}}catch(s){throw console.log(s),new Hn("unknown decoder: "+F)}}class ct{constructor(s,l,u,d){this.leftchar=s,this.rightchar=l,this.finderpattern=u,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,l){return s instanceof ct?ct.equalsOrNull(s.leftchar,l.leftchar)&&ct.equalsOrNull(s.rightchar,l.rightchar)&&ct.equalsOrNull(s.finderpattern,l.finderpattern):!1}static equalsOrNull(s,l){return s===null?l===null:ct.equals(s,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Et{constructor(s,l,u){this.pairs=s,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,l){return s instanceof Et?this.checkEqualitity(s,l)&&s.wasReversed===l.wasReversed:!1}checkEqualitity(s,l){if(!s||!l)return;let u;return s.forEach((d,g)=>{l.forEach(p=>{d.getLeftChar().getValue()===p.getLeftChar().getValue()&&d.getRightChar().getValue()===p.getRightChar().getValue()&&d.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(u=!0)})}),u}}class Ve extends xr{constructor(s){super(...arguments),this.pairs=new Array(Ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,l,u){this.pairs.length=0,this.startFromEven=!1;try{return Ve.constructResult(this.decodeRow2pairs(s,l))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Ve.constructResult(this.decodeRow2pairs(s,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,s))}catch(g){if(g instanceof ye){if(!this.pairs.length)throw new ye;u=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(s,!1),d){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new ye}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),l}checkRows(s,l){for(let u=l;u<this.rows.length;u++){let d=this.rows[u];this.pairs.length=0;for(let p of s)this.pairs.push(p.getPairs());if(this.pairs.push(d.getPairs()),!Ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(s);g.push(d);try{return this.checkRows(g,u+1)}catch(p){this.verbose&&console.log(p)}}throw new ye}static isValidSequence(s){for(let l of Ve.FINDER_PATTERN_SEQUENCES){if(s.length>l.length)continue;let u=!0;for(let d=0;d<s.length;d++)if(s[d].getFinderPattern().getValue()!=l[d]){u=!1;break}if(u)return!0}return!1}storeRow(s,l){let u=0,d=!1,g=!1;for(;u<this.rows.length;){let p=this.rows[u];if(p.getRowNumber()>s){g=p.isEquivalent(this.pairs);break}d=p.isEquivalent(this.pairs),u++}g||d||Ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Et(this.pairs,s,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,l){for(let u of l)if(u.getPairs().length!==s.length){for(let d of u.getPairs())for(let g of s)if(ct.equals(d,g))break}}static isPartialRow(s,l){for(let u of l){let d=!0;for(let g of s){let p=!1;for(let E of u.getPairs())if(g.equals(E)){p=!0;break}if(!p){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(s){let l=ta.buildBitArray(s),d=tt(l).parseInformation(),g=s[0].getFinderPattern().getResultPoints(),p=s[s.length-1].getFinderPattern().getResultPoints(),E=[g[0],g[1],p[0],p[1]];return new se(d,null,null,E,pe.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),l=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let d=u.getChecksumPortion(),g=2;for(let E=1;E<this.pairs.size();++E){let A=this.pairs.get(E);d+=A.getLeftChar().getChecksumPortion(),g++;let I=A.getRightChar();I!=null&&(d+=I.getChecksumPortion(),g++)}return d%=211,211*(g-4)+d==l.getValue()}static getNextSecondBar(s,l){let u;return s.get(l)?(u=s.getNextUnset(l),u=s.getNextSet(u)):(u=s.getNextSet(l),u=s.getNextUnset(u)),u}retrieveNextPair(s,l,u){let d=l.length%2==0;this.startFromEven&&(d=!d);let g,p=!0,E=-1;do this.findNextPair(s,l,E),g=this.parseFoundFinderPattern(s,u,d),g==null?E=Ve.getNextSecondBar(s,this.startEnd[0]):p=!1;while(p);let A=this.decodeDataCharacter(s,g,d,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new ye;let I;try{I=this.decodeDataCharacter(s,g,d,!1)}catch(N){I=null,this.verbose&&console.log(N)}return new ct(A,I,g,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,l,u){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let g=s.getSize(),p;u>=0?p=u:this.isEmptyPair(l)?p=0:p=l[l.length-1].getFinderPattern().getStartEnd()[1];let E=l.length%2!=0;this.startFromEven&&(E=!E);let A=!1;for(;p<g&&(A=!s.get(p),!!A);)p++;let I=0,N=p;for(let B=p;B<g;B++)if(s.get(B)!=A)d[I]++;else{if(I==3){if(E&&Ve.reverseCounters(d),Ve.isFinderPattern(d)){this.startEnd[0]=N,this.startEnd[1]=B;return}E&&Ve.reverseCounters(d),N+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,I--}else I++;d[I]=1,A=!A}throw new ye}static reverseCounters(s){let l=s.length;for(let u=0;u<l/2;++u){let d=s[u];s[u]=s[l-u-1],s[l-u-1]=d}}parseFoundFinderPattern(s,l,u){let d,g,p;if(u){let I=this.startEnd[0]-1;for(;I>=0&&!s.get(I);)I--;I++,d=this.startEnd[0]-I,g=I,p=this.startEnd[1]}else g=this.startEnd[0],p=s.getNextUnset(this.startEnd[1]+1),d=p-this.startEnd[1];let E=this.getDecodeFinderCounters();M.arraycopy(E,0,E,1,E.length-1),E[0]=d;let A;try{A=this.parseFinderValue(E,Ve.FINDER_PATTERNS)}catch{return null}return new Yi(A,[g,p],g,p,l)}decodeDataCharacter(s,l,u,d){let g=this.getDataCharacterCounters();for(let Un=0;Un<g.length;Un++)g[Un]=0;if(d)Ve.recordPatternInReverse(s,l.getStartEnd()[0],g);else{Ve.recordPattern(s,l.getStartEnd()[1],g);for(let Un=0,Yr=g.length-1;Un<Yr;Un++,Yr--){let zi=g[Un];g[Un]=g[Yr],g[Yr]=zi}}let p=17,E=pt.sum(new Int32Array(g))/p,A=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(E-A)/A>.3)throw new ye;let I=this.getOddCounts(),N=this.getEvenCounts(),B=this.getOddRoundingErrors(),G=this.getEvenRoundingErrors();for(let Un=0;Un<g.length;Un++){let Yr=1*g[Un]/E,zi=Yr+.5;if(zi<1){if(Yr<.3)throw new ye;zi=1}else if(zi>8){if(Yr>8.7)throw new ye;zi=8}let Uo=Un/2;(Un&1)==0?(I[Uo]=zi,B[Uo]=Yr-zi):(N[Uo]=zi,G[Uo]=Yr-zi)}this.adjustOddEvenCounts(p);let ae=4*l.getValue()+(u?0:2)+(d?0:1)-1,ge=0,xe=0;for(let Un=I.length-1;Un>=0;Un--){if(Ve.isNotA1left(l,u,d)){let Yr=Ve.WEIGHTS[ae][2*Un];xe+=I[Un]*Yr}ge+=I[Un]}let Ae=0;for(let Un=N.length-1;Un>=0;Un--)if(Ve.isNotA1left(l,u,d)){let Yr=Ve.WEIGHTS[ae][2*Un+1];Ae+=N[Un]*Yr}let ke=xe+Ae;if((ge&1)!=0||ge>13||ge<4)throw new ye;let st=(13-ge)/2,it=Ve.SYMBOL_WIDEST[st],Ze=9-it,sn=Ti.getRSSvalue(I,it,!0),qt=Ti.getRSSvalue(N,Ze,!1),Ar=Ve.EVEN_TOTAL_SUBSET[st],$i=Ve.GSUM[st],ci=sn*Ar+qt+$i;return new Xr(ci,ke)}static isNotA1left(s,l,u){return!(s.getValue()==0&&l&&u)}adjustOddEvenCounts(s){let l=pt.sum(new Int32Array(this.getOddCounts())),u=pt.sum(new Int32Array(this.getEvenCounts())),d=!1,g=!1;l>13?g=!0:l<4&&(d=!0);let p=!1,E=!1;u>13?E=!0:u<4&&(p=!0);let A=l+u-s,I=(l&1)==1,N=(u&1)==0;if(A==1)if(I){if(N)throw new ye;g=!0}else{if(!N)throw new ye;E=!0}else if(A==-1)if(I){if(N)throw new ye;d=!0}else{if(!N)throw new ye;p=!0}else if(A==0){if(I){if(!N)throw new ye;l<u?(d=!0,E=!0):(g=!0,p=!0)}else if(N)throw new ye}else throw new ye;if(d){if(g)throw new ye;Ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(E)throw new ye;Ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}E&&Ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ve.SYMBOL_WIDEST=[7,5,4,3,1],Ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ve.GSUM=[0,348,1388,2948,3988],Ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ve.FINDER_PAT_A=0,Ve.FINDER_PAT_B=1,Ve.FINDER_PAT_C=2,Ve.FINDER_PAT_D=3,Ve.FINDER_PAT_E=4,Ve.FINDER_PAT_F=5,Ve.FINDER_PATTERN_SEQUENCES=[[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_C,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_C],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_E,Ve.FINDER_PAT_B,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F],[Ve.FINDER_PAT_A,Ve.FINDER_PAT_A,Ve.FINDER_PAT_B,Ve.FINDER_PAT_B,Ve.FINDER_PAT_C,Ve.FINDER_PAT_D,Ve.FINDER_PAT_D,Ve.FINDER_PAT_E,Ve.FINDER_PAT_E,Ve.FINDER_PAT_F,Ve.FINDER_PAT_F]],Ve.MAX_PAIRS=11;class Mn extends Xr{constructor(s,l,u){super(s,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Vt extends xr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,l,u){const d=this.decodePair(l,!1,s,u);Vt.addOrTally(this.possibleLeftPairs,d),l.reverse();let g=this.decodePair(l,!0,s,u);Vt.addOrTally(this.possibleRightPairs,g),l.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let E of this.possibleRightPairs)if(E.getCount()>1&&Vt.checkChecksum(p,E))return Vt.constructResult(p,E)}throw new ye}static addOrTally(s,l){if(l==null)return;let u=!1;for(let d of s)if(d.getValue()===l.getValue()){d.incrementCount(),u=!0;break}u||s.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,l){let u=4537077*s.getValue()+l.getValue(),d=new String(u).toString(),g=new Y;for(let I=13-d.length;I>0;I--)g.append("0");g.append(d);let p=0;for(let I=0;I<13;I++){let N=g.charAt(I).charCodeAt(0)-48;p+=(I&1)===0?3*N:N}p=10-p%10,p===10&&(p=0),g.append(p.toString());let E=s.getFinderPattern().getResultPoints(),A=l.getFinderPattern().getResultPoints();return new se(g.toString(),null,0,[E[0],E[1],A[0],A[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(s,l){let u=(s.getChecksumPortion()+16*l.getChecksumPortion())%79,d=9*s.getFinderPattern().getValue()+l.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,u===d}decodePair(s,l,u,d){try{let g=this.findFinderPattern(s,l),p=this.parseFoundFinderPattern(s,u,l,g),E=d==null?null:d.get(De.NEED_RESULT_POINT_CALLBACK);if(E!=null){let N=(g[0]+g[1])/2;l&&(N=s.getSize()-1-N),E.foundPossibleResultPoint(new ve(N,u))}let A=this.decodeDataCharacter(s,p,!0),I=this.decodeDataCharacter(s,p,!1);return new Mn(1597*A.getValue()+I.getValue(),A.getChecksumPortion()+4*I.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(s,l,u){let d=this.getDataCharacterCounters();for(let Ae=0;Ae<d.length;Ae++)d[Ae]=0;if(u)vn.recordPatternInReverse(s,l.getStartEnd()[0],d);else{vn.recordPattern(s,l.getStartEnd()[1]+1,d);for(let Ae=0,ke=d.length-1;Ae<ke;Ae++,ke--){let st=d[Ae];d[Ae]=d[ke],d[ke]=st}}let g=u?16:15,p=pt.sum(new Int32Array(d))/g,E=this.getOddCounts(),A=this.getEvenCounts(),I=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let Ae=0;Ae<d.length;Ae++){let ke=d[Ae]/p,st=Math.floor(ke+.5);st<1?st=1:st>8&&(st=8);let it=Math.floor(Ae/2);(Ae&1)===0?(E[it]=st,I[it]=ke-st):(A[it]=st,N[it]=ke-st)}this.adjustOddEvenCounts(u,g);let B=0,G=0;for(let Ae=E.length-1;Ae>=0;Ae--)G*=9,G+=E[Ae],B+=E[Ae];let ae=0,ge=0;for(let Ae=A.length-1;Ae>=0;Ae--)ae*=9,ae+=A[Ae],ge+=A[Ae];let xe=G+3*ae;if(u){if((B&1)!==0||B>12||B<4)throw new ye;let Ae=(12-B)/2,ke=Vt.OUTSIDE_ODD_WIDEST[Ae],st=9-ke,it=Ti.getRSSvalue(E,ke,!1),Ze=Ti.getRSSvalue(A,st,!0),sn=Vt.OUTSIDE_EVEN_TOTAL_SUBSET[Ae],qt=Vt.OUTSIDE_GSUM[Ae];return new Xr(it*sn+Ze+qt,xe)}else{if((ge&1)!==0||ge>10||ge<4)throw new ye;let Ae=(10-ge)/2,ke=Vt.INSIDE_ODD_WIDEST[Ae],st=9-ke,it=Ti.getRSSvalue(E,ke,!0),Ze=Ti.getRSSvalue(A,st,!1),sn=Vt.INSIDE_ODD_TOTAL_SUBSET[Ae],qt=Vt.INSIDE_GSUM[Ae];return new Xr(Ze*sn+it+qt,xe)}}findFinderPattern(s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g=!1,p=0;for(;p<d&&(g=!s.get(p),l!==g);)p++;let E=0,A=p;for(let I=p;I<d;I++)if(s.get(I)!==g)u[E]++;else{if(E===3){if(xr.isFinderPattern(u))return[A,I];A+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,E--}else E++;u[E]=1,g=!g}throw new ye}parseFoundFinderPattern(s,l,u,d){let g=s.get(d[0]),p=d[0]-1;for(;p>=0&&g!==s.get(p);)p--;p++;const E=d[0]-p,A=this.getDecodeFinderCounters(),I=new Int32Array(A.length);M.arraycopy(A,0,I,1,A.length-1),I[0]=E;const N=this.parseFinderValue(I,Vt.FINDER_PATTERNS);let B=p,G=d[1];return u&&(B=s.getSize()-1-B,G=s.getSize()-1-G),new Yi(N,[p,d[1]],B,G,l)}adjustOddEvenCounts(s,l){let u=pt.sum(new Int32Array(this.getOddCounts())),d=pt.sum(new Int32Array(this.getEvenCounts())),g=!1,p=!1,E=!1,A=!1;s?(u>12?p=!0:u<4&&(g=!0),d>12?A=!0:d<4&&(E=!0)):(u>11?p=!0:u<5&&(g=!0),d>10?A=!0:d<4&&(E=!0));let I=u+d-l,N=(u&1)===(s?1:0),B=(d&1)===1;if(I===1)if(N){if(B)throw new ye;p=!0}else{if(!B)throw new ye;A=!0}else if(I===-1)if(N){if(B)throw new ye;g=!0}else{if(!B)throw new ye;E=!0}else if(I===0){if(N){if(!B)throw new ye;u<d?(g=!0,A=!0):(p=!0,E=!0)}else if(B)throw new ye}else throw new ye;if(g){if(p)throw new ye;xr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&xr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(A)throw new ye;xr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}A&&xr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Vt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Vt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Vt.OUTSIDE_GSUM=[0,161,961,2015,2715],Vt.INSIDE_GSUM=[0,336,1036,1516],Vt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Vt.INSIDE_ODD_WIDEST=[2,4,6,8],Vt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class _r extends vn{constructor(s,l){super(),this.readers=[],this.verbose=l===!0;const u=s?s.get(De.POSSIBLE_FORMATS):null,d=s&&s.get(De.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(pe.EAN_13)||u.includes(pe.UPC_A)||u.includes(pe.EAN_8)||u.includes(pe.UPC_E))&&this.readers.push(new Ha(s)),u.includes(pe.CODE_39)&&this.readers.push(new wn(d)),u.includes(pe.CODE_128)&&this.readers.push(new nt),u.includes(pe.ITF)&&this.readers.push(new Pt),u.includes(pe.RSS_14)&&this.readers.push(new Vt),u.includes(pe.RSS_EXPANDED)&&this.readers.push(new Ve(this.verbose))):(this.readers.push(new Ha(s)),this.readers.push(new wn),this.readers.push(new Ha(s)),this.readers.push(new nt),this.readers.push(new Pt),this.readers.push(new Vt),this.readers.push(new Ve(this.verbose)))}decodeRow(s,l,u){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(s,l,u)}catch{}throw new ye}reset(){this.readers.forEach(s=>s.reset())}}class fs extends ue{constructor(s=500,l){super(new _r(l),s,l)}}class $t{constructor(s,l,u){this.ecCodewords=s,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Xt{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Kt{constructor(s,l,u,d,g,p){this.versionNumber=s,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=g,this.ecBlocks=p;let E=0;const A=p.getECCodewords(),I=p.getECBlocks();for(let N of I)E+=N.getCount()*(N.getDataCodewords()+A);this.totalCodewords=E}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,l){if((s&1)!==0||(l&1)!==0)throw new k;for(let u of Kt.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===l)return u;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new Kt(1,10,10,8,8,new $t(5,new Xt(1,3))),new Kt(2,12,12,10,10,new $t(7,new Xt(1,5))),new Kt(3,14,14,12,12,new $t(10,new Xt(1,8))),new Kt(4,16,16,14,14,new $t(12,new Xt(1,12))),new Kt(5,18,18,16,16,new $t(14,new Xt(1,18))),new Kt(6,20,20,18,18,new $t(18,new Xt(1,22))),new Kt(7,22,22,20,20,new $t(20,new Xt(1,30))),new Kt(8,24,24,22,22,new $t(24,new Xt(1,36))),new Kt(9,26,26,24,24,new $t(28,new Xt(1,44))),new Kt(10,32,32,14,14,new $t(36,new Xt(1,62))),new Kt(11,36,36,16,16,new $t(42,new Xt(1,86))),new Kt(12,40,40,18,18,new $t(48,new Xt(1,114))),new Kt(13,44,44,20,20,new $t(56,new Xt(1,144))),new Kt(14,48,48,22,22,new $t(68,new Xt(1,174))),new Kt(15,52,52,24,24,new $t(42,new Xt(2,102))),new Kt(16,64,64,14,14,new $t(56,new Xt(2,140))),new Kt(17,72,72,16,16,new $t(36,new Xt(4,92))),new Kt(18,80,80,18,18,new $t(48,new Xt(4,114))),new Kt(19,88,88,20,20,new $t(56,new Xt(4,144))),new Kt(20,96,96,22,22,new $t(68,new Xt(4,174))),new Kt(21,104,104,24,24,new $t(56,new Xt(6,136))),new Kt(22,120,120,18,18,new $t(68,new Xt(6,175))),new Kt(23,132,132,20,20,new $t(62,new Xt(8,163))),new Kt(24,144,144,22,22,new $t(62,new Xt(8,156),new Xt(2,155))),new Kt(25,8,18,6,16,new $t(7,new Xt(1,5))),new Kt(26,8,32,6,14,new $t(11,new Xt(1,10))),new Kt(27,12,26,10,24,new $t(14,new Xt(1,16))),new Kt(28,12,36,10,16,new $t(18,new Xt(1,22))),new Kt(29,16,36,14,16,new $t(24,new Xt(1,32))),new Kt(30,16,48,14,22,new $t(28,new Xt(1,49)))]}}Kt.VERSIONS=Kt.buildVersions();class Lr{constructor(s){const l=s.getHeight();if(l<8||l>144||(l&1)!==0)throw new k;this.version=Lr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new dt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const l=s.getHeight(),u=s.getWidth();return Kt.getVersionForDimensions(l,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,d=0;const g=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let E=!1,A=!1,I=!1,N=!1;do if(u===g&&d===0&&!E)s[l++]=this.readCorner1(g,p)&255,u-=2,d+=2,E=!0;else if(u===g-2&&d===0&&(p&3)!==0&&!A)s[l++]=this.readCorner2(g,p)&255,u-=2,d+=2,A=!0;else if(u===g+4&&d===2&&(p&7)===0&&!I)s[l++]=this.readCorner3(g,p)&255,u-=2,d+=2,I=!0;else if(u===g-2&&d===0&&(p&7)===4&&!N)s[l++]=this.readCorner4(g,p)&255,u-=2,d+=2,N=!0;else{do u<g&&d>=0&&!this.readMappingMatrix.get(d,u)&&(s[l++]=this.readUtah(u,d,g,p)&255),u-=2,d+=2;while(u>=0&&d<p);u+=1,d+=3;do u>=0&&d<p&&!this.readMappingMatrix.get(d,u)&&(s[l++]=this.readUtah(u,d,g,p)&255),u+=2,d-=2;while(u<g&&d>=0);u+=3,d+=1}while(u<g||d<p);if(l!==this.version.getTotalCodewords())throw new k;return s}readModule(s,l,u,d){return s<0&&(s+=u,l+=4-(u+4&7)),l<0&&(l+=d,s+=4-(d+4&7)),this.readMappingMatrix.set(l,s),this.mappingBitMatrix.get(l,s)}readUtah(s,l,u,d){let g=0;return this.readModule(s-2,l-2,u,d)&&(g|=1),g<<=1,this.readModule(s-2,l-1,u,d)&&(g|=1),g<<=1,this.readModule(s-1,l-2,u,d)&&(g|=1),g<<=1,this.readModule(s-1,l-1,u,d)&&(g|=1),g<<=1,this.readModule(s-1,l,u,d)&&(g|=1),g<<=1,this.readModule(s,l-2,u,d)&&(g|=1),g<<=1,this.readModule(s,l-1,u,d)&&(g|=1),g<<=1,this.readModule(s,l,u,d)&&(g|=1),g}readCorner1(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,1,s,l)&&(u|=1),u<<=1,this.readModule(s-1,2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}readCorner2(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-4,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner3(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-3,s,l)&&(u|=1),u<<=1,this.readModule(1,l-2,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner4(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}extractDataRegion(s){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==l)throw new C("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),p=l/d|0,E=u/g|0,A=p*d,I=E*g,N=new dt(I,A);for(let B=0;B<p;++B){const G=B*d;for(let ae=0;ae<E;++ae){const ge=ae*g;for(let xe=0;xe<d;++xe){const Ae=B*(d+2)+1+xe,ke=G+xe;for(let st=0;st<g;++st){const it=ae*(g+2)+1+st;if(s.get(it,Ae)){const Ze=ge+st;N.set(Ze,ke)}}}}}return N}}class oi{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l){const u=l.getECBlocks();let d=0;const g=u.getECBlocks();for(let xe of g)d+=xe.getCount();const p=new Array(d);let E=0;for(let xe of g)for(let Ae=0;Ae<xe.getCount();Ae++){const ke=xe.getDataCodewords(),st=u.getECCodewords()+ke;p[E++]=new oi(ke,new Uint8Array(st))}const I=p[0].codewords.length-u.getECCodewords(),N=I-1;let B=0;for(let xe=0;xe<N;xe++)for(let Ae=0;Ae<E;Ae++)p[Ae].codewords[xe]=s[B++];const G=l.getVersionNumber()===24,ae=G?8:E;for(let xe=0;xe<ae;xe++)p[xe].codewords[I-1]=s[B++];const ge=p[0].codewords.length;for(let xe=I;xe<ge;xe++)for(let Ae=0;Ae<E;Ae++){const ke=G?(Ae+8)%E:Ae,st=G&&ke>7?xe-1:xe;p[ke].codewords[st]=s[B++]}if(B!==s.length)throw new C;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hr{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new C(""+s);let l=0,u=this.bitOffset,d=this.byteOffset;const g=this.bytes;if(u>0){const p=8-u,E=s<p?s:p,A=p-E,I=255>>8-E<<A;l=(g[d]&I)>>A,s-=E,u+=E,u===8&&(u=0,d++)}if(s>0){for(;s>=8;)l=l<<8|g[d]&255,d++,s-=8;if(s>0){const p=8-s,E=255>>p<<p;l=l<<s|(g[d]&E)>>p,u+=s}}return this.bitOffset=u,this.byteOffset=d,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var un;(function(F){F[F.PAD_ENCODE=0]="PAD_ENCODE",F[F.ASCII_ENCODE=1]="ASCII_ENCODE",F[F.C40_ENCODE=2]="C40_ENCODE",F[F.TEXT_ENCODE=3]="TEXT_ENCODE",F[F.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",F[F.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",F[F.BASE256_ENCODE=6]="BASE256_ENCODE"})(un||(un={}));class li{static decode(s){const l=new hr(s),u=new Y,d=new Y,g=new Array;let p=un.ASCII_ENCODE;do if(p===un.ASCII_ENCODE)p=this.decodeAsciiSegment(l,u,d);else{switch(p){case un.C40_ENCODE:this.decodeC40Segment(l,u);break;case un.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case un.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case un.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case un.BASE256_ENCODE:this.decodeBase256Segment(l,u,g);break;default:throw new k}p=un.ASCII_ENCODE}while(p!==un.PAD_ENCODE&&l.available()>0);return d.length()>0&&u.append(d.toString()),new at(s,u.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(s,l,u){let d=!1;do{let g=s.readBits(8);if(g===0)throw new k;if(g<=128)return d&&(g+=128),l.append(String.fromCharCode(g-1)),un.ASCII_ENCODE;if(g===129)return un.PAD_ENCODE;if(g<=229){const p=g-130;p<10&&l.append("0"),l.append(""+p)}else switch(g){case 230:return un.C40_ENCODE;case 231:return un.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return un.ANSIX12_ENCODE;case 239:return un.TEXT_ENCODE;case 240:return un.EDIFACT_ENCODE;case 241:break;default:if(g!==254||s.available()!==0)throw new k;break}}while(s.available()>0);return un.ASCII_ENCODE}static decodeC40Segment(s,l){let u=!1;const d=[];let g=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let E=0;E<3;E++){const A=d[E];switch(g){case 0:if(A<3)g=A+1;else if(A<this.C40_BASIC_SET_CHARS.length){const I=this.C40_BASIC_SET_CHARS[A];u?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),u=!1):l.append(I)}else throw new k;break;case 1:u?(l.append(String.fromCharCode(A+128)),u=!1):l.append(String.fromCharCode(A)),g=0;break;case 2:if(A<this.C40_SHIFT2_SET_CHARS.length){const I=this.C40_SHIFT2_SET_CHARS[A];u?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),u=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:u=!0;break;default:throw new k}g=0;break;case 3:u?(l.append(String.fromCharCode(A+224)),u=!1):l.append(String.fromCharCode(A+96)),g=0;break;default:throw new k}}}while(s.available()>0)}static decodeTextSegment(s,l){let u=!1,d=[],g=0;do{if(s.available()===8)return;const p=s.readBits(8);if(p===254)return;this.parseTwoBytes(p,s.readBits(8),d);for(let E=0;E<3;E++){const A=d[E];switch(g){case 0:if(A<3)g=A+1;else if(A<this.TEXT_BASIC_SET_CHARS.length){const I=this.TEXT_BASIC_SET_CHARS[A];u?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),u=!1):l.append(I)}else throw new k;break;case 1:u?(l.append(String.fromCharCode(A+128)),u=!1):l.append(String.fromCharCode(A)),g=0;break;case 2:if(A<this.TEXT_SHIFT2_SET_CHARS.length){const I=this.TEXT_SHIFT2_SET_CHARS[A];u?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),u=!1):l.append(I)}else switch(A){case 27:l.append("");break;case 30:u=!0;break;default:throw new k}g=0;break;case 3:if(A<this.TEXT_SHIFT3_SET_CHARS.length){const I=this.TEXT_SHIFT3_SET_CHARS[A];u?(l.append(String.fromCharCode(I.charCodeAt(0)+128)),u=!1):l.append(I),g=0}else throw new k;break;default:throw new k}}}while(s.available()>0)}static decodeAnsiX12Segment(s,l){const u=[];do{if(s.available()===8)return;const d=s.readBits(8);if(d===254)return;this.parseTwoBytes(d,s.readBits(8),u);for(let g=0;g<3;g++){const p=u[g];switch(p){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(p<14)l.append(String.fromCharCode(p+44));else if(p<40)l.append(String.fromCharCode(p+51));else throw new k;break}}}while(s.available()>0)}static parseTwoBytes(s,l,u){let d=(s<<8)+l-1,g=Math.floor(d/1600);u[0]=g,d-=g*1600,g=Math.floor(d/40),u[1]=g,u[2]=d-g*40}static decodeEdifactSegment(s,l){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let d=s.readBits(6);if(d===31){const g=8-s.getBitOffset();g!==8&&s.readBits(g);return}(d&32)===0&&(d|=64),l.append(String.fromCharCode(d))}}while(s.available()>0)}static decodeBase256Segment(s,l,u){let d=1+s.getByteOffset();const g=this.unrandomize255State(s.readBits(8),d++);let p;if(g===0?p=s.available()/8|0:g<250?p=g:p=250*(g-249)+this.unrandomize255State(s.readBits(8),d++),p<0)throw new k;const E=new Uint8Array(p);for(let A=0;A<p;A++){if(s.available()<8)throw new k;E[A]=this.unrandomize255State(s.readBits(8),d++)}u.push(E);try{l.append(K.decode(E,J.ISO88591))}catch(A){throw new Hn("Platform does not support required encoding: "+A.message)}}static unrandomize255State(s,l){const u=149*l%255+1,d=s-u;return d>=0?d:d+256}}li.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],li.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],li.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],li.TEXT_SHIFT2_SET_CHARS=li.C40_SHIFT2_SET_CHARS,li.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Bl{constructor(){this.rsDecoder=new cn(Rt.DATA_MATRIX_FIELD_256)}decode(s){const l=new Lr(s),u=l.getVersion(),d=l.readCodewords(),g=oi.getDataBlocks(d,u);let p=0;for(let I of g)p+=I.getNumDataCodewords();const E=new Uint8Array(p),A=g.length;for(let I=0;I<A;I++){const N=g[I],B=N.getCodewords(),G=N.getNumDataCodewords();this.correctErrors(B,G);for(let ae=0;ae<G;ae++)E[ae*A+I]=B[ae]}return li.decode(E)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new O}for(let d=0;d<l;d++)s[d]=u[d]}}class Ft{constructor(s){this.image=s,this.rectangleDetector=new At(this.image)}detect(){const s=this.rectangleDetector.detect();let l=this.detectSolid1(s);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new ye;l=this.shiftToModuleCenter(l);const u=l[0],d=l[1],g=l[2],p=l[3];let E=this.transitionsBetween(u,p)+1,A=this.transitionsBetween(g,p)+1;(E&1)===1&&(E+=1),(A&1)===1&&(A+=1),4*E<7*A&&4*A<7*E&&(E=A=Math.max(E,A));let I=Ft.sampleGrid(this.image,u,d,g,p,E,A);return new on(I,[u,d,g,p])}static shiftPoint(s,l,u){let d=(l.getX()-s.getX())/(u+1),g=(l.getY()-s.getY())/(u+1);return new ve(s.getX()+d,s.getY()+g)}static moveAway(s,l,u){let d=s.getX(),g=s.getY();return d<l?d-=1:d+=1,g<u?g-=1:g+=1,new ve(d,g)}detectSolid1(s){let l=s[0],u=s[1],d=s[3],g=s[2],p=this.transitionsBetween(l,u),E=this.transitionsBetween(u,d),A=this.transitionsBetween(d,g),I=this.transitionsBetween(g,l),N=p,B=[g,l,u,d];return N>E&&(N=E,B[0]=l,B[1]=u,B[2]=d,B[3]=g),N>A&&(N=A,B[0]=u,B[1]=d,B[2]=g,B[3]=l),N>I&&(B[0]=d,B[1]=g,B[2]=l,B[3]=u),B}detectSolid2(s){let l=s[0],u=s[1],d=s[2],g=s[3],p=this.transitionsBetween(l,g),E=Ft.shiftPoint(u,d,(p+1)*4),A=Ft.shiftPoint(d,u,(p+1)*4),I=this.transitionsBetween(E,l),N=this.transitionsBetween(A,g);return I<N?(s[0]=l,s[1]=u,s[2]=d,s[3]=g):(s[0]=u,s[1]=d,s[2]=g,s[3]=l),s}correctTopRight(s){let l=s[0],u=s[1],d=s[2],g=s[3],p=this.transitionsBetween(l,g),E=this.transitionsBetween(u,g),A=Ft.shiftPoint(l,u,(E+1)*4),I=Ft.shiftPoint(d,u,(p+1)*4);p=this.transitionsBetween(A,g),E=this.transitionsBetween(I,g);let N=new ve(g.getX()+(d.getX()-u.getX())/(p+1),g.getY()+(d.getY()-u.getY())/(p+1)),B=new ve(g.getX()+(l.getX()-u.getX())/(E+1),g.getY()+(l.getY()-u.getY())/(E+1));if(!this.isValid(N))return this.isValid(B)?B:null;if(!this.isValid(B))return N;let G=this.transitionsBetween(A,N)+this.transitionsBetween(I,N),ae=this.transitionsBetween(A,B)+this.transitionsBetween(I,B);return G>ae?N:B}shiftToModuleCenter(s){let l=s[0],u=s[1],d=s[2],g=s[3],p=this.transitionsBetween(l,g)+1,E=this.transitionsBetween(d,g)+1,A=Ft.shiftPoint(l,u,E*4),I=Ft.shiftPoint(d,u,p*4);p=this.transitionsBetween(A,g)+1,E=this.transitionsBetween(I,g)+1,(p&1)===1&&(p+=1),(E&1)===1&&(E+=1);let N=(l.getX()+u.getX()+d.getX()+g.getX())/4,B=(l.getY()+u.getY()+d.getY()+g.getY())/4;l=Ft.moveAway(l,N,B),u=Ft.moveAway(u,N,B),d=Ft.moveAway(d,N,B),g=Ft.moveAway(g,N,B);let G,ae;return A=Ft.shiftPoint(l,u,E*4),A=Ft.shiftPoint(A,g,p*4),G=Ft.shiftPoint(u,l,E*4),G=Ft.shiftPoint(G,d,p*4),I=Ft.shiftPoint(d,g,E*4),I=Ft.shiftPoint(I,u,p*4),ae=Ft.shiftPoint(g,d,E*4),ae=Ft.shiftPoint(ae,l,p*4),[A,G,I,ae]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,l,u,d,g,p,E){return ln.getInstance().sampleGrid(s,p,E,.5,.5,p-.5,.5,p-.5,E-.5,.5,E-.5,l.getX(),l.getY(),g.getX(),g.getY(),d.getX(),d.getY(),u.getX(),u.getY())}transitionsBetween(s,l){let u=Math.trunc(s.getX()),d=Math.trunc(s.getY()),g=Math.trunc(l.getX()),p=Math.trunc(l.getY()),E=Math.abs(p-d)>Math.abs(g-u);if(E){let xe=u;u=d,d=xe,xe=g,g=p,p=xe}let A=Math.abs(g-u),I=Math.abs(p-d),N=-A/2,B=d<p?1:-1,G=u<g?1:-1,ae=0,ge=this.image.get(E?d:u,E?u:d);for(let xe=u,Ae=d;xe!==g;xe+=G){let ke=this.image.get(E?Ae:xe,E?xe:Ae);if(ke!==ge&&(ae++,ge=ke),N+=I,N>0){if(Ae===p)break;Ae+=B,N-=A}}return ae}}class Si{constructor(){this.decoder=new Bl}decode(s,l=null){let u,d;if(l!=null&&l.has(De.PURE_BARCODE)){const I=Si.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(I),d=Si.NO_POINTS}else{const I=new Ft(s.getBlackMatrix()).detect();u=this.decoder.decode(I.getBits()),d=I.getPoints()}const g=u.getRawBytes(),p=new se(u.getText(),g,8*g.length,d,pe.DATA_MATRIX,M.currentTimeMillis()),E=u.getByteSegments();E!=null&&p.putMetadata(rt.BYTE_SEGMENTS,E);const A=u.getECLevel();return A!=null&&p.putMetadata(rt.ERROR_CORRECTION_LEVEL,A),p}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l==null||u==null)throw new ye;const d=this.moduleSize(l,s);let g=l[1];const p=u[1];let E=l[0];const I=(u[0]-E+1)/d,N=(p-g+1)/d;if(I<=0||N<=0)throw new ye;const B=d/2;g+=B,E+=B;const G=new dt(I,N);for(let ae=0;ae<N;ae++){const ge=g+ae*d;for(let xe=0;xe<I;xe++)s.get(E+xe*d,ge)&&G.set(xe,ae)}return G}static moduleSize(s,l){const u=l.getWidth();let d=s[0];const g=s[1];for(;d<u&&l.get(d,g);)d++;if(d===u)throw new ye;const p=d-s[0];if(p===0)throw new ye;return p}}Si.NO_POINTS=[];class Ms extends ue{constructor(s=500){super(new Si,s)}}var Ki;(function(F){F[F.L=0]="L",F[F.M=1]="M",F[F.Q=2]="Q",F[F.H=3]="H"})(Ki||(Ki={}));class nn{constructor(s,l,u){this.value=s,this.stringValue=l,this.bits=u,nn.FOR_BITS.set(u,this),nn.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return nn.L;case"M":return nn.M;case"Q":return nn.Q;case"H":return nn.H;default:throw new T(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof nn))return!1;const l=s;return this.value===l.value}static forBits(s){if(s<0||s>=nn.FOR_BITS.size)throw new C;return nn.FOR_BITS.get(s)}}nn.FOR_BITS=new Map,nn.FOR_VALUE=new Map,nn.L=new nn(Ki.L,"L",1),nn.M=new nn(Ki.M,"M",0),nn.Q=new nn(Ki.Q,"Q",3),nn.H=new nn(Ki.H,"H",2);class yr{constructor(s){this.errorCorrectionLevel=nn.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,l){return ie.bitCount(s^l)}static decodeFormatInformation(s,l){const u=yr.doDecodeFormatInformation(s,l);return u!==null?u:yr.doDecodeFormatInformation(s^yr.FORMAT_INFO_MASK_QR,l^yr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,l){let u=Number.MAX_SAFE_INTEGER,d=0;for(const g of yr.FORMAT_INFO_DECODE_LOOKUP){const p=g[0];if(p===s||p===l)return new yr(g[1]);let E=yr.numBitsDiffering(s,p);E<u&&(d=g[1],u=E),s!==l&&(E=yr.numBitsDiffering(l,p),E<u&&(d=g[1],u=E))}return u<=3?new yr(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof yr))return!1;const l=s;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}yr.FORMAT_INFO_MASK_QR=21522,yr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ce{constructor(s,...l){this.ecCodewordsPerBlock=s,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const l=this.ecBlocks;for(const u of l)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class re{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(s,l,...u){this.versionNumber=s,this.alignmentPatternCenters=l,this.ecBlocks=u;let d=0;const g=u[0].getECCodewordsPerBlock(),p=u[0].getECBlocks();for(const E of p)d+=E.getCount()*(E.getDataCodewords()+g);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new k;try{return this.getVersionForNumber((s-17)/4)}catch{throw new k}}static getVersionForNumber(s){if(s<1||s>40)throw new C;return Tt.VERSIONS[s-1]}static decodeVersionInformation(s){let l=Number.MAX_SAFE_INTEGER,u=0;for(let d=0;d<Tt.VERSION_DECODE_INFO.length;d++){const g=Tt.VERSION_DECODE_INFO[d];if(g===s)return Tt.getVersionForNumber(d+7);const p=yr.numBitsDiffering(s,g);p<l&&(u=d+7,l=p)}return l<=3?Tt.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),l=new dt(s);l.setRegion(0,0,9,9),l.setRegion(s-8,0,8,9),l.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let d=0;d<u;d++){const g=this.alignmentPatternCenters[d]-2;for(let p=0;p<u;p++)d===0&&(p===0||p===u-1)||d===u-1&&p===0||l.setRegion(this.alignmentPatternCenters[p]-2,g,5,5)}return l.setRegion(6,9,1,s-17),l.setRegion(9,6,s-17,1),this.versionNumber>6&&(l.setRegion(s-11,0,3,6),l.setRegion(0,s-11,6,3)),l}toString(){return""+this.versionNumber}}Tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Tt.VERSIONS=[new Tt(1,new Int32Array(0),new Ce(7,new re(1,19)),new Ce(10,new re(1,16)),new Ce(13,new re(1,13)),new Ce(17,new re(1,9))),new Tt(2,Int32Array.from([6,18]),new Ce(10,new re(1,34)),new Ce(16,new re(1,28)),new Ce(22,new re(1,22)),new Ce(28,new re(1,16))),new Tt(3,Int32Array.from([6,22]),new Ce(15,new re(1,55)),new Ce(26,new re(1,44)),new Ce(18,new re(2,17)),new Ce(22,new re(2,13))),new Tt(4,Int32Array.from([6,26]),new Ce(20,new re(1,80)),new Ce(18,new re(2,32)),new Ce(26,new re(2,24)),new Ce(16,new re(4,9))),new Tt(5,Int32Array.from([6,30]),new Ce(26,new re(1,108)),new Ce(24,new re(2,43)),new Ce(18,new re(2,15),new re(2,16)),new Ce(22,new re(2,11),new re(2,12))),new Tt(6,Int32Array.from([6,34]),new Ce(18,new re(2,68)),new Ce(16,new re(4,27)),new Ce(24,new re(4,19)),new Ce(28,new re(4,15))),new Tt(7,Int32Array.from([6,22,38]),new Ce(20,new re(2,78)),new Ce(18,new re(4,31)),new Ce(18,new re(2,14),new re(4,15)),new Ce(26,new re(4,13),new re(1,14))),new Tt(8,Int32Array.from([6,24,42]),new Ce(24,new re(2,97)),new Ce(22,new re(2,38),new re(2,39)),new Ce(22,new re(4,18),new re(2,19)),new Ce(26,new re(4,14),new re(2,15))),new Tt(9,Int32Array.from([6,26,46]),new Ce(30,new re(2,116)),new Ce(22,new re(3,36),new re(2,37)),new Ce(20,new re(4,16),new re(4,17)),new Ce(24,new re(4,12),new re(4,13))),new Tt(10,Int32Array.from([6,28,50]),new Ce(18,new re(2,68),new re(2,69)),new Ce(26,new re(4,43),new re(1,44)),new Ce(24,new re(6,19),new re(2,20)),new Ce(28,new re(6,15),new re(2,16))),new Tt(11,Int32Array.from([6,30,54]),new Ce(20,new re(4,81)),new Ce(30,new re(1,50),new re(4,51)),new Ce(28,new re(4,22),new re(4,23)),new Ce(24,new re(3,12),new re(8,13))),new Tt(12,Int32Array.from([6,32,58]),new Ce(24,new re(2,92),new re(2,93)),new Ce(22,new re(6,36),new re(2,37)),new Ce(26,new re(4,20),new re(6,21)),new Ce(28,new re(7,14),new re(4,15))),new Tt(13,Int32Array.from([6,34,62]),new Ce(26,new re(4,107)),new Ce(22,new re(8,37),new re(1,38)),new Ce(24,new re(8,20),new re(4,21)),new Ce(22,new re(12,11),new re(4,12))),new Tt(14,Int32Array.from([6,26,46,66]),new Ce(30,new re(3,115),new re(1,116)),new Ce(24,new re(4,40),new re(5,41)),new Ce(20,new re(11,16),new re(5,17)),new Ce(24,new re(11,12),new re(5,13))),new Tt(15,Int32Array.from([6,26,48,70]),new Ce(22,new re(5,87),new re(1,88)),new Ce(24,new re(5,41),new re(5,42)),new Ce(30,new re(5,24),new re(7,25)),new Ce(24,new re(11,12),new re(7,13))),new Tt(16,Int32Array.from([6,26,50,74]),new Ce(24,new re(5,98),new re(1,99)),new Ce(28,new re(7,45),new re(3,46)),new Ce(24,new re(15,19),new re(2,20)),new Ce(30,new re(3,15),new re(13,16))),new Tt(17,Int32Array.from([6,30,54,78]),new Ce(28,new re(1,107),new re(5,108)),new Ce(28,new re(10,46),new re(1,47)),new Ce(28,new re(1,22),new re(15,23)),new Ce(28,new re(2,14),new re(17,15))),new Tt(18,Int32Array.from([6,30,56,82]),new Ce(30,new re(5,120),new re(1,121)),new Ce(26,new re(9,43),new re(4,44)),new Ce(28,new re(17,22),new re(1,23)),new Ce(28,new re(2,14),new re(19,15))),new Tt(19,Int32Array.from([6,30,58,86]),new Ce(28,new re(3,113),new re(4,114)),new Ce(26,new re(3,44),new re(11,45)),new Ce(26,new re(17,21),new re(4,22)),new Ce(26,new re(9,13),new re(16,14))),new Tt(20,Int32Array.from([6,34,62,90]),new Ce(28,new re(3,107),new re(5,108)),new Ce(26,new re(3,41),new re(13,42)),new Ce(30,new re(15,24),new re(5,25)),new Ce(28,new re(15,15),new re(10,16))),new Tt(21,Int32Array.from([6,28,50,72,94]),new Ce(28,new re(4,116),new re(4,117)),new Ce(26,new re(17,42)),new Ce(28,new re(17,22),new re(6,23)),new Ce(30,new re(19,16),new re(6,17))),new Tt(22,Int32Array.from([6,26,50,74,98]),new Ce(28,new re(2,111),new re(7,112)),new Ce(28,new re(17,46)),new Ce(30,new re(7,24),new re(16,25)),new Ce(24,new re(34,13))),new Tt(23,Int32Array.from([6,30,54,78,102]),new Ce(30,new re(4,121),new re(5,122)),new Ce(28,new re(4,47),new re(14,48)),new Ce(30,new re(11,24),new re(14,25)),new Ce(30,new re(16,15),new re(14,16))),new Tt(24,Int32Array.from([6,28,54,80,106]),new Ce(30,new re(6,117),new re(4,118)),new Ce(28,new re(6,45),new re(14,46)),new Ce(30,new re(11,24),new re(16,25)),new Ce(30,new re(30,16),new re(2,17))),new Tt(25,Int32Array.from([6,32,58,84,110]),new Ce(26,new re(8,106),new re(4,107)),new Ce(28,new re(8,47),new re(13,48)),new Ce(30,new re(7,24),new re(22,25)),new Ce(30,new re(22,15),new re(13,16))),new Tt(26,Int32Array.from([6,30,58,86,114]),new Ce(28,new re(10,114),new re(2,115)),new Ce(28,new re(19,46),new re(4,47)),new Ce(28,new re(28,22),new re(6,23)),new Ce(30,new re(33,16),new re(4,17))),new Tt(27,Int32Array.from([6,34,62,90,118]),new Ce(30,new re(8,122),new re(4,123)),new Ce(28,new re(22,45),new re(3,46)),new Ce(30,new re(8,23),new re(26,24)),new Ce(30,new re(12,15),new re(28,16))),new Tt(28,Int32Array.from([6,26,50,74,98,122]),new Ce(30,new re(3,117),new re(10,118)),new Ce(28,new re(3,45),new re(23,46)),new Ce(30,new re(4,24),new re(31,25)),new Ce(30,new re(11,15),new re(31,16))),new Tt(29,Int32Array.from([6,30,54,78,102,126]),new Ce(30,new re(7,116),new re(7,117)),new Ce(28,new re(21,45),new re(7,46)),new Ce(30,new re(1,23),new re(37,24)),new Ce(30,new re(19,15),new re(26,16))),new Tt(30,Int32Array.from([6,26,52,78,104,130]),new Ce(30,new re(5,115),new re(10,116)),new Ce(28,new re(19,47),new re(10,48)),new Ce(30,new re(15,24),new re(25,25)),new Ce(30,new re(23,15),new re(25,16))),new Tt(31,Int32Array.from([6,30,56,82,108,134]),new Ce(30,new re(13,115),new re(3,116)),new Ce(28,new re(2,46),new re(29,47)),new Ce(30,new re(42,24),new re(1,25)),new Ce(30,new re(23,15),new re(28,16))),new Tt(32,Int32Array.from([6,34,60,86,112,138]),new Ce(30,new re(17,115)),new Ce(28,new re(10,46),new re(23,47)),new Ce(30,new re(10,24),new re(35,25)),new Ce(30,new re(19,15),new re(35,16))),new Tt(33,Int32Array.from([6,30,58,86,114,142]),new Ce(30,new re(17,115),new re(1,116)),new Ce(28,new re(14,46),new re(21,47)),new Ce(30,new re(29,24),new re(19,25)),new Ce(30,new re(11,15),new re(46,16))),new Tt(34,Int32Array.from([6,34,62,90,118,146]),new Ce(30,new re(13,115),new re(6,116)),new Ce(28,new re(14,46),new re(23,47)),new Ce(30,new re(44,24),new re(7,25)),new Ce(30,new re(59,16),new re(1,17))),new Tt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ce(30,new re(12,121),new re(7,122)),new Ce(28,new re(12,47),new re(26,48)),new Ce(30,new re(39,24),new re(14,25)),new Ce(30,new re(22,15),new re(41,16))),new Tt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ce(30,new re(6,121),new re(14,122)),new Ce(28,new re(6,47),new re(34,48)),new Ce(30,new re(46,24),new re(10,25)),new Ce(30,new re(2,15),new re(64,16))),new Tt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ce(30,new re(17,122),new re(4,123)),new Ce(28,new re(29,46),new re(14,47)),new Ce(30,new re(49,24),new re(10,25)),new Ce(30,new re(24,15),new re(46,16))),new Tt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ce(30,new re(4,122),new re(18,123)),new Ce(28,new re(13,46),new re(32,47)),new Ce(30,new re(48,24),new re(14,25)),new Ce(30,new re(42,15),new re(32,16))),new Tt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ce(30,new re(20,117),new re(4,118)),new Ce(28,new re(40,47),new re(7,48)),new Ce(30,new re(43,24),new re(22,25)),new Ce(30,new re(10,15),new re(67,16))),new Tt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ce(30,new re(19,118),new re(6,119)),new Ce(28,new re(18,47),new re(31,48)),new Ce(30,new re(34,24),new re(34,25)),new Ce(30,new re(20,15),new re(61,16)))];var Er;(function(F){F[F.DATA_MASK_000=0]="DATA_MASK_000",F[F.DATA_MASK_001=1]="DATA_MASK_001",F[F.DATA_MASK_010=2]="DATA_MASK_010",F[F.DATA_MASK_011=3]="DATA_MASK_011",F[F.DATA_MASK_100=4]="DATA_MASK_100",F[F.DATA_MASK_101=5]="DATA_MASK_101",F[F.DATA_MASK_110=6]="DATA_MASK_110",F[F.DATA_MASK_111=7]="DATA_MASK_111"})(Er||(Er={}));class Rr{constructor(s,l){this.value=s,this.isMasked=l}unmaskBitMatrix(s,l){for(let u=0;u<l;u++)for(let d=0;d<l;d++)this.isMasked(u,d)&&s.flip(d,u)}}Rr.values=new Map([[Er.DATA_MASK_000,new Rr(Er.DATA_MASK_000,(F,s)=>(F+s&1)===0)],[Er.DATA_MASK_001,new Rr(Er.DATA_MASK_001,(F,s)=>(F&1)===0)],[Er.DATA_MASK_010,new Rr(Er.DATA_MASK_010,(F,s)=>s%3===0)],[Er.DATA_MASK_011,new Rr(Er.DATA_MASK_011,(F,s)=>(F+s)%3===0)],[Er.DATA_MASK_100,new Rr(Er.DATA_MASK_100,(F,s)=>(Math.floor(F/2)+Math.floor(s/3)&1)===0)],[Er.DATA_MASK_101,new Rr(Er.DATA_MASK_101,(F,s)=>F*s%6===0)],[Er.DATA_MASK_110,new Rr(Er.DATA_MASK_110,(F,s)=>F*s%6<3)],[Er.DATA_MASK_111,new Rr(Er.DATA_MASK_111,(F,s)=>(F+s+F*s%3&1)===0)]]);class Ci{constructor(s){const l=s.getHeight();if(l<21||(l&3)!==1)throw new k;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let g=0;g<6;g++)s=this.copyBit(g,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let g=5;g>=0;g--)s=this.copyBit(8,g,s);const l=this.bitMatrix.getHeight();let u=0;const d=l-7;for(let g=l-1;g>=d;g--)u=this.copyBit(8,g,u);for(let g=l-8;g<l;g++)u=this.copyBit(g,8,u);if(this.parsedFormatInfo=yr.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),l=Math.floor((s-17)/4);if(l<=6)return Tt.getVersionForNumber(l);let u=0;const d=s-11;for(let p=5;p>=0;p--)for(let E=s-9;E>=d;E--)u=this.copyBit(E,p,u);let g=Tt.decodeVersionInformation(u);if(g!==null&&g.getDimensionForVersion()===s)return this.parsedVersion=g,g;u=0;for(let p=5;p>=0;p--)for(let E=s-9;E>=d;E--)u=this.copyBit(p,E,u);if(g=Tt.decodeVersionInformation(u),g!==null&&g.getDimensionForVersion()===s)return this.parsedVersion=g,g;throw new k}copyBit(s,l,u){return(this.isMirror?this.bitMatrix.get(l,s):this.bitMatrix.get(s,l))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),l=this.readVersion(),u=Rr.values.get(s.getDataMask()),d=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,d);const g=l.buildFunctionPattern();let p=!0;const E=new Uint8Array(l.getTotalCodewords());let A=0,I=0,N=0;for(let B=d-1;B>0;B-=2){B===6&&B--;for(let G=0;G<d;G++){const ae=p?d-1-G:G;for(let ge=0;ge<2;ge++)g.get(B-ge,ae)||(N++,I<<=1,this.bitMatrix.get(B-ge,ae)&&(I|=1),N===8&&(E[A++]=I,N=0,I=0))}p=!p}if(A!==l.getTotalCodewords())throw new k;return E}remask(){if(this.parsedFormatInfo===null)return;const s=Rr.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let l=0,u=s.getWidth();l<u;l++)for(let d=l+1,g=s.getHeight();d<g;d++)s.get(l,d)!==s.get(d,l)&&(s.flip(d,l),s.flip(l,d))}}class Mo{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l,u){if(s.length!==l.getTotalCodewords())throw new C;const d=l.getECBlocksForLevel(u);let g=0;const p=d.getECBlocks();for(const ge of p)g+=ge.getCount();const E=new Array(g);let A=0;for(const ge of p)for(let xe=0;xe<ge.getCount();xe++){const Ae=ge.getDataCodewords(),ke=d.getECCodewordsPerBlock()+Ae;E[A++]=new Mo(Ae,new Uint8Array(ke))}const I=E[0].codewords.length;let N=E.length-1;for(;N>=0&&E[N].codewords.length!==I;)N--;N++;const B=I-d.getECCodewordsPerBlock();let G=0;for(let ge=0;ge<B;ge++)for(let xe=0;xe<A;xe++)E[xe].codewords[ge]=s[G++];for(let ge=N;ge<A;ge++)E[ge].codewords[B]=s[G++];const ae=E[0].codewords.length;for(let ge=B;ge<ae;ge++)for(let xe=0;xe<A;xe++){const Ae=xe<N?ge:ge+1;E[xe].codewords[Ae]=s[G++]}return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var $r;(function(F){F[F.TERMINATOR=0]="TERMINATOR",F[F.NUMERIC=1]="NUMERIC",F[F.ALPHANUMERIC=2]="ALPHANUMERIC",F[F.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",F[F.BYTE=4]="BYTE",F[F.ECI=5]="ECI",F[F.KANJI=6]="KANJI",F[F.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",F[F.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",F[F.HANZI=9]="HANZI"})($r||($r={}));class It{constructor(s,l,u,d){this.value=s,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=d,It.FOR_BITS.set(d,this),It.FOR_VALUE.set(s,this)}static forBits(s){const l=It.FOR_BITS.get(s);if(l===void 0)throw new C;return l}getCharacterCountBits(s){const l=s.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof It))return!1;const l=s;return this.value===l.value}toString(){return this.stringValue}}It.FOR_BITS=new Map,It.FOR_VALUE=new Map,It.TERMINATOR=new It($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),It.NUMERIC=new It($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),It.ALPHANUMERIC=new It($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),It.STRUCTURED_APPEND=new It($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),It.BYTE=new It($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),It.ECI=new It($r.ECI,"ECI",Int32Array.from([0,0,0]),7),It.KANJI=new It($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),It.FNC1_FIRST_POSITION=new It($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),It.FNC1_SECOND_POSITION=new It($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),It.HANZI=new It($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Fn{static decode(s,l,u,d){const g=new hr(s);let p=new Y;const E=new Array;let A=-1,I=-1;try{let N=null,B=!1,G;do{if(g.available()<4)G=It.TERMINATOR;else{const ae=g.readBits(4);G=It.forBits(ae)}switch(G){case It.TERMINATOR:break;case It.FNC1_FIRST_POSITION:case It.FNC1_SECOND_POSITION:B=!0;break;case It.STRUCTURED_APPEND:if(g.available()<16)throw new k;A=g.readBits(8),I=g.readBits(8);break;case It.ECI:const ae=Fn.parseECIValue(g);if(N=P.getCharacterSetECIByValue(ae),N===null)throw new k;break;case It.HANZI:const ge=g.readBits(4),xe=g.readBits(G.getCharacterCountBits(l));ge===Fn.GB2312_SUBSET&&Fn.decodeHanziSegment(g,p,xe);break;default:const Ae=g.readBits(G.getCharacterCountBits(l));switch(G){case It.NUMERIC:Fn.decodeNumericSegment(g,p,Ae);break;case It.ALPHANUMERIC:Fn.decodeAlphanumericSegment(g,p,Ae,B);break;case It.BYTE:Fn.decodeByteSegment(g,p,Ae,N,E,d);break;case It.KANJI:Fn.decodeKanjiSegment(g,p,Ae);break;default:throw new k}break}}while(G!==It.TERMINATOR)}catch{throw new k}return new at(s,p.toString(),E.length===0?null:E,u===null?null:u.toString(),A,I)}static decodeHanziSegment(s,l,u){if(u*13>s.available())throw new k;const d=new Uint8Array(2*u);let g=0;for(;u>0;){const p=s.readBits(13);let E=p/96<<8&4294967295|p%96;E<959?E+=41377:E+=42657,d[g]=E>>8&255,d[g+1]=E&255,g+=2,u--}try{l.append(K.decode(d,J.GB2312))}catch(p){throw new k(p)}}static decodeKanjiSegment(s,l,u){if(u*13>s.available())throw new k;const d=new Uint8Array(2*u);let g=0;for(;u>0;){const p=s.readBits(13);let E=p/192<<8&4294967295|p%192;E<7936?E+=33088:E+=49472,d[g]=E>>8,d[g+1]=E,g+=2,u--}try{l.append(K.decode(d,J.SHIFT_JIS))}catch(p){throw new k(p)}}static decodeByteSegment(s,l,u,d,g,p){if(8*u>s.available())throw new k;const E=new Uint8Array(u);for(let I=0;I<u;I++)E[I]=s.readBits(8);let A;d===null?A=J.guessEncoding(E,p):A=d.getName();try{l.append(K.decode(E,A))}catch(I){throw new k(I)}g.push(E)}static toAlphaNumericChar(s){if(s>=Fn.ALPHANUMERIC_CHARS.length)throw new k;return Fn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,u,d){const g=l.length();for(;u>1;){if(s.available()<11)throw new k;const p=s.readBits(11);l.append(Fn.toAlphaNumericChar(Math.floor(p/45))),l.append(Fn.toAlphaNumericChar(p%45)),u-=2}if(u===1){if(s.available()<6)throw new k;l.append(Fn.toAlphaNumericChar(s.readBits(6)))}if(d)for(let p=g;p<l.length();p++)l.charAt(p)==="%"&&(p<l.length()-1&&l.charAt(p+1)==="%"?l.deleteCharAt(p+1):l.setCharAt(p,""))}static decodeNumericSegment(s,l,u){for(;u>=3;){if(s.available()<10)throw new k;const d=s.readBits(10);if(d>=1e3)throw new k;l.append(Fn.toAlphaNumericChar(Math.floor(d/100))),l.append(Fn.toAlphaNumericChar(Math.floor(d/10)%10)),l.append(Fn.toAlphaNumericChar(d%10)),u-=3}if(u===2){if(s.available()<7)throw new k;const d=s.readBits(7);if(d>=100)throw new k;l.append(Fn.toAlphaNumericChar(Math.floor(d/10))),l.append(Fn.toAlphaNumericChar(d%10))}else if(u===1){if(s.available()<4)throw new k;const d=s.readBits(4);if(d>=10)throw new k;l.append(Fn.toAlphaNumericChar(d))}}static parseECIValue(s){const l=s.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=s.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=s.readBits(16);return(l&31)<<16&4294967295|u}throw new k}}Fn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Fn.GB2312_SUBSET=1;class Ul{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const l=s[0];s[0]=s[2],s[2]=l}}class _a{constructor(){this.rsDecoder=new cn(Rt.QR_CODE_FIELD_256)}decodeBooleanArray(s,l){return this.decodeBitMatrix(dt.parseFromBooleanArray(s),l)}decodeBitMatrix(s,l){const u=new Ci(s);let d=null;try{return this.decodeBitMatrixParser(u,l)}catch(g){d=g}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const g=this.decodeBitMatrixParser(u,l);return g.setOther(new Ul(!0)),g}catch(g){throw d!==null?d:g}}decodeBitMatrixParser(s,l){const u=s.readVersion(),d=s.readFormatInformation().getErrorCorrectionLevel(),g=s.readCodewords(),p=Mo.getDataBlocks(g,u,d);let E=0;for(const N of p)E+=N.getNumDataCodewords();const A=new Uint8Array(E);let I=0;for(const N of p){const B=N.getCodewords(),G=N.getNumDataCodewords();this.correctErrors(B,G);for(let ae=0;ae<G;ae++)A[I++]=B[ae]}return Fn.decode(A,u,d,l)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new O}for(let d=0;d<l;d++)s[d]=u[d]}}class ya extends ve{constructor(s,l,u){super(s,l),this.estimatedModuleSize=u}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const d=(this.getX()+l)/2,g=(this.getY()+s)/2,p=(this.estimatedModuleSize+u)/2;return new ya(d,g,p)}}class Ii{constructor(s,l,u,d,g,p,E){this.image=s,this.startX=l,this.startY=u,this.width=d,this.height=g,this.moduleSize=p,this.resultPointCallback=E,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,l=this.height,u=this.width,d=s+u,g=this.startY+l/2,p=new Int32Array(3),E=this.image;for(let A=0;A<l;A++){const I=g+((A&1)===0?Math.floor((A+1)/2):-Math.floor((A+1)/2));p[0]=0,p[1]=0,p[2]=0;let N=s;for(;N<d&&!E.get(N,I);)N++;let B=0;for(;N<d;){if(E.get(N,I))if(B===1)p[1]++;else if(B===2){if(this.foundPatternCross(p)){const G=this.handlePossibleCenter(p,I,N);if(G!==null)return G}p[0]=p[2],p[1]=1,p[2]=0,B=1}else p[++B]++;else B===1&&B++,p[B]++;N++}if(this.foundPatternCross(p)){const G=this.handlePossibleCenter(p,I,d);if(G!==null)return G}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ye}static centerFromEnd(s,l){return l-s[2]-s[1]/2}foundPatternCross(s){const l=this.moduleSize,u=l/2;for(let d=0;d<3;d++)if(Math.abs(l-s[d])>=u)return!1;return!0}crossCheckVertical(s,l,u,d){const g=this.image,p=g.getHeight(),E=this.crossCheckStateCount;E[0]=0,E[1]=0,E[2]=0;let A=s;for(;A>=0&&g.get(l,A)&&E[1]<=u;)E[1]++,A--;if(A<0||E[1]>u)return NaN;for(;A>=0&&!g.get(l,A)&&E[0]<=u;)E[0]++,A--;if(E[0]>u)return NaN;for(A=s+1;A<p&&g.get(l,A)&&E[1]<=u;)E[1]++,A++;if(A===p||E[1]>u)return NaN;for(;A<p&&!g.get(l,A)&&E[2]<=u;)E[2]++,A++;if(E[2]>u)return NaN;const I=E[0]+E[1]+E[2];return 5*Math.abs(I-d)>=2*d?NaN:this.foundPatternCross(E)?Ii.centerFromEnd(E,A):NaN}handlePossibleCenter(s,l,u){const d=s[0]+s[1]+s[2],g=Ii.centerFromEnd(s,u),p=this.crossCheckVertical(l,g,2*s[1],d);if(!isNaN(p)){const E=(s[0]+s[1]+s[2])/3;for(const I of this.possibleCenters)if(I.aboutEquals(E,p,g))return I.combineEstimate(p,g,E);const A=new ya(g,p,E);this.possibleCenters.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return null}}class ja extends ve{constructor(s,l,u,d){super(s,l),this.estimatedModuleSize=u,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const d=Math.abs(s-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const d=this.count+1,g=(this.count*this.getX()+l)/d,p=(this.count*this.getY()+s)/d,E=(this.count*this.estimatedModuleSize+u)/d;return new ja(g,p,E,d)}}class Qi{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class er{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=s!=null&&s.get(De.TRY_HARDER)!==void 0,u=s!=null&&s.get(De.PURE_BARCODE)!==void 0,d=this.image,g=d.getHeight(),p=d.getWidth();let E=Math.floor(3*g/(4*er.MAX_MODULES));(E<er.MIN_SKIP||l)&&(E=er.MIN_SKIP);let A=!1;const I=new Int32Array(5);for(let B=E-1;B<g&&!A;B+=E){I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0;let G=0;for(let ae=0;ae<p;ae++)if(d.get(ae,B))(G&1)===1&&G++,I[G]++;else if((G&1)===0)if(G===4)if(er.foundPatternCross(I)){if(this.handlePossibleCenter(I,B,ae,u)===!0)if(E=2,this.hasSkipped===!0)A=this.haveMultiplyConfirmedCenters();else{const xe=this.findRowSkip();xe>I[2]&&(B+=xe-I[2]-E,ae=p-1)}else{I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,G=3;continue}G=0,I[0]=0,I[1]=0,I[2]=0,I[3]=0,I[4]=0}else I[0]=I[2],I[1]=I[3],I[2]=I[4],I[3]=1,I[4]=0,G=3;else I[++G]++;else I[G]++;er.foundPatternCross(I)&&this.handlePossibleCenter(I,B,p,u)===!0&&(E=I[0],this.hasSkipped&&(A=this.haveMultiplyConfirmedCenters()))}const N=this.selectBestPatterns();return ve.orderBestPatterns(N),new Qi(N)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let g=0;g<5;g++){const p=s[g];if(p===0)return!1;l+=p}if(l<7)return!1;const u=l/7,d=u/2;return Math.abs(u-s[0])<d&&Math.abs(u-s[1])<d&&Math.abs(3*u-s[2])<3*d&&Math.abs(u-s[3])<d&&Math.abs(u-s[4])<d}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,u,d){const g=this.getCrossCheckStateCount();let p=0;const E=this.image;for(;s>=p&&l>=p&&E.get(l-p,s-p);)g[2]++,p++;if(s<p||l<p)return!1;for(;s>=p&&l>=p&&!E.get(l-p,s-p)&&g[1]<=u;)g[1]++,p++;if(s<p||l<p||g[1]>u)return!1;for(;s>=p&&l>=p&&E.get(l-p,s-p)&&g[0]<=u;)g[0]++,p++;if(g[0]>u)return!1;const A=E.getHeight(),I=E.getWidth();for(p=1;s+p<A&&l+p<I&&E.get(l+p,s+p);)g[2]++,p++;if(s+p>=A||l+p>=I)return!1;for(;s+p<A&&l+p<I&&!E.get(l+p,s+p)&&g[3]<u;)g[3]++,p++;if(s+p>=A||l+p>=I||g[3]>=u)return!1;for(;s+p<A&&l+p<I&&E.get(l+p,s+p)&&g[4]<u;)g[4]++,p++;if(g[4]>=u)return!1;const N=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(N-d)<2*d&&er.foundPatternCross(g)}crossCheckVertical(s,l,u,d){const g=this.image,p=g.getHeight(),E=this.getCrossCheckStateCount();let A=s;for(;A>=0&&g.get(l,A);)E[2]++,A--;if(A<0)return NaN;for(;A>=0&&!g.get(l,A)&&E[1]<=u;)E[1]++,A--;if(A<0||E[1]>u)return NaN;for(;A>=0&&g.get(l,A)&&E[0]<=u;)E[0]++,A--;if(E[0]>u)return NaN;for(A=s+1;A<p&&g.get(l,A);)E[2]++,A++;if(A===p)return NaN;for(;A<p&&!g.get(l,A)&&E[3]<u;)E[3]++,A++;if(A===p||E[3]>=u)return NaN;for(;A<p&&g.get(l,A)&&E[4]<u;)E[4]++,A++;if(E[4]>=u)return NaN;const I=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(I-d)>=2*d?NaN:er.foundPatternCross(E)?er.centerFromEnd(E,A):NaN}crossCheckHorizontal(s,l,u,d){const g=this.image,p=g.getWidth(),E=this.getCrossCheckStateCount();let A=s;for(;A>=0&&g.get(A,l);)E[2]++,A--;if(A<0)return NaN;for(;A>=0&&!g.get(A,l)&&E[1]<=u;)E[1]++,A--;if(A<0||E[1]>u)return NaN;for(;A>=0&&g.get(A,l)&&E[0]<=u;)E[0]++,A--;if(E[0]>u)return NaN;for(A=s+1;A<p&&g.get(A,l);)E[2]++,A++;if(A===p)return NaN;for(;A<p&&!g.get(A,l)&&E[3]<u;)E[3]++,A++;if(A===p||E[3]>=u)return NaN;for(;A<p&&g.get(A,l)&&E[4]<u;)E[4]++,A++;if(E[4]>=u)return NaN;const I=E[0]+E[1]+E[2]+E[3]+E[4];return 5*Math.abs(I-d)>=d?NaN:er.foundPatternCross(E)?er.centerFromEnd(E,A):NaN}handlePossibleCenter(s,l,u,d){const g=s[0]+s[1]+s[2]+s[3]+s[4];let p=er.centerFromEnd(s,u),E=this.crossCheckVertical(l,Math.floor(p),s[2],g);if(!isNaN(E)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(E),s[2],g),!isNaN(p)&&(!d||this.crossCheckDiagonal(Math.floor(E),Math.floor(p),s[2],g)))){const A=g/7;let I=!1;const N=this.possibleCenters;for(let B=0,G=N.length;B<G;B++){const ae=N[B];if(ae.aboutEquals(A,E,p)){N[B]=ae.combineEstimate(E,p,A),I=!0;break}}if(!I){const B=new ja(p,E,A);N.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=er.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const u=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=er.CENTER_QUORUM&&(s++,l+=p.getEstimatedModuleSize());if(s<3)return!1;const d=l/u;let g=0;for(const p of this.possibleCenters)g+=Math.abs(p.getEstimatedModuleSize()-d);return g<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new ye;const l=this.possibleCenters;let u;if(s>3){let d=0,g=0;for(const A of this.possibleCenters){const I=A.getEstimatedModuleSize();d+=I,g+=I*I}u=d/s;let p=Math.sqrt(g/s-u*u);l.sort((A,I)=>{const N=Math.abs(I.getEstimatedModuleSize()-u),B=Math.abs(A.getEstimatedModuleSize()-u);return N<B?-1:N>B?1:0});const E=Math.max(.2*u,p);for(let A=0;A<l.length&&l.length>3;A++){const I=l[A];Math.abs(I.getEstimatedModuleSize()-u)>E&&(l.splice(A,1),A--)}}if(l.length>3){let d=0;for(const g of l)d+=g.getEstimatedModuleSize();u=d/l.length,l.sort((g,p)=>{if(p.getCount()===g.getCount()){const E=Math.abs(p.getEstimatedModuleSize()-u),A=Math.abs(g.getEstimatedModuleSize()-u);return E<A?1:E>A?-1:0}else return p.getCount()-g.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}er.CENTER_QUORUM=2,er.MIN_SKIP=3,er.MAX_MODULES=57;class bi{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(De.NEED_RESULT_POINT_CALLBACK);const u=new er(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const l=s.getTopLeft(),u=s.getTopRight(),d=s.getBottomLeft(),g=this.calculateModuleSize(l,u,d);if(g<1)throw new ye("No pattern found in proccess finder.");const p=bi.computeDimension(l,u,d,g),E=Tt.getProvisionalVersionForDimension(p),A=E.getDimensionForVersion()-7;let I=null;if(E.getAlignmentPatternCenters().length>0){const ae=u.getX()-l.getX()+d.getX(),ge=u.getY()-l.getY()+d.getY(),xe=1-3/A,Ae=Math.floor(l.getX()+xe*(ae-l.getX())),ke=Math.floor(l.getY()+xe*(ge-l.getY()));for(let st=4;st<=16;st<<=1)try{I=this.findAlignmentInRegion(g,Ae,ke,st);break}catch(it){if(!(it instanceof ye))throw it}}const N=bi.createTransform(l,u,d,I,p),B=bi.sampleGrid(this.image,N,p);let G;return I===null?G=[d,l,u]:G=[d,l,u,I],new on(B,G)}static createTransform(s,l,u,d,g){const p=g-3.5;let E,A,I,N;return d!==null?(E=d.getX(),A=d.getY(),I=p-3,N=I):(E=l.getX()-s.getX()+u.getX(),A=l.getY()-s.getY()+u.getY(),I=p,N=p),bt.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,I,N,3.5,p,s.getX(),s.getY(),l.getX(),l.getY(),E,A,u.getX(),u.getY())}static sampleGrid(s,l,u){return ln.getInstance().sampleGridWithTransform(s,u,u,l)}static computeDimension(s,l,u,d){const g=pt.round(ve.distance(s,l)/d),p=pt.round(ve.distance(s,u)/d);let E=Math.floor((g+p)/2)+7;switch(E&3){case 0:E++;break;case 2:E--;break;case 3:throw new ye("Dimensions could be not found.")}return E}calculateModuleSize(s,l,u){return(this.calculateModuleSizeOneWay(s,l)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(l.getX()),Math.floor(l.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?d/7:isNaN(d)?u/7:(u+d)/14}sizeOfBlackWhiteBlackRunBothWays(s,l,u,d){let g=this.sizeOfBlackWhiteBlackRun(s,l,u,d),p=1,E=s-(u-s);E<0?(p=s/(s-E),E=0):E>=this.image.getWidth()&&(p=(this.image.getWidth()-1-s)/(E-s),E=this.image.getWidth()-1);let A=Math.floor(l-(d-l)*p);return p=1,A<0?(p=l/(l-A),A=0):A>=this.image.getHeight()&&(p=(this.image.getHeight()-1-l)/(A-l),A=this.image.getHeight()-1),E=Math.floor(s+(E-s)*p),g+=this.sizeOfBlackWhiteBlackRun(s,l,E,A),g-1}sizeOfBlackWhiteBlackRun(s,l,u,d){const g=Math.abs(d-l)>Math.abs(u-s);if(g){let ae=s;s=l,l=ae,ae=u,u=d,d=ae}const p=Math.abs(u-s),E=Math.abs(d-l);let A=-p/2;const I=s<u?1:-1,N=l<d?1:-1;let B=0;const G=u+I;for(let ae=s,ge=l;ae!==G;ae+=I){const xe=g?ge:ae,Ae=g?ae:ge;if(B===1===this.image.get(xe,Ae)){if(B===2)return pt.distance(ae,ge,s,l);B++}if(A+=E,A>0){if(ge===d)break;ge+=N,A-=p}}return B===2?pt.distance(u+I,d,s,l):NaN}findAlignmentInRegion(s,l,u,d){const g=Math.floor(d*s),p=Math.max(0,l-g),E=Math.min(this.image.getWidth()-1,l+g);if(E-p<s*3)throw new ye("Alignment top exceeds estimated module size.");const A=Math.max(0,u-g),I=Math.min(this.image.getHeight()-1,u+g);if(I-A<s*3)throw new ye("Alignment bottom exceeds estimated module size.");return new Ii(this.image,p,A,E-p,I-A,s,this.resultPointCallback).find()}}class Ri{constructor(){this.decoder=new _a}getDecoder(){return this.decoder}decode(s,l){let u,d;if(l!=null&&l.get(De.PURE_BARCODE)!==void 0){const A=Ri.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(A,l),d=Ri.NO_POINTS}else{const A=new bi(s.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(A.getBits(),l),d=A.getPoints()}u.getOther()instanceof Ul&&u.getOther().applyMirroredCorrection(d);const g=new se(u.getText(),u.getRawBytes(),void 0,d,pe.QR_CODE,void 0),p=u.getByteSegments();p!==null&&g.putMetadata(rt.BYTE_SEGMENTS,p);const E=u.getECLevel();return E!==null&&g.putMetadata(rt.ERROR_CORRECTION_LEVEL,E),u.hasStructuredAppend()&&(g.putMetadata(rt.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),g.putMetadata(rt.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),g}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l===null||u===null)throw new ye;const d=this.moduleSize(l,s);let g=l[1],p=u[1],E=l[0],A=u[0];if(E>=A||g>=p)throw new ye;if(p-g!==A-E&&(A=E+(p-g),A>=s.getWidth()))throw new ye;const I=Math.round((A-E+1)/d),N=Math.round((p-g+1)/d);if(I<=0||N<=0)throw new ye;if(N!==I)throw new ye;const B=Math.floor(d/2);g+=B,E+=B;const G=E+Math.floor((I-1)*d)-A;if(G>0){if(G>B)throw new ye;E-=G}const ae=g+Math.floor((N-1)*d)-p;if(ae>0){if(ae>B)throw new ye;g-=ae}const ge=new dt(I,N);for(let xe=0;xe<N;xe++){const Ae=g+Math.floor(xe*d);for(let ke=0;ke<I;ke++)s.get(E+Math.floor(ke*d),Ae)&&ge.set(ke,xe)}return ge}static moduleSize(s,l){const u=l.getHeight(),d=l.getWidth();let g=s[0],p=s[1],E=!0,A=0;for(;g<d&&p<u;){if(E!==l.get(g,p)){if(++A===5)break;E=!E}g++,p++}if(g===d||p===u)throw new ye;return(g-s[0])/7}}Ri.NO_POINTS=new Array;class Nt{PDF417Common(){}static getBitCountSum(s){return pt.sum(s)}static toIntArray(s){if(s==null||!s.length)return Nt.EMPTY_INT_ARRAY;const l=new Int32Array(s.length);let u=0;for(const d of s)l[u++]=d;return l}static getCodeword(s){const l=ce.binarySearch(Nt.SYMBOL_TABLE,s&262143);return l<0?-1:(Nt.CODEWORD_TABLE[l]-1)%Nt.NUMBER_OF_CODEWORDS}}Nt.NUMBER_OF_CODEWORDS=929,Nt.MAX_CODEWORDS_IN_BARCODE=Nt.NUMBER_OF_CODEWORDS-1,Nt.MIN_ROWS_IN_BARCODE=3,Nt.MAX_ROWS_IN_BARCODE=90,Nt.MODULES_IN_CODEWORD=17,Nt.MODULES_IN_STOP_PATTERN=18,Nt.BARS_IN_MODULE=8,Nt.EMPTY_INT_ARRAY=new Int32Array([]),Nt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Nt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ea{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class kt{static detectMultiple(s,l,u){let d=s.getBlackMatrix(),g=kt.detect(u,d);return g.length||(d=d.clone(),d.rotate180(),g=kt.detect(u,d)),new Ea(d,g)}static detect(s,l){const u=new Array;let d=0,g=0,p=!1;for(;d<l.getHeight();){const E=kt.findVertices(l,d,g);if(E[0]==null&&E[3]==null){if(!p)break;p=!1,g=0;for(const A of u)A[1]!=null&&(d=Math.trunc(Math.max(d,A[1].getY()))),A[3]!=null&&(d=Math.max(d,Math.trunc(A[3].getY())));d+=kt.ROW_STEP;continue}if(p=!0,u.push(E),!s)break;E[2]!=null?(g=Math.trunc(E[2].getX()),d=Math.trunc(E[2].getY())):(g=Math.trunc(E[4].getX()),d=Math.trunc(E[4].getY()))}return u}static findVertices(s,l,u){const d=s.getHeight(),g=s.getWidth(),p=new Array(8);return kt.copyToResult(p,kt.findRowsWithPattern(s,d,g,l,u,kt.START_PATTERN),kt.INDEXES_START_PATTERN),p[4]!=null&&(u=Math.trunc(p[4].getX()),l=Math.trunc(p[4].getY())),kt.copyToResult(p,kt.findRowsWithPattern(s,d,g,l,u,kt.STOP_PATTERN),kt.INDEXES_STOP_PATTERN),p}static copyToResult(s,l,u){for(let d=0;d<u.length;d++)s[u[d]]=l[d]}static findRowsWithPattern(s,l,u,d,g,p){const E=new Array(4);let A=!1;const I=new Int32Array(p.length);for(;d<l;d+=kt.ROW_STEP){let B=kt.findGuardPattern(s,g,d,u,!1,p,I);if(B!=null){for(;d>0;){const G=kt.findGuardPattern(s,g,--d,u,!1,p,I);if(G!=null)B=G;else{d++;break}}E[0]=new ve(B[0],d),E[1]=new ve(B[1],d),A=!0;break}}let N=d+1;if(A){let B=0,G=Int32Array.from([Math.trunc(E[0].getX()),Math.trunc(E[1].getX())]);for(;N<l;N++){const ae=kt.findGuardPattern(s,G[0],N,u,!1,p,I);if(ae!=null&&Math.abs(G[0]-ae[0])<kt.MAX_PATTERN_DRIFT&&Math.abs(G[1]-ae[1])<kt.MAX_PATTERN_DRIFT)G=ae,B=0;else{if(B>kt.SKIPPED_ROW_COUNT_MAX)break;B++}}N-=B+1,E[2]=new ve(G[0],N),E[3]=new ve(G[1],N)}return N-d<kt.BARCODE_MIN_HEIGHT&&ce.fill(E,null),E}static findGuardPattern(s,l,u,d,g,p,E){ce.fillWithin(E,0,E.length,0);let A=l,I=0;for(;s.get(A,u)&&A>0&&I++<kt.MAX_PIXEL_DRIFT;)A--;let N=A,B=0,G=p.length;for(let ae=g;N<d;N++)if(s.get(N,u)!==ae)E[B]++;else{if(B===G-1){if(kt.patternMatchVariance(E,p,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE)return new Int32Array([A,N]);A+=E[0]+E[1],M.arraycopy(E,2,E,0,B-1),E[B-1]=0,E[B]=0,B--}else B++;E[B]=1,ae=!ae}return B===G-1&&kt.patternMatchVariance(E,p,kt.MAX_INDIVIDUAL_VARIANCE)<kt.MAX_AVG_VARIANCE?new Int32Array([A,N-1]):null}static patternMatchVariance(s,l,u){let d=s.length,g=0,p=0;for(let I=0;I<d;I++)g+=s[I],p+=l[I];if(g<p)return 1/0;let E=g/p;u*=E;let A=0;for(let I=0;I<d;I++){let N=s[I],B=l[I]*E,G=N>B?N-B:B-N;if(G>u)return 1/0;A+=G}return A/g}}kt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),kt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),kt.MAX_AVG_VARIANCE=.42,kt.MAX_INDIVIDUAL_VARIANCE=.8,kt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),kt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),kt.MAX_PIXEL_DRIFT=3,kt.MAX_PATTERN_DRIFT=5,kt.SKIPPED_ROW_COUNT_MAX=25,kt.ROW_STEP=5,kt.BARCODE_MIN_HEIGHT=10;class Bn{constructor(s,l){if(l.length===0)throw new C;this.field=s;let u=l.length;if(u>1&&l[0]===0){let d=1;for(;d<u&&l[d]===0;)d++;d===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-d),M.arraycopy(l,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let d=0;for(let g of this.coefficients)d=this.field.add(d,g);return d}let l=this.coefficients[0],u=this.coefficients.length;for(let d=1;d<u;d++)l=this.field.add(this.field.multiply(s,l),this.coefficients[d]);return l}add(s){if(!this.field.equals(s.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){let p=l;l=u,u=p}let d=new Int32Array(u.length),g=u.length-l.length;M.arraycopy(u,0,d,0,g);for(let p=g;p<u.length;p++)d[p]=this.field.add(l[p-g],u[p]);return new Bn(this.field,d)}subtract(s){if(!this.field.equals(s.field))throw new C("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Bn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Bn(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,d=s.coefficients,g=d.length,p=new Int32Array(u+g-1);for(let E=0;E<u;E++){let A=l[E];for(let I=0;I<g;I++)p[E+I]=this.field.add(p[E+I],this.field.multiply(A,d[I]))}return new Bn(this.field,p)}negative(){let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Bn(this.field,l)}multiplyScalar(s){if(s===0)return new Bn(this.field,new Int32Array([0]));if(s===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],s);return new Bn(this.field,u)}multiplyByMonomial(s,l){if(s<0)throw new C;if(l===0)return new Bn(this.field,new Int32Array([0]));let u=this.coefficients.length,d=new Int32Array(u+s);for(let g=0;g<u;g++)d[g]=this.field.multiply(this.coefficients[g],l);return new Bn(this.field,d)}toString(){let s=new Y;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(l===0||u!==1)&&s.append(u),l!==0&&(l===1?s.append("x"):(s.append("x^"),s.append(l))))}return s.toString()}}class za{add(s,l){return(s+l)%this.modulus}subtract(s,l){return(this.modulus+s-l)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new C;return this.logTable[s]}inverse(s){if(s===0)throw new Ut;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Rn extends za{constructor(s,l){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let d=0;d<s;d++)this.expTable[d]=u,u=u*l%s;for(let d=0;d<s-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new Bn(this,new Int32Array([0])),this.one=new Bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new C;if(l===0)return this.zero;let u=new Int32Array(s+1);return u[0]=l,new Bn(this,u)}}Rn.PDF417_GF=new Rn(Nt.NUMBER_OF_CODEWORDS,3);class hs{constructor(){this.field=Rn.PDF417_GF}decode(s,l,u){let d=new Bn(this.field,s),g=new Int32Array(l),p=!1;for(let ge=l;ge>0;ge--){let xe=d.evaluateAt(this.field.exp(ge));g[l-ge]=xe,xe!==0&&(p=!0)}if(!p)return 0;let E=this.field.getOne();if(u!=null)for(const ge of u){let xe=this.field.exp(s.length-1-ge),Ae=new Bn(this.field,new Int32Array([this.field.subtract(0,xe),1]));E=E.multiply(Ae)}let A=new Bn(this.field,g),I=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),A,l),N=I[0],B=I[1],G=this.findErrorLocations(N),ae=this.findErrorMagnitudes(B,N,G);for(let ge=0;ge<G.length;ge++){let xe=s.length-1-this.field.log(G[ge]);if(xe<0)throw O.getChecksumInstance();s[xe]=this.field.subtract(s[xe],ae[ge])}return G.length}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){let G=s;s=l,l=G}let d=s,g=l,p=this.field.getZero(),E=this.field.getOne();for(;g.getDegree()>=Math.round(u/2);){let G=d,ae=p;if(d=g,p=E,d.isZero())throw O.getChecksumInstance();g=G;let ge=this.field.getZero(),xe=d.getCoefficient(d.getDegree()),Ae=this.field.inverse(xe);for(;g.getDegree()>=d.getDegree()&&!g.isZero();){let ke=g.getDegree()-d.getDegree(),st=this.field.multiply(g.getCoefficient(g.getDegree()),Ae);ge=ge.add(this.field.buildMonomial(ke,st)),g=g.subtract(d.multiplyByMonomial(ke,st))}E=ge.multiply(p).subtract(ae).negative()}let A=E.getCoefficient(0);if(A===0)throw O.getChecksumInstance();let I=this.field.inverse(A),N=E.multiply(I),B=g.multiply(I);return[N,B]}findErrorLocations(s){let l=s.getDegree(),u=new Int32Array(l),d=0;for(let g=1;g<this.field.getSize()&&d<l;g++)s.evaluateAt(g)===0&&(u[d]=this.field.inverse(g),d++);if(d!==l)throw O.getChecksumInstance();return u}findErrorMagnitudes(s,l,u){let d=l.getDegree(),g=new Int32Array(d);for(let I=1;I<=d;I++)g[d-I]=this.field.multiply(I,l.getCoefficient(I));let p=new Bn(this.field,g),E=u.length,A=new Int32Array(E);for(let I=0;I<E;I++){let N=this.field.inverse(u[I]),B=this.field.subtract(0,s.evaluateAt(N)),G=this.field.inverse(p.evaluateAt(N));A[I]=this.field.multiply(B,G)}return A}}class ds{constructor(s,l,u,d,g){s instanceof ds?this.constructor_2(s):this.constructor_1(s,l,u,d,g)}constructor_1(s,l,u,d,g){const p=l==null||u==null,E=d==null||g==null;if(p&&E)throw new ye;p?(l=new ve(0,d.getY()),u=new ve(0,g.getY())):E&&(d=new ve(s.getWidth()-1,l.getY()),g=new ve(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=l,this.bottomLeft=u,this.topRight=d,this.bottomRight=g,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(d.getX(),g.getX())),this.minY=Math.trunc(Math.min(l.getY(),d.getY())),this.maxY=Math.trunc(Math.max(u.getY(),g.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,l){return s==null?l:l==null?s:new ds(s.image,s.topLeft,s.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(s,l,u){let d=this.topLeft,g=this.bottomLeft,p=this.topRight,E=this.bottomRight;if(s>0){let A=u?this.topLeft:this.topRight,I=Math.trunc(A.getY()-s);I<0&&(I=0);let N=new ve(A.getX(),I);u?d=N:p=N}if(l>0){let A=u?this.bottomLeft:this.bottomRight,I=Math.trunc(A.getY()+l);I>=this.image.getHeight()&&(I=this.image.getHeight()-1);let N=new ve(A.getX(),I);u?g=N:E=N}return new ds(this.image,d,g,p,E)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ga{constructor(s,l,u,d){this.columnCount=s,this.errorCorrectionLevel=d,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ra{constructor(){this.buffer=""}static form(s,l){let u=-1;function d(p,E,A,I,N,B){if(p==="%%")return"%";if(l[++u]===void 0)return;p=I?parseInt(I.substr(1)):void 0;let G=N?parseInt(N.substr(1)):void 0,ae;switch(B){case"s":ae=l[u];break;case"c":ae=l[u][0];break;case"f":ae=parseFloat(l[u]).toFixed(p);break;case"p":ae=parseFloat(l[u]).toPrecision(p);break;case"e":ae=parseFloat(l[u]).toExponential(p);break;case"x":ae=parseInt(l[u]).toString(G||16);break;case"d":ae=parseFloat(parseInt(l[u],G||10).toPrecision(p)).toFixed(0);break}ae=typeof ae=="object"?JSON.stringify(ae):(+ae).toString(G);let ge=parseInt(A),xe=A&&A[0]+""=="0"?"0":" ";for(;ae.length<ge;)ae=E!==void 0?ae+xe:xe+ae;return ae}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(g,d)}format(s,...l){this.buffer+=ra.form(s,l)}toString(){return this.buffer}}class gs{constructor(s){this.boundingBox=new ds(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(l!=null)return l;for(let u=1;u<gs.MAX_NEARBY_DISTANCE;u++){let d=this.imageRowToCodewordIndex(s)-u;if(d>=0&&(l=this.codewords[d],l!=null)||(d=this.imageRowToCodewordIndex(s)+u,d<this.codewords.length&&(l=this.codewords[d],l!=null)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ra;let l=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return s.toString()}}gs.MAX_NEARBY_DISTANCE=5;class Ui{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let l=this.values.get(s);l==null&&(l=0),l++,this.values.set(s,l)}getValue(){let s=-1,l=new Array;for(const[u,d]of this.values.entries()){const g={getKey:()=>u,getValue:()=>d};g.getValue()>s?(s=g.getValue(),l=[],l.push(g.getKey())):g.getValue()===s&&l.push(g.getKey())}return Nt.toIntArray(l)}getConfidence(s){return this.values.get(s)}}class Zi extends gs{constructor(s,l){super(s),this._isLeft=l}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,s);let u=this.getBoundingBox(),d=this._isLeft?u.getTopLeft():u.getTopRight(),g=this._isLeft?u.getBottomLeft():u.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),E=this.imageRowToCodewordIndex(Math.trunc(g.getY())),A=-1,I=1,N=0;for(let B=p;B<E;B++){if(l[B]==null)continue;let G=l[B],ae=G.getRowNumber()-A;if(ae===0)N++;else if(ae===1)I=Math.max(I,N),N=1,A=G.getRowNumber();else if(ae<0||G.getRowNumber()>=s.getRowCount()||ae>B)l[B]=null;else{let ge;I>2?ge=(I-2)*ae:ge=ae;let xe=ge>=B;for(let Ae=1;Ae<=ge&&!xe;Ae++)xe=l[B-Ae]!=null;xe?l[B]=null:(A=G.getRowNumber(),N=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let l=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=l.length)continue;l[d]++}return l}adjustIncompleteIndicatorColumnRowNumbers(s){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(d.getY())),E=this.getCodewords(),A=-1;for(let I=g;I<p;I++){if(E[I]==null)continue;let N=E[I];N.setRowNumberAsRowIndicatorColumn();let B=N.getRowNumber()-A;B===0||(B===1?A=N.getRowNumber():N.getRowNumber()>=s.getRowCount()?E[I]=null:A=N.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),l=new Ui,u=new Ui,d=new Ui,g=new Ui;for(let E of s){if(E==null)continue;E.setRowNumberAsRowIndicatorColumn();let A=E.getValue()%30,I=E.getRowNumber();switch(this._isLeft||(I+=2),I%3){case 0:u.setValue(A*3+1);break;case 1:g.setValue(A/3),d.setValue(A%3);break;case 2:l.setValue(A+1);break}}if(l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||g.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+d.getValue()[0]<Nt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+d.getValue()[0]>Nt.MAX_ROWS_IN_BARCODE)return null;let p=new Ga(l.getValue()[0],u.getValue()[0],d.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(s,p),p}removeIncorrectCodewords(s,l){for(let u=0;u<s.length;u++){let d=s[u];if(s[u]==null)continue;let g=d.getValue()%30,p=d.getRowNumber();if(p>l.getRowCount()){s[u]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:g*3+1!==l.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(g/3)!==l.getErrorCorrectionLevel()||g%3!==l.getRowCountLowerPart())&&(s[u]=null);break;case 2:g+1!==l.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class vr{constructor(s,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Nt.MAX_CODEWORDS_IN_BARCODE,l;do l=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let d=0;d<u.length;d++)u[d]!=null&&(u[d].hasValidRowNumber()||this.adjustRowNumbers(l,d,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&l[u]!=null&&s[u].getRowNumber()===l[u].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let g=this.detectionResultColumns[d].getCodewords()[u];g!=null&&(g.setRowNumber(s[u].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let d=l[u].getRowNumber(),g=0;for(let p=this.barcodeColumnCount+1;p>0&&g<this.ADJUST_ROW_NUMBER_SKIP;p--){let E=this.detectionResultColumns[p].getCodewords()[u];E!=null&&(g=vr.adjustRowNumberIfValid(d,g,E),E.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let d=l[u].getRowNumber(),g=0;for(let p=1;p<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;p++){let E=this.detectionResultColumns[p].getCodewords()[u];E!=null&&(g=vr.adjustRowNumberIfValid(d,g,E),E.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),l=0):++l),l}adjustRowNumbers(s,l,u){if(!this.detectionResultColumns[s-1])return;let d=u[l],g=this.detectionResultColumns[s-1].getCodewords(),p=g;this.detectionResultColumns[s+1]!=null&&(p=this.detectionResultColumns[s+1].getCodewords());let E=new Array(14);E[2]=g[l],E[3]=p[l],l>0&&(E[0]=u[l-1],E[4]=g[l-1],E[5]=p[l-1]),l>1&&(E[8]=u[l-2],E[10]=g[l-2],E[11]=p[l-2]),l<u.length-1&&(E[1]=u[l+1],E[6]=g[l+1],E[7]=p[l+1]),l<u.length-2&&(E[9]=u[l+2],E[12]=g[l+2],E[13]=p[l+2]);for(let A of E)if(vr.adjustRowNumber(d,A))return}static adjustRowNumber(s,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===s.getBucket()?(s.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,l){this.detectionResultColumns[s]=l}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ra;for(let u=0;u<s.getCodewords().length;u++){l.format("CW %3d:",u);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){l.format("    |   ");continue}let g=this.detectionResultColumns[d].getCodewords()[u];if(g==null){l.format("    |   ");continue}l.format(" %3d|%3d",g.getRowNumber(),g.getValue())}l.format("%n")}return l.toString()}}class Vi{constructor(s,l,u,d){this.rowNumber=Vi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Vi.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Vi.BARCODE_ROW_UNKNOWN=-1;class ar{static initialize(){for(let s=0;s<Nt.SYMBOL_TABLE.length;s++){let l=Nt.SYMBOL_TABLE[s],u=l&1;for(let d=0;d<Nt.BARS_IN_MODULE;d++){let g=0;for(;(l&1)===u;)g+=1,l>>=1;u=l&1,ar.RATIOS_TABLE[s]||(ar.RATIOS_TABLE[s]=new Array(Nt.BARS_IN_MODULE)),ar.RATIOS_TABLE[s][Nt.BARS_IN_MODULE-d-1]=Math.fround(g/Nt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let l=ar.getDecodedCodewordValue(ar.sampleBitCounts(s));return l!==-1?l:ar.getClosestDecodedValue(s)}static sampleBitCounts(s){let l=pt.sum(s),u=new Int32Array(Nt.BARS_IN_MODULE),d=0,g=0;for(let p=0;p<Nt.MODULES_IN_CODEWORD;p++){let E=l/(2*Nt.MODULES_IN_CODEWORD)+p*l/Nt.MODULES_IN_CODEWORD;g+s[d]<=E&&(g+=s[d],d++),u[d]++}return u}static getDecodedCodewordValue(s){let l=ar.getBitValue(s);return Nt.getCodeword(l)===-1?-1:l}static getBitValue(s){let l=0;for(let u=0;u<s.length;u++)for(let d=0;d<s[u];d++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(s){let l=pt.sum(s),u=new Array(Nt.BARS_IN_MODULE);if(l>1)for(let p=0;p<u.length;p++)u[p]=Math.fround(s[p]/l);let d=Sn.MAX_VALUE,g=-1;this.bSymbolTableReady||ar.initialize();for(let p=0;p<ar.RATIOS_TABLE.length;p++){let E=0,A=ar.RATIOS_TABLE[p];for(let I=0;I<Nt.BARS_IN_MODULE;I++){let N=Math.fround(A[I]-u[I]);if(E+=Math.fround(N*N),E>=d)break}E<d&&(d=E,g=Nt.SYMBOL_TABLE[p])}return g}}ar.bSymbolTableReady=!1,ar.RATIOS_TABLE=new Array(Nt.SYMBOL_TABLE.length).map(F=>new Array(Nt.BARS_IN_MODULE));class ia{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Lo{static parseLong(s,l=void 0){return parseInt(s,l)}}class sa extends _{}sa.kind="NullPointerException";class ko{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,l,u){if(s==null)throw new sa;if(l<0||l>s.length||u<0||l+u>s.length||l+u<0)throw new V;if(u===0)return;for(let d=0;d<u;d++)this.write(s[l+d])}flush(){}close(){}}class Ls extends _{}class Po extends ko{constructor(s=32){if(super(),this.count=0,s<0)throw new C("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ls;u=ie.MAX_VALUE}this.buf=ce.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,l,u){if(l<0||l>s.length||u<0||l+u-s.length>0)throw new V;this.ensureCapacity(this.count+u),M.arraycopy(s,l,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ce.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var Cn;(function(F){F[F.ALPHA=0]="ALPHA",F[F.LOWER=1]="LOWER",F[F.MIXED=2]="MIXED",F[F.PUNCT=3]="PUNCT",F[F.ALPHA_SHIFT=4]="ALPHA_SHIFT",F[F.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Cn||(Cn={}));function va(){if(typeof window<"u")return window.BigInt||null;if(typeof Oh<"u")return Oh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Wa;function ms(F){if(typeof Wa>"u"&&(Wa=va()),Wa===null)throw new Error("BigInt is not supported!");return Wa(F)}function Xa(){let F=[];F[0]=ms(1);let s=ms(900);F[1]=s;for(let l=2;l<16;l++)F[l]=F[l-1]*s;return F}class Le{static decode(s,l){let u=new Y(""),d=P.ISO8859_1;u.enableDecoding(d);let g=1,p=s[g++],E=new ia;for(;g<s[0];){switch(p){case Le.TEXT_COMPACTION_MODE_LATCH:g=Le.textCompaction(s,g,u);break;case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:g=Le.byteCompaction(p,s,d,g,u);break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[g++]);break;case Le.NUMERIC_COMPACTION_MODE_LATCH:g=Le.numericCompaction(s,g,u);break;case Le.ECI_CHARSET:P.getCharacterSetECIByValue(s[g++]);break;case Le.ECI_GENERAL_PURPOSE:g+=2;break;case Le.ECI_USER_DEFINED:g++;break;case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=Le.decodeMacroBlock(s,g,E);break;case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:throw new k;default:g--,g=Le.textCompaction(s,g,u);break}if(g<s.length)p=s[g++];else throw k.getFormatInstance()}if(u.length()===0)throw k.getFormatInstance();let A=new at(null,u.toString(),null,l);return A.setOther(E),A}static decodeMacroBlock(s,l,u){if(l+Le.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw k.getFormatInstance();let d=new Int32Array(Le.NUMBER_OF_SEQUENCE_CODEWORDS);for(let E=0;E<Le.NUMBER_OF_SEQUENCE_CODEWORDS;E++,l++)d[E]=s[l];u.setSegmentIndex(ie.parseInt(Le.decodeBase900toBase10(d,Le.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new Y;l=Le.textCompaction(s,l,g),u.setFileId(g.toString());let p=-1;for(s[l]===Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=l+1);l<s[0];)switch(s[l]){case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,s[l]){case Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let E=new Y;l=Le.textCompaction(s,l+1,E),u.setFileName(E.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let A=new Y;l=Le.textCompaction(s,l+1,A),u.setSender(A.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let I=new Y;l=Le.textCompaction(s,l+1,I),u.setAddressee(I.toString());break;case Le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let N=new Y;l=Le.numericCompaction(s,l+1,N),u.setSegmentCount(ie.parseInt(N.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new Y;l=Le.numericCompaction(s,l+1,B),u.setTimestamp(Lo.parseLong(B.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let G=new Y;l=Le.numericCompaction(s,l+1,G),u.setChecksum(ie.parseInt(G.toString()));break;case Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ae=new Y;l=Le.numericCompaction(s,l+1,ae),u.setFileSize(Lo.parseLong(ae.toString()));break;default:throw k.getFormatInstance()}break;case Le.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(p!==-1){let E=l-p;u.isLastSegment()&&E--,u.setOptionalData(ce.copyOfRange(s,p,p+E))}return l}static textCompaction(s,l,u){let d=new Int32Array((s[0]-l)*2),g=new Int32Array((s[0]-l)*2),p=0,E=!1;for(;l<s[0]&&!E;){let A=s[l++];if(A<Le.TEXT_COMPACTION_MODE_LATCH)d[p]=A/30,d[p+1]=A%30,p+=2;else switch(A){case Le.TEXT_COMPACTION_MODE_LATCH:d[p++]=Le.TEXT_COMPACTION_MODE_LATCH;break;case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:l--,E=!0;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[p]=Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,A=s[l++],g[p]=A,p++;break}}return Le.decodeTextCompaction(d,g,p,u),l}static decodeTextCompaction(s,l,u,d){let g=Cn.ALPHA,p=Cn.ALPHA,E=0;for(;E<u;){let A=s[E],I="";switch(g){case Cn.ALPHA:if(A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case Le.LL:g=Cn.LOWER;break;case Le.ML:g=Cn.MIXED;break;case Le.PS:p=g,g=Cn.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(l[E]);break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break;case Cn.LOWER:if(A<26)I=String.fromCharCode(97+A);else switch(A){case 26:I=" ";break;case Le.AS:p=g,g=Cn.ALPHA_SHIFT;break;case Le.ML:g=Cn.MIXED;break;case Le.PS:p=g,g=Cn.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(l[E]);break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break;case Cn.MIXED:if(A<Le.PL)I=Le.MIXED_CHARS[A];else switch(A){case Le.PL:g=Cn.PUNCT;break;case 26:I=" ";break;case Le.LL:g=Cn.LOWER;break;case Le.AL:g=Cn.ALPHA;break;case Le.PS:p=g,g=Cn.PUNCT_SHIFT;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(l[E]);break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break;case Cn.PUNCT:if(A<Le.PAL)I=Le.PUNCT_CHARS[A];else switch(A){case Le.PAL:g=Cn.ALPHA;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(l[E]);break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break;case Cn.ALPHA_SHIFT:if(g=p,A<26)I=String.fromCharCode(65+A);else switch(A){case 26:I=" ";break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break;case Cn.PUNCT_SHIFT:if(g=p,A<Le.PAL)I=Le.PUNCT_CHARS[A];else switch(A){case Le.PAL:g=Cn.ALPHA;break;case Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(l[E]);break;case Le.TEXT_COMPACTION_MODE_LATCH:g=Cn.ALPHA;break}break}I!==""&&d.append(I),E++}}static byteCompaction(s,l,u,d,g){let p=new Po,E=0,A=0,I=!1;switch(s){case Le.BYTE_COMPACTION_MODE_LATCH:let N=new Int32Array(6),B=l[d++];for(;d<l[0]&&!I;)switch(N[E++]=B,A=900*A+B,B=l[d++],B){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:d--,I=!0;break;default:if(E%5===0&&E>0){for(let G=0;G<6;++G)p.write(Number(ms(A)>>ms(8*(5-G))));A=0,E=0}break}d===l[0]&&B<Le.TEXT_COMPACTION_MODE_LATCH&&(N[E++]=B);for(let G=0;G<E;G++)p.write(N[G]);break;case Le.BYTE_COMPACTION_MODE_LATCH_6:for(;d<l[0]&&!I;){let G=l[d++];if(G<Le.TEXT_COMPACTION_MODE_LATCH)E++,A=900*A+G;else switch(G){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.NUMERIC_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:d--,I=!0;break}if(E%5===0&&E>0){for(let ae=0;ae<6;++ae)p.write(Number(ms(A)>>ms(8*(5-ae))));A=0,E=0}}break}return g.append(K.decode(p.toByteArray(),u)),d}static numericCompaction(s,l,u){let d=0,g=!1,p=new Int32Array(Le.MAX_NUMERIC_CODEWORDS);for(;l<s[0]&&!g;){let E=s[l++];if(l===s[0]&&(g=!0),E<Le.TEXT_COMPACTION_MODE_LATCH)p[d]=E,d++;else switch(E){case Le.TEXT_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH:case Le.BYTE_COMPACTION_MODE_LATCH_6:case Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Le.MACRO_PDF417_TERMINATOR:l--,g=!0;break}(d%Le.MAX_NUMERIC_CODEWORDS===0||E===Le.NUMERIC_COMPACTION_MODE_LATCH||g)&&d>0&&(u.append(Le.decodeBase900toBase10(p,d)),d=0)}return l}static decodeBase900toBase10(s,l){let u=ms(0);for(let g=0;g<l;g++)u+=Le.EXP900[l-g-1]*ms(s[g]);let d=u.toString();if(d.charAt(0)!=="1")throw new k;return d.substring(1)}}Le.TEXT_COMPACTION_MODE_LATCH=900,Le.BYTE_COMPACTION_MODE_LATCH=901,Le.NUMERIC_COMPACTION_MODE_LATCH=902,Le.BYTE_COMPACTION_MODE_LATCH_6=924,Le.ECI_USER_DEFINED=925,Le.ECI_GENERAL_PURPOSE=926,Le.ECI_CHARSET=927,Le.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Le.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Le.MACRO_PDF417_TERMINATOR=922,Le.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Le.MAX_NUMERIC_CODEWORDS=15,Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Le.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Le.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Le.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Le.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Le.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Le.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Le.PL=25,Le.LL=27,Le.AS=27,Le.ML=28,Le.AL=28,Le.PS=29,Le.PAL=29,Le.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Le.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Le.EXP900=va()?Xa():[],Le.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Qt{constructor(){}static decode(s,l,u,d,g,p,E){let A=new ds(s,l,u,d,g),I=null,N=null,B;for(let ge=!0;;ge=!1){if(l!=null&&(I=Qt.getRowIndicatorColumn(s,A,l,!0,p,E)),d!=null&&(N=Qt.getRowIndicatorColumn(s,A,d,!1,p,E)),B=Qt.merge(I,N),B==null)throw ye.getNotFoundInstance();let xe=B.getBoundingBox();if(ge&&xe!=null&&(xe.getMinY()<A.getMinY()||xe.getMaxY()>A.getMaxY()))A=xe;else break}B.setBoundingBox(A);let G=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,I),B.setDetectionResultColumn(G,N);let ae=I!=null;for(let ge=1;ge<=G;ge++){let xe=ae?ge:G-ge;if(B.getDetectionResultColumn(xe)!==void 0)continue;let Ae;xe===0||xe===G?Ae=new Zi(A,xe===0):Ae=new gs(A),B.setDetectionResultColumn(xe,Ae);let ke=-1,st=ke;for(let it=A.getMinY();it<=A.getMaxY();it++){if(ke=Qt.getStartColumn(B,xe,it,ae),ke<0||ke>A.getMaxX()){if(st===-1)continue;ke=st}let Ze=Qt.detectCodeword(s,A.getMinX(),A.getMaxX(),ae,ke,it,p,E);Ze!=null&&(Ae.setCodeword(it,Ze),st=ke,p=Math.min(p,Ze.getWidth()),E=Math.max(E,Ze.getWidth()))}}return Qt.createDecoderResult(B)}static merge(s,l){if(s==null&&l==null)return null;let u=Qt.getBarcodeMetadata(s,l);if(u==null)return null;let d=ds.merge(Qt.adjustBoundingBox(s),Qt.adjustBoundingBox(l));return new vr(u,d)}static adjustBoundingBox(s){if(s==null)return null;let l=s.getRowHeights();if(l==null)return null;let u=Qt.getMax(l),d=0;for(let E of l)if(d+=u-E,E>0)break;let g=s.getCodewords();for(let E=0;d>0&&g[E]==null;E++)d--;let p=0;for(let E=l.length-1;E>=0&&(p+=u-l[E],!(l[E]>0));E--);for(let E=g.length-1;p>0&&g[E]==null;E--)p--;return s.getBoundingBox().addMissingRows(d,p,s.isLeft())}static getMax(s){let l=-1;for(let u of s)l=Math.max(l,u);return l}static getBarcodeMetadata(s,l){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let d;return l==null||(d=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==d.getColumnCount()&&u.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&u.getRowCount()!==d.getRowCount()?null:u}static getRowIndicatorColumn(s,l,u,d,g,p){let E=new Zi(l,d);for(let A=0;A<2;A++){let I=A===0?1:-1,N=Math.trunc(Math.trunc(u.getX()));for(let B=Math.trunc(Math.trunc(u.getY()));B<=l.getMaxY()&&B>=l.getMinY();B+=I){let G=Qt.detectCodeword(s,0,s.getWidth(),d,N,B,g,p);G!=null&&(E.setCodeword(B,G),d?N=G.getStartX():N=G.getEndX())}}return E}static adjustCodewordCount(s,l){let u=l[0][1],d=u.getValue(),g=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Qt.getNumberOfECCodeWords(s.getBarcodeECLevel());if(d.length===0){if(g<1||g>Nt.MAX_CODEWORDS_IN_BARCODE)throw ye.getNotFoundInstance();u.setValue(g)}else d[0]!==g&&u.setValue(g)}static createDecoderResult(s){let l=Qt.createBarcodeMatrix(s);Qt.adjustCodewordCount(s,l);let u=new Array,d=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),g=[],p=new Array;for(let A=0;A<s.getBarcodeRowCount();A++)for(let I=0;I<s.getBarcodeColumnCount();I++){let N=l[A][I+1].getValue(),B=A*s.getBarcodeColumnCount()+I;N.length===0?u.push(B):N.length===1?d[B]=N[0]:(p.push(B),g.push(N))}let E=new Array(g.length);for(let A=0;A<E.length;A++)E[A]=g[A];return Qt.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),d,Nt.toIntArray(u),Nt.toIntArray(p),E)}static createDecoderResultFromAmbiguousValues(s,l,u,d,g){let p=new Int32Array(d.length),E=100;for(;E-- >0;){for(let A=0;A<p.length;A++)l[d[A]]=g[A][p[A]];try{return Qt.decodeCodewords(l,s,u)}catch(A){if(!(A instanceof O))throw A}if(p.length===0)throw O.getChecksumInstance();for(let A=0;A<p.length;A++)if(p[A]<g[A].length-1){p[A]++;break}else if(p[A]=0,A===p.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(s){let l=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let d=0;d<l.length;d++)for(let g=0;g<l[d].length;g++)l[d][g]=new Ui;let u=0;for(let d of s.getDetectionResultColumns()){if(d!=null){for(let g of d.getCodewords())if(g!=null){let p=g.getRowNumber();if(p>=0){if(p>=l.length)continue;l[p][u].setValue(g.getValue())}}}u++}return l}static isValidBarcodeColumn(s,l){return l>=0&&l<=s.getBarcodeColumnCount()+1}static getStartColumn(s,l,u,d){let g=d?1:-1,p=null;if(Qt.isValidBarcodeColumn(s,l-g)&&(p=s.getDetectionResultColumn(l-g).getCodeword(u)),p!=null)return d?p.getEndX():p.getStartX();if(p=s.getDetectionResultColumn(l).getCodewordNearby(u),p!=null)return d?p.getStartX():p.getEndX();if(Qt.isValidBarcodeColumn(s,l-g)&&(p=s.getDetectionResultColumn(l-g).getCodewordNearby(u)),p!=null)return d?p.getEndX():p.getStartX();let E=0;for(;Qt.isValidBarcodeColumn(s,l-g);){l-=g;for(let A of s.getDetectionResultColumn(l).getCodewords())if(A!=null)return(d?A.getEndX():A.getStartX())+g*E*(A.getEndX()-A.getStartX());E++}return d?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,l,u,d,g,p,E,A){g=Qt.adjustCodewordStartColumn(s,l,u,d,g,p);let I=Qt.getModuleBitCount(s,l,u,d,g,p);if(I==null)return null;let N,B=pt.sum(I);if(d)N=g+B;else{for(let ge=0;ge<I.length/2;ge++){let xe=I[ge];I[ge]=I[I.length-1-ge],I[I.length-1-ge]=xe}N=g,g=N-B}if(!Qt.checkCodewordSkew(B,E,A))return null;let G=ar.getDecodedValue(I),ae=Nt.getCodeword(G);return ae===-1?null:new Vi(g,N,Qt.getCodewordBucketNumber(G),ae)}static getModuleBitCount(s,l,u,d,g,p){let E=g,A=new Int32Array(8),I=0,N=d?1:-1,B=d;for(;(d?E<u:E>=l)&&I<A.length;)s.get(E,p)===B?(A[I]++,E+=N):(I++,B=!B);return I===A.length||E===(d?u:l)&&I===A.length-1?A:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,l,u,d,g,p){let E=g,A=d?-1:1;for(let I=0;I<2;I++){for(;(d?E>=l:E<u)&&d===s.get(E,p);){if(Math.abs(g-E)>Qt.CODEWORD_SKEW_SIZE)return g;E+=A}A=-A,d=!d}return E}static checkCodewordSkew(s,l,u){return l-Qt.CODEWORD_SKEW_SIZE<=s&&s<=u+Qt.CODEWORD_SKEW_SIZE}static decodeCodewords(s,l,u){if(s.length===0)throw k.getFormatInstance();let d=1<<l+1,g=Qt.correctErrors(s,u,d);Qt.verifyCodewordCount(s,d);let p=Le.decode(s,""+l);return p.setErrorsCorrected(g),p.setErasures(u.length),p}static correctErrors(s,l,u){if(l!=null&&l.length>u/2+Qt.MAX_ERRORS||u<0||u>Qt.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return Qt.errorCorrection.decode(s,u,l)}static verifyCodewordCount(s,l){if(s.length<4)throw k.getFormatInstance();let u=s[0];if(u>s.length)throw k.getFormatInstance();if(u===0)if(l<s.length)s[0]=s.length-l;else throw k.getFormatInstance()}static getBitCountForCodeword(s){let l=new Int32Array(8),u=0,d=l.length-1;for(;!((s&1)!==u&&(u=s&1,d--,d<0));)l[d]++,s>>=1;return l}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Qt.getCodewordBucketNumber(Qt.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let l=new ra;for(let u=0;u<s.length;u++){l.format("Row %2d: ",u);for(let d=0;d<s[u].length;d++){let g=s[u][d];g.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}l.format("%n")}return l.toString()}}Qt.CODEWORD_SKEW_SIZE=2,Qt.MAX_ERRORS=3,Qt.MAX_EC_CODEWORDS=512,Qt.errorCorrection=new hs;class dr{decode(s,l=null){let u=dr.decode(s,l,!1);if(u==null||u.length===0||u[0]==null)throw ye.getNotFoundInstance();return u[0]}decodeMultiple(s,l=null){try{return dr.decode(s,l,!0)}catch(u){throw u instanceof k||u instanceof O?ye.getNotFoundInstance():u}}static decode(s,l,u){const d=new Array,g=kt.detectMultiple(s,l,u);for(const p of g.getPoints()){const E=Qt.decode(g.getBits(),p[4],p[5],p[6],p[7],dr.getMinCodewordWidth(p),dr.getMaxCodewordWidth(p)),A=new se(E.getText(),E.getRawBytes(),void 0,p,pe.PDF_417);A.putMetadata(rt.ERROR_CORRECTION_LEVEL,E.getECLevel());const I=E.getOther();I!=null&&A.putMetadata(rt.PDF417_EXTRA_METADATA,I),d.push(A)}return d.map(p=>p)}static getMaxWidth(s,l){return s==null||l==null?0:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMinWidth(s,l){return s==null||l==null?ie.MAX_VALUE:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(dr.getMaxWidth(s[0],s[4]),dr.getMaxWidth(s[6],s[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.max(dr.getMaxWidth(s[1],s[5]),dr.getMaxWidth(s[7],s[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(dr.getMinWidth(s[0],s[4]),dr.getMinWidth(s[6],s[2])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN),Math.min(dr.getMinWidth(s[1],s[5]),dr.getMinWidth(s[7],s[3])*Nt.MODULES_IN_CODEWORD/Nt.MODULES_IN_STOP_PATTERN)))}reset(){}}class qa extends _{}qa.kind="ReaderException";class Vl{constructor(s,l){this.verbose=s===!0,l&&this.setHints(l)}decode(s,l){return l&&this.setHints(l),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const l=!r(s)&&s.get(De.TRY_HARDER)===!0,u=r(s)?null:s.get(De.POSSIBLE_FORMATS),d=new Array;if(!r(u)){const g=u.some(p=>p===pe.UPC_A||p===pe.UPC_E||p===pe.EAN_13||p===pe.EAN_8||p===pe.CODABAR||p===pe.CODE_39||p===pe.CODE_93||p===pe.CODE_128||p===pe.ITF||p===pe.RSS_14||p===pe.RSS_EXPANDED);g&&!l&&d.push(new _r(s,this.verbose)),u.includes(pe.QR_CODE)&&d.push(new Ri),u.includes(pe.DATA_MATRIX)&&d.push(new Si),u.includes(pe.AZTEC)&&d.push(new Ds),u.includes(pe.PDF_417)&&d.push(new dr),g&&l&&d.push(new _r(s,this.verbose))}d.length===0&&(l||d.push(new _r(s,this.verbose)),d.push(new Ri),d.push(new Si),d.push(new Ds),d.push(new dr),l&&d.push(new _r(s,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new qa("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(s,this.hints)}catch(u){if(u instanceof qa)continue}throw new ye("No MultiFormat Readers were able to detect the code.")}}class ks extends ue{constructor(s=null,l=500){const u=new Vl;u.setHints(s),super(u,l)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class Sc extends ue{constructor(s=500){super(new dr,s)}}class Cc extends ue{constructor(s=500){super(new Ri,s)}}var Fo;(function(F){F[F.ERROR_CORRECTION=0]="ERROR_CORRECTION",F[F.CHARACTER_SET=1]="CHARACTER_SET",F[F.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",F[F.MIN_SIZE=3]="MIN_SIZE",F[F.MAX_SIZE=4]="MAX_SIZE",F[F.MARGIN=5]="MARGIN",F[F.PDF417_COMPACT=6]="PDF417_COMPACT",F[F.PDF417_COMPACTION=7]="PDF417_COMPACTION",F[F.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",F[F.AZTEC_LAYERS=9]="AZTEC_LAYERS",F[F.QR_VERSION=10]="QR_VERSION"})(Fo||(Fo={}));var gr=Fo;class Ps{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Mt(s,Int32Array.from([1])))}buildGenerator(s){const l=this.cachedGenerators;if(s>=l.length){let u=l[l.length-1];const d=this.field;for(let g=l.length;g<=s;g++){const p=u.multiply(new Mt(d,Int32Array.from([1,d.exp(g-1+d.getGeneratorBase())])));l.push(p),u=p}}return l[s]}encode(s,l){if(l===0)throw new C("No error correction bytes");const u=s.length-l;if(u<=0)throw new C("No data bytes provided");const d=this.buildGenerator(l),g=new Int32Array(u);M.arraycopy(s,0,g,0,u);let p=new Mt(this.field,g);p=p.multiplyByMonomial(l,1);const A=p.divide(d)[1].getCoefficients(),I=l-A.length;for(let N=0;N<I;N++)s[u+N]=0;M.arraycopy(A,0,s,u+I,A.length)}}class fn{constructor(){}static applyMaskPenaltyRule1(s){return fn.applyMaskPenaltyRule1Internal(s,!0)+fn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const u=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let p=0;p<g-1;p++){const E=u[p];for(let A=0;A<d-1;A++){const I=E[A];I===E[A+1]&&I===u[p+1][A]&&I===u[p+1][A+1]&&l++}}return fn.N2*l}static applyMaskPenaltyRule3(s){let l=0;const u=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let p=0;p<g;p++)for(let E=0;E<d;E++){const A=u[p];E+6<d&&A[E]===1&&A[E+1]===0&&A[E+2]===1&&A[E+3]===1&&A[E+4]===1&&A[E+5]===0&&A[E+6]===1&&(fn.isWhiteHorizontal(A,E-4,E)||fn.isWhiteHorizontal(A,E+7,E+11))&&l++,p+6<g&&u[p][E]===1&&u[p+1][E]===0&&u[p+2][E]===1&&u[p+3][E]===1&&u[p+4][E]===1&&u[p+5][E]===0&&u[p+6][E]===1&&(fn.isWhiteVertical(u,E,p-4,p)||fn.isWhiteVertical(u,E,p+7,p+11))&&l++}return l*fn.N3}static isWhiteHorizontal(s,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let d=l;d<u;d++)if(s[d]===1)return!1;return!0}static isWhiteVertical(s,l,u,d){u=Math.max(u,0),d=Math.min(d,s.length);for(let g=u;g<d;g++)if(s[g][l]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const u=s.getArray(),d=s.getWidth(),g=s.getHeight();for(let A=0;A<g;A++){const I=u[A];for(let N=0;N<d;N++)I[N]===1&&l++}const p=s.getHeight()*s.getWidth();return Math.floor(Math.abs(l*2-p)*10/p)*fn.N4}static getDataMaskBit(s,l,u){let d,g;switch(s){case 0:d=u+l&1;break;case 1:d=u&1;break;case 2:d=l%3;break;case 3:d=(u+l)%3;break;case 4:d=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:g=u*l,d=(g&1)+g%3;break;case 6:g=u*l,d=(g&1)+g%3&1;break;case 7:g=u*l,d=g%3+(u+l&1)&1;break;default:throw new C("Invalid mask pattern: "+s)}return d===0}static applyMaskPenaltyRule1Internal(s,l){let u=0;const d=l?s.getHeight():s.getWidth(),g=l?s.getWidth():s.getHeight(),p=s.getArray();for(let E=0;E<d;E++){let A=0,I=-1;for(let N=0;N<g;N++){const B=l?p[E][N]:p[N][E];B===I?A++:(A>=5&&(u+=fn.N1+(A-5)),A=1,I=B)}A>=5&&(u+=fn.N1+(A-5))}return u}}fn.N1=3,fn.N2=3,fn.N3=40,fn.N4=10;class Ya{constructor(s,l){this.width=s,this.height=l;const u=new Array(l);for(let d=0;d!==l;d++)u[d]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,l){return this.bytes[l][s]}getArray(){return this.bytes}setNumber(s,l,u){this.bytes[l][s]=u}setBoolean(s,l,u){this.bytes[l][s]=u?1:0}clear(s){for(const l of this.bytes)ce.fill(l,s)}equals(s){if(!(s instanceof Ya))return!1;const l=s;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,d=this.height;u<d;++u){const g=this.bytes[u],p=l.bytes[u];for(let E=0,A=this.width;E<A;++E)if(g[E]!==p[E])return!1}return!0}toString(){const s=new Y;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l];for(let g=0,p=this.width;g<p;++g)switch(d[g]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Fs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new Y;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Fs.NUM_MASK_PATTERNS}}Fs.NUM_MASK_PATTERNS=8;class hn extends _{}hn.kind="WriterException";class y{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,l,u,d,g){y.clearMatrix(g),y.embedBasicPatterns(u,g),y.embedTypeInfo(l,d,g),y.maybeEmbedVersionInfo(u,g),y.embedDataBits(s,d,g)}static embedBasicPatterns(s,l){y.embedPositionDetectionPatternsAndSeparators(l),y.embedDarkDotAtLeftBottomCorner(l),y.maybeEmbedPositionAdjustmentPatterns(s,l),y.embedTimingPatterns(l)}static embedTypeInfo(s,l,u){const d=new me;y.makeTypeInfoBits(s,l,d);for(let g=0,p=d.getSize();g<p;++g){const E=d.get(d.getSize()-1-g),A=y.TYPE_INFO_COORDINATES[g],I=A[0],N=A[1];if(u.setBoolean(I,N,E),g<8){const B=u.getWidth()-g-1;u.setBoolean(B,8,E)}else{const G=u.getHeight()-7+(g-8);u.setBoolean(8,G,E)}}}static maybeEmbedVersionInfo(s,l){if(s.getVersionNumber()<7)return;const u=new me;y.makeVersionInfoBits(s,u);let d=17;for(let g=0;g<6;++g)for(let p=0;p<3;++p){const E=u.get(d);d--,l.setBoolean(g,l.getHeight()-11+p,E),l.setBoolean(l.getHeight()-11+p,g,E)}}static embedDataBits(s,l,u){let d=0,g=-1,p=u.getWidth()-1,E=u.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);E>=0&&E<u.getHeight();){for(let A=0;A<2;++A){const I=p-A;if(!y.isEmpty(u.get(I,E)))continue;let N;d<s.getSize()?(N=s.get(d),++d):N=!1,l!==255&&fn.getDataMaskBit(l,I,E)&&(N=!N),u.setBoolean(I,E,N)}E+=g}g=-g,E+=g,p-=2}if(d!==s.getSize())throw new hn("Not all bits consumed: "+d+"/"+s.getSize())}static findMSBSet(s){return 32-ie.numberOfLeadingZeros(s)}static calculateBCHCode(s,l){if(l===0)throw new C("0 polynomial");const u=y.findMSBSet(l);for(s<<=u-1;y.findMSBSet(s)>=u;)s^=l<<y.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,l,u){if(!Fs.isValidMaskPattern(l))throw new hn("Invalid mask pattern");const d=s.getBits()<<3|l;u.appendBits(d,5);const g=y.calculateBCHCode(d,y.TYPE_INFO_POLY);u.appendBits(g,10);const p=new me;if(p.appendBits(y.TYPE_INFO_MASK_PATTERN,15),u.xor(p),u.getSize()!==15)throw new hn("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,l){l.appendBits(s.getVersionNumber(),6);const u=y.calculateBCHCode(s.getVersionNumber(),y.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new hn("should not happen but we got: "+l.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let l=8;l<s.getWidth()-8;++l){const u=(l+1)%2;y.isEmpty(s.get(l,6))&&s.setNumber(l,6,u),y.isEmpty(s.get(6,l))&&s.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new hn;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,l,u){for(let d=0;d<8;++d){if(!y.isEmpty(u.get(s+d,l)))throw new hn;u.setNumber(s+d,l,0)}}static embedVerticalSeparationPattern(s,l,u){for(let d=0;d<7;++d){if(!y.isEmpty(u.get(s,l+d)))throw new hn;u.setNumber(s,l+d,0)}}static embedPositionAdjustmentPattern(s,l,u){for(let d=0;d<5;++d){const g=y.POSITION_ADJUSTMENT_PATTERN[d];for(let p=0;p<5;++p)u.setNumber(s+p,l+d,g[p])}}static embedPositionDetectionPattern(s,l,u){for(let d=0;d<7;++d){const g=y.POSITION_DETECTION_PATTERN[d];for(let p=0;p<7;++p)u.setNumber(s+p,l+d,g[p])}}static embedPositionDetectionPatternsAndSeparators(s){const l=y.POSITION_DETECTION_PATTERN[0].length;y.embedPositionDetectionPattern(0,0,s),y.embedPositionDetectionPattern(s.getWidth()-l,0,s),y.embedPositionDetectionPattern(0,s.getWidth()-l,s);const u=8;y.embedHorizontalSeparationPattern(0,u-1,s),y.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),y.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const d=7;y.embedVerticalSeparationPattern(d,0,s),y.embedVerticalSeparationPattern(s.getHeight()-d-1,0,s),y.embedVerticalSeparationPattern(d,s.getHeight()-d,s)}static maybeEmbedPositionAdjustmentPatterns(s,l){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,d=y.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let g=0,p=d.length;g!==p;g++){const E=d[g];if(E>=0)for(let A=0;A!==p;A++){const I=d[A];I>=0&&y.isEmpty(l.get(I,E))&&y.embedPositionAdjustmentPattern(I-2,E-2,l)}}}}y.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),y.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),y.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),y.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),y.VERSION_INFO_POLY=7973,y.TYPE_INFO_POLY=1335,y.TYPE_INFO_MASK_PATTERN=21522;class R{constructor(s,l){this.dataBytes=s,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class L{constructor(){}static calculateMaskPenalty(s){return fn.applyMaskPenaltyRule1(s)+fn.applyMaskPenaltyRule2(s)+fn.applyMaskPenaltyRule3(s)+fn.applyMaskPenaltyRule4(s)}static encode(s,l,u=null){let d=L.DEFAULT_BYTE_MODE_ENCODING;const g=u!==null&&u.get(gr.CHARACTER_SET)!==void 0;g&&(d=u.get(gr.CHARACTER_SET).toString());const p=this.chooseMode(s,d),E=new me;if(p===It.BYTE&&(g||L.DEFAULT_BYTE_MODE_ENCODING!==d)){const it=P.getCharacterSetECIByName(d);it!==void 0&&this.appendECI(it,E)}this.appendModeInfo(p,E);const A=new me;this.appendBytes(s,p,A,d);let I;if(u!==null&&u.get(gr.QR_VERSION)!==void 0){const it=Number.parseInt(u.get(gr.QR_VERSION).toString(),10);I=Tt.getVersionForNumber(it);const Ze=this.calculateBitsNeeded(p,E,A,I);if(!this.willFit(Ze,I,l))throw new hn("Data too big for requested version")}else I=this.recommendVersion(l,p,E,A);const N=new me;N.appendBitArray(E);const B=p===It.BYTE?A.getSizeInBytes():s.length;this.appendLengthInfo(B,I,p,N),N.appendBitArray(A);const G=I.getECBlocksForLevel(l),ae=I.getTotalCodewords()-G.getTotalECCodewords();this.terminateBits(ae,N);const ge=this.interleaveWithECBytes(N,I.getTotalCodewords(),ae,G.getNumBlocks()),xe=new Fs;xe.setECLevel(l),xe.setMode(p),xe.setVersion(I);const Ae=I.getDimensionForVersion(),ke=new Ya(Ae,Ae),st=this.chooseMaskPattern(ge,l,I,ke);return xe.setMaskPattern(st),y.buildMatrix(ge,l,I,st,ke),xe.setMatrix(ke),xe}static recommendVersion(s,l,u,d){const g=this.calculateBitsNeeded(l,u,d,Tt.getVersionForNumber(1)),p=this.chooseVersion(g,s),E=this.calculateBitsNeeded(l,u,d,p);return this.chooseVersion(E,s)}static calculateBitsNeeded(s,l,u,d){return l.getSize()+s.getCharacterCountBits(d)+u.getSize()}static getAlphanumericCode(s){return s<L.ALPHANUMERIC_TABLE.length?L.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,l=null){if(P.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(s))return It.KANJI;let u=!1,d=!1;for(let g=0,p=s.length;g<p;++g){const E=s.charAt(g);if(L.isDigit(E))u=!0;else if(this.getAlphanumericCode(E.charCodeAt(0))!==-1)d=!0;else return It.BYTE}return d?It.ALPHANUMERIC:u?It.NUMERIC:It.BYTE}static isOnlyDoubleByteKanji(s){let l;try{l=K.encode(s,P.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let d=0;d<u;d+=2){const g=l[d]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(s,l,u,d){let g=Number.MAX_SAFE_INTEGER,p=-1;for(let E=0;E<Fs.NUM_MASK_PATTERNS;E++){y.buildMatrix(s,l,u,E,d);let A=this.calculateMaskPenalty(d);A<g&&(g=A,p=E)}return p}static chooseVersion(s,l){for(let u=1;u<=40;u++){const d=Tt.getVersionForNumber(u);if(L.willFit(s,d,l))return d}throw new hn("Data too big")}static willFit(s,l,u){const d=l.getTotalCodewords(),p=l.getECBlocksForLevel(u).getTotalECCodewords(),E=d-p,A=(s+7)/8;return E>=A}static terminateBits(s,l){const u=s*8;if(l.getSize()>u)throw new hn("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let p=0;p<4&&l.getSize()<u;++p)l.appendBit(!1);const d=l.getSize()&7;if(d>0)for(let p=d;p<8;p++)l.appendBit(!1);const g=s-l.getSizeInBytes();for(let p=0;p<g;++p)l.appendBits((p&1)===0?236:17,8);if(l.getSize()!==u)throw new hn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,l,u,d,g,p){if(d>=u)throw new hn("Block ID too large");const E=s%u,A=u-E,I=Math.floor(s/u),N=I+1,B=Math.floor(l/u),G=B+1,ae=I-B,ge=N-G;if(ae!==ge)throw new hn("EC bytes mismatch");if(u!==A+E)throw new hn("RS blocks mismatch");if(s!==(B+ae)*A+(G+ge)*E)throw new hn("Total bytes mismatch");d<A?(g[0]=B,p[0]=ae):(g[0]=G,p[0]=ge)}static interleaveWithECBytes(s,l,u,d){if(s.getSizeInBytes()!==u)throw new hn("Number of bits and data bytes does not match");let g=0,p=0,E=0;const A=new Array;for(let N=0;N<d;++N){const B=new Int32Array(1),G=new Int32Array(1);L.getNumDataBytesAndNumECBytesForBlockID(l,u,d,N,B,G);const ae=B[0],ge=new Uint8Array(ae);s.toBytes(8*g,ge,0,ae);const xe=L.generateECBytes(ge,G[0]);A.push(new R(ge,xe)),p=Math.max(p,ae),E=Math.max(E,xe.length),g+=B[0]}if(u!==g)throw new hn("Data bytes does not match offset");const I=new me;for(let N=0;N<p;++N)for(const B of A){const G=B.getDataBytes();N<G.length&&I.appendBits(G[N],8)}for(let N=0;N<E;++N)for(const B of A){const G=B.getErrorCorrectionBytes();N<G.length&&I.appendBits(G[N],8)}if(l!==I.getSizeInBytes())throw new hn("Interleaving error: "+l+" and "+I.getSizeInBytes()+" differ.");return I}static generateECBytes(s,l){const u=s.length,d=new Int32Array(u+l);for(let p=0;p<u;p++)d[p]=s[p]&255;new Ps(Rt.QR_CODE_FIELD_256).encode(d,l);const g=new Uint8Array(l);for(let p=0;p<l;p++)g[p]=d[u+p];return g}static appendModeInfo(s,l){l.appendBits(s.getBits(),4)}static appendLengthInfo(s,l,u,d){const g=u.getCharacterCountBits(l);if(s>=1<<g)throw new hn(s+" is bigger than "+((1<<g)-1));d.appendBits(s,g)}static appendBytes(s,l,u,d){switch(l){case It.NUMERIC:L.appendNumericBytes(s,u);break;case It.ALPHANUMERIC:L.appendAlphanumericBytes(s,u);break;case It.BYTE:L.append8BitBytes(s,u,d);break;case It.KANJI:L.appendKanjiBytes(s,u);break;default:throw new hn("Invalid mode: "+l)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const l=L.getDigit(s);return l>=0&&l<=9}static appendNumericBytes(s,l){const u=s.length;let d=0;for(;d<u;){const g=L.getDigit(s.charAt(d));if(d+2<u){const p=L.getDigit(s.charAt(d+1)),E=L.getDigit(s.charAt(d+2));l.appendBits(g*100+p*10+E,10),d+=3}else if(d+1<u){const p=L.getDigit(s.charAt(d+1));l.appendBits(g*10+p,7),d+=2}else l.appendBits(g,4),d++}}static appendAlphanumericBytes(s,l){const u=s.length;let d=0;for(;d<u;){const g=L.getAlphanumericCode(s.charCodeAt(d));if(g===-1)throw new hn;if(d+1<u){const p=L.getAlphanumericCode(s.charCodeAt(d+1));if(p===-1)throw new hn;l.appendBits(g*45+p,11),d+=2}else l.appendBits(g,6),d++}}static append8BitBytes(s,l,u){let d;try{d=K.encode(s,u)}catch(g){throw new hn(g)}for(let g=0,p=d.length;g!==p;g++){const E=d[g];l.appendBits(E,8)}}static appendKanjiBytes(s,l){let u;try{u=K.encode(s,P.SJIS)}catch(g){throw new hn(g)}const d=u.length;for(let g=0;g<d;g+=2){const p=u[g]&255,E=u[g+1]&255,A=p<<8&4294967295|E;let I=-1;if(A>=33088&&A<=40956?I=A-33088:A>=57408&&A<=60351&&(I=A-49472),I===-1)throw new hn("Invalid byte sequence");const N=(I>>8)*192+(I&255);l.appendBits(N,13)}}static appendECI(s,l){l.appendBits(It.ECI.getBits(),4),l.appendBits(s.getValue(),8)}}L.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),L.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Z{write(s,l,u,d=null){if(s.length===0)throw new C("Found empty contents");if(l<0||u<0)throw new C("Requested dimensions are too small: "+l+"x"+u);let g=nn.L,p=Z.QUIET_ZONE_SIZE;d!==null&&(d.get(gr.ERROR_CORRECTION)!==void 0&&(g=nn.fromString(d.get(gr.ERROR_CORRECTION).toString())),d.get(gr.MARGIN)!==void 0&&(p=Number.parseInt(d.get(gr.MARGIN).toString(),10)));const E=L.encode(s,g,d);return this.renderResult(E,l,u,p)}writeToDom(s,l,u,d,g=null){typeof s=="string"&&(s=document.querySelector(s));const p=this.write(l,u,d,g);s&&s.appendChild(p)}renderResult(s,l,u,d){const g=s.getMatrix();if(g===null)throw new Hn;const p=g.getWidth(),E=g.getHeight(),A=p+d*2,I=E+d*2,N=Math.max(l,A),B=Math.max(u,I),G=Math.min(Math.floor(N/A),Math.floor(B/I)),ae=Math.floor((N-p*G)/2),ge=Math.floor((B-E*G)/2),xe=this.createSVGElement(N,B);for(let Ae=0,ke=ge;Ae<E;Ae++,ke+=G)for(let st=0,it=ae;st<p;st++,it+=G)if(g.get(st,Ae)===1){const Ze=this.createSvgRectElement(it,ke,G,G);xe.appendChild(Ze)}return xe}createSVGElement(s,l){const u=document.createElementNS(Z.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(s,l,u,d){const g=document.createElementNS(Z.SVG_NS,"rect");return g.setAttributeNS(null,"x",s.toString()),g.setAttributeNS(null,"y",l.toString()),g.setAttributeNS(null,"height",u.toString()),g.setAttributeNS(null,"width",d.toString()),g.setAttributeNS(null,"fill","#000000"),g}}Z.QUIET_ZONE_SIZE=4,Z.SVG_NS="http://www.w3.org/2000/svg";class we{encode(s,l,u,d,g){if(s.length===0)throw new C("Found empty contents");if(l!==pe.QR_CODE)throw new C("Can only encode QR_CODE, but got "+l);if(u<0||d<0)throw new C(`Requested dimensions are too small: ${u}x${d}`);let p=nn.L,E=we.QUIET_ZONE_SIZE;g!==null&&(g.get(gr.ERROR_CORRECTION)!==void 0&&(p=nn.fromString(g.get(gr.ERROR_CORRECTION).toString())),g.get(gr.MARGIN)!==void 0&&(E=Number.parseInt(g.get(gr.MARGIN).toString(),10)));const A=L.encode(s,p,g);return we.renderResult(A,u,d,E)}static renderResult(s,l,u,d){const g=s.getMatrix();if(g===null)throw new Hn;const p=g.getWidth(),E=g.getHeight(),A=p+d*2,I=E+d*2,N=Math.max(l,A),B=Math.max(u,I),G=Math.min(Math.floor(N/A),Math.floor(B/I)),ae=Math.floor((N-p*G)/2),ge=Math.floor((B-E*G)/2),xe=new dt(N,B);for(let Ae=0,ke=ge;Ae<E;Ae++,ke+=G)for(let st=0,it=ae;st<p;st++,it+=G)g.get(st,Ae)===1&&xe.setRegion(it,ke,G,G);return xe}}we.QUIET_ZONE_SIZE=4;class Fe{encode(s,l,u,d,g){let p;switch(l){case pe.QR_CODE:p=new we;break;default:throw new C("No encoder available for format "+l)}return p.encode(s,l,u,d,g)}}class ot extends gt{constructor(s,l,u,d,g,p,E,A){if(super(p,E),this.yuvData=s,this.dataWidth=l,this.dataHeight=u,this.left=d,this.top=g,d+p>l||g+E>u)throw new C("Crop rectangle does not fit within image data.");A&&this.reverseHorizontal(p,E)}getRow(s,l){if(s<0||s>=this.getHeight())throw new C("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const d=(s+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,d,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=s*l,d=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return M.arraycopy(this.yuvData,g,d,0,u),d;for(let p=0;p<l;p++){const E=p*s;M.arraycopy(this.yuvData,g,d,E,s),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,l,u,d){return new ot(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,u,d,!1)}renderThumbnail(){const s=this.getWidth()/ot.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/ot.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*l),d=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let p=0;p<l;p++){const E=p*s;for(let A=0;A<s;A++){const I=d[g+A*ot.THUMBNAIL_SCALE_FACTOR]&255;u[E+A]=4278190080|I*65793}g+=this.dataWidth*ot.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/ot.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ot.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const u=this.yuvData;for(let d=0,g=this.top*this.dataWidth+this.left;d<l;d++,g+=this.dataWidth){const p=g+s/2;for(let E=g,A=g+s-1;E<p;E++,A--){const I=u[E];u[E]=u[A],u[A]=I}}}invert(){return new yt(this)}}ot.THUMBNAIL_SCALE_FACTOR=2;class Wt extends gt{constructor(s,l,u,d,g,p,E){if(super(l,u),this.dataWidth=d,this.dataHeight=g,this.left=p,this.top=E,s.BYTES_PER_ELEMENT===4){const A=l*u,I=new Uint8ClampedArray(A);for(let N=0;N<A;N++){const B=s[N],G=B>>16&255,ae=B>>7&510,ge=B&255;I[N]=(G+ae+ge)/4&255}this.luminances=I}else this.luminances=s;if(d===void 0&&(this.dataWidth=l),g===void 0&&(this.dataHeight=u),p===void 0&&(this.left=0),E===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(s,l){if(s<0||s>=this.getHeight())throw new C("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const d=(s+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,d,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=s*l,d=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return M.arraycopy(this.luminances,g,d,0,u),d;for(let p=0;p<l;p++){const E=p*s;M.arraycopy(this.luminances,g,d,E,s),g+=this.dataWidth}return d}isCropSupported(){return!0}crop(s,l,u,d){return new Wt(this.luminances,u,d,this.dataWidth,this.dataHeight,this.left+s,this.top+l)}invert(){return new yt(this)}}class mr extends P{static forName(s){return this.getCharacterSetECIByName(s)}}class An{}An.ISO_8859_1=P.ISO8859_1;class tr{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Hi{static singletonList(s){return[s]}static min(s,l){return s.sort(l)[0]}}class Bs{constructor(s){this.previous=s}getPrevious(){return this.previous}}class ei extends Bs{constructor(s,l,u){super(s),this.value=l,this.bitCount=u}appendTo(s,l){s.appendBits(this.value,this.bitCount)}add(s,l){return new ei(this,s,l)}addBinaryShift(s,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ei(this,s,l)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+ie.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class ji extends ei{constructor(s,l,u){super(s,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(s,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(s,l){return new ji(this,s,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ka(F,s,l){return new ji(F,s,l)}function Us(F,s,l){return new ei(F,s,l)}const Bo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],wa=0,Ic=1,Ji=2,Hu=3,ps=4,Hl=new ei(null,0,0),Qa=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function wd(F){for(let s of F)ce.fill(s,-1);return F[wa][ps]=0,F[Ic][ps]=0,F[Ic][wa]=28,F[Hu][ps]=0,F[Ji][ps]=0,F[Ji][wa]=15,F}const jl=wd(ce.createInt32Array(6,6));class xs{constructor(s,l,u,d){this.token=s,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,l){let u=this.bitCount,d=this.token;if(s!==this.mode){let p=Qa[this.mode][s];d=Us(d,p&65535,p>>16),u+=p>>16}let g=s===Ji?4:5;return d=Us(d,l,g),new xs(d,s,0,u+g)}shiftAndAppend(s,l){let u=this.token,d=this.mode===Ji?4:5;return u=Us(u,jl[this.mode][s],d),u=Us(u,l,5),new xs(u,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(s){let l=this.token,u=this.mode,d=this.bitCount;if(this.mode===ps||this.mode===Ji){let E=Qa[u][wa];l=Us(l,E&65535,E>>16),d+=E>>16,u=wa}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new xs(l,u,this.binaryShiftByteCount+1,d+g);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(s+1)),p}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=Ka(l,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new xs(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let l=this.bitCount+(Qa[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?l+=xs.calculateBinaryShiftCost(s)-xs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(l+=10),l<=s.bitCount}toBitArray(s){let l=[];for(let d=this.endBinaryShift(s.length).token;d!==null;d=d.getPrevious())l.unshift(d);let u=new me;for(const d of l)d.appendTo(u,s);return u}toString(){return J.format("%s bits=%d bytes=%d",Bo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}xs.INITIAL_STATE=new xs(Hl,wa,0,0);function I0(F){const s=J.getCharCode(" "),l=J.getCharCode("."),u=J.getCharCode(",");F[wa][s]=1;const d=J.getCharCode("Z"),g=J.getCharCode("A");for(let G=g;G<=d;G++)F[wa][G]=G-g+2;F[Ic][s]=1;const p=J.getCharCode("z"),E=J.getCharCode("a");for(let G=E;G<=p;G++)F[Ic][G]=G-E+2;F[Ji][s]=1;const A=J.getCharCode("9"),I=J.getCharCode("0");for(let G=I;G<=A;G++)F[Ji][G]=G-I+2;F[Ji][u]=12,F[Ji][l]=13;const N=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let G=0;G<N.length;G++)F[Hu][J.getCharCode(N[G])]=G;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let G=0;G<B.length;G++)J.getCharCode(B[G])>0&&(F[ps][J.getCharCode(B[G])]=G);return F}const zl=I0(ce.createInt32Array(5,256));class Za{constructor(s){this.text=s}encode(){const s=J.getCharCode(" "),l=J.getCharCode(`
`);let u=Hi.singletonList(xs.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let p,E=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case J.getCharCode("\r"):p=E===l?2:0;break;case J.getCharCode("."):p=E===s?3:0;break;case J.getCharCode(","):p=E===s?4:0;break;case J.getCharCode(":"):p=E===s?5:0;break;default:p=0}p>0?(u=Za.updateStateListForPair(u,g,p),g++):u=this.updateStateListForChar(u,g)}return Hi.min(u,(g,p)=>g.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,l){const u=[];for(let d of s)this.updateStateForChar(d,l,u);return Za.simplifyStates(u)}updateStateForChar(s,l,u){let d=this.text[l]&255,g=zl[s.getMode()][d]>0,p=null;for(let E=0;E<=ps;E++){let A=zl[E][d];if(A>0){if(p==null&&(p=s.endBinaryShift(l)),!g||E===s.getMode()||E===Ji){const I=p.latchAndAppend(E,A);u.push(I)}if(!g&&jl[s.getMode()][E]>=0){const I=p.shiftAndAppend(E,A);u.push(I)}}}if(s.getBinaryShiftByteCount()>0||zl[s.getMode()][d]===0){let E=s.addBinaryShiftChar(l);u.push(E)}}static updateStateListForPair(s,l,u){const d=[];for(let g of s)this.updateStateForPair(g,l,u,d);return this.simplifyStates(d)}static updateStateForPair(s,l,u,d){let g=s.endBinaryShift(l);if(d.push(g.latchAndAppend(ps,u)),s.getMode()!==ps&&d.push(g.shiftAndAppend(ps,u)),u===3||u===4){let p=g.latchAndAppend(Ji,16-u).latchAndAppend(Ji,1);d.push(p)}if(s.getBinaryShiftByteCount()>0){let p=s.addBinaryShiftChar(l).addBinaryShiftChar(l+1);d.push(p)}}static simplifyStates(s){let l=[];for(const u of s){let d=!0;for(const g of l){if(g.isBetterThanOrEqualTo(u)){d=!1;break}u.isBetterThanOrEqualTo(g)&&(l=l.filter(p=>p!==g))}d&&l.push(u)}return l}}class mn{constructor(){}static encodeBytes(s){return mn.encode(s,mn.DEFAULT_EC_PERCENT,mn.DEFAULT_AZTEC_LAYERS)}static encode(s,l,u){let d=new Za(s).encode(),g=ie.truncDivision(d.getSize()*l,100)+11,p=d.getSize()+g,E,A,I,N,B;if(u!==mn.DEFAULT_AZTEC_LAYERS){if(E=u<0,A=Math.abs(u),A>(E?mn.MAX_NB_BITS_COMPACT:mn.MAX_NB_BITS))throw new C(J.format("Illegal value %s for layers",u));I=mn.totalBitsInLayer(A,E),N=mn.WORD_SIZE[A];let Ze=I-I%N;if(B=mn.stuffBits(d,N),B.getSize()+g>Ze)throw new C("Data to large for user specified layer");if(E&&B.getSize()>N*64)throw new C("Data to large for user specified layer")}else{N=0,B=null;for(let Ze=0;;Ze++){if(Ze>mn.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(E=Ze<=3,A=E?Ze+1:Ze,I=mn.totalBitsInLayer(A,E),p>I)continue;(B==null||N!==mn.WORD_SIZE[A])&&(N=mn.WORD_SIZE[A],B=mn.stuffBits(d,N));let sn=I-I%N;if(!(E&&B.getSize()>N*64)&&B.getSize()+g<=sn)break}}let G=mn.generateCheckWords(B,I,N),ae=B.getSize()/N,ge=mn.generateModeMessage(E,A,ae),xe=(E?11:14)+A*4,Ae=new Int32Array(xe),ke;if(E){ke=xe;for(let Ze=0;Ze<Ae.length;Ze++)Ae[Ze]=Ze}else{ke=xe+1+2*ie.truncDivision(ie.truncDivision(xe,2)-1,15);let Ze=ie.truncDivision(xe,2),sn=ie.truncDivision(ke,2);for(let qt=0;qt<Ze;qt++){let Ar=qt+ie.truncDivision(qt,15);Ae[Ze-qt-1]=sn-Ar-1,Ae[Ze+qt]=sn+Ar+1}}let st=new dt(ke);for(let Ze=0,sn=0;Ze<A;Ze++){let qt=(A-Ze)*4+(E?9:12);for(let Ar=0;Ar<qt;Ar++){let $i=Ar*2;for(let ci=0;ci<2;ci++)G.get(sn+$i+ci)&&st.set(Ae[Ze*2+ci],Ae[Ze*2+Ar]),G.get(sn+qt*2+$i+ci)&&st.set(Ae[Ze*2+Ar],Ae[xe-1-Ze*2-ci]),G.get(sn+qt*4+$i+ci)&&st.set(Ae[xe-1-Ze*2-ci],Ae[xe-1-Ze*2-Ar]),G.get(sn+qt*6+$i+ci)&&st.set(Ae[xe-1-Ze*2-Ar],Ae[Ze*2+ci])}sn+=qt*8}if(mn.drawModeMessage(st,E,ke,ge),E)mn.drawBullsEye(st,ie.truncDivision(ke,2),5);else{mn.drawBullsEye(st,ie.truncDivision(ke,2),7);for(let Ze=0,sn=0;Ze<ie.truncDivision(xe,2)-1;Ze+=15,sn+=16)for(let qt=ie.truncDivision(ke,2)&1;qt<ke;qt+=2)st.set(ie.truncDivision(ke,2)-sn,qt),st.set(ie.truncDivision(ke,2)+sn,qt),st.set(qt,ie.truncDivision(ke,2)-sn),st.set(qt,ie.truncDivision(ke,2)+sn)}let it=new tr;return it.setCompact(E),it.setSize(ke),it.setLayers(A),it.setCodeWords(ae),it.setMatrix(st),it}static drawBullsEye(s,l,u){for(let d=0;d<u;d+=2)for(let g=l-d;g<=l+d;g++)s.set(g,l-d),s.set(g,l+d),s.set(l-d,g),s.set(l+d,g);s.set(l-u,l-u),s.set(l-u+1,l-u),s.set(l-u,l-u+1),s.set(l+u,l-u),s.set(l+u,l-u+1),s.set(l+u,l+u-1)}static generateModeMessage(s,l,u){let d=new me;return s?(d.appendBits(l-1,2),d.appendBits(u-1,6),d=mn.generateCheckWords(d,28,4)):(d.appendBits(l-1,5),d.appendBits(u-1,11),d=mn.generateCheckWords(d,40,4)),d}static drawModeMessage(s,l,u,d){let g=ie.truncDivision(u,2);if(l)for(let p=0;p<7;p++){let E=g-3+p;d.get(p)&&s.set(E,g-5),d.get(p+7)&&s.set(g+5,E),d.get(20-p)&&s.set(E,g+5),d.get(27-p)&&s.set(g-5,E)}else for(let p=0;p<10;p++){let E=g-5+p+ie.truncDivision(p,5);d.get(p)&&s.set(E,g-7),d.get(p+10)&&s.set(g+7,E),d.get(29-p)&&s.set(E,g+7),d.get(39-p)&&s.set(g-7,E)}}static generateCheckWords(s,l,u){let d=s.getSize()/u,g=new Ps(mn.getGF(u)),p=ie.truncDivision(l,u),E=mn.bitsToWords(s,u,p);g.encode(E,p-d);let A=l%u,I=new me;I.appendBits(0,A);for(const N of Array.from(E))I.appendBits(N,u);return I}static bitsToWords(s,l,u){let d=new Int32Array(u),g,p;for(g=0,p=s.getSize()/l;g<p;g++){let E=0;for(let A=0;A<l;A++)E|=s.get(g*l+A)?1<<l-A-1:0;d[g]=E}return d}static getGF(s){switch(s){case 4:return Rt.AZTEC_PARAM;case 6:return Rt.AZTEC_DATA_6;case 8:return Rt.AZTEC_DATA_8;case 10:return Rt.AZTEC_DATA_10;case 12:return Rt.AZTEC_DATA_12;default:throw new C("Unsupported word size "+s)}}static stuffBits(s,l){let u=new me,d=s.getSize(),g=(1<<l)-2;for(let p=0;p<d;p+=l){let E=0;for(let A=0;A<l;A++)(p+A>=d||s.get(p+A))&&(E|=1<<l-1-A);(E&g)===g?(u.appendBits(E&g,l),p--):(E&g)===0?(u.appendBits(E|1,l),p--):u.appendBits(E,l)}return u}static totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}mn.DEFAULT_EC_PERCENT=33,mn.DEFAULT_AZTEC_LAYERS=0,mn.MAX_NB_BITS=32,mn.MAX_NB_BITS_COMPACT=4,mn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Gl{encode(s,l,u,d){return this.encodeWithHints(s,l,u,d,null)}encodeWithHints(s,l,u,d,g){let p=An.ISO_8859_1,E=mn.DEFAULT_EC_PERCENT,A=mn.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(gr.CHARACTER_SET)&&(p=mr.forName(g.get(gr.CHARACTER_SET).toString())),g.has(gr.ERROR_CORRECTION)&&(E=ie.parseInt(g.get(gr.ERROR_CORRECTION).toString())),g.has(gr.AZTEC_LAYERS)&&(A=ie.parseInt(g.get(gr.AZTEC_LAYERS).toString()))),Gl.encodeLayers(s,l,u,d,p,E,A)}static encodeLayers(s,l,u,d,g,p,E){if(l!==pe.AZTEC)throw new C("Can only encode AZTEC, but got "+l);let A=mn.encode(J.getBytes(s,g),p,E);return Gl.renderResult(A,u,d)}static renderResult(s,l,u){let d=s.getMatrix();if(d==null)throw new Hn;let g=d.getWidth(),p=d.getHeight(),E=Math.max(l,g),A=Math.max(u,p),I=Math.min(E/g,A/p),N=(E-g*I)/2,B=(A-p*I)/2,G=new dt(E,A);for(let ae=0,ge=B;ae<p;ae++,ge+=I)for(let xe=0,Ae=N;xe<g;xe++,Ae+=I)d.get(xe,ae)&&G.setRegion(Ae,ge,I,I);return G}}t.AbstractExpandedDecoder=ee,t.ArgumentException=T,t.ArithmeticException=Ut,t.AztecCode=tr,t.AztecCodeReader=Ds,t.AztecCodeWriter=Gl,t.AztecDecoder=zt,t.AztecDetector=xa,t.AztecDetectorResult=Lt,t.AztecEncoder=mn,t.AztecHighLevelEncoder=Za,t.AztecPoint=jn,t.BarcodeFormat=pe,t.Binarizer=U,t.BinaryBitmap=b,t.BitArray=me,t.BitMatrix=dt,t.BitSource=hr,t.BrowserAztecCodeReader=Va,t.BrowserBarcodeReader=fs,t.BrowserCodeReader=ue,t.BrowserDatamatrixCodeReader=Ms,t.BrowserMultiFormatReader=ks,t.BrowserPDF417Reader=Sc,t.BrowserQRCodeReader=Cc,t.BrowserQRCodeSvgWriter=Z,t.CharacterSetECI=P,t.ChecksumException=O,t.Code128Reader=nt,t.Code39Reader=wn,t.DataMatrixDecodedBitStreamParser=li,t.DataMatrixReader=Si,t.DecodeHintType=De,t.DecoderResult=at,t.DefaultGridSampler=rr,t.DetectorResult=on,t.EAN13Reader=Pn,t.EncodeHintType=gr,t.Exception=_,t.FormatException=k,t.GenericGF=Rt,t.GenericGFPoly=Mt,t.GlobalHistogramBinarizer=Se,t.GridSampler=Gt,t.GridSamplerInstance=ln,t.HTMLCanvasElementLuminanceSource=Ke,t.HybridBinarizer=Pe,t.ITFReader=Pt,t.IllegalArgumentException=C,t.IllegalStateException=Hn,t.InvertedLuminanceSource=yt,t.LuminanceSource=gt,t.MathUtils=pt,t.MultiFormatOneDReader=_r,t.MultiFormatReader=Vl,t.MultiFormatWriter=Fe,t.NotFoundException=ye,t.OneDReader=vn,t.PDF417DecodedBitStreamParser=Le,t.PDF417DecoderErrorCorrection=hs,t.PDF417Reader=dr,t.PDF417ResultMetadata=ia,t.PerspectiveTransform=bt,t.PlanarYUVLuminanceSource=ot,t.QRCodeByteMatrix=Ya,t.QRCodeDataMask=Rr,t.QRCodeDecodedBitStreamParser=Fn,t.QRCodeDecoderErrorCorrectionLevel=nn,t.QRCodeDecoderFormatInformation=yr,t.QRCodeEncoder=L,t.QRCodeEncoderQRCode=Fs,t.QRCodeMaskUtil=fn,t.QRCodeMatrixUtil=y,t.QRCodeMode=It,t.QRCodeReader=Ri,t.QRCodeVersion=Tt,t.QRCodeWriter=we,t.RGBLuminanceSource=Wt,t.RSS14Reader=Vt,t.RSSExpandedReader=Ve,t.ReaderException=qa,t.ReedSolomonDecoder=cn,t.ReedSolomonEncoder=Ps,t.ReedSolomonException=_t,t.Result=se,t.ResultMetadataType=rt,t.ResultPoint=ve,t.StringUtils=J,t.UnsupportedOperationException=te,t.VideoInputDevice=he,t.WhiteRectangleDetector=At,t.WriterException=hn,t.ZXingArrays=ce,t.ZXingCharset=mr,t.ZXingInteger=ie,t.ZXingStandardCharsets=An,t.ZXingStringBuilder=Y,t.ZXingStringEncoding=K,t.ZXingSystem=M,t.createAbstractExpandedDecoder=tt,Object.defineProperty(t,"__esModule",{value:!0})}))})(Df,Df.exports)),Df.exports}var cr=DP();const MP=mp(cr),LP=cC({__proto__:null,default:MP},[cr]);var yw=(function(){function n(e,t,r){if(this.formatMap=new Map([[wt.QR_CODE,cr.BarcodeFormat.QR_CODE],[wt.AZTEC,cr.BarcodeFormat.AZTEC],[wt.CODABAR,cr.BarcodeFormat.CODABAR],[wt.CODE_39,cr.BarcodeFormat.CODE_39],[wt.CODE_93,cr.BarcodeFormat.CODE_93],[wt.CODE_128,cr.BarcodeFormat.CODE_128],[wt.DATA_MATRIX,cr.BarcodeFormat.DATA_MATRIX],[wt.MAXICODE,cr.BarcodeFormat.MAXICODE],[wt.ITF,cr.BarcodeFormat.ITF],[wt.EAN_13,cr.BarcodeFormat.EAN_13],[wt.EAN_8,cr.BarcodeFormat.EAN_8],[wt.PDF_417,cr.BarcodeFormat.PDF_417],[wt.RSS_14,cr.BarcodeFormat.RSS_14],[wt.RSS_EXPANDED,cr.BarcodeFormat.RSS_EXPANDED],[wt.UPC_A,cr.BarcodeFormat.UPC_A],[wt.UPC_E,cr.BarcodeFormat.UPC_E],[wt.UPC_EAN_EXTENSION,cr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!LP)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var a=this.createZXingFormats(e),c=new Map;c.set(cr.DecodeHintType.POSSIBLE_FORMATS,a),c.set(cr.DecodeHintType.TRY_HARDER,!1),this.hints=c}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,a){try{r(t.decode(e))}catch(c){a(c)}})},n.prototype.decode=function(e){var t=new cr.MultiFormatReader(this.verbose,this.hints),r=new cr.HTMLCanvasElementLuminanceSource(e),a=new cr.BinaryBitmap(new cr.HybridBinarizer(r)),c=t.decode(a);return{text:c.text,format:V4.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,a){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,a=e;r<a.length;r++){var c=a[r];this.formatMap.has(c)?t.push(this.formatMap.get(c)):this.logger.logError("".concat(c," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n})(),kP=function(n,e,t,r){function a(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function x(T){try{_(r.next(T))}catch(C){h(C)}}function v(T){try{_(r.throw(T))}catch(C){h(C)}}function _(T){T.done?c(T.value):a(T.value).then(x,v)}_((r=r.apply(n,e||[])).next())})},PP=function(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(_){return function(T){return v([_,T])}}function v(_){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(t=0)),t;)try{if(r=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,a=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(T){_=[6,T],a=0}finally{r=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},Ew=(function(){function n(e,t,r){if(this.formatMap=new Map([[wt.QR_CODE,"qr_code"],[wt.AZTEC,"aztec"],[wt.CODABAR,"codabar"],[wt.CODE_39,"code_39"],[wt.CODE_93,"code_93"],[wt.CODE_128,"code_128"],[wt.DATA_MATRIX,"data_matrix"],[wt.ITF,"itf"],[wt.EAN_13,"ean_13"],[wt.EAN_8,"ean_8"],[wt.PDF_417,"pdf417"],[wt.UPC_A,"upc_a"],[wt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return kP(this,void 0,void 0,function(){var t,r;return PP(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=a.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:V4.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,a=0,c=e;a<c.length;a++){var h=c[a],x=h.boundingBox.width*h.boundingBox.height;x>r&&(r=x,t=h)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,a=e;r<a.length;r++){var c=a[r];this.formatMap.has(c)?t.push(this.formatMap.get(c)):this.logger.warn("".concat(c," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,a){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n})(),vw=function(n,e,t,r){function a(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function x(T){try{_(r.next(T))}catch(C){h(C)}}function v(T){try{_(r.throw(T))}catch(C){h(C)}}function _(T){T.done?c(T.value):a(T.value).then(x,v)}_((r=r.apply(n,e||[])).next())})},ww=function(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(_){return function(T){return v([_,T])}}function v(_){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(t=0)),t;)try{if(r=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,a=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(T){_=[6,T],a=0}finally{r=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},FP=(function(){function n(e,t,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&Ew.isSupported()?(this.primaryDecoder=new Ew(e,r,a),this.secondaryDecoder=new yw(e,r,a)):this.primaryDecoder=new yw(e,r,a)}return n.prototype.decodeAsync=function(e){return vw(this,void 0,void 0,function(){var t;return ww(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return vw(this,void 0,void 0,function(){var t,r;return ww(this,function(a){switch(a.label){case 0:t=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(r=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var a=r[t];e+=a}var c=e/this.executionResults.length;console.log("".concat(c," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n})(),F2=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),G1=function(n,e,t,r){function a(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function x(T){try{_(r.next(T))}catch(C){h(C)}}function v(T){try{_(r.throw(T))}catch(C){h(C)}}function _(T){T.done?c(T.value):a(T.value).then(x,v)}_((r=r.apply(n,e||[])).next())})},W1=function(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(_){return function(T){return v([_,T])}}function v(_){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(t=0)),t;)try{if(r=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,a=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(T){_=[6,T],a=0}finally{r=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},j4=(function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n})(),BP=(function(n){F2(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var a={advanced:[r]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(j4),UP=(function(n){F2(e,n);function e(t){return n.call(this,"zoom",t)||this}return e})(BP),VP=(function(n){F2(e,n);function e(t){return n.call(this,"torch",t)||this}return e})(j4),HP=(function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new UP(this.track)},n.prototype.torchFeature=function(){return new VP(this.track)},n})(),jP=(function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,a),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,a){return G1(this,void 0,void 0,function(){var c,h;return W1(this,function(x){switch(x.label){case 0:return c=new n(e,t,a),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,c.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:x.sent(),x.label=2;case 2:return c.setupSurface(),[2,c]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return G1(this,void 0,void 0,function(){return W1(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var a=e.mediaStream.getVideoTracks(),c=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++h,h>=c&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new HP(this.getFirstTrackOrFail())},n})(),zP=(function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return G1(this,void 0,void 0,function(){return W1(this,function(a){return[2,jP.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return G1(this,void 0,void 0,function(){var t,r;return W1(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=a.sent(),[2,new n(r)]}})})},n})(),Aw=function(n,e,t,r){function a(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function x(T){try{_(r.next(T))}catch(C){h(C)}}function v(T){try{_(r.throw(T))}catch(C){h(C)}}function _(T){T.done?c(T.value):a(T.value).then(x,v)}_((r=r.apply(n,e||[])).next())})},Tw=function(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(_){return function(T){return v([_,T])}}function v(_){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(t=0)),t;)try{if(r=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,a=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(T){_=[6,T],a=0}finally{r=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},GP=(function(){function n(){}return n.failIfNotSupported=function(){return Aw(this,void 0,void 0,function(){return Tw(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return Aw(this,void 0,void 0,function(){return Tw(this,function(t){return[2,zP.create(e)]})})},n})(),WP=function(n,e,t,r){function a(c){return c instanceof t?c:new t(function(h){h(c)})}return new(t||(t=Promise))(function(c,h){function x(T){try{_(r.next(T))}catch(C){h(C)}}function v(T){try{_(r.throw(T))}catch(C){h(C)}}function _(T){T.done?c(T.value):a(T.value).then(x,v)}_((r=r.apply(n,e||[])).next())})},XP=function(n,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(_){return function(T){return v([_,T])}}function v(_){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,_[0]&&(t=0)),t;)try{if(r=1,a&&(c=_[0]&2?a.return:_[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,_[1])).done)return c;switch(a=0,c&&(_=[_[0]&2,c.value]),_[0]){case 0:case 1:c=_;break;case 4:return t.label++,{value:_[1],done:!1};case 5:t.label++,a=_[1],_=[0];continue;case 7:_=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(_[0]===6||_[0]===2)){t=0;continue}if(_[0]===3&&(!c||_[1]>c[0]&&_[1]<c[3])){t.label=_[1];break}if(_[0]===6&&t.label<c[1]){t.label=c[1],c=_;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(_);break}c[2]&&t.ops.pop(),t.trys.pop();continue}_=e.call(n,t)}catch(T){_=[6,T],a=0}finally{r=c=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},qP=(function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=uu.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=uu.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return WP(this,void 0,void 0,function(){var e,t,r,a,c,h,x;return XP(this,function(v){switch(v.label){case 0:return e=function(_){for(var T=_.getVideoTracks(),C=0,b=T;C<b.length;C++){var O=b[C];O.enabled=!1,O.stop(),_.removeTrack(O)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=v.sent(),a=[],c=0,h=r;c<h.length;c++)x=h[c],x.kind==="videoinput"&&a.push({id:x.deviceId,label:x.label});return e(t),[2,a]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(c){for(var h=[],x=0,v=c;x<v.length;x++){var _=v[x];_.kind==="video"&&h.push({id:_.id,label:_.label})}e(h)},a=MediaStreamTrack;a.getSources(r)})},n})(),Cr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(Cr||(Cr={}));var YP=(function(){function n(){this.state=Cr.NOT_STARTED,this.onGoingTransactionNewState=Cr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===Cr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Cr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===Cr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Cr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Cr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case Cr.UNKNOWN:throw"Transition from unknown is not allowed";case Cr.NOT_STARTED:this.failIfNewStateIs(e,[Cr.PAUSED]);break;case Cr.SCANNING:break;case Cr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,a=t;r<a.length;r++){var c=a[r];if(e===c)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n})(),KP=(function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===Cr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==Cr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Cr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===Cr.PAUSED},n})(),QP=(function(){function n(){}return n.create=function(){return new KP(new YP)},n})(),ZP=(function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}})(),Ts=(function(n){ZP(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(bP),JP=(function(){function n(e,t){this.logger=t,this.fps=Ts.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ts.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?H4.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!mo(this.qrbox)},n.create=function(e,t){return new n(e,t)},n})(),$P=(function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new NP(this.verbose),this.qrcode=new FP(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=QP.create()}return n.prototype.start=function(e,t,r,a){var c=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var x=JP.create(t,this.logger);this.clearElement();var v=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var _=v,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:Ts.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var C=this,b=this.stateManagerProxy.startTransition(Cr.SCANNING);return new Promise(function(O,U){var M=_?x.videoConstraints:C.createVideoConstraints(e);if(!M){b.cancel(),U("videoConstraints should be defined");return}var V={};(!_||x.aspectRatio)&&(V.aspectRatio=x.aspectRatio);var le={onRenderSurfaceReady:function(ce,ie){C.setupUi(ce,ie,x),C.isScanning=!0,C.foreverScan(x,r,h)}};GP.failIfNotSupported().then(function(ce){ce.create(M).then(function(ie){return ie.render(c.element,V,le).then(function(me){C.renderedCamera=me,b.execute(),O(null)}).catch(function(me){b.cancel(),U(me)})}).catch(function(ie){b.cancel(),U(uu.errorGettingUserMedia(ie))})}).catch(function(ce){b.cancel(),U(uu.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Cr.PAUSED),this.showPausedState(),(mo(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Cr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Cr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var c=document.getElementById(Ts.SHADED_REGION_ELEMENT_ID);c&&e.element.removeChild(c)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),r(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),t.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(mo(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var x=h.width,v=h.height,_=document.getElementById(r.elementId),T=_.clientWidth?_.clientWidth:Ts.DEFAULT_WIDTH,C=Math.max(_.clientHeight?_.clientHeight:v,Ts.FILE_SCAN_MIN_HEIGHT),b=r.computeCanvasDrawConfig(x,v,T,C);if(t){var O=r.createCanvasElement(T,C,"qr-canvas-visible");O.style.display="inline-block",_.appendChild(O);var U=O.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=T,U.canvas.height=C,U.drawImage(h,0,0,x,v,b.x,b.y,b.width,b.height)}var M=Ts.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(h.width,b.width),le=Math.max(h.height,b.height),ce=V+2*M,ie=le+2*M,me=r.createCanvasElement(ce,ie);_.appendChild(me);var Ue=me.getContext("2d");if(!Ue)throw"Unable to get 2d context from canvas";Ue.canvas.width=ce,Ue.canvas.height=ie,Ue.drawImage(h,0,0,x,v,M,M,V,le);try{r.qrcode.decodeRobustlyAsync(me).then(function(De){a(xw.createFromQrcodeResult(De))}).catch(c)}catch(De){c("QR code parse error, error = ".concat(De))}},h.onerror=c,h.onabort=c,h.onstalled=c,h.onsuspend=c,h.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return qP.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!H4.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[wt.QR_CODE,wt.AZTEC,wt.CODABAR,wt.CODE_39,wt.CODE_93,wt.CODE_128,wt.DATA_MATRIX,wt.MAXICODE,wt.ITF,wt.EAN_13,wt.EAN_8,wt.PDF_417,wt.RSS_14,wt.RSS_EXPANDED,wt.UPC_A,wt.UPC_E,wt.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,c=e.formatsToSupport;a<c.length;a++){var h=c[a];IP(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(mo(e))return!0;if(!mo(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(mo(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return mo(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var a=this,c=r.qrbox;this.validateQrboxConfig(c);var h=this.toQrdimensions(e,t,c),x=function(_){if(_<Ts.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ts.MIN_QR_BOX_SIZE,"px.")},v=function(_){return _>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),_=e),_};x(h.width),x(h.height),h.width=v(h.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var a=mo(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(e,t,a);c.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&c.height<=t,x={x:0,y:0,width:e,height:t},v=h?this.getShadedRegionBounds(e,t,c):x,_=this.createCanvasElement(v.width,v.height),T={willReadFrequently:!0},C=_.getContext("2d",T);C.canvas.width=v.width,C.canvas.height=v.height,this.element.append(_),h&&this.possiblyInsertShadingElement(this.element,e,t,c),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=C,this.canvasElement=_},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=uu.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,xw.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var c=uu.codeParseError(a);return t(c,RP.createFrom(c)),!1})},n.prototype.foreverScan=function(e,t,r){var a=this;if(this.shouldScan&&this.renderedCamera){var c=this.renderedCamera.getSurface(),h=c.videoWidth/c.clientWidth,x=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*h,_=this.qrRegion.height*x,T=this.qrRegion.x*h,C=this.qrRegion.y*x;this.context.drawImage(c,T,C,v,_,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,t,r)},a.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(O){!O&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(t,r).finally(function(){b()})):b()}).catch(function(O){a.logger.logError("Error happend while scanning context",O),b()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",a={user:!0,environment:!0},c="exact",h=function(U){if(U in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var v=Object.keys(e)[0];if(v!==t&&v!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(v===t){var _=e.facingMode;if(typeof _=="string"){if(h(_))return{facingMode:_}}else if(typeof _=="object")if(c in _){if(h(_["".concat(c)]))return{facingMode:{exact:_["".concat(c)]}}}else throw"'facingMode' should be string or object with"+" ".concat(c," as key.");else{var T=typeof _;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(c in C)return{deviceId:{exact:C["".concat(c)]}};throw"'deviceId' should be string or object with"+" ".concat(c," as key.")}else{var b=typeof C;throw"Invalid type of 'deviceId' = ".concat(b)}}}var O=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(O)},n.prototype.computeCanvasDrawConfig=function(e,t,r,a){if(e<=r&&t<=a){var c=(r-e)/2,h=(a-t)/2;return{x:c,y:h,width:e,height:t}}else{var x=e,v=t;return e>r&&(t=r/e*t,e=r),t>a&&(e=a/t*e,t=a),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(v)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,a)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Ts.BORDER_SHADER_MATCH_COLOR:Ts.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var a=e,c=t,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(c,"px"),h.style.display="none",h.id=mo(r)?"qr-canvas":r,h},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,a){if(!(t-a.width<1||r-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var h=(t-a.width)/2,x=(r-a.height)/2;if(c.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),c.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id="".concat(Ts.SHADED_REGION_ELEMENT_ID),t-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var v=5,_=40;this.insertShaderBorders(c,_,v,-v,null,0,!0),this.insertShaderBorders(c,_,v,-v,null,0,!1),this.insertShaderBorders(c,_,v,null,-v,0,!0),this.insertShaderBorders(c,_,v,null,-v,0,!1),this.insertShaderBorders(c,v,_+v,-v,null,-v,!0),this.insertShaderBorders(c,v,_+v,null,-v,-v,!0),this.insertShaderBorders(c,v,_+v,-v,null,-v,!1),this.insertShaderBorders(c,v,_+v,null,-v,-v,!1),this.hasBorderShaders=!0}e.append(c)}},n.prototype.insertShaderBorders=function(e,t,r,a,c,h,x){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Ts.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(t,"px"),v.style.height="".concat(r,"px"),a!==null&&(v.style.top="".concat(a,"px")),c!==null&&(v.style.bottom="".concat(c,"px")),x?v.style.left="".concat(h,"px"):v.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),e.appendChild(v)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n})(),Sw;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Sw||(Sw={}));class eF extends bw.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Scanner error boundary caught:",e,t)}render(){return this.state.hasError?z.jsxs("div",{className:"text-red-700 bg-red-100 p-2 rounded",children:["Scanner error: ",String(this.state.error)]}):this.props.children}}const tF=n=>!["IndexSizeError","NotFoundException","NotAllowedError","NotReadableError","OverconstrainedError","StreamApiNotSupportedError","Invalid-State","parse error","QR code parse error","found no usable camera","unable to query supported devices"].some(t=>n.includes(t)),z4=({onScan:n,onError:e,onClose:t})=>{const r=mt.useRef(null),[a,c]=mt.useState(null),[h,x]=mt.useState(!0),v=mt.useRef(!1),_=mt.useRef({onScan:n,onError:e,onClose:t});_.current={onScan:n,onError:e,onClose:t};const T=mt.useRef(()=>{}),C="barcode-scanner-inline";return mt.useEffect(()=>{const b=document.getElementById(C);if(!b){console.error("Scanner container element not found."),x(!1);return}let O=!1;return(async()=>{var M,V;try{r.current||(r.current=new $P(C));const le=r.current;if(le.isScanning){x(!1);return}const ce={facingMode:"environment"};await le.start(ce,{fps:10,qrbox:(me,Ue)=>{const De=Math.min(me,Ue);return{width:De*.85,height:De*.85}},aspectRatio:1},(me,Ue)=>{!v.current&&!O&&(v.current=!0,"vibrate"in navigator&&navigator.vibrate(200),_.current.onScan(me))},me=>{var De,k;if(O)return;const Ue=me||"An unknown error occurred.";tF(Ue)&&((k=(De=_.current).onError)==null||k.call(De,Ue))}),x(!1);const ie=b.querySelector("video");if(ie){ie.setAttribute("playsinline","true"),ie.setAttribute("webkit-playsinline","true"),ie.setAttribute("x5-playsinline","true"),ie.setAttribute("autoplay","true"),ie.setAttribute("muted","true"),ie.setAttribute("readonly","true"),ie.style.pointerEvents="none",ie.style.width="100%",ie.style.height="100%",ie.style.objectFit="cover",ie.style.position="absolute",ie.style.top="0",ie.style.left="0",ie.style.transform="translateZ(0)",ie.style.webkitTransform="translateZ(0)",b.removeAttribute("tabindex"),b.style.outline="none",b.style.webkitTapHighlightColor="transparent";const me=k=>{k.preventDefault()};b.addEventListener("touchstart",me,{passive:!1});let Ue=0;const De=k=>{const H=new Date().getTime(),P=H-Ue;P<500&&P>0&&k.preventDefault(),Ue=H};b.addEventListener("touchend",De,{passive:!1}),T.current=()=>{b.removeEventListener("touchstart",me),b.removeEventListener("touchend",De)}}}catch(le){if(O)return;x(!1);let ce=`Failed to start scanner: ${String(le)}`;String(le).includes("NotAllowedError")?ce="Camera permission denied. Please enable camera access in your device settings.":String(le).includes("NotReadableError")?ce="Camera is in use by another app. Please close other camera apps and try again.":String(le).includes("NotFoundError")&&(ce="No camera found on this device."),c(ce),(V=(M=_.current).onError)==null||V.call(M,ce)}})(),()=>{O=!0,v.current=!1,T.current();const M=r.current;M&&M.isScanning&&M.stop().then(()=>{r.current=null}).catch(V=>{console.error("Failed to stop scanner:",V)})}},[]),z.jsx(eF,{children:z.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:z.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg flex flex-col items-center max-w-sm w-full mx-4",children:[z.jsx("div",{id:C,style:{width:"100%",maxWidth:320,height:320,overflow:"hidden",position:"relative",borderRadius:"8px",backgroundColor:"#000",WebkitTransform:"translateZ(0)",transform:"translateZ(0)"}}),h&&z.jsx("div",{className:"mt-2 text-sm text-gray-600",children:"Initializing camera..."}),a&&z.jsx("div",{className:"mt-2 text-sm text-red-600 text-center",children:a}),!a&&!h&&z.jsx("div",{className:"mt-2 text-sm text-gray-600 text-center",children:"Position the barcode in the center"}),z.jsx("button",{type:"button",className:"mt-4 px-6 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 active:bg-gray-400 text-sm font-medium transition-colors",onClick:_.current.onClose,children:"Close Scanner"})]})})})},nF=({db:n,user:e,onClear:t,inventory:r,deletedInventory:a=[],onDuplicate:c})=>{const[h,x]=mt.useState(""),[v,_]=mt.useState(1),[T,C]=mt.useState(vo),[b,O]=mt.useState(""),[U,M]=mt.useState(""),[V,le]=mt.useState(""),[ce,ie]=mt.useState(""),[me,Ue]=mt.useState(Na[1]),[De,k]=mt.useState([]),[H,P]=mt.useState([]),[te,K]=mt.useState(!1),[J,Y]=mt.useState(()=>{try{const Ke=localStorage.getItem(gw);return Ke&&as.find(he=>he.name===Ke)&&Ke!==as[0].name?Ke:as[1].name}catch{return as[1].name}}),[dt,ye]=mt.useState(""),[Se,Pe]=mt.useState("");mt.useEffect(()=>{const Ke=setTimeout(()=>{ye(h)},200);return()=>{clearTimeout(Ke)}},[h]),mt.useEffect(()=>{const Ke=setTimeout(()=>{Pe(U)},400);return()=>{clearTimeout(Ke)}},[U]),mt.useEffect(()=>{if(dt.length<2){k([]),P([]);return}const Ke=[...r.map(se=>se.name),...a.map(se=>se.name)],q=[...new Set(Ke)].filter(se=>se.toLowerCase().includes(dt.toLowerCase())).sort((se,fe)=>se.localeCompare(fe));k(q);const ue=r.filter(se=>se.name===dt&&se.lotNumber).map(se=>se.lotNumber).filter((se,fe,pe)=>se&&pe.indexOf(se)===fe);P(ue)},[dt,r,a]),mt.useEffect(()=>{const Ke=Se.trim();if(Ke.length<3)return;const he=r.find(q=>q.lotNumber&&q.lotNumber.trim().toLowerCase()===Ke.toLowerCase());he&&(x(he.name||""),ie(he.code||""),le(he.packagingType||""),Ue(he.temperature||Na[1]),Y(he.section||as[1].name),C(he.minStock||vo),O(he.expiryDate?s1(he.expiryDate):""),t(`Details for Lot # ${Ke} recalled successfully!`,!1))},[Se,r]);const gt=async Ke=>{if(Ke.preventDefault(),!h||Number(v)<=0)return;const he=h.trim(),q=U.trim();let ue,se=!1;if(q&&(ue=r.find(pe=>pe.lotNumber&&pe.lotNumber.trim().toLowerCase()===q.toLowerCase()),ue&&(se=!0)),ue||(ue=r.find(pe=>pe.name.trim().toLowerCase()===he.toLowerCase()&&!pe.lotNumber),se=!1),ue){c(ue,se);return}const fe=i3(n);try{const pe={uid:e.uid,name:e.displayName||e.email,isAnonymous:e.isAnonymous};await r3(fe,{name:he,quantity:Number(v),minStock:Number(T),expiryDate:b?bn.fromDate(new Date(b)):null,lotNumber:q,packagingType:V.trim(),code:ce.trim(),temperature:me,section:J,createdAt:bn.now(),updatedAt:bn.now(),createdBy:pe,updatedBy:pe,lowStockNotified:!1,expiryWarningNotified:!1}),localStorage.setItem(gw,J),x(""),_(1),C(vo),O(""),M(""),le(""),ie(""),Ue(Na[1]),k([]),t("Item added successfully!",!1)}catch(pe){console.error("Error adding document: ",pe),t("Failed to add item.",!0)}},yt=typeof window<"u"&&/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent);return z.jsxs("div",{className:"lg:p-4 lg:bg-white lg:shadow-xl lg:rounded-xl",children:[z.jsx("h2",{className:"text-2xl font-bold text-indigo-700 mb-4 border-b pb-2 hidden lg:block",children:"Add New Inventory Item"}),z.jsxs("form",{onSubmit:gt,className:"space-y-4",children:[z.jsxs("div",{className:"block relative sm:col-span-2",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Item Name *"}),z.jsx("input",{type:"text",required:!0,value:h,onChange:Ke=>x(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., WBC Lyse",list:"name-suggestions"}),De.length>0&&z.jsx("datalist",{id:"name-suggestions",children:De.map(Ke=>z.jsx("option",{value:Ke},Ke))})]}),z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity *"}),z.jsx("input",{type:"number",required:!0,min:"1",value:v,onChange:Ke=>_(Number(Ke.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Min Stock"}),z.jsx("input",{type:"number",min:"0",value:T,onChange:Ke=>C(Number(Ke.target.value)),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]})]}),z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lot #"}),z.jsxs("div",{className:"flex gap-2 items-center",children:[z.jsx("input",{type:"text",value:U,onChange:Ke=>{let he=Ke.target.value;he.startsWith("barcode:")&&(he=he.replace(/^barcode:/i,"")),M(he)},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border",placeholder:"e.g., L1002A",list:"lot-suggestions"}),yt&&z.jsx("button",{type:"button",className:"mt-1 px-3 py-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200 text-xs font-semibold border border-indigo-200",onClick:()=>K(Ke=>!Ke),children:te?"Hide Scanner":"Scan Barcode"})]}),H.length>0&&z.jsx("datalist",{id:"lot-suggestions",children:H.map(Ke=>z.jsx("option",{value:Ke},Ke))}),te&&z.jsx("div",{className:"mt-2",children:z.jsx(z4,{onScan:Ke=>{M(Ke),K(!1)},onClose:()=>K(!1)})})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Expiry Date"}),z.jsx("input",{type:"date",value:b,onChange:Ke=>O(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Code #"}),z.jsx("input",{type:"text",value:ce,onChange:Ke=>ie(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border",placeholder:"e.g., SKU12345"})]}),z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lab Section *"}),z.jsx("select",{required:!0,value:J,onChange:Ke=>Y(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:as.slice(1).map(Ke=>z.jsx("option",{value:Ke.name,children:Ke.name},Ke.name))})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Storage Temperature"}),z.jsx("select",{value:me,onChange:Ke=>Ue(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:Na.slice(1).map(Ke=>z.jsx("option",{value:Ke,children:Ke},Ke))})]})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Packaging Type"}),z.jsx("input",{type:"text",value:V,onChange:Ke=>le(Ke.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border",placeholder:"e.g., Box, Vial, Pouch",list:"packaging-type-suggestions"}),z.jsxs("datalist",{id:"packaging-type-suggestions",children:[z.jsx("option",{value:"BOTTLE"}),z.jsx("option",{value:"KIT"}),z.jsx("option",{value:"BOX"}),z.jsx("option",{value:"CARTRIDGE"}),z.jsx("option",{value:"STRIPS"}),z.jsx("option",{value:"set"}),z.jsx("option",{value:"VIAL"}),z.jsx("option",{value:"TRAY"}),z.jsx("option",{value:"PC/S"}),z.jsx("option",{value:"BAG"}),z.jsx("option",{value:"TUBES"}),z.jsx("option",{value:"CONTAINER"}),z.jsx("option",{value:"BACKET"}),z.jsx("option",{value:"PACKET"}),z.jsx("option",{value:"BOOK"})]})]}),z.jsx("button",{type:"submit",className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Add Item"})]})]})},Yh=({title:n,value:e,colorClass:t,icon:r})=>z.jsxs("div",{className:`p-5 rounded-xl shadow-lg flex items-center justify-between ${t}`,children:[z.jsxs("div",{children:[z.jsx("p",{className:"text-sm font-medium text-white opacity-80",children:n}),z.jsx("p",{className:"text-3xl font-extrabold text-white",children:e})]}),z.jsx("div",{className:"text-white opacity-70",children:r})]}),rF=({metrics:n})=>z.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[z.jsx(Yh,{title:"Unique Items",value:n.totalItems,colorClass:"bg-indigo-600",icon:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10l3-2 3 2 3-2 3 2 3-2V7M3 17h18"})})}),z.jsx(Yh,{title:"Total Quantity",value:n.totalQuantity,colorClass:"bg-blue-600",icon:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),z.jsx(Yh,{title:"Low Stock Alerts",value:n.lowStockCount,colorClass:"bg-orange-500",icon:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.332 16c-.77 1.333.192 3 1.732 3z"})})}),z.jsx(Yh,{title:"Expiring/Expired",value:n.expiringItemsCount,colorClass:"bg-red-600",icon:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-2 4h-4m-6 4v8a2 2 0 002 2h8a2 2 0 002-2v-8m-12 0h12"})})})]}),G4=({item:n,db:e,user:t,onEdit:r,onMessage:a,onConsumeClick:c,onLogView:h,onDelete:x})=>{const v=async me=>{const Ue=dd(e,n.id),De=n.quantity+me,k={quantity:De,updatedAt:bn.now(),updatedBy:{uid:t.uid,name:t.displayName||t.email,isAnonymous:t.isAnonymous}};n.lowStockNotified&&(k.lowStockNotified=!1);try{await m2(Ue,k),await t0(e,n.id,t,"QUANTITY_ADJUST",{itemName:n.name,itemLot:n.lotNumber,change:me,newQuantity:De}),a(`Quantity of ${n.name} increased by ${me}.`,!1)}catch(H){console.error("Error updating quantity: ",H),a("Failed to update quantity.",!0)}},_=n.expiryDate&&n.expiryDate.toDate()<new Date,T=n.expiryDate&&n.expiryDate.toDate()<new Date(Date.now()+10080*60*1e3)&&!_,C=n.minStock??vo,b=n.quantity<=C,O=n.quantity===0;let U="border-gray-200",M="",V="";_?(U="border-red-500",M="EXPIRED",V="bg-red-500"):O?(U="border-red-700",M="OUT OF STOCK",V="bg-red-700"):T?(U="border-yellow-500",M="EXPIRING SOON",V="bg-yellow-500"):b&&(U="border-orange-500",M="LOW STOCK",V="bg-orange-500");let le="text-indigo-600";O?le="text-red-700":b&&(le="text-orange-500");const ce=n.updatedBy||n.createdBy,ie=n.createdBy;return z.jsxs("div",{className:`relative bg-white p-4 shadow-lg rounded-xl flex flex-col space-y-2 transform hover:scale-[1.01] transition duration-200 border-2 ${U}`,children:[M&&z.jsx("div",{className:`absolute top-0 right-0 px-3 py-1 text-xs font-bold text-white rounded-bl-lg ${V} rounded-tr-xl`,children:M}),z.jsxs("div",{className:"flex justify-between items-start pt-2",children:[z.jsx("h4",{className:"text-lg font-bold text-gray-800 pr-20",children:n.name}),z.jsxs("div",{className:"flex space-x-2 absolute top-7 right-4",children:[z.jsx("button",{onClick:()=>h(n),className:"p-2 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200",title:"View Consumption Log",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2m-9 0V3h4v2m-4 8h4m-4 4h7"})})}),z.jsx("button",{onClick:()=>r(n),className:"p-2 bg-indigo-100 text-indigo-700 rounded-full hover:bg-indigo-200",title:"Edit Item",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.232z"})})}),z.jsx("button",{onClick:()=>x(n),className:"p-2 bg-red-100 text-red-700 rounded-full hover:bg-red-200",title:"Remove Item",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),z.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[z.jsxs("p",{children:[z.jsx("span",{className:"font-semibold",children:"Code #:"})," ",n.code||"N/A"]}),z.jsxs("p",{children:[z.jsx("span",{className:"font-semibold",children:"Lot #:"})," ",n.lotNumber||"N/A"]}),z.jsxs("p",{children:[z.jsx("span",{className:"font-semibold",children:"Min Stock:"})," ",C]}),z.jsxs("p",{className:"flex items-center",children:[z.jsx("span",{className:"font-semibold mr-1",children:"Section:"}),z.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${CP(n.section)}`,children:n.section||"N/A"})]}),z.jsxs("p",{className:`font-semibold ${_?"text-red-500":T?"text-yellow-500":"text-gray-700"}`,children:[z.jsx("span",{className:"font-semibold",children:"Expires:"})," ",Wf(n.expiryDate)]})]}),z.jsxs("div",{className:"text-xs text-gray-400 border-t pt-2 mt-auto",children:[z.jsxs("p",{children:[z.jsx("span",{className:"font-semibold text-gray-600",children:"Last Mod:"})," ",Wf(n.updatedAt)," by",z.jsx("span",{className:"font-medium text-indigo-500 ml-1",children:j1(ce)})]}),z.jsxs("p",{children:[z.jsx("span",{className:"font-semibold text-gray-600",children:"Created:"})," ",Wf(n.createdAt)," by",z.jsx("span",{className:"font-medium text-indigo-500 ml-1",children:j1(ie)})]})]}),z.jsxs("div",{className:"flex items-center justify-between pt-2 border-t mt-2",children:[z.jsx("p",{className:"text-base font-semibold text-gray-900",children:"In Stock:"}),z.jsxs("div",{className:"flex items-center space-x-2",children:[z.jsx("button",{onClick:()=>c(n),disabled:O,className:"p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 disabled:opacity-50",title:"Log Usage/Consumption",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),z.jsx("span",{className:`text-2xl font-extrabold w-12 text-center ${le}`,children:n.quantity}),z.jsx("button",{onClick:()=>v(1),className:"p-1.5 bg-green-500 text-white rounded-full hover:bg-green-600",title:"Increase Quantity (Quick Receive)",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]})]})},iF=({db:n,item:e,onClose:t,user:r,onMessage:a})=>{const[c,h]=mt.useState({name:e.name||"",quantity:e.quantity||0,minStock:e.minStock??vo,expiryDate:e.expiryDate?s1(e.expiryDate):"",lotNumber:e.lotNumber||"",packagingType:e.packagingType||"",code:e.code||"",temperature:e.temperature||Na[1],section:e.section||as[1].name}),[x,v]=mt.useState(!1),_=U=>{const{name:M,value:V}=U.target;h(le=>({...le,[M]:V}))},T=mt.useMemo(()=>{const U={},M=c.name.trim(),V=Number(c.quantity),le=Number(c.minStock);return e.name!==M&&(U.name={old:e.name,new:M}),e.quantity!==V&&(U.quantity={old:e.quantity,new:V}),(e.minStock??vo)!==le&&(U.minStock={old:e.minStock??vo,new:le}),(e.expiryDate?s1(e.expiryDate):"")!==c.expiryDate&&(U.expiryDate={old:e.expiryDate?s1(e.expiryDate):"N/A",new:c.expiryDate||"N/A"}),e.lotNumber!==c.lotNumber&&(U.lotNumber={old:e.lotNumber,new:c.lotNumber}),e.code!==c.code&&(U.code={old:e.code,new:c.code}),e.temperature!==c.temperature&&(U.temperature={old:e.temperature,new:c.temperature}),e.section!==c.section&&(U.section={old:e.section,new:c.section}),e.packagingType!==c.packagingType&&(U.packagingType={old:e.packagingType,new:c.packagingType}),U},[c,e]),C=Object.keys(T).length>0,b=U=>{if(U.preventDefault(),!c.name.trim()||Number(c.quantity)<0){a("Item Name and a valid Quantity are required.",!0);return}C?v(!0):(a("No changes were made."),t())},O=async()=>{try{const U=dd(n,e.id);await m2(U,{...c,name:c.name.trim(),quantity:Number(c.quantity),minStock:Number(c.minStock),expiryDate:c.expiryDate?bn.fromDate(new Date(c.expiryDate)):null,updatedAt:bn.now(),updatedBy:{uid:r.uid,name:r.displayName||r.email,isAnonymous:r.isAnonymous}}),await t0(n,e.id,r,"EDIT",{changes:T}),t(),a(`Item "${e.name}" updated successfully!`)}catch(U){console.error("Error updating document: ",U),a("Failed to save changes.",!0)}};return z.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[z.jsxs("h3",{className:"text-xl font-bold text-indigo-700 mb-4 border-b pb-2",children:["Edit Item: ",e.name]}),z.jsxs("form",{onSubmit:b,className:"space-y-4",children:[z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Item Name *"}),z.jsx("input",{type:"text",name:"name",required:!0,value:c.name,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Code #"}),z.jsx("input",{type:"text",name:"code",value:c.code,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity *"}),z.jsx("input",{type:"number",name:"quantity",required:!0,min:"0",value:c.quantity,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Min Stock"}),z.jsx("input",{type:"number",name:"minStock",min:"0",value:c.minStock,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lot #"}),z.jsx("input",{type:"text",name:"lotNumber",value:c.lotNumber,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Expiry Date"}),z.jsx("input",{type:"date",name:"expiryDate",value:c.expiryDate,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border"})]})]}),z.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lab Section *"}),z.jsx("select",{name:"section",required:!0,value:c.section,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:as.slice(1).map(U=>z.jsx("option",{value:U.name,children:U.name},U.name))})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Storage Temperature"}),z.jsx("select",{name:"temperature",value:c.temperature,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:Na.slice(1).map(U=>z.jsx("option",{value:U,children:U},U))})]})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Packaging Type"}),z.jsx("input",{type:"text",name:"packagingType",value:c.packagingType,onChange:_,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border",placeholder:"e.g., Box, Vial, Pouch"})]}),z.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[z.jsx("button",{type:"button",onClick:t,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),z.jsx("button",{type:"submit",className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400",disabled:!C,children:"Save Changes"})]})]}),x&&z.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex justify-center items-center z-[60]",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-md",children:[z.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Confirm Changes"}),z.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:['You are about to save changes for "',e.name,'". Are you sure you want to proceed?']}),z.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[z.jsx("button",{type:"button",onClick:()=>v(!1),className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),z.jsx("button",{type:"button",onClick:O,className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Confirm & Save"})]})]})})]})})},sF=({item:n,onClose:e,onMessage:t,handleConsume:r})=>{const[a,c]=mt.useState(1),[h,x]=mt.useState(""),v=n.quantity,_=async T=>{T.preventDefault();const C=Number(a);if(C<=0||C>v){t(`Quantity must be between 1 and ${v}.`,!0);return}const b={consumedQuantity:C,reason:h.trim()||"N/A"};try{await r(n,C,b),e()}catch(O){console.error("Error logging consumption: ",O),t(O.message||"Failed to log consumption.",!0)}};return z.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-md",children:[z.jsx("h3",{className:"text-xl font-bold text-red-700 mb-4 border-b pb-2",children:"Log Item Consumption"}),z.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Logging usage for: ",z.jsx("span",{className:"font-semibold",children:n.name})," (Stock: ",n.quantity,")"]}),z.jsxs("form",{onSubmit:_,className:"space-y-4",children:[z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quantity Consumed *"}),z.jsx("input",{type:"number",required:!0,min:"1",max:v,value:a,onChange:T=>c(Number(T.target.value)),className:"mt-1 block w-full rounded-md border-red-300 shadow-sm p-2 border focus:border-red-500 focus:ring-red-500"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Reason for Consumption"}),z.jsx("textarea",{rows:3,value:h,onChange:T=>x(T.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Used for 12 routine CBC panels."})]}),z.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[z.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),z.jsx("button",{type:"submit",className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700",children:"Log Consumption"})]})]})]})})},aF=({db:n,item:e,onClose:t,onMessage:r})=>{const[a,c]=mt.useState([]),[h,x]=mt.useState(!0),v=T=>T.replace(/([A-Z])/g," $1").replace(/^./,C=>C.toUpperCase()),_=T=>{switch(T.type){case"CONSUME":return z.jsxs(z.Fragment,{children:[z.jsxs("span",{className:"font-semibold text-red-700",children:["Consumed: ",T.details.consumedQuantity," unit(s). New stock: ",T.details.newQuantity,"."]}),z.jsxs("p",{className:"text-gray-700 mt-1 text-sm",children:[z.jsx("span",{className:"font-medium",children:"Reason:"})," ",T.details.reason||"No reason provided."]})]});case"EDIT":{const C=T.details.changes;return!C||Object.keys(C).length===0?z.jsx("span",{className:"font-semibold text-blue-600",children:"Item details edited."}):z.jsxs("div",{children:[z.jsx("span",{className:"font-semibold text-blue-600",children:"Item details edited:"}),z.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 mt-1",children:Object.entries(C).map(([b,O])=>z.jsxs("li",{children:[z.jsxs("span",{className:"font-medium",children:[v(b),":"]}),' "',O.old,'" ',z.jsx("span",{className:"font-sans-serif",children:""}),' "',O.new,'"']},b))})]})}case"QUANTITY_ADJUST":return z.jsxs("span",{className:"font-semibold text-green-700",children:["Recieved ",T.details.change," unit(s). New stock: ",T.details.newQuantity,"."]});case"DELETE":return z.jsx("span",{className:"font-semibold text-red-600",children:"Item moved to Deleted Items."});case"RESTORE":return z.jsx("span",{className:"font-semibold text-green-600",children:"Item restored from Deleted Items."});default:return z.jsxs("span",{className:"font-semibold text-gray-600",children:["Action: ",T.type]})}};return mt.useEffect(()=>{(async()=>{try{const C=s3(n,e.id),b=$T(C,bO("timestamp","desc"),RO(10)),U=(await DO(b)).docs.map(M=>({id:M.id,...M.data()}));c(U)}catch(C){console.error("Error fetching consumption log:",C),r("Failed to fetch consumption logs.",!0)}finally{x(!1)}})()},[n,e.id]),z.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"log-title",children:[z.jsxs("h3",{id:"log-title",className:"text-xl font-bold text-indigo-700 mb-4 border-b pb-2",children:["Activity Log for: ",e.name]}),z.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Lot: ",e.lotNumber||"N/A"," | Current Stock: ",e.quantity]}),h?z.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading log history..."}):a.length===0?z.jsx("div",{className:"text-center py-8 text-gray-500",children:"No activity records found for this item."}):z.jsx("div",{className:"space-y-3",children:a.map(T=>z.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[z.jsxs("div",{className:"flex justify-between items-start text-sm",children:[_(T),z.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:Wf(T.timestamp)})]}),z.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Logged by: ",z.jsx("span",{className:"font-medium text-indigo-500 ml-1",children:j1(T.user)})]})]},T.id))}),a.length>0&&z.jsx("p",{className:"text-xs text-gray-400 mt-4 italic",children:"Showing the latest 10 log entries."}),z.jsx("div",{className:"flex justify-end mt-6",children:z.jsx("button",{type:"button",onClick:t,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Close"})})]})})},Cw=({db:n,item:e,onClose:t,user:r,onMessage:a,isPermanentDelete:c=!1,onConfirmDelete:h})=>{const[x,v]=mt.useState(!1),_=async()=>{v(!0);try{if(c&&h){await h(e),t();return}const T=mu(n,"deleted_inventory",e.id);await n3(T,e);const C=dd(n,e.id);await t0(n,e.id,r,"DELETE",{itemName:e.name,itemLot:e.lotNumber}),await cp(C),a(`Item "${e.name}" moved to Deleted Items.`,!1),t()}catch(T){console.error("Error deleting document: ",T),a(`Failed to delete item "${e.name}".`,!0),v(!1)}};return z.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[z.jsx("h3",{className:"text-xl font-bold text-red-700 mb-4",children:c?"Permanently Delete Item":"Confirm Deletion"}),z.jsx("p",{className:"text-gray-700 mb-6",children:c?z.jsxs(z.Fragment,{children:["Are you sure you want to ",z.jsx("span",{className:"font-bold text-red-700",children:"permanently delete"})," item: ",z.jsx("strong",{className:"font-semibold",children:e.name})," (Lot: ",e.lotNumber||"N/A",")? This action ",z.jsx("span",{className:"font-bold",children:"cannot be undone"}),"."]}):z.jsxs(z.Fragment,{children:["Are you sure you want to delete item: ",z.jsx("strong",{className:"font-semibold",children:e.name})," (Lot: ",e.lotNumber||"N/A",")? This will move the item to Deleted Items."]})}),z.jsxs("div",{className:"flex justify-end space-x-3",children:[z.jsx("button",{type:"button",onClick:t,disabled:x,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),z.jsx("button",{type:"button",onClick:_,disabled:x,className:`py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${c?"bg-red-700 hover:bg-red-800":"bg-red-600 hover:bg-red-700"} disabled:opacity-50`,children:x?"Deleting...":c?"Permanently Delete":"Delete Item"})]})]})})},oF=({item:n,isLot:e,onClose:t,onEdit:r})=>z.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-50 p-4",children:z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[z.jsx("h3",{className:"text-xl font-bold text-yellow-700 mb-4",children:"Duplicate Item Warning"}),z.jsxs("p",{className:"text-gray-700 mb-6",children:["An item with this ",e?z.jsx("strong",{children:"Lot #"}):z.jsx("strong",{children:"Name"})," already exists:"]}),z.jsxs("div",{className:"p-3 bg-gray-50 rounded-md border border-gray-200 mb-6",children:[z.jsxs("p",{children:[z.jsx("strong",{children:"Name:"})," ",n.name]}),z.jsxs("p",{children:[z.jsx("strong",{children:"Lot #:"})," ",n.lotNumber||"N/A"]}),z.jsxs("p",{children:[z.jsx("strong",{children:"Current Stock:"})," ",n.quantity]})]}),z.jsx("p",{className:"text-gray-700 mb-6",children:"Would you like to edit this existing item instead of creating a new one?"}),z.jsxs("div",{className:"flex justify-end space-x-3",children:[z.jsx("button",{type:"button",onClick:t,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancel (Create New)"}),z.jsx("button",{type:"button",onClick:()=>{r(n),t()},className:"py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700",children:"Edit Existing Item"})]})]})}),lF=({item:n,onClose:e,...t})=>z.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-40 p-4",onClick:e,children:z.jsxs("div",{className:"relative w-full max-w-md",onClick:r=>r.stopPropagation(),children:[z.jsx("button",{onClick:e,className:"absolute -top-3 -right-3 bg-white rounded-full p-1.5 shadow-lg text-gray-600 hover:text-red-500 z-10","aria-label":"Close",children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),z.jsx(G4,{item:n,...t})]})}),cF=({user:n,db:e,onSignOut:t})=>{const r=async ve=>{try{const on=mu(e,"inventory",ve.id),Lt={...ve,lowStockNotified:!1,expiryWarningNotified:!1};await n3(on,Lt);const At=mu(e,"deleted_inventory",ve.id);await cp(At),await t0(e,ve.id,n,"RESTORE",{itemName:ve.name,itemLot:ve.lotNumber}),_t(`Item "${ve.name}" restored.`,!1)}catch(on){console.error("Restore error:",on),_t("Failed to restore item.",!0)}},a=async ve=>{try{const on=mu(e,"deleted_inventory",ve.id);await cp(on),_t(`Item "${ve.name}" permanently deleted.`,!1)}catch(on){console.error("Permanent delete error:",on),_t("Failed to permanently delete item.",!0)}},[c,h]=mt.useState([]),[x,v]=mt.useState([]),[_,T]=mt.useState(!0),[C,b]=mt.useState(!1),[O,U]=mt.useState(null),[M,V]=mt.useState(null),[le,ce]=mt.useState(null),[ie,me]=mt.useState(null),[Ue,De]=mt.useState(null),[k,H]=mt.useState(null),[P,te]=mt.useState(null),[K,J]=mt.useState(""),[Y,dt]=mt.useState(!1),[ye,Se]=mt.useState(""),[Pe,gt]=mt.useState("name"),[yt,Ke]=mt.useState("asc"),[he,q]=mt.useState(""),[ue,se]=mt.useState(Na[0]),[fe,pe]=mt.useState(qh[0]),[Je,rt]=mt.useState(as[0].name),[at,lt]=mt.useState(!1),[Mt,Ut]=mt.useState(!1),Rt=typeof window<"u"&&/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent);mt.useEffect(()=>{T(!0);const ve=i3(e),on=$T(ve),Lt=Cv(on,bt=>{const rr=bt.docs.map(ln=>({id:ln.id,...ln.data()}));h(rr),T(!1)},bt=>{console.error("Error fetching inventory:",bt),T(!1),_t("Error loading data from Firestore.",!0)}),At=t2(e,"deleted_inventory"),Gt=Cv(At,bt=>{const rr=bt.docs.map(ln=>({id:ln.id,...ln.data()}));v(rr)});return()=>{Lt(),Gt()}},[e]),mt.useEffect(()=>{ie&&!c.find(ve=>ve.id===ie.id)&&me(null)},[c,ie]),mt.useEffect(()=>{if(P){const ve=c.find(on=>on.id===P.id);ve?JSON.stringify(ve)!==JSON.stringify(P)&&te(ve):te(null)}},[c,P]);const _t=mt.useCallback((ve,on=!1)=>{J(ve),dt(on),setTimeout(()=>J(""),3e3)},[]),Hn=mt.useCallback(ve=>{if(!ve)return;const on=ve.trim().toLowerCase(),Lt=c.find(At=>{var Gt,bt;return((Gt=At.code)==null?void 0:Gt.toLowerCase())===on||((bt=At.lotNumber)==null?void 0:bt.toLowerCase())===on});Lt?(te(Lt),q(""),_t(`Item found: ${Lt.name} (Lot: ${Lt.lotNumber||"N/A"})`,!1),Ut(!1)):(_t("No item found.",!0),q(ve),Ut(!0))},[c,_t,Ut]),cn=ve=>{lt(!1),Hn(ve)},ut=mt.useCallback(async(ve,on,Lt)=>{const At=dd(e,ve.id),Gt=ve.quantity-on;if(Gt<0)throw new Error("Stock cannot go below zero.");try{const bt={uid:n.uid,name:n.displayName||n.email,isAnonymous:n.isAnonymous};await t0(e,ve.id,n,"CONSUME",{consumedQuantity:Lt.consumedQuantity,reason:Lt.reason,newQuantity:Gt,itemName:ve.name,itemLot:ve.lotNumber}),await m2(At,{quantity:Gt,updatedAt:bn.now(),updatedBy:bt}),_t(`Consumed ${on} of ${ve.name}.`,!1)}catch(bt){throw console.error("Error during consumption transaction:",bt),bt}},[e,n,_t]),zt=mt.useMemo(()=>{let ve=0,on=0,Lt=0;const At=10080*60*1e3,Gt=new Date;return c.forEach(bt=>{ve+=bt.quantity;const rr=bt.minStock??vo,ln=bt.expiryDate&&bt.expiryDate.toDate()<Gt,jn=bt.expiryDate&&bt.expiryDate.toDate()<new Date(Gt.getTime()+At)&&!ln;bt.quantity<=rr&&on++,(ln||jn)&&Lt++}),{totalItems:c.length,totalQuantity:ve,lowStockCount:on,expiringItemsCount:Lt}},[c]),pt=mt.useMemo(()=>{let ve=c;if(ye){const Lt=ye.toLowerCase();ve=ve.filter(At=>{var Gt,bt,rr;return At.name.toLowerCase().includes(Lt)||((Gt=At.code)==null?void 0:Gt.toLowerCase().includes(Lt))||((bt=At.lotNumber)==null?void 0:bt.toLowerCase().includes(Lt))||((rr=At.section)==null?void 0:rr.toLowerCase().includes(Lt))})}return ue!==Na[0]&&(ve=ve.filter(Lt=>Lt.temperature===ue)),Je!==as[0].name&&(ve=ve.filter(Lt=>Lt.section===Je)),fe!==qh[0]&&(ve=ve.filter(Lt=>{const At=Lt.minStock??vo,Gt=Lt.expiryDate&&Lt.expiryDate.toDate()<new Date,bt=Lt.expiryDate&&Lt.expiryDate.toDate()<new Date(Date.now()+10080*60*1e3)&&!Gt,rr=Lt.quantity<=At;return fe==="Low Stock"?rr:fe==="Expiring/Expired"?Gt||bt:!0})),[...ve].sort((Lt,At)=>{let Gt,bt;switch(Pe){case"name":Gt=Lt.name.toLowerCase(),bt=At.name.toLowerCase();break;case"expiryDate":Gt=Lt.expiryDate?Lt.expiryDate.toDate().getTime():1/0,bt=At.expiryDate?At.expiryDate.toDate().getTime():1/0;break;case"quantity":Gt=Lt.quantity,bt=At.quantity;break;case"lotNumber":Gt=Lt.lotNumber?Lt.lotNumber.toLowerCase():"",bt=At.lotNumber?At.lotNumber.toLowerCase():"";break;default:Gt=Lt.name.toLowerCase(),bt=At.name.toLowerCase()}return Gt<bt?yt==="asc"?-1:1:Gt>bt?yt==="asc"?1:-1:0})},[c,ye,ue,fe,Je,Pe,yt]),Sn=()=>{if(pt.length===0){_t("No items to export based on current filters.",!0);return}try{const ve=[{key:"id",header:"ID"},{key:"name",header:"Name"},{key:"quantity",header:"Quantity"},{key:"minStock",header:"Min Stock"},{key:"code",header:"Code"},{key:"lotNumber",header:"Lot Number"},{key:"packagingType",header:"Packaging Type"},{key:"temperature",header:"Temperature"},{key:"section",header:"Section"},{key:"expiryDate",header:"Expiry Date"},{key:"createdBy",header:"Created By"},{key:"updatedBy",header:"Last Modified By"},{key:"createdAt",header:"Created At"},{key:"updatedAt",header:"Updated At"}],on=pt.map(bt=>{const rr={};return ve.forEach(ln=>{let jn=bt[ln.key]||"";["expiryDate","createdAt","updatedAt"].includes(ln.key)&&(jn=Wf(jn)),["createdBy","updatedBy"].includes(ln.key)&&(jn=j1(jn)),rr[ln.header]=jn}),rr}),Lt=km.json_to_sheet(on),At=km.book_new();km.book_append_sheet(At,Lt,"Inventory");let Gt="lab_inventory";Je!==as[0].name&&(Gt+=`_${Je.replace(/\s/g,"")}`),Gt+=`_${new Date().toISOString().slice(0,10)}.xlsx`,dP(At,Gt),_t(`Exported ${pt.length} item(s) to Excel!`,!1)}catch(ve){console.error("Export failed:",ve),_t("Export failed. Check console for details.",!0)}};return _?z.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:z.jsx("div",{className:"text-indigo-600 font-semibold text-lg animate-pulse",children:"Loading Inventory Data..."})}):z.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 font-sans",children:z.jsxs("div",{className:"max-w-7xl mx-auto",children:[z.jsxs("header",{className:"py-4 mb-6 border-b border-indigo-200 flex justify-between items-center",children:[z.jsxs("div",{children:[z.jsx("h1",{className:"text-3xl font-extrabold text-indigo-800",children:"Lab Inventory Dashboard"}),z.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Welcome, ",z.jsx("span",{className:"font-semibold text-indigo-700",children:n.displayName||n.email||(n.isAnonymous?`Guest (${n.uid.substring(0,6)})`:"User")}),"!"]})]}),z.jsx("button",{onClick:t,className:"py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Sign Out"})]}),K&&z.jsx("div",{className:`fixed top-5 left-1/2 -translate-x-1/2 z-50 p-3 rounded-lg shadow-lg text-center text-sm font-medium ${Y?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:K}),z.jsxs("div",{className:"mb-6 flex space-x-4",children:[z.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold border-b-2 ${C?"border-transparent text-gray-500 bg-gray-100":"border-indigo-600 text-indigo-700 bg-white"}`,onClick:()=>b(!1),children:"Active Items"}),z.jsx("button",{className:`px-4 py-2 rounded-t-lg font-semibold border-b-2 ${C?"border-red-600 text-red-700 bg-white":"border-transparent text-gray-500 bg-gray-100"}`,onClick:()=>b(!0),children:"Deleted Items"})]}),C?z.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl",children:[z.jsx("h2",{className:"text-2xl font-bold text-red-700 mb-4 border-b pb-2",children:"Deleted Items"}),x.length===0?z.jsx("p",{className:"text-gray-500 p-8 text-center bg-white rounded-xl shadow-inner",children:"No deleted items."}):z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:x.map(ve=>z.jsxs("div",{className:"relative bg-gray-50 p-4 shadow-lg rounded-xl flex flex-col space-y-2 border-2 border-red-200",children:[z.jsx("h4",{className:"text-lg font-bold text-gray-800",children:ve.name}),z.jsxs("p",{className:"text-sm text-gray-600",children:["Lot #: ",ve.lotNumber||"N/A"]}),z.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",ve.quantity]}),z.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[z.jsx("button",{className:"py-1 px-3 bg-green-600 text-white rounded-md shadow-sm text-sm font-medium hover:bg-green-700",onClick:()=>r(ve),title:"Restore Item",children:"Restore"}),z.jsx("button",{className:"py-1 px-3 bg-red-600 text-white rounded-md shadow-sm text-sm font-medium hover:bg-red-700",onClick:()=>De(ve),title:"Delete Permanently",children:"Delete Permanently"})]})]},ve.id))}),Ue&&z.jsx(Cw,{db:e,user:n,item:Ue,onClose:()=>De(null),onMessage:_t,isPermanentDelete:!0,onConfirmDelete:async ve=>{await a(ve),De(null)}})]}):z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[z.jsxs("div",{className:"lg:col-span-1 bg-white shadow-xl rounded-xl p-4 lg:p-0 lg:bg-transparent lg:shadow-none",children:[z.jsxs("div",{className:"flex justify-between items-center lg:hidden",children:[z.jsx("h2",{className:"text-2xl font-bold text-indigo-700",children:"Add New Item"}),z.jsx("button",{onClick:()=>Ut(!Mt),className:"p-2 rounded-md hover:bg-gray-100","aria-expanded":Mt,children:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-6 w-6 transition-transform duration-300 ${Mt?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),z.jsx("div",{className:`${Mt?"block":"hidden"} lg:block mt-4 lg:mt-0`,children:z.jsx(nF,{db:e,user:n,onClear:_t,inventory:c,deletedInventory:x,onDuplicate:(ve,on)=>H({item:ve,isLot:on})})})]}),z.jsxs("div",{className:"lg:col-span-2",children:[z.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[z.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2 sm:mb-0 border-b pb-2 sm:border-b-0 sm:pb-0",children:"Inventory Overview"}),z.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[z.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sort by:"}),z.jsxs("select",{value:Pe,onChange:ve=>gt(ve.target.value),className:"border rounded p-1 text-sm",children:[z.jsx("option",{value:"name",children:"Name"}),z.jsx("option",{value:"expiryDate",children:"Expiry Date"}),z.jsx("option",{value:"quantity",children:"Quantity"}),z.jsx("option",{value:"lotNumber",children:"Lot Number"})]}),z.jsx("button",{type:"button",className:"ml-1 px-2 py-1 border rounded text-xs font-semibold bg-gray-100 hover:bg-gray-200",onClick:()=>Ke(ve=>ve==="asc"?"desc":"asc"),title:"Toggle sort order",children:yt==="asc"?"":""}),z.jsxs("div",{className:"ml-4 flex items-center space-x-2",children:[z.jsx("label",{htmlFor:"barcode-input",className:"text-sm font-medium text-gray-700",children:"Barcode:"}),z.jsxs("div",{className:"relative",children:[z.jsx("input",{id:"barcode-input",type:"text",value:he,onChange:ve=>q(ve.target.value),onKeyDown:ve=>{ve.key==="Enter"&&Hn(he)},className:"border rounded p-1 text-sm pl-2 pr-8",placeholder:"Scan or enter barcode...",style:{minWidth:180}}),Rt&&z.jsx("button",{type:"button",onClick:()=>lt(!0),className:"absolute inset-y-0 right-0 flex items-center pr-2 text-gray-500 hover:text-indigo-600",title:"Open barcode scanner",children:z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[z.jsx("path",{fillRule:"evenodd",d:"M3 5a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5zm2 0h10v10H5V5z",clipRule:"evenodd"}),z.jsx("path",{d:"M6 7h2v6H6V7zm4 0h2v6h-2V7zm4 0h2v6h-2V7z"})]})})]})]})]})]}),z.jsx(rF,{metrics:zt}),z.jsxs("div",{className:"bg-white p-4 shadow-md rounded-xl mb-6 grid grid-cols-1 sm:grid-cols-4 gap-4",children:[z.jsxs("label",{className:"block sm:col-span-4",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Search (Name, Code, Lot, Section)"}),z.jsx("input",{type:"text",value:ye,onChange:ve=>Se(ve.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border focus:border-indigo-500 focus:ring-indigo-500",placeholder:"e.g., Antibody, Hematology, L1002A"})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Lab Section"}),z.jsx("select",{value:Je,onChange:ve=>rt(ve.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:as.map(ve=>z.jsx("option",{value:ve.name,children:ve.name},ve.name))})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Temperature"}),z.jsx("select",{value:ue,onChange:ve=>se(ve.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:Na.map(ve=>z.jsx("option",{value:ve,children:ve},ve))})]}),z.jsxs("label",{className:"block",children:[z.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status Alert"}),z.jsx("select",{value:fe,onChange:ve=>pe(ve.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border bg-white",children:qh.map(ve=>z.jsx("option",{value:ve,children:ve},ve))})]}),z.jsxs("div",{className:"flex items-end space-x-2 sm:col-span-1",children:[z.jsx("button",{onClick:Sn,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",title:"Export current filtered data to CSV",children:"Export"}),z.jsx("button",{onClick:()=>{Se(""),rt(as[0].name),se(Na[0]),pe(qh[0])},className:"w-full py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-50 hover:bg-gray-100",children:"Clear"})]})]}),z.jsxs("p",{className:"text-sm text-gray-600 mb-4 font-semibold",children:["Showing ",pt.length," of ",c.length," total items."]}),pt.length===0?z.jsx("p",{className:"text-gray-500 p-8 text-center bg-white rounded-xl shadow-inner",children:c.length>0?"No items match the current filter criteria.":"Your inventory is empty. Add an item to get started!"}):z.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:pt.map(ve=>z.jsx(G4,{item:ve,db:e,user:n,onEdit:U,onMessage:_t,onConsumeClick:V,onLogView:ce,onDelete:me},ve.id))})]})]}),at&&z.jsx(z4,{onScan:cn,onClose:()=>lt(!1)}),O&&z.jsx(iF,{db:e,item:O,user:n,onClose:()=>U(null),onMessage:_t}),M&&z.jsx(sF,{item:M,onClose:()=>V(null),onMessage:_t,handleConsume:ut}),le&&z.jsx(aF,{db:e,item:le,onClose:()=>ce(null),onMessage:_t}),ie&&z.jsx(Cw,{db:e,item:ie,user:n,onClose:()=>me(null),onMessage:_t}),k&&z.jsx(oF,{item:k.item,isLot:k.isLot,onClose:()=>H(null),onEdit:U}),P&&z.jsx(lF,{item:P,onClose:()=>te(null),db:e,user:n,onEdit:U,onMessage:_t,onConsumeClick:V,onLogView:ce,onDelete:me})]})]})})},uF="modulepreload",fF=function(n){return"/"+n},Iw={},hF=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let h=function(_){return Promise.all(_.map(T=>Promise.resolve(T).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),v=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));a=h(t.map(_=>{if(_=fF(_),_ in Iw)return;Iw[_]=!0;const T=_.endsWith(".css"),C=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${C}`))return;const b=document.createElement("link");if(b.rel=T?"stylesheet":uF,T||(b.as="script"),b.crossOrigin="",b.href=_,v&&b.setAttribute("nonce",v),document.head.appendChild(b),T)return new Promise((O,U)=>{b.addEventListener("load",O),b.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${_}`)))})}))}function c(h){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=h,window.dispatchEvent(x),!x.defaultPrevented)throw h}return a.then(h=>{for(const x of h||[])x.status==="rejected"&&c(x.reason);return e().catch(c)})};function dF(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:a,onRegisteredSW:c,onRegisterError:h}=n;let x,v;const _=async(C=!0)=>{await v};async function T(){if("serviceWorker"in navigator){if(x=await hF(async()=>{const{Workbox:C}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:C}},[]).then(({Workbox:C})=>new C("/sw.js",{scope:"/",type:"classic"})).catch(C=>{h==null||h(C)}),!x)return;x.addEventListener("activated",C=>{(C.isUpdate||C.isExternal)&&window.location.reload()}),x.addEventListener("installed",C=>{C.isUpdate||r==null||r()}),x.register({immediate:e}).then(C=>{c?c("/sw.js",C):a==null||a(C)}).catch(C=>{h==null||h(C)})}}return v=T(),_}function gF(){const[n,e]=mt.useState(null),[t,r]=mt.useState(!0);mt.useEffect(()=>{const c=o8(Bh,h=>{e(h),r(!1)});return dF({immediate:!0}),()=>c()},[]);const a=async()=>{try{await l8(Bh),e(null)}catch(c){console.error("Sign out error:",c)}};return t?z.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:z.jsx("div",{className:"text-indigo-600 font-semibold text-lg animate-pulse",children:"Loading Application..."})}):z.jsx(z.Fragment,{children:n?z.jsx(cF,{user:n,auth:Bh,db:kO,onSignOut:a}):z.jsx(PO,{auth:Bh,onLoginSuccess:e})})}const W4=document.getElementById("root");if(!W4)throw new Error("Could not find root element to mount to");const mF=EC.createRoot(W4);mF.render(z.jsx(bw.StrictMode,{children:z.jsx(gF,{})}));
